{"components":{"schemas":{"AccessGrantResponse":{"properties":{"access_id":{"title":"Access Id","type":"string"},"invited_by_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invited By Code"},"phase":{"title":"Phase","type":"string"},"role":{"title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["access_id","user_id","role","phase"],"title":"AccessGrantResponse","type":"object"},"AccountStatusChangeResponse":{"description":"Response for account status change operations.","properties":{"message":{"title":"Message","type":"string"},"new_status":{"title":"New Status","type":"string"},"previous_status":{"title":"Previous Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","message","previous_status","new_status"],"title":"AccountStatusChangeResponse","type":"object"},"AccountStatusResponse":{"description":"Response for account status check endpoint.","properties":{"account_status":{"title":"Account Status","type":"string"},"can_deactivate":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Deactivate"},"can_login":{"title":"Can Login","type":"boolean"},"can_reactivate":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Reactivate"},"can_receive_bookings":{"title":"Can Receive Bookings","type":"boolean"},"can_suspend":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Suspend"},"future_bookings_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Future Bookings Count"},"has_future_bookings":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Future Bookings"},"is_active":{"title":"Is Active","type":"boolean"},"is_deactivated":{"title":"Is Deactivated","type":"boolean"},"is_suspended":{"title":"Is Suspended","type":"boolean"},"role":{"title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","role","account_status","can_login","can_receive_bookings","is_active","is_suspended","is_deactivated"],"title":"AccountStatusResponse","type":"object"},"AddressCreate":{"properties":{"administrative_area":{"title":"Administrative Area","type":"string"},"country_code":{"default":"US","title":"Country Code","type":"string"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"is_default":{"default":false,"title":"Is Default","type":"boolean"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"home|work|other","title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"title":"Locality","type":"string"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"title":"Postal Code","type":"string"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"title":"Street Line1","type":"string"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unverified","title":"Verification Status"}},"required":["street_line1","locality","administrative_area","postal_code"],"title":"AddressCreate","type":"object"},"AddressListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AddressResponse"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"AddressListResponse","type":"object"},"AddressResponse":{"properties":{"administrative_area":{"title":"Administrative Area","type":"string"},"country_code":{"default":"US","title":"Country Code","type":"string"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"district":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"District"},"id":{"title":"Id","type":"string"},"is_active":{"title":"Is Active","type":"boolean"},"is_default":{"default":false,"title":"Is Default","type":"boolean"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"home|work|other","title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"title":"Locality","type":"string"},"location_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Location Metadata"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"neighborhood":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Neighborhood"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"title":"Postal Code","type":"string"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"title":"Street Line1","type":"string"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"subneighborhood":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subneighborhood"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unverified","title":"Verification Status"}},"required":["street_line1","locality","administrative_area","postal_code","id","is_active"],"title":"AddressResponse","type":"object"},"AddressUpdate":{"properties":{"administrative_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Administrative Area"},"country_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Code"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"is_default":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Default"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locality"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line1"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verification Status"}},"title":"AddressUpdate","type":"object"},"AlertAcknowledgeResponse":{"description":"Alert acknowledgement response.","example":{"alert_type":"high_memory_usage","status":"acknowledged"},"properties":{"alert_type":{"description":"Alert type that was acknowledged","title":"Alert Type","type":"string"},"status":{"description":"Acknowledgement status","title":"Status","type":"string"}},"required":["status","alert_type"],"title":"AlertAcknowledgeResponse","type":"object"},"AlertDetail":{"description":"Individual alert details.","properties":{"created_at":{"description":"When the alert was created (ISO format)","title":"Created At","type":"string"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Additional alert details","title":"Details"},"email_sent":{"description":"Whether email notification was sent","title":"Email Sent","type":"boolean"},"github_issue":{"description":"Whether GitHub issue was created","title":"Github Issue","type":"boolean"},"id":{"description":"Alert ID","title":"Id","type":"string"},"message":{"description":"Alert message","title":"Message","type":"string"},"severity":{"description":"Alert severity level","title":"Severity","type":"string"},"title":{"description":"Alert title","title":"Title","type":"string"},"type":{"description":"Type of alert","title":"Type","type":"string"}},"required":["id","type","severity","title","message","created_at","email_sent","github_issue"],"title":"AlertDetail","type":"object"},"AlertInfo":{"description":"Alert information.","example":{"message":"Memory usage is above 80%","severity":"warning","timestamp":"2025-01-20T10:30:00Z","type":"high_memory_usage"},"properties":{"message":{"description":"Alert message","title":"Message","type":"string"},"severity":{"description":"Alert severity (info/warning/critical)","title":"Severity","type":"string"},"timestamp":{"description":"Alert timestamp","format":"date-time","title":"Timestamp","type":"string"},"type":{"description":"Alert type","title":"Type","type":"string"}},"required":["type","severity","message","timestamp"],"title":"AlertInfo","type":"object"},"AlertSummaryResponse":{"description":"Response for alert summary endpoint.","properties":{"by_day":{"description":"Daily alert counts","items":{"$ref":"#/components/schemas/DailyAlertCount"},"title":"By Day","type":"array"},"by_severity":{"additionalProperties":{"type":"integer"},"description":"Alert counts grouped by severity","title":"By Severity","type":"object"},"by_type":{"additionalProperties":{"type":"integer"},"description":"Alert counts grouped by type","title":"By Type","type":"object"},"days":{"description":"Number of days included in summary","title":"Days","type":"integer"},"total":{"description":"Total number of alerts in the period","title":"Total","type":"integer"}},"required":["days","by_type","by_severity","by_day","total"],"title":"AlertSummaryResponse","type":"object"},"AppendHistoryResponse":{"properties":{"count":{"minimum":0.0,"title":"Count","type":"integer"},"status":{"title":"Status","type":"string"}},"required":["status","count"],"title":"AppendHistoryResponse","type":"object"},"ApplyToDateRangeRequest":{"description":"Schema for applying a week pattern to a date range.","properties":{"end_date":{"format":"date","title":"End Date","type":"string"},"from_week_start":{"format":"date","title":"From Week Start","type":"string"},"start_date":{"format":"date","title":"Start Date","type":"string"}},"required":["from_week_start","start_date","end_date"],"title":"ApplyToDateRangeRequest","type":"object"},"ApplyToDateRangeResponse":{"description":"Response for applying availability to date range.","properties":{"end_date":{"format":"date","title":"End Date","type":"string"},"message":{"title":"Message","type":"string"},"start_date":{"format":"date","title":"Start Date","type":"string"},"weeks_applied":{"title":"Weeks Applied","type":"integer"},"windows_created":{"title":"Windows Created","type":"integer"}},"required":["message","start_date","end_date","weeks_applied","windows_created"],"title":"ApplyToDateRangeResponse","type":"object"},"AutocompleteResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/PlaceSuggestion"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"AutocompleteResponse","type":"object"},"AvailabilityCacheMetricsResponse":{"description":"Availability-specific cache metrics response.","example":{"availability_cache_metrics":{"cache_efficiency":"excellent","hit_rate":"87.5%","hits":1750,"invalidations":50,"misses":250,"total_requests":2000},"cache_tiers_info":{"cold":"24 hours (historical data)","hot":"5 minutes (current/future availability)","warm":"1 hour (past availability)"},"recommendations":["Availability caching performance is optimal"],"top_cached_keys_sample":["avail:instructor:123:2025-01-20","availability:window:456"]},"properties":{"availability_cache_metrics":{"additionalProperties":true,"description":"Availability cache metrics","title":"Availability Cache Metrics","type":"object"},"cache_tiers_info":{"additionalProperties":{"type":"string"},"description":"Cache tier configuration","title":"Cache Tiers Info","type":"object"},"recommendations":{"description":"Performance recommendations","items":{"type":"string"},"title":"Recommendations","type":"array"},"top_cached_keys_sample":{"description":"Sample of top cached keys","items":{"type":"string"},"title":"Top Cached Keys Sample","type":"array"}},"required":["availability_cache_metrics","top_cached_keys_sample","recommendations","cache_tiers_info"],"title":"AvailabilityCacheMetricsResponse","type":"object"},"AvailabilityCheckRequest":{"description":"Check if a specific time is available for booking.\n\nClean Architecture: Uses instructor, date, and time directly.\nNo slot references needed.","properties":{"booking_date":{"description":"Date to check","format":"date","title":"Booking Date","type":"string"},"end_time":{"description":"End time to check","format":"time","title":"End Time","type":"string"},"instructor_id":{"description":"Instructor to check","title":"Instructor Id","type":"string"},"instructor_service_id":{"description":"Service to book","title":"Instructor Service Id","type":"string"},"start_time":{"description":"Start time to check","format":"time","title":"Start Time","type":"string"}},"required":["instructor_id","instructor_service_id","booking_date","start_time","end_time"],"title":"AvailabilityCheckRequest","type":"object"},"AvailabilityCheckResponse":{"description":"Response for availability check.","properties":{"available":{"title":"Available","type":"boolean"},"conflicts_with":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Conflicts With"},"min_advance_hours":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Advance Hours"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["available"],"title":"AvailabilityCheckResponse","type":"object"},"AvailabilityWindowResponse":{"description":"Response schema for availability windows.\nClean Architecture: Only meaningful fields for single-table design.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"specific_date":{"format":"date","title":"Specific Date","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["id","instructor_id","specific_date","start_time","end_time"],"title":"AvailabilityWindowResponse","type":"object"},"AvailabilityWindowUpdate":{"additionalProperties":false,"description":"Schema for updating an availability window.","properties":{"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"title":"AvailabilityWindowUpdate","type":"object"},"BackupCodesResponse":{"properties":{"backup_codes":{"items":{"type":"string"},"title":"Backup Codes","type":"array"}},"required":["backup_codes"],"title":"BackupCodesResponse","type":"object"},"BetaMetricsSummaryResponse":{"properties":{"invites_errors_24h":{"title":"Invites Errors 24H","type":"integer"},"invites_sent_24h":{"title":"Invites Sent 24H","type":"integer"},"phase_counts_24h":{"additionalProperties":{"type":"integer"},"title":"Phase Counts 24H","type":"object"}},"required":["invites_sent_24h","invites_errors_24h","phase_counts_24h"],"title":"BetaMetricsSummaryResponse","type":"object"},"BetaSettingsPayload":{"properties":{"allow_signup_without_invite":{"title":"Allow Signup Without Invite","type":"boolean"},"beta_disabled":{"title":"Beta Disabled","type":"boolean"},"beta_phase":{"title":"Beta Phase","type":"string"}},"required":["beta_disabled","beta_phase","allow_signup_without_invite"],"title":"BetaSettingsPayload","type":"object"},"BlackoutDateCreate":{"description":"Schema for creating a blackout date.","properties":{"date":{"format":"date","title":"Date","type":"string"},"reason":{"anyOf":[{"maxLength":255,"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["date"],"title":"BlackoutDateCreate","type":"object"},"BlackoutDateResponse":{"description":"Response schema for blackout dates.","properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"date":{"format":"date","title":"Date","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["id","instructor_id","date","created_at"],"title":"BlackoutDateResponse","type":"object"},"Body_login_auth_login_post":{"properties":{"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"},"grant_type":{"anyOf":[{"pattern":"password","type":"string"},{"type":"null"}],"title":"Grant Type"},"password":{"title":"Password","type":"string"},"scope":{"default":"","title":"Scope","type":"string"},"username":{"title":"Username","type":"string"}},"required":["username","password"],"title":"Body_login_auth_login_post","type":"object"},"BookedSlotsResponse":{"description":"Response for getting booked slots in a week.","properties":{"booked_slots":{"description":"List of booked slots with booking details","items":{"additionalProperties":true,"type":"object"},"title":"Booked Slots","type":"array"},"week_end":{"format":"date","title":"Week End","type":"string"},"week_start":{"format":"date","title":"Week Start","type":"string"}},"required":["week_start","week_end","booked_slots"],"title":"BookedSlotsResponse","type":"object"},"BookingCancel":{"description":"Schema for cancelling a booking.","properties":{"reason":{"description":"Cancellation reason","maxLength":500,"minLength":1,"title":"Reason","type":"string"}},"required":["reason"],"title":"BookingCancel","type":"object"},"BookingConfirmPayment":{"description":"Confirm payment method for a booking after SetupIntent completion.\n\nUsed in the two-step booking flow:\n1. Create booking (returns SetupIntent client_secret)\n2. Confirm payment (this schema) after card details collected","properties":{"payment_method_id":{"description":"Stripe payment method ID from completed SetupIntent","title":"Payment Method Id","type":"string"},"save_payment_method":{"default":false,"description":"Whether to save this payment method for future use","title":"Save Payment Method","type":"boolean"}},"required":["payment_method_id"],"title":"BookingConfirmPayment","type":"object"},"BookingCreate":{"additionalProperties":false,"description":"Create a booking with self-contained time information.\n\nClean Architecture: No slot references - bookings are independent.\nThe booking contains all necessary information about when and where\nthe lesson will occur.","properties":{"booking_date":{"description":"Date of the booking","format":"date","title":"Booking Date","type":"string"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"description":"Calculated end time (set automatically)","title":"End Time"},"instructor_id":{"description":"Instructor to book","title":"Instructor Id","type":"string"},"instructor_service_id":{"description":"Instructor service being booked","title":"Instructor Service Id","type":"string"},"location_type":{"anyOf":[{"enum":["student_home","instructor_location","neutral"],"type":"string"},{"type":"null"}],"default":"neutral","description":"Type of meeting location","title":"Location Type"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Specific meeting location if applicable","title":"Meeting Location"},"selected_duration":{"description":"Selected duration in minutes from service's duration_options","title":"Selected Duration","type":"integer"},"start_time":{"description":"Start time","format":"time","title":"Start Time","type":"string"},"student_note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"description":"Optional note from student","title":"Student Note"}},"required":["instructor_id","instructor_service_id","booking_date","start_time","selected_duration"],"title":"BookingCreate","type":"object"},"BookingCreateResponse":{"description":"Response after creating a booking with payment setup.\n\nIncludes SetupIntent client_secret for collecting payment method.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"cancelled_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Cancelled At"},"cancelled_by_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancelled By Id"},"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"format":"time","title":"End Time","type":"string"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/app__schemas__booking__InstructorInfo"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Note"},"instructor_service":{"$ref":"#/components/schemas/ServiceInfo"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"location_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Type"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"requires_payment_method":{"default":true,"description":"Whether payment method is required before confirmation","title":"Requires Payment Method","type":"boolean"},"rescheduled_from":{"anyOf":[{"$ref":"#/components/schemas/RescheduledFromInfo"},{"type":"null"}]},"rescheduled_from_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled From Booking Id"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"setup_intent_client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe SetupIntent client_secret for collecting payment method","title":"Setup Intent Client Secret"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"$ref":"#/components/schemas/BookingStatus"},"student":{"$ref":"#/components/schemas/StudentInfo"},"student_id":{"title":"Student Id","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"total_price":{"title":"Total Price","type":"number"}},"required":["id","student_id","instructor_id","instructor_service_id","booking_date","start_time","end_time","service_name","hourly_rate","total_price","duration_minutes","status","service_area","meeting_location","location_type","student_note","instructor_note","created_at","confirmed_at","completed_at","cancelled_at","cancelled_by_id","cancellation_reason","student","instructor","instructor_service"],"title":"BookingCreateResponse","type":"object"},"BookingPaymentMethodUpdate":{"description":"Request to update a booking's payment method, with optional default flag.","properties":{"payment_method_id":{"description":"Stripe payment method ID","title":"Payment Method Id","type":"string"},"set_as_default":{"default":false,"description":"Whether to save as default for the student","title":"Set As Default","type":"boolean"}},"required":["payment_method_id"],"title":"BookingPaymentMethodUpdate","type":"object"},"BookingPreviewResponse":{"description":"Response for booking preview with privacy protection.","properties":{"booking_date":{"title":"Booking Date","type":"string"},"booking_id":{"title":"Booking Id","type":"string"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"title":"End Time","type":"string"},"instructor_first_name":{"title":"Instructor First Name","type":"string"},"instructor_last_name":{"title":"Instructor Last Name","type":"string"},"location_type":{"title":"Location Type","type":"string"},"location_type_display":{"title":"Location Type Display","type":"string"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"title":"Start Time","type":"string"},"status":{"title":"Status","type":"string"},"student_first_name":{"title":"Student First Name","type":"string"},"student_last_name":{"title":"Student Last Name","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"total_price":{"title":"Total Price","type":"number"}},"required":["booking_id","student_first_name","student_last_name","instructor_first_name","instructor_last_name","service_name","booking_date","start_time","end_time","duration_minutes","location_type","location_type_display","meeting_location","service_area","status","student_note","total_price"],"title":"BookingPreviewResponse","type":"object"},"BookingRescheduleRequest":{"description":"Request to reschedule an existing booking by specifying a new date/time and duration.\n\nFrontend will subsequently create a new booking; this endpoint prepares the system by\ncancelling the old booking according to policy and recording audit events.","properties":{"booking_date":{"description":"New date for the lesson","format":"date","title":"Booking Date","type":"string"},"instructor_service_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Override service if needed (defaults to old)","title":"Instructor Service Id"},"selected_duration":{"description":"New selected duration in minutes","title":"Selected Duration","type":"integer"},"start_time":{"description":"New start time (HH:MM)","format":"time","title":"Start Time","type":"string"}},"required":["booking_date","start_time","selected_duration"],"title":"BookingRescheduleRequest","type":"object"},"BookingResponse":{"description":"Complete booking response with privacy protection.\n\nShows instructor as \"FirstName L\" (last initial only).\nStudents see their own full information.\nClean Architecture: No availability slot references.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"cancelled_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Cancelled At"},"cancelled_by_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancelled By Id"},"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"format":"time","title":"End Time","type":"string"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/app__schemas__booking__InstructorInfo"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Note"},"instructor_service":{"$ref":"#/components/schemas/ServiceInfo"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"location_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Type"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"rescheduled_from":{"anyOf":[{"$ref":"#/components/schemas/RescheduledFromInfo"},{"type":"null"}]},"rescheduled_from_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled From Booking Id"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"$ref":"#/components/schemas/BookingStatus"},"student":{"$ref":"#/components/schemas/StudentInfo"},"student_id":{"title":"Student Id","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"total_price":{"title":"Total Price","type":"number"}},"required":["id","student_id","instructor_id","instructor_service_id","booking_date","start_time","end_time","service_name","hourly_rate","total_price","duration_minutes","status","service_area","meeting_location","location_type","student_note","instructor_note","created_at","confirmed_at","completed_at","cancelled_at","cancelled_by_id","cancellation_reason","student","instructor","instructor_service"],"title":"BookingResponse","type":"object"},"BookingStatsResponse":{"description":"Booking statistics for instructors.","properties":{"average_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Rating"},"cancelled_bookings":{"title":"Cancelled Bookings","type":"integer"},"completed_bookings":{"title":"Completed Bookings","type":"integer"},"this_month_earnings":{"title":"This Month Earnings","type":"number"},"total_bookings":{"title":"Total Bookings","type":"integer"},"total_earnings":{"title":"Total Earnings","type":"number"},"upcoming_bookings":{"title":"Upcoming Bookings","type":"integer"}},"required":["total_bookings","upcoming_bookings","completed_bookings","cancelled_bookings","total_earnings","this_month_earnings"],"title":"BookingStatsResponse","type":"object"},"BookingStatus":{"description":"Booking lifecycle statuses.","enum":["PENDING","CONFIRMED","COMPLETED","CANCELLED","NO_SHOW"],"title":"BookingStatus","type":"string"},"BookingUpdate":{"description":"Schema for updating booking details.\n\nLimited fields can be updated after booking creation.","properties":{"instructor_note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"title":"Instructor Note"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"}},"title":"BookingUpdate","type":"object"},"BulkUpdateRequest":{"description":"Request schema for bulk availability update.","properties":{"operations":{"items":{"$ref":"#/components/schemas/SlotOperation"},"title":"Operations","type":"array"},"validate_only":{"default":false,"description":"If true, only validate without making changes","title":"Validate Only","type":"boolean"}},"required":["operations"],"title":"BulkUpdateRequest","type":"object"},"BulkUpdateResponse":{"description":"Response schema for bulk availability update.","properties":{"failed":{"title":"Failed","type":"integer"},"results":{"items":{"$ref":"#/components/schemas/OperationResult"},"title":"Results","type":"array"},"skipped":{"title":"Skipped","type":"integer"},"successful":{"title":"Successful","type":"integer"}},"required":["successful","failed","skipped","results"],"title":"BulkUpdateResponse","type":"object"},"CacheHealthStatus":{"description":"Cache health and performance status.","example":{"errors":0,"hit_rate":"85.5%","recommendations":["Cache performance is optimal"],"status":"healthy","total_requests":10000},"properties":{"errors":{"description":"Cache error count","title":"Errors","type":"integer"},"hit_rate":{"description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"recommendations":{"description":"Performance recommendations","items":{"type":"string"},"title":"Recommendations","type":"array"},"status":{"description":"Health status (healthy/degraded/unhealthy)","title":"Status","type":"string"},"total_requests":{"description":"Total cache requests","title":"Total Requests","type":"integer"}},"required":["status","hit_rate","total_requests","errors","recommendations"],"title":"CacheHealthStatus","type":"object"},"CacheMetricsResponse":{"description":"Detailed cache metrics response.","example":{"availability_metrics":{"availability_hit_rate":"87.5%","availability_invalidations":50,"availability_total_requests":2000},"errors":0,"hit_rate":"85.0%","hits":8500,"misses":1500,"performance_insights":["Cache performance looks good"],"redis_info":{"keyspace_hits":50000,"used_memory_human":"12.5M"}},"properties":{"availability_metrics":{"additionalProperties":true,"description":"Availability-specific cache metrics","title":"Availability Metrics","type":"object"},"errors":{"description":"Cache errors","title":"Errors","type":"integer"},"hit_rate":{"description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"hits":{"description":"Cache hits","title":"Hits","type":"integer"},"misses":{"description":"Cache misses","title":"Misses","type":"integer"},"performance_insights":{"description":"Cache performance insights","items":{"type":"string"},"title":"Performance Insights","type":"array"},"redis_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Redis server information","title":"Redis Info"}},"required":["hits","misses","errors","hit_rate","availability_metrics","performance_insights"],"title":"CacheMetricsResponse","type":"object"},"CandidateCategoryTrend":{"properties":{"category":{"title":"Category","type":"string"},"count":{"title":"Count","type":"integer"},"date":{"title":"Date","type":"string"}},"required":["date","category","count"],"title":"CandidateCategoryTrend","type":"object"},"CandidateCategoryTrendsResponse":{"items":{"$ref":"#/components/schemas/CandidateCategoryTrend"},"title":"CandidateCategoryTrendsResponse","type":"array"},"CandidateScoreDistributionResponse":{"properties":{"gte_0_70_lt_0_80":{"title":"Gte 0 70 Lt 0 80","type":"integer"},"gte_0_80_lt_0_90":{"title":"Gte 0 80 Lt 0 90","type":"integer"},"gte_0_90":{"title":"Gte 0 90","type":"integer"},"lt_0_70":{"title":"Lt 0 70","type":"integer"}},"required":["gte_0_90","gte_0_80_lt_0_90","gte_0_70_lt_0_80","lt_0_70"],"title":"CandidateScoreDistributionResponse","type":"object"},"CandidateServiceQueriesResponse":{"items":{"$ref":"#/components/schemas/CandidateServiceQuery"},"title":"CandidateServiceQueriesResponse","type":"array"},"CandidateServiceQuery":{"properties":{"position":{"title":"Position","type":"integer"},"results_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Results Count"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score"},"search_query":{"title":"Search Query","type":"string"},"searched_at":{"title":"Searched At","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"required":["searched_at","search_query","results_count","position","score","source"],"title":"CandidateServiceQuery","type":"object"},"CandidateSummaryResponse":{"properties":{"avg_candidates_per_event":{"title":"Avg Candidates Per Event","type":"number"},"events_with_candidates":{"title":"Events With Candidates","type":"integer"},"source_breakdown":{"additionalProperties":{"type":"integer"},"title":"Source Breakdown","type":"object"},"total_candidates":{"title":"Total Candidates","type":"integer"},"zero_result_events_with_candidates":{"title":"Zero Result Events With Candidates","type":"integer"}},"required":["total_candidates","events_with_candidates","avg_candidates_per_event","zero_result_events_with_candidates","source_breakdown"],"title":"CandidateSummaryResponse","type":"object"},"CandidateTopService":{"properties":{"active_instructors":{"title":"Active Instructors","type":"integer"},"avg_position":{"title":"Avg Position","type":"number"},"avg_score":{"title":"Avg Score","type":"number"},"candidate_count":{"title":"Candidate Count","type":"integer"},"category_name":{"title":"Category Name","type":"string"},"opportunity_score":{"title":"Opportunity Score","type":"number"},"service_catalog_id":{"title":"Service Catalog Id","type":"string"},"service_name":{"title":"Service Name","type":"string"}},"required":["service_catalog_id","service_name","category_name","candidate_count","avg_score","avg_position","active_instructors","opportunity_score"],"title":"CandidateTopService","type":"object"},"CandidateTopServicesResponse":{"items":{"$ref":"#/components/schemas/CandidateTopService"},"title":"CandidateTopServicesResponse","type":"array"},"CatalogServiceMinimalResponse":{"description":"Minimal catalog service response for pills/lists.","properties":{"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"title":"Slug","type":"string"}},"required":["id","name","slug"],"title":"CatalogServiceMinimalResponse","type":"object"},"CatalogServiceResponse":{"description":"Catalog service response.","properties":{"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"category_id":{"title":"Category Id","type":"string"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"max_recommended_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Recommended Price"},"min_recommended_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Recommended Price"},"name":{"title":"Name","type":"string"},"search_terms":{"default":[],"items":{"type":"string"},"title":"Search Terms","type":"array"},"slug":{"title":"Slug","type":"string"},"typical_duration_options":{"default":[60],"items":{"type":"integer"},"title":"Typical Duration Options","type":"array"}},"required":["id","category_id","name","slug"],"title":"CatalogServiceResponse","type":"object"},"CategoryResponse":{"description":"Service category response.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"title":"Display Order","type":"integer"},"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"title":"Slug","type":"string"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"}},"required":["id","name","slug","display_order"],"title":"CategoryResponse","type":"object"},"CheckoutResponse":{"description":"Response for checkout/payment creation.","properties":{"amount":{"description":"Payment amount in cents","title":"Amount","type":"integer"},"application_fee":{"description":"Platform fee in cents","title":"Application Fee","type":"integer"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Client secret for frontend confirmation","title":"Client Secret"},"payment_intent_id":{"description":"Stripe payment intent ID","title":"Payment Intent Id","type":"string"},"requires_action":{"default":false,"description":"Whether payment requires additional action","title":"Requires Action","type":"boolean"},"status":{"description":"Payment status","title":"Status","type":"string"},"success":{"description":"Whether payment was successful","title":"Success","type":"boolean"}},"required":["success","payment_intent_id","status","amount","application_fee"],"title":"CheckoutResponse","type":"object"},"CodebaseCategoryStats":{"properties":{"files":{"minimum":0.0,"title":"Files","type":"integer"},"lines":{"minimum":0.0,"title":"Lines","type":"integer"}},"required":["files","lines"],"title":"CodebaseCategoryStats","type":"object"},"CodebaseFileInfo":{"properties":{"lines":{"minimum":0.0,"title":"Lines","type":"integer"},"lines_with_blanks":{"minimum":0.0,"title":"Lines With Blanks","type":"integer"},"path":{"title":"Path","type":"string"},"size_kb":{"minimum":0.0,"title":"Size Kb","type":"number"}},"required":["path","lines","lines_with_blanks","size_kb"],"title":"CodebaseFileInfo","type":"object"},"CodebaseHistoryEntry":{"properties":{"backend_lines":{"minimum":0.0,"title":"Backend Lines","type":"integer"},"categories":{"anyOf":[{"additionalProperties":{"additionalProperties":{"$ref":"#/components/schemas/CodebaseCategoryStats"},"type":"object"},"type":"object"},{"type":"null"}],"title":"Categories"},"frontend_lines":{"minimum":0.0,"title":"Frontend Lines","type":"integer"},"git_commits":{"minimum":0.0,"title":"Git Commits","type":"integer"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"},"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"}},"required":["timestamp","total_lines","total_files","backend_lines","frontend_lines","git_commits"],"title":"CodebaseHistoryEntry","type":"object"},"CodebaseHistoryResponse":{"properties":{"current":{"anyOf":[{"$ref":"#/components/schemas/CodebaseMetricsResponse"},{"type":"null"}]},"items":{"items":{"$ref":"#/components/schemas/CodebaseHistoryEntry"},"title":"Items","type":"array"}},"title":"CodebaseHistoryResponse","type":"object"},"CodebaseMetricsResponse":{"properties":{"backend":{"$ref":"#/components/schemas/CodebaseSection"},"frontend":{"$ref":"#/components/schemas/CodebaseSection"},"git":{"$ref":"#/components/schemas/GitStats"},"summary":{"$ref":"#/components/schemas/CodebaseMetricsSummary"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["timestamp","backend","frontend","git","summary"],"title":"CodebaseMetricsResponse","type":"object"},"CodebaseMetricsSummary":{"properties":{"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"}},"required":["total_lines","total_files"],"title":"CodebaseMetricsSummary","type":"object"},"CodebaseSection":{"properties":{"categories":{"additionalProperties":{"$ref":"#/components/schemas/CodebaseCategoryStats"},"title":"Categories","type":"object"},"largest_files":{"items":{"$ref":"#/components/schemas/CodebaseFileInfo"},"title":"Largest Files","type":"array"},"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"},"total_lines_with_blanks":{"minimum":0.0,"title":"Total Lines With Blanks","type":"integer"}},"required":["total_files","total_lines","total_lines_with_blanks"],"title":"CodebaseSection","type":"object"},"ConversionBehavior":{"description":"Conversion behavior metrics.","example":{"avg_days_to_conversion":2.3,"avg_searches_before_conversion":3.5,"most_common_first_search":"yoga classes"},"properties":{"avg_days_to_conversion":{"description":"Average days to conversion","title":"Avg Days To Conversion","type":"number"},"avg_searches_before_conversion":{"description":"Average searches before conversion","title":"Avg Searches Before Conversion","type":"number"},"most_common_first_search":{"description":"Most common first search query","title":"Most Common First Search","type":"string"}},"required":["avg_searches_before_conversion","avg_days_to_conversion","most_common_first_search"],"title":"ConversionBehavior","type":"object"},"ConversionMetricsResponse":{"description":"Guest-to-user conversion metrics response.","example":{"conversion_behavior":{"avg_days_to_conversion":0,"avg_searches_before_conversion":0,"most_common_first_search":""},"guest_engagement":{"avg_searches_per_session":2.5,"engaged_sessions":400,"engagement_rate":50.0},"guest_sessions":{"conversion_rate":6.25,"converted":50,"total":800},"period":{"days":31,"end":"2025-01-31","start":"2025-01-01"}},"properties":{"conversion_behavior":{"$ref":"#/components/schemas/ConversionBehavior","description":"Conversion behavior patterns"},"guest_engagement":{"$ref":"#/components/schemas/GuestEngagement","description":"Guest engagement metrics"},"guest_sessions":{"$ref":"#/components/schemas/GuestConversionMetrics","description":"Guest session conversion metrics"},"period":{"$ref":"#/components/schemas/DateRange","description":"Time period for metrics"}},"required":["period","guest_sessions","conversion_behavior","guest_engagement"],"title":"ConversionMetricsResponse","type":"object"},"CopyWeekRequest":{"description":"Schema for copying availability between weeks.","properties":{"from_week_start":{"format":"date","title":"From Week Start","type":"string"},"to_week_start":{"format":"date","title":"To Week Start","type":"string"}},"required":["from_week_start","to_week_start"],"title":"CopyWeekRequest","type":"object"},"CopyWeekResponse":{"description":"Response for copying week availability.","properties":{"message":{"title":"Message","type":"string"},"source_week_start":{"format":"date","title":"Source Week Start","type":"string"},"target_week_start":{"format":"date","title":"Target Week Start","type":"string"},"windows_copied":{"title":"Windows Copied","type":"integer"}},"required":["message","source_week_start","target_week_start","windows_copied"],"title":"CopyWeekResponse","type":"object"},"CoverageFeatureCollectionResponse":{"properties":{"features":{"items":{"additionalProperties":true,"type":"object"},"title":"Features","type":"array"},"type":{"title":"Type","type":"string"}},"required":["type","features"],"title":"CoverageFeatureCollectionResponse","type":"object"},"CreateCheckoutRequest":{"description":"Request to create a checkout/payment for a booking.","properties":{"booking_id":{"description":"Booking ID to process payment for","title":"Booking Id","type":"string"},"payment_method_id":{"description":"Stripe payment method ID to use","title":"Payment Method Id","type":"string"},"save_payment_method":{"default":false,"description":"Whether to save payment method for future use","title":"Save Payment Method","type":"boolean"}},"required":["booking_id","payment_method_id"],"title":"CreateCheckoutRequest","type":"object"},"CreateSignedUploadRequest":{"properties":{"content_type":{"description":"Browser-reported MIME type","title":"Content Type","type":"string"},"filename":{"description":"Original file name, used for extension validation","title":"Filename","type":"string"},"purpose":{"enum":["background_check","profile_picture"],"title":"Purpose","type":"string"},"size_bytes":{"description":"Max 10MB","maximum":10485760.0,"minimum":1.0,"title":"Size Bytes","type":"integer"}},"required":["filename","content_type","size_bytes","purpose"],"title":"CreateSignedUploadRequest","type":"object"},"CreditBalanceResponse":{"description":"Response for credit balance inquiry.","properties":{"available":{"description":"Available credit balance","title":"Available","type":"number"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Credit expiration date","title":"Expires At"},"pending":{"description":"Pending credits","title":"Pending","type":"number"}},"required":["available","pending"],"title":"CreditBalanceResponse","type":"object"},"DailyAlertCount":{"description":"Daily alert count for summary.","properties":{"count":{"description":"Number of alerts on this date","title":"Count","type":"integer"},"date":{"description":"Date in YYYY-MM-DD format","title":"Date","type":"string"}},"required":["date","count"],"title":"DailyAlertCount","type":"object"},"DailySearchTrend":{"description":"Daily search trend data.","example":{"date":"2025-01-20","total_searches":1234,"unique_guests":200,"unique_users":150},"properties":{"date":{"description":"Date in ISO format","title":"Date","type":"string"},"total_searches":{"description":"Total searches for the day","title":"Total Searches","type":"integer"},"unique_guests":{"description":"Unique guest sessions","title":"Unique Guests","type":"integer"},"unique_users":{"description":"Unique authenticated users","title":"Unique Users","type":"integer"}},"required":["date","total_searches","unique_users","unique_guests"],"title":"DailySearchTrend","type":"object"},"DashboardLinkResponse":{"description":"Response for Stripe Express dashboard link.","properties":{"dashboard_url":{"description":"URL to Stripe Express dashboard","title":"Dashboard Url","type":"string"},"expires_in_minutes":{"default":5,"description":"Minutes until link expires","title":"Expires In Minutes","type":"integer"}},"required":["dashboard_url"],"title":"DashboardLinkResponse","type":"object"},"DataExportResponse":{"description":"Response schema for data export requests.","properties":{"data":{"additionalProperties":true,"description":"The exported user data","title":"Data","type":"object"},"message":{"description":"Human-readable message","title":"Message","type":"string"},"status":{"description":"Status of the export request","title":"Status","type":"string"}},"required":["status","message","data"],"title":"DataExportResponse","type":"object"},"DatabaseHealthResponse":{"description":"Response for database health check endpoint.","properties":{"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if unhealthy","title":"Error"},"message":{"description":"Health check message","title":"Message","type":"string"},"pool_status":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Connection pool status","title":"Pool Status"},"status":{"description":"Health status (healthy/unhealthy)","title":"Status","type":"string"}},"required":["status","message"],"title":"DatabaseHealthResponse","type":"object"},"DatabasePoolStatusResponse":{"description":"Response for database pool status endpoint.","properties":{"configuration":{"additionalProperties":true,"title":"Configuration","type":"object"},"pool":{"additionalProperties":true,"title":"Pool","type":"object"},"recommendations":{"additionalProperties":true,"title":"Recommendations","type":"object"},"status":{"title":"Status","type":"string"}},"required":["status","pool","configuration","recommendations"],"title":"DatabasePoolStatusResponse","type":"object"},"DatabaseStatsResponse":{"description":"Response for database statistics endpoint.","properties":{"configuration":{"additionalProperties":true,"title":"Configuration","type":"object"},"health":{"additionalProperties":true,"title":"Health","type":"object"},"pool":{"additionalProperties":true,"title":"Pool","type":"object"},"status":{"title":"Status","type":"string"}},"required":["status","pool","configuration","health"],"title":"DatabaseStatsResponse","type":"object"},"DateRange":{"description":"Date range for analytics.","example":{"days":31,"end":"2025-01-31","start":"2025-01-01"},"properties":{"days":{"description":"Number of days in range","title":"Days","type":"integer"},"end":{"description":"End date in ISO format","title":"End","type":"string"},"start":{"description":"Start date in ISO format","title":"Start","type":"string"}},"required":["start","end","days"],"title":"DateRange","type":"object"},"DeleteBlackoutResponse":{"description":"Response for deleting a blackout date.","properties":{"blackout_id":{"title":"Blackout Id","type":"string"},"message":{"default":"Blackout date removed successfully","title":"Message","type":"string"}},"required":["blackout_id"],"title":"DeleteBlackoutResponse","type":"object"},"DeleteMessageResponse":{"description":"Response after deleting a message.","properties":{"message":{"default":"Message deleted successfully","description":"Success message","title":"Message","type":"string"},"success":{"default":true,"title":"Success","type":"boolean"}},"title":"DeleteMessageResponse","type":"object"},"DeleteWindowResponse":{"description":"Response for deleting an availability window.","properties":{"message":{"default":"Availability window deleted successfully","title":"Message","type":"string"},"window_id":{"title":"Window Id","type":"string"}},"required":["window_id"],"title":"DeleteWindowResponse","type":"object"},"EarningsResponse":{"description":"Response for earnings data.","properties":{"average_earning":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Average earning per booking","title":"Average Earning"},"booking_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of bookings","title":"Booking Count"},"period_end":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"End of period","title":"Period End"},"period_start":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"Start of period","title":"Period Start"},"total_earned":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total earnings in cents","title":"Total Earned"},"total_fees":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total fees in cents","title":"Total Fees"}},"title":"EarningsResponse","type":"object"},"EditMessageRequest":{"properties":{"content":{"title":"Content","type":"string"}},"required":["content"],"title":"EditMessageRequest","type":"object"},"ExportAnalyticsResponse":{"description":"Analytics export response.","example":{"format":"csv","message":"Export analytics endpoint","status":"Not implemented","user":"admin@instainstru.com"},"properties":{"download_url":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Download URL when ready","title":"Download Url"},"format":{"description":"Export format (csv, xlsx, json)","title":"Format","type":"string"},"message":{"description":"Status message","title":"Message","type":"string"},"status":{"description":"Export status","title":"Status","type":"string"},"user":{"description":"User email who requested export","title":"User","type":"string"}},"required":["message","format","user","status"],"title":"ExportAnalyticsResponse","type":"object"},"ExtendedCacheStats":{"description":"Extended cache statistics.","example":{"basic_stats":{"errors":0,"hit_rate":"85.0%","hits":8500,"misses":1500},"key_patterns":{"avail:*":450,"booking:*":150,"instructor:*":200},"redis_info":{"evicted_keys":0,"keyspace_hits":50000,"keyspace_misses":5000,"used_memory_human":"12.5M"}},"properties":{"basic_stats":{"additionalProperties":true,"description":"Basic cache statistics","title":"Basic Stats","type":"object"},"key_patterns":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"description":"Cache key pattern counts","title":"Key Patterns"},"redis_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Redis server information","title":"Redis Info"}},"required":["basic_stats"],"title":"ExtendedCacheStats","type":"object"},"FavoriteResponse":{"description":"Response for favorite add/remove operations.","example":{"favorite_id":"01K2K8CVN3A55280PFKJD9YHKV","message":"Instructor added to favorites","success":true},"properties":{"already_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True if already favorited (for add)","title":"Already Favorited"},"favorite_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of the created favorite (for add operations)","title":"Favorite Id"},"message":{"description":"Human-readable message about the operation","title":"Message","type":"string"},"not_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True if not favorited (for remove)","title":"Not Favorited"},"success":{"description":"Whether the operation was successful","title":"Success","type":"boolean"}},"required":["success","message"],"title":"FavoriteResponse","type":"object"},"FavoriteStatusResponse":{"description":"Response for single favorite status check.","example":{"is_favorited":true},"properties":{"is_favorited":{"description":"Whether the instructor is favorited","title":"Is Favorited","type":"boolean"}},"required":["is_favorited"],"title":"FavoriteStatusResponse","type":"object"},"FavoritedInstructor":{"description":"Instructor with favorite metadata.","example":{"email":"john.doe@example.com","favorited_at":"2024-08-13T10:30:00Z","first_name":"John","id":"01K2K8CVN3A55280PFKJD9YHKV","is_active":true,"last_name":"Doe","profile":{"bio":"Experienced piano teacher","hourly_rate":75.0,"rating":4.8,"total_reviews":25,"years_experience":10}},"properties":{"email":{"description":"Instructor email","title":"Email","type":"string"},"favorited_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"When this instructor was favorited","title":"Favorited At"},"first_name":{"description":"Instructor first name","title":"First Name","type":"string"},"id":{"description":"Instructor user ID (ULID)","title":"Id","type":"string"},"is_active":{"default":true,"description":"Whether the instructor is active","title":"Is Active","type":"boolean"},"last_name":{"description":"Instructor last name","title":"Last Name","type":"string"},"profile":{"anyOf":[{"$ref":"#/components/schemas/InstructorProfileResponse"},{"type":"null"}],"description":"Instructor profile details"}},"required":["id","email","first_name","last_name"],"title":"FavoritedInstructor","type":"object"},"FavoritesList":{"description":"List of favorited instructors.","example":{"favorites":[{"email":"john.doe@example.com","favorited_at":"2024-08-13T10:30:00Z","first_name":"John","id":"01K2K8CVN3A55280PFKJD9YHKV","is_active":true,"last_name":"Doe","profile":{"bio":"Experienced piano teacher","hourly_rate":75.0,"rating":4.8,"total_reviews":25,"years_experience":10}}],"total":1},"properties":{"favorites":{"description":"List of favorited instructors","items":{"$ref":"#/components/schemas/FavoritedInstructor"},"title":"Favorites","type":"array"},"total":{"description":"Total number of favorites","title":"Total","type":"integer"}},"required":["favorites","total"],"title":"FavoritesList","type":"object"},"FinalizeProfilePicturePayload":{"properties":{"object_key":{"title":"Object Key","type":"string"}},"required":["object_key"],"title":"FinalizeProfilePicturePayload","type":"object"},"FinalizeProfilePictureRequest":{"properties":{"object_key":{"description":"Temporary upload object key from signed PUT","title":"Object Key","type":"string"}},"required":["object_key"],"title":"FinalizeProfilePictureRequest","type":"object"},"GatedPingResponse":{"properties":{"ok":{"title":"Ok","type":"boolean"}},"required":["ok"],"title":"GatedPingResponse","type":"object"},"GitStats":{"properties":{"current_branch":{"title":"Current Branch","type":"string"},"first_commit":{"title":"First Commit","type":"string"},"last_commit":{"title":"Last Commit","type":"string"},"total_commits":{"minimum":0.0,"title":"Total Commits","type":"integer"},"unique_contributors":{"minimum":0.0,"title":"Unique Contributors","type":"integer"}},"required":["total_commits","unique_contributors","first_commit","last_commit","current_branch"],"title":"GitStats","type":"object"},"GuestConversionMetrics":{"description":"Guest session conversion metrics.","example":{"conversion_rate":6.25,"converted":50,"total":800},"properties":{"conversion_rate":{"description":"Conversion rate percentage","title":"Conversion Rate","type":"number"},"converted":{"description":"Number of converted sessions","title":"Converted","type":"integer"},"total":{"description":"Total guest sessions","title":"Total","type":"integer"}},"required":["total","converted","conversion_rate"],"title":"GuestConversionMetrics","type":"object"},"GuestEngagement":{"description":"Guest engagement metrics.","example":{"avg_searches_per_session":2.5,"engaged_sessions":400,"engagement_rate":50.0},"properties":{"avg_searches_per_session":{"description":"Average searches per guest session","title":"Avg Searches Per Session","type":"number"},"engaged_sessions":{"description":"Sessions with multiple searches","title":"Engaged Sessions","type":"integer"},"engagement_rate":{"description":"Percentage of engaged sessions","title":"Engagement Rate","type":"number"}},"required":["avg_searches_per_session","engaged_sessions","engagement_rate"],"title":"GuestEngagement","type":"object"},"GuestSessionResponse":{"properties":{"guest_id":{"title":"Guest Id","type":"string"}},"required":["guest_id"],"title":"GuestSessionResponse","type":"object"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"title":"Detail","type":"array"}},"title":"HTTPValidationError","type":"object"},"HealthCheckResponse":{"description":"Standard health check response.","example":{"checks":{"database":true,"redis":true,"services":true},"service":"InstaInstru API","status":"healthy","timestamp":"2025-01-20T10:30:00Z","version":"1.0.0"},"properties":{"checks":{"additionalProperties":{"type":"boolean"},"description":"Individual component health checks","title":"Checks","type":"object"},"service":{"default":"InstaInstru API","description":"Service name","title":"Service","type":"string"},"status":{"description":"Service health status","pattern":"^(healthy|degraded|unhealthy)$","title":"Status","type":"string"},"timestamp":{"description":"Check timestamp","format":"date-time","title":"Timestamp","type":"string"},"version":{"description":"API version","title":"Version","type":"string"}},"required":["status","version","checks"],"title":"HealthCheckResponse","type":"object"},"HealthLiteResponse":{"description":"Response for lightweight health check endpoint.","properties":{"status":{"description":"Health status (ok/error)","title":"Status","type":"string"}},"required":["status"],"title":"HealthLiteResponse","type":"object"},"HealthResponse":{"description":"Response for health check endpoint.","properties":{"environment":{"description":"Environment name","title":"Environment","type":"string"},"service":{"description":"Service name","title":"Service","type":"string"},"status":{"description":"Health status","title":"Status","type":"string"},"version":{"description":"API version","title":"Version","type":"string"}},"required":["status","service","version","environment"],"title":"HealthResponse","type":"object"},"IdentityRefreshResponse":{"properties":{"status":{"title":"Status","type":"string"},"verified":{"title":"Verified","type":"boolean"}},"required":["status","verified"],"title":"IdentityRefreshResponse","type":"object"},"IdentitySessionResponse":{"properties":{"client_secret":{"title":"Client Secret","type":"string"},"verification_session_id":{"title":"Verification Session Id","type":"string"}},"required":["verification_session_id","client_secret"],"title":"IdentitySessionResponse","type":"object"},"InstantPayoutResponse":{"properties":{"ok":{"title":"Ok","type":"boolean"},"payout_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payout Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"required":["ok"],"title":"InstantPayoutResponse","type":"object"},"InstructorProfileCreate":{"description":"Schema for creating an instructor profile.\n\nRequires at least one service to be defined.","properties":{"areas_of_service":{"description":"NYC areas where instructor provides services","items":{"type":"string"},"maxItems":20,"minItems":1,"title":"Areas Of Service","type":"array"},"bio":{"description":"Instructor biography/description","maxLength":1000,"minLength":10,"title":"Bio","type":"string"},"buffer_time_minutes":{"default":0,"description":"Buffer time between bookings","maximum":60.0,"minimum":0.0,"title":"Buffer Time Minutes","type":"integer"},"min_advance_booking_hours":{"default":2,"description":"Minimum hours in advance for bookings","maximum":168.0,"minimum":0.0,"title":"Min Advance Booking Hours","type":"integer"},"services":{"description":"Services offered by the instructor","items":{"$ref":"#/components/schemas/ServiceCreate"},"maxItems":20,"minItems":1,"title":"Services","type":"array"},"years_experience":{"description":"Years of teaching experience","maximum":50.0,"minimum":0.0,"title":"Years Experience","type":"integer"}},"required":["bio","areas_of_service","years_experience","services"],"title":"InstructorProfileCreate","type":"object"},"InstructorProfileResponse":{"description":"Schema for instructor profile responses with privacy protection.\n\nIncludes all profile data plus relationships and metadata.\nStudent-facing endpoints will show only instructor last initial.","properties":{"areas_of_service":{"description":"NYC areas where instructor provides services","items":{"type":"string"},"maxItems":20,"minItems":1,"title":"Areas Of Service","type":"array"},"background_check_object_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Background Check Object Key"},"background_check_uploaded_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Background Check Uploaded At"},"bio":{"description":"Instructor biography/description","maxLength":1000,"minLength":10,"title":"Bio","type":"string"},"buffer_time_minutes":{"default":0,"description":"Buffer time between bookings","maximum":60.0,"minimum":0.0,"title":"Buffer Time Minutes","type":"integer"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"favorited_count":{"default":0,"description":"Number of students who favorited this instructor","title":"Favorited Count","type":"integer"},"id":{"title":"Id","type":"string"},"identity_verification_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Identity Verification Session Id"},"identity_verified_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Identity Verified At"},"is_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the current user has favorited this instructor","title":"Is Favorited"},"is_live":{"default":false,"title":"Is Live","type":"boolean"},"min_advance_booking_hours":{"default":2,"description":"Minimum hours in advance for bookings","maximum":168.0,"minimum":0.0,"title":"Min Advance Booking Hours","type":"integer"},"onboarding_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Onboarding Completed At"},"services":{"items":{"$ref":"#/components/schemas/ServiceResponse"},"title":"Services","type":"array"},"skills_configured":{"default":false,"description":"Whether skills/pricing were configured at least once","title":"Skills Configured","type":"boolean"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"},"user":{"$ref":"#/components/schemas/UserBasicPrivacy"},"user_id":{"title":"User Id","type":"string"},"years_experience":{"description":"Years of teaching experience","maximum":50.0,"minimum":0.0,"title":"Years Experience","type":"integer"}},"required":["bio","areas_of_service","years_experience","id","user_id","created_at","user","services"],"title":"InstructorProfileResponse","type":"object"},"InstructorProfileUpdate":{"description":"Schema for updating an instructor profile.\n\nAll fields are optional for partial updates.","properties":{"areas_of_service":{"anyOf":[{"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},{"type":"null"}],"title":"Areas Of Service"},"bio":{"anyOf":[{"maxLength":1000,"minLength":10,"type":"string"},{"type":"null"}],"title":"Bio"},"services":{"anyOf":[{"items":{"$ref":"#/components/schemas/ServiceCreate"},"maxItems":20,"minItems":0,"type":"array"},{"type":"null"}],"title":"Services"},"years_experience":{"anyOf":[{"maximum":50.0,"minimum":0.0,"type":"integer"},{"type":"null"}],"title":"Years Experience"}},"title":"InstructorProfileUpdate","type":"object"},"InstructorRatingsResponse":{"properties":{"by_service":{"items":{"additionalProperties":true,"type":"object"},"title":"By Service","type":"array"},"confidence_level":{"pattern":"^(new|establishing|established|trusted)$","title":"Confidence Level","type":"string"},"overall":{"additionalProperties":true,"title":"Overall","type":"object"}},"required":["overall","confidence_level"],"title":"InstructorRatingsResponse","type":"object"},"InstructorSearchResponse":{"description":"Response for instructor search endpoint.","properties":{"parsed":{"additionalProperties":true,"description":"Parsed query information","title":"Parsed","type":"object"},"query":{"description":"Original search query","title":"Query","type":"string"},"results":{"description":"Search results","items":{"$ref":"#/components/schemas/SearchResult"},"title":"Results","type":"array"},"search_metadata":{"$ref":"#/components/schemas/SearchMetadata","description":"Search metadata"},"total_found":{"description":"Total number of results found","title":"Total Found","type":"integer"}},"required":["query","parsed","results","total_found","search_metadata"],"title":"InstructorSearchResponse","type":"object"},"InstructorServiceCreate":{"description":"Create instructor service from catalog.","example":{"catalog_service_id":1,"custom_description":"Specializing in jazz piano for intermediate students","duration_options":[30,45,60],"hourly_rate":75.0},"properties":{"catalog_service_id":{"description":"ID of the catalog service","title":"Catalog Service Id","type":"string"},"custom_description":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Custom description (optional)","title":"Custom Description"},"duration_options":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"description":"Custom duration options in minutes (uses catalog defaults if not provided)","title":"Duration Options"},"hourly_rate":{"description":"Hourly rate for this service","exclusiveMinimum":0.0,"title":"Hourly Rate","type":"number"}},"required":["catalog_service_id","hourly_rate"],"title":"InstructorServiceCreate","type":"object"},"InstructorServiceResponse":{"description":"Instructor service response with catalog info.","properties":{"catalog_service_id":{"title":"Catalog Service Id","type":"string"},"category":{"title":"Category","type":"string"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration_options":{"default":[60],"items":{"type":"integer"},"title":"Duration Options","type":"array"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"is_active":{"default":true,"title":"Is Active","type":"boolean"},"name":{"title":"Name","type":"string"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["id","catalog_service_id","name","category","hourly_rate"],"title":"InstructorServiceResponse","type":"object"},"InviteBatchAsyncStartResponse":{"properties":{"task_id":{"title":"Task Id","type":"string"}},"required":["task_id"],"title":"InviteBatchAsyncStartResponse","type":"object"},"InviteBatchProgressResponse":{"properties":{"current":{"title":"Current","type":"integer"},"failed":{"title":"Failed","type":"integer"},"failed_items":{"anyOf":[{"items":{"$ref":"#/components/schemas/InviteBatchSendFailure"},"type":"array"},{"type":"null"}],"title":"Failed Items"},"sent":{"title":"Sent","type":"integer"},"sent_items":{"anyOf":[{"items":{"$ref":"#/components/schemas/InviteSendResponse"},"type":"array"},{"type":"null"}],"title":"Sent Items"},"state":{"title":"State","type":"string"},"task_id":{"title":"Task Id","type":"string"},"total":{"title":"Total","type":"integer"}},"required":["task_id","state","current","total","sent","failed"],"title":"InviteBatchProgressResponse","type":"object"},"InviteBatchSendFailure":{"properties":{"email":{"format":"email","title":"Email","type":"string"},"reason":{"title":"Reason","type":"string"}},"required":["email","reason"],"title":"InviteBatchSendFailure","type":"object"},"InviteBatchSendRequest":{"properties":{"base_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Url"},"emails":{"items":{"format":"email","type":"string"},"minItems":1,"title":"Emails","type":"array"},"expires_in_days":{"default":14,"maximum":180.0,"minimum":1.0,"title":"Expires In Days","type":"integer"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"title":"InviteBatchSendRequest","type":"object"},"InviteBatchSendResponse":{"properties":{"failed":{"items":{"$ref":"#/components/schemas/InviteBatchSendFailure"},"title":"Failed","type":"array"},"sent":{"items":{"$ref":"#/components/schemas/InviteSendResponse"},"title":"Sent","type":"array"}},"required":["sent","failed"],"title":"InviteBatchSendResponse","type":"object"},"InviteConsumeRequest":{"properties":{"code":{"title":"Code","type":"string"},"phase":{"default":"instructor_only","title":"Phase","type":"string"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["code","user_id"],"title":"InviteConsumeRequest","type":"object"},"InviteGenerateRequest":{"properties":{"count":{"default":1,"title":"Count","type":"integer"},"emails":{"anyOf":[{"items":{"format":"email","type":"string"},"type":"array"},{"type":"null"}],"title":"Emails"},"expires_in_days":{"default":30,"title":"Expires In Days","type":"integer"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"title":"InviteGenerateRequest","type":"object"},"InviteGenerateResponse":{"properties":{"invites":{"items":{"$ref":"#/components/schemas/InviteRecord"},"title":"Invites","type":"array"}},"required":["invites"],"title":"InviteGenerateResponse","type":"object"},"InviteRecord":{"properties":{"code":{"title":"Code","type":"string"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"format":"date-time","title":"Expires At","type":"string"},"id":{"title":"Id","type":"string"},"role":{"title":"Role","type":"string"}},"required":["id","code","role","expires_at"],"title":"InviteRecord","type":"object"},"InviteSendRequest":{"properties":{"base_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Url"},"expires_in_days":{"default":14,"maximum":180.0,"minimum":1.0,"title":"Expires In Days","type":"integer"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"to_email":{"format":"email","title":"To Email","type":"string"}},"required":["to_email"],"title":"InviteSendRequest","type":"object"},"InviteSendResponse":{"properties":{"code":{"title":"Code","type":"string"},"email":{"format":"email","title":"Email","type":"string"},"id":{"title":"Id","type":"string"},"join_url":{"title":"Join Url","type":"string"},"welcome_url":{"title":"Welcome Url","type":"string"}},"required":["id","code","email","join_url","welcome_url"],"title":"InviteSendResponse","type":"object"},"InviteValidateResponse":{"properties":{"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Expires At"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"used_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Used At"},"valid":{"title":"Valid","type":"boolean"}},"required":["valid"],"title":"InviteValidateResponse","type":"object"},"LiveAlertItem":{"description":"Simplified alert item for live view.","properties":{"message":{"description":"Alert message (truncated if long)","title":"Message","type":"string"},"severity":{"description":"Alert severity (uppercase)","title":"Severity","type":"string"},"time":{"description":"Time in HH:MM:SS format","title":"Time","type":"string"},"type":{"description":"Alert type","title":"Type","type":"string"}},"required":["time","severity","type","message"],"title":"LiveAlertItem","type":"object"},"LiveAlertsResponse":{"description":"Response for live alerts endpoint.","properties":{"alerts":{"description":"List of recent alerts","items":{"$ref":"#/components/schemas/LiveAlertItem"},"title":"Alerts","type":"array"},"count":{"description":"Number of alerts in the time period","title":"Count","type":"integer"},"minutes":{"description":"Number of minutes included","title":"Minutes","type":"integer"}},"required":["minutes","count","alerts"],"title":"LiveAlertsResponse","type":"object"},"LoginResponse":{"properties":{"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"requires_2fa":{"default":false,"title":"Requires 2Fa","type":"boolean"},"temp_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Temp Token"},"token_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Token Type"}},"title":"LoginResponse","type":"object"},"MarkMessagesReadRequest":{"description":"Request to mark messages as read.","properties":{"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Mark all messages in this booking as read","title":"Booking Id"},"message_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Specific message IDs to mark as read","title":"Message Ids"}},"title":"MarkMessagesReadRequest","type":"object"},"MarkMessagesReadResponse":{"description":"Response after marking messages as read.","properties":{"messages_marked":{"description":"Number of messages marked as read","title":"Messages Marked","type":"integer"},"success":{"default":true,"title":"Success","type":"boolean"}},"required":["messages_marked"],"title":"MarkMessagesReadResponse","type":"object"},"MemoryMetrics":{"description":"System memory metrics.","example":{"percent":25.0,"total_mb":8192.0,"used_mb":2048.5},"properties":{"percent":{"description":"Memory usage percentage","title":"Percent","type":"number"},"total_mb":{"description":"Total memory in MB","title":"Total Mb","type":"number"},"used_mb":{"description":"Used memory in MB","title":"Used Mb","type":"number"}},"required":["used_mb","total_mb","percent"],"title":"MemoryMetrics","type":"object"},"MessageConfigResponse":{"description":"Public config values for messaging UI.","properties":{"edit_window_minutes":{"title":"Edit Window Minutes","type":"integer"}},"required":["edit_window_minutes"],"title":"MessageConfigResponse","type":"object"},"MessageResponse":{"description":"Response schema for a single message.","properties":{"booking_id":{"title":"Booking Id","type":"string"},"content":{"title":"Content","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"delivered_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Delivered At"},"edited_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Edited At"},"id":{"title":"Id","type":"string"},"is_deleted":{"default":false,"title":"Is Deleted","type":"boolean"},"my_reactions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"My Reactions"},"reactions":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Reactions"},"read_by":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Read By"},"sender":{"anyOf":[{"$ref":"#/components/schemas/MessageSenderResponse"},{"type":"null"}]},"sender_id":{"title":"Sender Id","type":"string"},"updated_at":{"format":"date-time","title":"Updated At","type":"string"}},"required":["id","booking_id","sender_id","content","created_at","updated_at"],"title":"MessageResponse","type":"object"},"MessageSenderResponse":{"description":"Response schema for message sender info.","properties":{"email":{"title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_name":{"title":"Last Name","type":"string"}},"required":["id","first_name","last_name","email"],"title":"MessageSenderResponse","type":"object"},"MessagesHistoryResponse":{"description":"Response for message history request.","properties":{"booking_id":{"title":"Booking Id","type":"string"},"has_more":{"title":"Has More","type":"boolean"},"limit":{"title":"Limit","type":"integer"},"messages":{"items":{"$ref":"#/components/schemas/MessageResponse"},"title":"Messages","type":"array"},"offset":{"title":"Offset","type":"integer"}},"required":["booking_id","messages","limit","offset","has_more"],"title":"MessagesHistoryResponse","type":"object"},"MonitoringDashboardResponse":{"description":"Comprehensive monitoring dashboard response.","example":{"alerts":[],"cache":{"errors":0,"hit_rate":"85.5%","recommendations":["Cache performance is optimal"],"status":"healthy","total_requests":10000},"database":{"average_pool_usage_percent":25.0,"pool":{"checked_in":15,"checked_out":5,"overflow":0,"pool_size":20,"usage_percent":25.0},"slow_queries_count":5},"memory":{"percent":25.0,"total_mb":8192.0,"used_mb":2048.5},"recommendations":[],"requests":{"active_count":5,"average_response_time_ms":45.2,"total_count":10000},"status":"ok","timestamp":"2025-01-20T10:30:00Z"},"properties":{"alerts":{"description":"Active system alerts","items":{"$ref":"#/components/schemas/AlertInfo"},"title":"Alerts","type":"array"},"cache":{"$ref":"#/components/schemas/CacheHealthStatus","description":"Cache health status"},"database":{"additionalProperties":true,"description":"Database metrics and pool status","title":"Database","type":"object"},"memory":{"$ref":"#/components/schemas/MemoryMetrics","description":"System memory metrics"},"recommendations":{"description":"Performance recommendations","items":{"$ref":"#/components/schemas/PerformanceRecommendation"},"title":"Recommendations","type":"array"},"requests":{"$ref":"#/components/schemas/RequestMetrics","description":"Request processing metrics"},"status":{"description":"Overall system status","title":"Status","type":"string"},"timestamp":{"description":"Dashboard snapshot timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["status","timestamp","database","cache","requests","memory","alerts","recommendations"],"title":"MonitoringDashboardResponse","type":"object"},"NYCZipCheckResponse":{"properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"is_nyc":{"title":"Is Nyc","type":"boolean"}},"required":["is_nyc"],"title":"NYCZipCheckResponse","type":"object"},"NeighborhoodItem":{"properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name"],"title":"NeighborhoodItem","type":"object"},"NeighborhoodsListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/NeighborhoodItem"},"title":"Items","type":"array"},"page":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page"},"per_page":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Per Page"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"NeighborhoodsListResponse","type":"object"},"NextAvailableSlotResponse":{"description":"Response for next available slot endpoint.","examples":[{"date":"2025-07-15","duration_minutes":60,"end_time":"10:00:00","found":true,"start_time":"09:00:00"},{"found":false,"message":"No available slots found in the next 30 days"}],"properties":{"date":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Date of the next available slot (YYYY-MM-DD)","title":"Date"},"duration_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Duration in minutes","title":"Duration Minutes"},"end_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End time (HH:MM:SS)","title":"End Time"},"found":{"title":"Found","type":"boolean"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Message when no slot is found","title":"Message"},"start_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start time (HH:MM:SS)","title":"Start Time"}},"required":["found"],"title":"NextAvailableSlotResponse","type":"object"},"OnboardingResponse":{"description":"Response for starting instructor onboarding.","properties":{"account_id":{"description":"Stripe connected account ID","title":"Account Id","type":"string"},"already_onboarded":{"description":"Whether onboarding was already completed","title":"Already Onboarded","type":"boolean"},"onboarding_url":{"description":"URL for onboarding flow","title":"Onboarding Url","type":"string"}},"required":["account_id","onboarding_url","already_onboarded"],"title":"OnboardingResponse","type":"object"},"OnboardingStatusResponse":{"description":"Response for onboarding status check.","properties":{"charges_enabled":{"description":"Whether account can accept payments","title":"Charges Enabled","type":"boolean"},"details_submitted":{"default":false,"description":"Whether required details are submitted","title":"Details Submitted","type":"boolean"},"has_account":{"description":"Whether instructor has a connected account","title":"Has Account","type":"boolean"},"onboarding_completed":{"description":"Whether onboarding is complete","title":"Onboarding Completed","type":"boolean"},"payouts_enabled":{"default":false,"description":"Whether account can receive payouts","title":"Payouts Enabled","type":"boolean"},"requirements":{"description":"Outstanding requirements","items":{"type":"string"},"title":"Requirements","type":"array"}},"required":["has_account","onboarding_completed","charges_enabled"],"title":"OnboardingStatusResponse","type":"object"},"OperationResult":{"description":"Result of a single operation in bulk update.","properties":{"action":{"title":"Action","type":"string"},"operation_index":{"title":"Operation Index","type":"integer"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"status":{"enum":["success","failed","skipped"],"title":"Status","type":"string"}},"required":["operation_index","action","status"],"title":"OperationResult","type":"object"},"PaginatedResponse_BookingResponse_":{"example":{"has_next":true,"has_prev":false,"items":["..."],"page":1,"per_page":20,"total":100},"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/BookingResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[BookingResponse]","type":"object"},"PaginatedResponse_InstructorProfileResponse_":{"example":{"has_next":true,"has_prev":false,"items":["..."],"page":1,"per_page":20,"total":100},"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/InstructorProfileResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[InstructorProfileResponse]","type":"object"},"PaginatedResponse_UpcomingBookingResponse_":{"example":{"has_next":true,"has_prev":false,"items":["..."],"page":1,"per_page":20,"total":100},"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/UpcomingBookingResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[UpcomingBookingResponse]","type":"object"},"PasswordChangeRequest":{"properties":{"current_password":{"minLength":6,"title":"Current Password","type":"string"},"new_password":{"minLength":8,"title":"New Password","type":"string"}},"required":["current_password","new_password"],"title":"PasswordChangeRequest","type":"object"},"PasswordChangeResponse":{"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"PasswordChangeResponse","type":"object"},"PasswordResetConfirm":{"description":"Request model for confirming password reset with new password","properties":{"new_password":{"minLength":8,"title":"New Password","type":"string"},"token":{"title":"Token","type":"string"}},"required":["token","new_password"],"title":"PasswordResetConfirm","type":"object"},"PasswordResetRequest":{"description":"Request model for initiating password reset","properties":{"email":{"format":"email","title":"Email","type":"string"}},"required":["email"],"title":"PasswordResetRequest","type":"object"},"PasswordResetResponse":{"description":"Response after requesting password reset","properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"PasswordResetResponse","type":"object"},"PasswordResetVerifyResponseInvalid":{"description":"Response for invalid password reset token","properties":{"valid":{"default":false,"title":"Valid","type":"boolean"}},"title":"PasswordResetVerifyResponseInvalid","type":"object"},"PasswordResetVerifyResponseValid":{"description":"Response for valid password reset token","properties":{"email":{"title":"Email","type":"string"},"valid":{"default":true,"title":"Valid","type":"boolean"}},"required":["email"],"title":"PasswordResetVerifyResponseValid","type":"object"},"PaymentHealthCheckTriggerResponse":{"description":"Response for manually triggered payment health check.","example":{"message":"Health check task has been queued","status":"triggered","task_id":"a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6","timestamp":"2025-01-20T10:30:00.123456"},"properties":{"message":{"description":"Status message","title":"Message","type":"string"},"status":{"description":"Trigger status","title":"Status","type":"string"},"task_id":{"description":"Celery task ID","title":"Task Id","type":"string"},"timestamp":{"description":"Trigger timestamp","title":"Timestamp","type":"string"}},"required":["status","task_id","message","timestamp"],"title":"PaymentHealthCheckTriggerResponse","type":"object"},"PaymentHealthResponse":{"description":"Payment system health monitoring response.","example":{"alerts":[],"metrics":{"abandoned":0,"authorized":25,"captured":150,"failed":2,"pending":5,"scheduled":12},"minutes_since_last_auth":45,"overdue_authorizations":0,"payment_stats":{"auth_failed":2,"authorized":25,"captured":150,"pending_payment_method":5,"scheduled":12},"recent_events":{"auth_failed":2,"auth_succeeded":15,"payment_captured":8},"status":"healthy","timestamp":"2025-01-20T10:30:00.123456"},"properties":{"alerts":{"description":"Current payment system alerts","items":{"type":"string"},"title":"Alerts","type":"array"},"metrics":{"additionalProperties":{"type":"integer"},"description":"Payment metrics breakdown","title":"Metrics","type":"object"},"minutes_since_last_auth":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Minutes since last successful auth","title":"Minutes Since Last Auth"},"overdue_authorizations":{"description":"Number of overdue authorizations","title":"Overdue Authorizations","type":"integer"},"payment_stats":{"additionalProperties":{"type":"integer"},"description":"Payment status counts","title":"Payment Stats","type":"object"},"recent_events":{"additionalProperties":{"type":"integer"},"description":"Recent payment event counts","title":"Recent Events","type":"object"},"status":{"description":"Payment system health status (healthy/warning/critical)","title":"Status","type":"string"},"timestamp":{"description":"Health check timestamp","title":"Timestamp","type":"string"}},"required":["status","timestamp","payment_stats","recent_events","overdue_authorizations","alerts","metrics"],"title":"PaymentHealthResponse","type":"object"},"PaymentMethodResponse":{"description":"Response model for payment method information.","properties":{"brand":{"description":"Card brand (visa, mastercard, etc.)","title":"Brand","type":"string"},"created_at":{"description":"When the payment method was added","format":"date-time","title":"Created At","type":"string"},"id":{"description":"Payment method ID","title":"Id","type":"string"},"is_default":{"description":"Whether this is the default payment method","title":"Is Default","type":"boolean"},"last4":{"description":"Last 4 digits of card","title":"Last4","type":"string"}},"required":["id","last4","brand","is_default","created_at"],"title":"PaymentMethodResponse","type":"object"},"PayoutScheduleResponse":{"properties":{"account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Account Id"},"ok":{"title":"Ok","type":"boolean"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings"}},"required":["ok"],"title":"PayoutScheduleResponse","type":"object"},"PerformanceMetrics":{"description":"Search performance metrics.","example":{"avg_results_per_search":15.7,"most_effective_type":"natural_language","zero_result_rate":5.2},"properties":{"avg_results_per_search":{"description":"Average results per search","title":"Avg Results Per Search","type":"number"},"most_effective_type":{"description":"Most effective search type","title":"Most Effective Type","type":"string"},"zero_result_rate":{"description":"Percentage of searches with zero results","title":"Zero Result Rate","type":"number"}},"required":["avg_results_per_search","zero_result_rate","most_effective_type"],"title":"PerformanceMetrics","type":"object"},"PerformanceRecommendation":{"description":"Performance optimization recommendation.","example":{"action":"Consider optimizing queries or increasing pool size","message":"High database pool usage","severity":"warning","type":"database"},"properties":{"action":{"description":"Suggested action","title":"Action","type":"string"},"message":{"description":"Recommendation message","title":"Message","type":"string"},"severity":{"description":"Severity level (info/warning)","title":"Severity","type":"string"},"type":{"description":"Recommendation type (database/cache/memory/requests)","title":"Type","type":"string"}},"required":["type","severity","message","action"],"title":"PerformanceRecommendation","type":"object"},"PlaceDetails":{"properties":{"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"formatted_address":{"title":"Formatted Address","type":"string"},"latitude":{"title":"Latitude","type":"number"},"longitude":{"title":"Longitude","type":"number"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"provider_id":{"title":"Provider Id","type":"string"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"street_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Name"},"street_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Number"}},"required":["formatted_address","latitude","longitude","provider_id"],"title":"PlaceDetails","type":"object"},"PlaceSuggestion":{"properties":{"description":{"title":"Description","type":"string"},"place_id":{"title":"Place Id","type":"string"},"text":{"title":"Text","type":"string"},"types":{"default":[],"items":{"type":"string"},"title":"Types","type":"array"}},"required":["text","place_id","description"],"title":"PlaceSuggestion","type":"object"},"PopularSearch":{"description":"Popular search query data.","example":{"average_results":15.7,"query":"yoga instructor","search_count":523,"unique_users":201},"properties":{"average_results":{"description":"Average number of results returned","title":"Average Results","type":"number"},"query":{"description":"Search query text","title":"Query","type":"string"},"search_count":{"description":"Number of times searched","title":"Search Count","type":"integer"},"unique_users":{"description":"Number of unique users who searched","title":"Unique Users","type":"integer"}},"required":["query","search_count","unique_users","average_results"],"title":"PopularSearch","type":"object"},"PopularSearchesResponse":{"description":"Popular searches response.","example":[{"average_results":15.7,"query":"yoga instructor","search_count":523,"unique_users":201}],"items":{"$ref":"#/components/schemas/PopularSearch"},"title":"PopularSearchesResponse","type":"array"},"PrivacyStatisticsResponse":{"description":"Response schema for privacy statistics.","properties":{"statistics":{"additionalProperties":true,"description":"Privacy and retention statistics","title":"Statistics","type":"object"},"status":{"description":"Status of the request","title":"Status","type":"string"}},"required":["status","statistics"],"title":"PrivacyStatisticsResponse","type":"object"},"ProblematicQuery":{"description":"Problematic search query with low results.","example":{"avg_results":0.5,"count":25,"query":"advanced quantum physics tutor"},"properties":{"avg_results":{"description":"Average results returned","title":"Avg Results","type":"number"},"count":{"description":"Number of times searched","title":"Count","type":"integer"},"query":{"description":"Search query text","title":"Query","type":"string"}},"required":["query","count","avg_results"],"title":"ProblematicQuery","type":"object"},"PublicDayAvailability":{"description":"Availability for a single day.","example":{"available_slots":[{"end_time":"10:00","start_time":"09:00"},{"end_time":"11:30","start_time":"10:30"}],"date":"2025-07-15","is_blackout":false},"properties":{"available_slots":{"description":"List of available time slots for booking","items":{"$ref":"#/components/schemas/PublicTimeSlot"},"title":"Available Slots","type":"array"},"date":{"description":"Date in YYYY-MM-DD format","title":"Date","type":"string"},"is_blackout":{"default":false,"description":"Whether this date is completely unavailable","title":"Is Blackout","type":"boolean"}},"required":["date"],"title":"PublicDayAvailability","type":"object"},"PublicInstructorAvailability":{"description":"Public availability response for an instructor.\n\nThis is the main response schema for the public endpoint.\nProvides all necessary information for students to view\navailability and make booking decisions.\n\nThe detail_level field indicates what data is populated:\n- \"minimal\": Only has_availability and earliest_available_date\n- \"summary\": Includes availability_summary but not specific slots\n- \"full\": Complete availability_by_date with all time slots","example":{"availability_by_date":{"2025-07-15":{"available_slots":[{"end_time":"10:00","start_time":"09:00"},{"end_time":"15:00","start_time":"14:00"}],"date":"2025-07-15","is_blackout":false}},"earliest_available_date":"2025-07-15","instructor_first_name":"Sarah","instructor_id":123,"instructor_last_initial":"C","timezone":"America/New_York","total_available_slots":2},"properties":{"availability_by_date":{"anyOf":[{"additionalProperties":{"$ref":"#/components/schemas/PublicDayAvailability"},"type":"object"},{"type":"null"}],"description":"Availability indexed by date string (YYYY-MM-DD) - only in full detail","title":"Availability By Date"},"availability_summary":{"anyOf":[{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object"},{"type":"null"}],"description":"Summary of availability by date - only in summary detail","title":"Availability Summary"},"detail_level":{"description":"Level of detail: minimal, summary, or full","title":"Detail Level","type":"string"},"earliest_available_date":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Earliest date with availability","title":"Earliest Available Date"},"has_availability":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether any availability exists","title":"Has Availability"},"instructor_first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor's first name if privacy settings allow","title":"Instructor First Name"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_last_initial":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor's last name initial for privacy","title":"Instructor Last Initial"},"timezone":{"default":"America/New_York","description":"Instructor's timezone","title":"Timezone","type":"string"},"total_available_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of days with availability","title":"Total Available Days"},"total_available_slots":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total number of bookable slots in the date range","title":"Total Available Slots"}},"required":["instructor_id","detail_level"],"title":"PublicInstructorAvailability","type":"object"},"PublicTimeSlot":{"description":"A bookable time slot for public viewing.\n\nNote: No slot IDs exposed - frontend should use instructor_id + date + times\nfor booking requests.","example":{"end_time":"10:00","start_time":"09:00"},"properties":{"end_time":{"description":"End time in HH:MM format","title":"End Time","type":"string"},"start_time":{"description":"Start time in HH:MM format","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"PublicTimeSlot","type":"object"},"RateLimitResetResponse":{"description":"Rate limit reset response.","example":{"limits_reset":5,"message":"Reset 5 rate limits matching pattern 'email_*'","pattern":"email_*","status":"success"},"properties":{"limits_reset":{"description":"Number of limits reset","title":"Limits Reset","type":"integer"},"message":{"description":"Result message","title":"Message","type":"string"},"pattern":{"description":"Pattern used for matching","title":"Pattern","type":"string"},"status":{"description":"Operation status","title":"Status","type":"string"}},"required":["status","pattern","limits_reset","message"],"title":"RateLimitResetResponse","type":"object"},"RateLimitStats":{"description":"Rate limit statistics.","example":{"breakdown_by_type":{"email":15,"global":7,"ip":20},"top_limited_clients":[{"count":50,"endpoint":"/api/search","key":"ip_192.168.1.100"}],"total_keys":42},"properties":{"breakdown_by_type":{"additionalProperties":{"type":"integer"},"description":"Breakdown by limit type","title":"Breakdown By Type","type":"object"},"top_limited_clients":{"description":"Top rate-limited clients","items":{"additionalProperties":true,"type":"object"},"title":"Top Limited Clients","type":"array"},"total_keys":{"description":"Total rate limit keys in Redis","title":"Total Keys","type":"integer"}},"required":["total_keys","breakdown_by_type","top_limited_clients"],"title":"RateLimitStats","type":"object"},"RateLimitTestResponse":{"description":"Rate limit test endpoint response.","example":{"message":"Rate limit test successful","note":"This endpoint is rate limited to 3 requests per minute","timestamp":"2025-01-20T10:30:00.123456"},"properties":{"message":{"description":"Test message","title":"Message","type":"string"},"note":{"description":"Rate limit information","title":"Note","type":"string"},"timestamp":{"description":"Request timestamp","title":"Timestamp","type":"string"}},"required":["message","timestamp","note"],"title":"RateLimitTestResponse","type":"object"},"RatingsBatchItem":{"properties":{"instructor_id":{"title":"Instructor Id","type":"string"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"review_count":{"title":"Review Count","type":"integer"}},"required":["instructor_id","rating","review_count"],"title":"RatingsBatchItem","type":"object"},"RatingsBatchRequest":{"properties":{"instructor_ids":{"items":{"type":"string"},"minItems":1,"title":"Instructor Ids","type":"array"}},"required":["instructor_ids"],"title":"RatingsBatchRequest","type":"object"},"RatingsBatchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/RatingsBatchItem"},"title":"Results","type":"array"}},"required":["results"],"title":"RatingsBatchResponse","type":"object"},"ReactionRequest":{"properties":{"emoji":{"title":"Emoji","type":"string"}},"required":["emoji"],"title":"ReactionRequest","type":"object"},"RecentAlertsResponse":{"description":"Response for recent alerts endpoint.","properties":{"alerts":{"description":"List of alert details","items":{"$ref":"#/components/schemas/AlertDetail"},"title":"Alerts","type":"array"},"hours":{"description":"Number of hours included in the query","title":"Hours","type":"integer"},"total":{"description":"Total number of alerts in the time period","title":"Total","type":"integer"}},"required":["total","hours","alerts"],"title":"RecentAlertsResponse","type":"object"},"RedisCeleryQueuesResponse":{"description":"Response for Redis Celery queues.","properties":{"queues":{"additionalProperties":true,"title":"Queues","type":"object"}},"required":["queues"],"title":"RedisCeleryQueuesResponse","type":"object"},"RedisConnectionAuditResponse":{"description":"Response for Redis connection audit.","properties":{"connections":{"items":{"additionalProperties":true,"type":"object"},"title":"Connections","type":"array"}},"required":["connections"],"title":"RedisConnectionAuditResponse","type":"object"},"RedisFlushQueuesResponse":{"description":"Response for flushing Redis queues.","properties":{"message":{"title":"Message","type":"string"},"queues_flushed":{"items":{"type":"string"},"title":"Queues Flushed","type":"array"}},"required":["message","queues_flushed"],"title":"RedisFlushQueuesResponse","type":"object"},"RedisHealthResponse":{"description":"Response for Redis health check endpoint.","properties":{"connected":{"description":"Whether Redis is connected","title":"Connected","type":"boolean"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if unhealthy","title":"Error"},"status":{"description":"Health status (healthy/unhealthy)","title":"Status","type":"string"}},"required":["status","connected"],"title":"RedisHealthResponse","type":"object"},"RedisStatsResponse":{"description":"Response for Redis statistics.","properties":{"stats":{"additionalProperties":true,"title":"Stats","type":"object"}},"required":["stats"],"title":"RedisStatsResponse","type":"object"},"RedisTestResponse":{"description":"Response for Redis test endpoint.","properties":{"connected_clients":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"description":"Number of connected clients","title":"Connected Clients"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if failed","title":"Error"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Status message","title":"Message"},"ping":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Ping result","title":"Ping"},"redis_version":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unknown","description":"Redis server version","title":"Redis Version"},"status":{"description":"Connection status","title":"Status","type":"string"},"uptime_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"description":"Redis uptime in seconds","title":"Uptime Seconds"}},"required":["status"],"title":"RedisTestResponse","type":"object"},"ReferralSendError":{"description":"Details for a failed referral send attempt.","properties":{"email":{"format":"email","title":"Email","type":"string"},"error":{"title":"Error","type":"string"}},"required":["email","error"],"title":"ReferralSendError","type":"object"},"ReferralSendRequest":{"description":"Request payload for sending referral invites.","properties":{"emails":{"description":"List of recipient email addresses","items":{"format":"email","type":"string"},"title":"Emails","type":"array"},"from_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Display name of the inviter (falls back to a generic label if omitted)","title":"From Name"},"referral_link":{"description":"Referral link to include in the invite","format":"uri","minLength":1,"title":"Referral Link","type":"string"}},"required":["emails","referral_link"],"title":"ReferralSendRequest","type":"object"},"ReferralSendResponse":{"description":"Response after attempting to send referral invites.","properties":{"errors":{"description":"List of errors for individual recipients","items":{"$ref":"#/components/schemas/ReferralSendError"},"title":"Errors","type":"array"},"failed":{"description":"Number of emails that failed to send","title":"Failed","type":"integer"},"sent":{"description":"Number of emails successfully sent","title":"Sent","type":"integer"},"status":{"description":"Operation status ('ok' if the operation ran)","title":"Status","type":"string"}},"required":["status","sent","failed"],"title":"ReferralSendResponse","type":"object"},"RequestMetrics":{"description":"Request processing metrics.","example":{"active_count":5,"average_response_time_ms":45.2,"total_count":10000},"properties":{"active_count":{"description":"Currently active requests","title":"Active Count","type":"integer"},"average_response_time_ms":{"description":"Average response time in milliseconds","title":"Average Response Time Ms","type":"number"},"total_count":{"description":"Total requests processed","title":"Total Count","type":"integer"}},"required":["active_count","total_count","average_response_time_ms"],"title":"RequestMetrics","type":"object"},"RescheduledFromInfo":{"description":"Minimal info about the original booking used for annotation.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"id":{"title":"Id","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["id","booking_date","start_time"],"title":"RescheduledFromInfo","type":"object"},"ResultDistribution":{"description":"Search result distribution.","example":{"1_5_results":2000,"6_10_results":3000,"over_10_results":4500,"zero_results":500},"properties":{"1_5_results":{"description":"Searches with 1-5 results","title":"1 5 Results","type":"integer"},"6_10_results":{"description":"Searches with 6-10 results","title":"6 10 Results","type":"integer"},"over_10_results":{"description":"Searches with over 10 results","title":"Over 10 Results","type":"integer"},"zero_results":{"description":"Searches with zero results","title":"Zero Results","type":"integer"}},"required":["zero_results","1_5_results","6_10_results","over_10_results"],"title":"ResultDistribution","type":"object"},"RetentionPolicyResponse":{"description":"Response schema for applying retention policies.","properties":{"message":{"description":"Human-readable message","title":"Message","type":"string"},"stats":{"additionalProperties":true,"description":"Statistics of retention policy application","title":"Stats","type":"object"},"status":{"description":"Status of the retention policy application","title":"Status","type":"string"}},"required":["status","message","stats"],"title":"RetentionPolicyResponse","type":"object"},"ReviewItem":{"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"rating":{"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Text"},"reviewer_display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Display Name"}},"required":["id","rating","review_text","created_at","instructor_service_id"],"title":"ReviewItem","type":"object"},"ReviewListPageResponse":{"properties":{"has_next":{"title":"Has Next","type":"boolean"},"has_prev":{"title":"Has Prev","type":"boolean"},"page":{"title":"Page","type":"integer"},"per_page":{"title":"Per Page","type":"integer"},"reviews":{"items":{"$ref":"#/components/schemas/ReviewItem"},"title":"Reviews","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["reviews","total","page","per_page","has_next","has_prev"],"title":"ReviewListPageResponse","type":"object"},"ReviewResponseModel":{"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"response_text":{"title":"Response Text","type":"string"},"review_id":{"title":"Review Id","type":"string"}},"required":["id","review_id","instructor_id","response_text","created_at"],"title":"ReviewResponseModel","type":"object"},"ReviewSubmitRequest":{"properties":{"booking_id":{"title":"Booking Id","type":"string"},"rating":{"maximum":5.0,"minimum":1.0,"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Review Text"},"tip_amount_cents":{"anyOf":[{"exclusiveMinimum":0.0,"type":"integer"},{"type":"null"}],"title":"Tip Amount Cents"}},"required":["booking_id","rating"],"title":"ReviewSubmitRequest","type":"object"},"ReviewSubmitResponse":{"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"rating":{"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Text"},"reviewer_display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Display Name"},"tip_client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tip Client Secret"},"tip_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tip Status"}},"required":["id","rating","review_text","created_at","instructor_service_id"],"title":"ReviewSubmitResponse","type":"object"},"RootResponse":{"description":"Response for root endpoint.","properties":{"docs":{"description":"Documentation URL","title":"Docs","type":"string"},"environment":{"description":"Environment name","title":"Environment","type":"string"},"message":{"description":"Welcome message","title":"Message","type":"string"},"secure":{"description":"Whether running in secure mode","title":"Secure","type":"boolean"},"version":{"description":"API version","title":"Version","type":"string"}},"required":["message","version","docs","environment","secure"],"title":"RootResponse","type":"object"},"SavePaymentMethodRequest":{"description":"Request to save a payment method for a user.","properties":{"payment_method_id":{"description":"Stripe payment method ID","title":"Payment Method Id","type":"string"},"set_as_default":{"default":false,"description":"Whether to set as default payment method","title":"Set As Default","type":"boolean"}},"required":["payment_method_id"],"title":"SavePaymentMethodRequest","type":"object"},"SearchAnalyticsSummaryResponse":{"description":"Comprehensive search analytics summary.","example":{"conversions":{"conversion_behavior":{"avg_days_to_conversion":0,"avg_searches_before_conversion":0,"most_common_first_search":""},"guest_sessions":{"conversion_rate":6.25,"converted":50,"total":800}},"date_range":{"days":31,"end":"2025-01-31","start":"2025-01-01"},"performance":{"avg_results_per_search":15.7,"most_effective_type":"natural_language","zero_result_rate":5.2},"search_types":{"category":{"count":3000,"percentage":30.0},"natural_language":{"count":5000,"percentage":50.0},"quick":{"count":2000,"percentage":20.0}},"totals":{"deleted_searches":100,"deletion_rate":1.0,"total_searches":10000,"total_users":1300,"unique_guests":800,"unique_users":500},"users":{"authenticated":500,"converted_guests":50,"guest_percentage":61.54,"guests":800,"user_percentage":38.46}},"properties":{"conversions":{"additionalProperties":true,"description":"Conversion metrics","title":"Conversions","type":"object"},"date_range":{"$ref":"#/components/schemas/DateRange","description":"Date range for analytics"},"performance":{"$ref":"#/components/schemas/PerformanceMetrics","description":"Search performance metrics"},"search_types":{"additionalProperties":{"$ref":"#/components/schemas/SearchTypeMetrics"},"description":"Breakdown by search type","title":"Search Types","type":"object"},"totals":{"$ref":"#/components/schemas/SearchTotals","description":"Search totals and metrics"},"users":{"$ref":"#/components/schemas/UserBreakdown","description":"User breakdown by type"}},"required":["date_range","totals","users","search_types","conversions","performance"],"title":"SearchAnalyticsSummaryResponse","type":"object"},"SearchEffectiveness":{"description":"Search effectiveness metrics.","example":{"avg_results_per_search":15.7,"median_results":12.0,"searches_with_results":9500,"zero_result_rate":5.0},"properties":{"avg_results_per_search":{"description":"Average results per search","title":"Avg Results Per Search","type":"number"},"median_results":{"description":"Median results per search","title":"Median Results","type":"number"},"searches_with_results":{"description":"Number of searches with at least one result","title":"Searches With Results","type":"integer"},"zero_result_rate":{"description":"Percentage of searches with zero results","title":"Zero Result Rate","type":"number"}},"required":["avg_results_per_search","median_results","searches_with_results","zero_result_rate"],"title":"SearchEffectiveness","type":"object"},"SearchHistoryCreate":{"description":"Schema for creating search history.","properties":{"device_context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Device context from frontend including screen size, connection type, etc.","title":"Device Context"},"guest_session_id":{"anyOf":[{"maxLength":36,"type":"string"},{"type":"null"}],"description":"UUID for guest session tracking","title":"Guest Session Id"},"observability_candidates":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"description":"Optional top-N candidate objects for observability. Each item may include: position, service_catalog_id (or id), score, vector_score, lexical_score, source.","title":"Observability Candidates"},"results_count":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Number of results returned","title":"Results Count"},"search_context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Additional context like page origin, viewport size, etc.","title":"Search Context"},"search_query":{"description":"The search query string","minLength":1,"title":"Search Query","type":"string"},"search_type":{"default":"natural_language","description":"Type of search: natural_language, category, service_pill, filter, or search_history","title":"Search Type","type":"string"}},"required":["search_query"],"title":"SearchHistoryCreate","type":"object"},"SearchHistoryResponse":{"description":"Schema for search history responses.","properties":{"first_searched_at":{"description":"When the search was first performed","title":"First Searched At","type":"string"},"guest_session_id":{"anyOf":[{"maxLength":36,"type":"string"},{"type":"null"}],"description":"UUID for guest session tracking","title":"Guest Session Id"},"id":{"description":"Unique identifier for the search history entry","title":"Id","type":"string"},"last_searched_at":{"description":"When the search was last performed","title":"Last Searched At","type":"string"},"results_count":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Number of results returned","title":"Results Count"},"search_count":{"description":"Number of times this search was performed","title":"Search Count","type":"integer"},"search_event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of the associated search event for tracking interactions","title":"Search Event Id"},"search_query":{"description":"The search query string","minLength":1,"title":"Search Query","type":"string"},"search_type":{"default":"natural_language","description":"Type of search: natural_language, category, service_pill, filter, or search_history","title":"Search Type","type":"string"}},"required":["search_query","id","first_searched_at","last_searched_at","search_count"],"title":"SearchHistoryResponse","type":"object"},"SearchInteractionResponse":{"description":"Response for recording search interaction.","properties":{"interaction_id":{"title":"Interaction Id","type":"string"},"message":{"default":"Interaction recorded successfully","title":"Message","type":"string"},"status":{"default":"tracked","title":"Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","interaction_id"],"title":"SearchInteractionResponse","type":"object"},"SearchMetadata":{"description":"Search metadata.","properties":{"applied_filters":{"description":"List of applied filters","items":{"type":"string"},"title":"Applied Filters","type":"array"},"observability_candidates":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"description":"Optional top-N candidates considered during search for observability/analytics (position, service_catalog_id, name, score, vector_score, lexical_score, source).","title":"Observability Candidates"},"timestamp":{"description":"Search timestamp (ISO format)","title":"Timestamp","type":"string"},"used_semantic_search":{"description":"Whether semantic search was used","title":"Used Semantic Search","type":"boolean"}},"required":["used_semantic_search","applied_filters","timestamp"],"title":"SearchMetadata","type":"object"},"SearchPerformanceResponse":{"description":"Search performance metrics response.","example":{"effectiveness":{"avg_results_per_search":15.7,"median_results":12.0,"searches_with_results":9500,"zero_result_rate":5.0},"problematic_queries":[{"avg_results":0.5,"count":25,"query":"advanced quantum physics tutor"}],"result_distribution":{"1_5_results":2000,"6_10_results":3000,"over_10_results":4500,"zero_results":500}},"properties":{"effectiveness":{"$ref":"#/components/schemas/SearchEffectiveness","description":"Search effectiveness metrics"},"problematic_queries":{"description":"Queries with poor results","items":{"$ref":"#/components/schemas/ProblematicQuery"},"title":"Problematic Queries","type":"array"},"result_distribution":{"$ref":"#/components/schemas/ResultDistribution","description":"Distribution of search results"}},"required":["result_distribution","effectiveness","problematic_queries"],"title":"SearchPerformanceResponse","type":"object"},"SearchRatingResponse":{"properties":{"is_service_specific":{"title":"Is Service Specific","type":"boolean"},"primary_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Primary Rating"},"review_count":{"title":"Review Count","type":"integer"}},"required":["primary_rating","review_count","is_service_specific"],"title":"SearchRatingResponse","type":"object"},"SearchReferrer":{"description":"Search referrer page data.","example":{"page":"/instructors/123","search_count":250,"search_types":["related","category"],"unique_sessions":180},"properties":{"page":{"description":"Referrer page URL or path","title":"Page","type":"string"},"search_count":{"description":"Number of searches from this page","title":"Search Count","type":"integer"},"search_types":{"description":"Types of searches from this page","items":{"type":"string"},"title":"Search Types","type":"array"},"unique_sessions":{"description":"Number of unique sessions","title":"Unique Sessions","type":"integer"}},"required":["page","search_count","unique_sessions","search_types"],"title":"SearchReferrer","type":"object"},"SearchReferrersResponse":{"description":"Search referrers response.","example":[{"page":"/instructors/123","search_count":250,"search_types":["related","category"],"unique_sessions":180}],"items":{"$ref":"#/components/schemas/SearchReferrer"},"title":"SearchReferrersResponse","type":"array"},"SearchResult":{"description":"Individual search result.","properties":{"coverage_region_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"List of region IDs served by the instructor for quick FE mapping without extra calls","title":"Coverage Region Ids"},"coverage_regions":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"description":"List of regions served with minimal fields: region_id, name, borough, coverage_type","title":"Coverage Regions"},"instructor":{"$ref":"#/components/schemas/app__schemas__search_responses__InstructorInfo","description":"Instructor information"},"match_score":{"description":"Match score (0-100)","title":"Match Score","type":"number"},"offering":{"$ref":"#/components/schemas/ServiceOffering","description":"Service offering details"},"service":{"additionalProperties":true,"description":"Service catalog information","title":"Service","type":"object"}},"required":["service","instructor","offering","match_score"],"title":"SearchResult","type":"object"},"SearchTotals":{"description":"Search totals and deletion metrics.","example":{"deleted_searches":100,"deletion_rate":1.0,"total_searches":10000,"total_users":1300,"unique_guests":800,"unique_users":500},"properties":{"deleted_searches":{"description":"Number of deleted searches","title":"Deleted Searches","type":"integer"},"deletion_rate":{"description":"Percentage of searches deleted","title":"Deletion Rate","type":"number"},"total_searches":{"description":"Total number of searches","title":"Total Searches","type":"integer"},"total_users":{"description":"Total unique users (authenticated + guests)","title":"Total Users","type":"integer"},"unique_guests":{"description":"Unique guest sessions","title":"Unique Guests","type":"integer"},"unique_users":{"description":"Unique authenticated users","title":"Unique Users","type":"integer"}},"required":["total_searches","unique_users","unique_guests","total_users","deleted_searches","deletion_rate"],"title":"SearchTotals","type":"object"},"SearchTrendsResponse":{"description":"Search trends over time response.","example":[{"date":"2025-01-20","total_searches":1234,"unique_guests":200,"unique_users":150}],"items":{"$ref":"#/components/schemas/DailySearchTrend"},"title":"SearchTrendsResponse","type":"array"},"SearchTypeMetrics":{"description":"Metrics for a search type.","example":{"count":2500,"percentage":25.0},"properties":{"count":{"description":"Number of searches of this type","title":"Count","type":"integer"},"percentage":{"description":"Percentage of total searches","title":"Percentage","type":"number"}},"required":["count","percentage"],"title":"SearchTypeMetrics","type":"object"},"SendMessageRequest":{"description":"Request to send a message.","properties":{"booking_id":{"description":"ID of the booking","title":"Booking Id","type":"string"},"content":{"description":"Message content","maxLength":1000,"minLength":1,"title":"Content","type":"string"}},"required":["booking_id","content"],"title":"SendMessageRequest","type":"object"},"SendMessageResponse":{"description":"Response after sending a message.","properties":{"message":{"$ref":"#/components/schemas/MessageResponse"},"success":{"default":true,"title":"Success","type":"boolean"}},"required":["message"],"title":"SendMessageResponse","type":"object"},"SendRemindersResponse":{"description":"Response for sending booking reminders.","properties":{"failed_reminders":{"title":"Failed Reminders","type":"integer"},"message":{"title":"Message","type":"string"},"reminders_sent":{"title":"Reminders Sent","type":"integer"}},"required":["message","reminders_sent","failed_reminders"],"title":"SendRemindersResponse","type":"object"},"ServiceAreaItem":{"properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"neighborhood_id":{"title":"Neighborhood Id","type":"string"},"ntacode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ntacode"}},"required":["neighborhood_id"],"title":"ServiceAreaItem","type":"object"},"ServiceAreasResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ServiceAreaItem"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"ServiceAreasResponse","type":"object"},"ServiceAreasUpdateRequest":{"properties":{"neighborhood_ids":{"items":{"type":"string"},"title":"Neighborhood Ids","type":"array"}},"required":["neighborhood_ids"],"title":"ServiceAreasUpdateRequest","type":"object"},"ServiceCreate":{"description":"Schema for creating a new service.","properties":{"age_groups":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Age groups this service is offered to. Allowed: 'kids', 'adults'. Use both for both.","title":"Age Groups"},"description":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Description"},"duration_options":{"default":[60],"description":"Available duration options for this service in minutes","items":{"type":"integer"},"minItems":1,"title":"Duration Options","type":"array"},"equipment_required":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"List of equipment required (strings)","title":"Equipment Required"},"hourly_rate":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"string"}],"description":"Hourly rate in USD","gt":0,"le":1000,"title":"Hourly Rate"},"levels_taught":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Levels taught. Allowed: 'beginner', 'intermediate', 'advanced'","title":"Levels Taught"},"location_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Where lessons are offered. Allowed: 'in-person', 'online'","title":"Location Types"},"requirements":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Requirements"},"service_catalog_id":{"description":"ID of the service from catalog","title":"Service Catalog Id","type":"string"}},"required":["service_catalog_id","hourly_rate"],"title":"ServiceCreate","type":"object"},"ServiceInfo":{"description":"Basic service information for booking display.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name","description"],"title":"ServiceInfo","type":"object"},"ServiceMetrics":{"description":"Service-level performance metrics.","example":{"cache_operations":800,"db_operations":450,"operations":{"check_conflicts":200,"create_booking":50,"get_availability":1000},"total_operations":1250},"properties":{"cache_operations":{"description":"Cache operations performed","title":"Cache Operations","type":"integer"},"db_operations":{"description":"Database operations performed","title":"Db Operations","type":"integer"},"operations":{"additionalProperties":{"type":"integer"},"description":"Operation counts by type","title":"Operations","type":"object"},"total_operations":{"description":"Total operations performed","title":"Total Operations","type":"integer"}},"required":["operations","total_operations","cache_operations","db_operations"],"title":"ServiceMetrics","type":"object"},"ServiceOffering":{"description":"Service offering details.","properties":{"age_groups":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Age groups served","title":"Age Groups"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Service description","title":"Description"},"duration_options":{"description":"Available session durations in minutes","items":{"type":"integer"},"title":"Duration Options","type":"array"},"equipment_required":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Required equipment","title":"Equipment Required"},"experience_level":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Experience level","title":"Experience Level"},"hourly_rate":{"description":"Hourly rate for the service","title":"Hourly Rate","type":"number"},"id":{"description":"Instructor service ID","title":"Id","type":"string"},"levels_taught":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Levels taught","title":"Levels Taught"},"location_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Location types (online/in-person)","title":"Location Types"},"max_distance_miles":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Maximum travel distance","title":"Max Distance Miles"}},"required":["id","hourly_rate","duration_options"],"title":"ServiceOffering","type":"object"},"ServiceResponse":{"description":"Schema for service responses.\n\nIncludes the service ID and catalog information.","properties":{"age_groups":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Age groups this service is offered to. Allowed: 'kids', 'adults'. Use both for both.","title":"Age Groups"},"description":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Description"},"duration_options":{"default":[60],"description":"Available duration options for this service in minutes","items":{"type":"integer"},"minItems":1,"title":"Duration Options","type":"array"},"equipment_required":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"List of equipment required (strings)","title":"Equipment Required"},"hourly_rate":{"description":"Hourly rate in USD","gt":0,"le":1000,"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"levels_taught":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Levels taught. Allowed: 'beginner', 'intermediate', 'advanced'","title":"Levels Taught"},"location_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Where lessons are offered. Allowed: 'in-person', 'online'","title":"Location Types"},"requirements":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Requirements"},"service_catalog_id":{"description":"ID of the service from catalog","title":"Service Catalog Id","type":"string"}},"required":["service_catalog_id","hourly_rate","id"],"title":"ServiceResponse","type":"object"},"SignedUploadResponse":{"properties":{"expires_at":{"title":"Expires At","type":"string"},"headers":{"additionalProperties":{"type":"string"},"title":"Headers","type":"object"},"object_key":{"title":"Object Key","type":"string"},"public_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Public Url"},"upload_url":{"title":"Upload Url","type":"string"}},"required":["upload_url","object_key","headers","expires_at"],"title":"SignedUploadResponse","type":"object"},"SlotOperation":{"description":"Schema for a single slot operation in bulk update.","properties":{"action":{"enum":["add","remove","update"],"title":"Action","type":"string"},"date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"required":["action"],"title":"SlotOperation","type":"object"},"SlowQueriesResponse":{"description":"Slow queries response.","example":{"slow_queries":[{"duration_ms":523.4,"endpoint":"/api/bookings","query":"SELECT * FROM bookings WHERE ...","timestamp":"2025-01-20T10:30:00Z"}],"total_count":42},"properties":{"slow_queries":{"description":"List of slow queries","items":{"$ref":"#/components/schemas/SlowQueryInfo"},"title":"Slow Queries","type":"array"},"total_count":{"description":"Total number of slow queries tracked","title":"Total Count","type":"integer"}},"required":["slow_queries","total_count"],"title":"SlowQueriesResponse","type":"object"},"SlowQueryInfo":{"description":"Slow query information.","example":{"duration_ms":523.4,"endpoint":"/api/bookings","query":"SELECT * FROM bookings WHERE ...","timestamp":"2025-01-20T10:30:00Z"},"properties":{"duration_ms":{"description":"Query duration in milliseconds","title":"Duration Ms","type":"number"},"endpoint":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"API endpoint that triggered the query","title":"Endpoint"},"query":{"description":"SQL query (truncated)","title":"Query","type":"string"},"timestamp":{"description":"Query execution timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["query","duration_ms","timestamp"],"title":"SlowQueryInfo","type":"object"},"SlowRequestInfo":{"description":"Slow request information.","example":{"duration_ms":1234.5,"method":"GET","path":"/api/instructors/search","status_code":200,"timestamp":"2025-01-20T10:30:00Z"},"properties":{"duration_ms":{"description":"Request duration in milliseconds","title":"Duration Ms","type":"number"},"method":{"description":"HTTP method","title":"Method","type":"string"},"path":{"description":"Request path","title":"Path","type":"string"},"status_code":{"description":"Response status code","title":"Status Code","type":"integer"},"timestamp":{"description":"Request timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["path","method","duration_ms","timestamp","status_code"],"title":"SlowRequestInfo","type":"object"},"SlowRequestsResponse":{"description":"Slow requests response.","example":{"slow_requests":[{"duration_ms":1234.5,"method":"GET","path":"/api/instructors/search","status_code":200,"timestamp":"2025-01-20T10:30:00Z"}],"total_count":15},"properties":{"slow_requests":{"description":"List of slow requests","items":{"$ref":"#/components/schemas/SlowRequestInfo"},"title":"Slow Requests","type":"array"},"total_count":{"description":"Total number of slow requests tracked","title":"Total Count","type":"integer"}},"required":["slow_requests","total_count"],"title":"SlowRequestsResponse","type":"object"},"SpecificDateAvailabilityCreate":{"description":"Schema for creating availability on a specific date.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"specific_date":{"format":"date","title":"Specific Date","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time","specific_date"],"title":"SpecificDateAvailabilityCreate","type":"object"},"StudentInfo":{"description":"Basic student information for booking display.","properties":{"email":{"title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_name":{"title":"Last Name","type":"string"}},"required":["id","first_name","last_name","email"],"title":"StudentInfo","type":"object"},"SuccessResponse":{"description":"Standard success response for operations.","example":{"data":{"updated_fields":["name","email"]},"message":"Operation completed successfully","success":true},"properties":{"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Optional additional data","title":"Data"},"message":{"description":"Human-readable success message","title":"Message","type":"string"},"success":{"default":true,"description":"Operation success status","title":"Success","type":"boolean"}},"required":["message"],"title":"SuccessResponse","type":"object"},"TFADisableRequest":{"properties":{"current_password":{"title":"Current Password","type":"string"}},"required":["current_password"],"title":"TFADisableRequest","type":"object"},"TFADisableResponse":{"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"TFADisableResponse","type":"object"},"TFASetupInitiateResponse":{"properties":{"otpauth_url":{"title":"Otpauth Url","type":"string"},"qr_code_data_url":{"title":"Qr Code Data Url","type":"string"},"secret":{"title":"Secret","type":"string"}},"required":["secret","qr_code_data_url","otpauth_url"],"title":"TFASetupInitiateResponse","type":"object"},"TFASetupVerifyRequest":{"properties":{"code":{"title":"Code","type":"string"}},"required":["code"],"title":"TFASetupVerifyRequest","type":"object"},"TFASetupVerifyResponse":{"properties":{"backup_codes":{"items":{"type":"string"},"title":"Backup Codes","type":"array"},"enabled":{"title":"Enabled","type":"boolean"}},"required":["enabled","backup_codes"],"title":"TFASetupVerifyResponse","type":"object"},"TFAStatusResponse":{"properties":{"enabled":{"title":"Enabled","type":"boolean"},"last_used_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Used At"},"verified_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verified At"}},"required":["enabled"],"title":"TFAStatusResponse","type":"object"},"TFAVerifyLoginRequest":{"properties":{"backup_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Code"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"temp_token":{"title":"Temp Token","type":"string"}},"required":["temp_token"],"title":"TFAVerifyLoginRequest","type":"object"},"TFAVerifyLoginResponse":{"properties":{"access_token":{"title":"Access Token","type":"string"},"token_type":{"title":"Token Type","type":"string"}},"required":["access_token","token_type"],"title":"TFAVerifyLoginResponse","type":"object"},"TimeRange":{"description":"Simple time range for schedule entries.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"TimeRange","type":"object"},"TimeSlot":{"description":"Time slot for availability - simplified without is_available.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"TimeSlot","type":"object"},"Token":{"properties":{"access_token":{"title":"Access Token","type":"string"},"token_type":{"title":"Token Type","type":"string"}},"required":["access_token","token_type"],"title":"Token","type":"object"},"TransactionHistoryItem":{"description":"Individual transaction in payment history.","properties":{"booking_date":{"description":"Date of the booking","title":"Booking Date","type":"string"},"created_at":{"description":"When the payment was created","title":"Created At","type":"string"},"credit_applied":{"description":"Credits applied to this transaction","title":"Credit Applied","type":"number"},"duration_minutes":{"description":"Duration in minutes","title":"Duration Minutes","type":"integer"},"end_time":{"description":"End time of the booking","title":"End Time","type":"string"},"final_amount":{"description":"Final amount charged","title":"Final Amount","type":"number"},"hourly_rate":{"description":"Hourly rate charged","title":"Hourly Rate","type":"number"},"id":{"description":"Payment intent ID","title":"Id","type":"string"},"instructor_name":{"description":"Instructor name (first name + last initial)","title":"Instructor Name","type":"string"},"platform_fee":{"description":"Platform fee charged","title":"Platform Fee","type":"number"},"service_name":{"description":"Service name","title":"Service Name","type":"string"},"start_time":{"description":"Start time of the booking","title":"Start Time","type":"string"},"status":{"description":"Payment status","title":"Status","type":"string"},"total_price":{"description":"Total price before fees","title":"Total Price","type":"number"}},"required":["id","service_name","instructor_name","booking_date","start_time","end_time","duration_minutes","hourly_rate","total_price","platform_fee","credit_applied","final_amount","status","created_at"],"title":"TransactionHistoryItem","type":"object"},"TypingStatusResponse":{"description":"Response for typing indicator endpoints (empty body).","properties":{"success":{"default":true,"title":"Success","type":"boolean"}},"title":"TypingStatusResponse","type":"object"},"UnreadCountResponse":{"description":"Response for unread message count.","properties":{"unread_count":{"title":"Unread Count","type":"integer"},"user_id":{"title":"User Id","type":"string"}},"required":["unread_count","user_id"],"title":"UnreadCountResponse","type":"object"},"UpcomingBookingResponse":{"description":"Simplified response for upcoming bookings widget.\n\nPrivacy-aware: instructor_last_name shows last initial for students,\nfull last name for instructors viewing their own bookings.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor_first_name":{"title":"Instructor First Name","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_last_name":{"title":"Instructor Last Name","type":"string"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"},"student_first_name":{"title":"Student First Name","type":"string"},"student_last_name":{"title":"Student Last Name","type":"string"},"total_price":{"title":"Total Price","type":"number"}},"required":["id","instructor_id","booking_date","start_time","end_time","service_name","student_first_name","student_last_name","instructor_first_name","instructor_last_name","meeting_location","total_price"],"title":"UpcomingBookingResponse","type":"object"},"UserBasicPrivacy":{"description":"Basic user information with privacy protection.\n\nShows only last initial instead of full last name for privacy.\nUsed in student-facing endpoints to protect instructor privacy.\nEmail is omitted for privacy protection.","properties":{"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_initial":{"title":"Last Initial","type":"string"}},"required":["id","first_name","last_initial"],"title":"UserBasicPrivacy","type":"object"},"UserBreakdown":{"description":"User type breakdown.","example":{"authenticated":500,"converted_guests":50,"guest_percentage":61.54,"guests":800,"user_percentage":38.46},"properties":{"authenticated":{"description":"Number of authenticated users","title":"Authenticated","type":"integer"},"converted_guests":{"description":"Number of guests who converted to users","title":"Converted Guests","type":"integer"},"guest_percentage":{"description":"Percentage of guests","title":"Guest Percentage","type":"number"},"guests":{"description":"Number of guest sessions","title":"Guests","type":"integer"},"user_percentage":{"description":"Percentage of authenticated users","title":"User Percentage","type":"number"}},"required":["authenticated","guests","converted_guests","user_percentage","guest_percentage"],"title":"UserBreakdown","type":"object"},"UserCreate":{"properties":{"email":{"format":"email","title":"Email","type":"string"},"first_name":{"maxLength":50,"minLength":1,"title":"First Name","type":"string"},"guest_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":true,"title":"Is Active"},"last_name":{"maxLength":50,"minLength":1,"title":"Last Name","type":"string"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"password":{"title":"Password","type":"string"},"phone":{"anyOf":[{"maxLength":20,"type":"string"},{"type":"null"}],"title":"Phone"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"America/New_York","title":"Timezone"},"zip_code":{"pattern":"^\\d{5}$","title":"Zip Code","type":"string"}},"required":["email","first_name","last_name","zip_code","password"],"title":"UserCreate","type":"object"},"UserDataDeletionRequest":{"description":"Request schema for user data deletion.","properties":{"delete_account":{"default":false,"description":"Whether to delete the entire account or just anonymize data","title":"Delete Account","type":"boolean"}},"title":"UserDataDeletionRequest","type":"object"},"UserDataDeletionResponse":{"description":"Response schema for user data deletion.","properties":{"account_deleted":{"description":"Whether the account was deleted","title":"Account Deleted","type":"boolean"},"deletion_stats":{"additionalProperties":{"type":"integer"},"description":"Statistics of deleted records","title":"Deletion Stats","type":"object"},"message":{"description":"Human-readable message","title":"Message","type":"string"},"status":{"description":"Status of the deletion request","title":"Status","type":"string"}},"required":["status","message","deletion_stats","account_deleted"],"title":"UserDataDeletionResponse","type":"object"},"UserLogin":{"properties":{"email":{"format":"email","title":"Email","type":"string"},"guest_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"},"password":{"title":"Password","type":"string"}},"required":["email","password"],"title":"UserLogin","type":"object"},"UserResponse":{"properties":{"email":{"format":"email","title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"has_profile_picture":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Has Profile Picture"},"id":{"title":"Id","type":"string"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":true,"title":"Is Active"},"last_name":{"title":"Last Name","type":"string"},"permissions":{"default":[],"items":{"type":"string"},"title":"Permissions","type":"array"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"profile_picture_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"title":"Profile Picture Version"},"roles":{"default":[],"items":{"type":"string"},"title":"Roles","type":"array"},"timezone":{"default":"America/New_York","title":"Timezone","type":"string"},"zip_code":{"title":"Zip Code","type":"string"}},"required":["id","email","first_name","last_name","zip_code"],"title":"UserResponse","type":"object"},"UserUpdate":{"properties":{"first_name":{"anyOf":[{"maxLength":50,"minLength":1,"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"maxLength":50,"minLength":1,"type":"string"},{"type":"null"}],"title":"Last Name"},"phone":{"anyOf":[{"maxLength":20,"type":"string"},{"type":"null"}],"title":"Phone"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"zip_code":{"anyOf":[{"pattern":"^\\d{5}$","type":"string"},{"type":"null"}],"title":"Zip Code"}},"title":"UserUpdate","type":"object"},"UserWithPermissionsResponse":{"description":"Enhanced user response with roles and permissions for /me endpoint.","properties":{"beta_access":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Beta Access"},"beta_invited_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Invited By"},"beta_phase":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Phase"},"beta_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Role"},"email":{"format":"email","title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"has_profile_picture":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Has Profile Picture"},"id":{"title":"Id","type":"string"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":true,"title":"Is Active"},"last_name":{"title":"Last Name","type":"string"},"permissions":{"default":[],"items":{"type":"string"},"title":"Permissions","type":"array"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"profile_picture_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"title":"Profile Picture Version"},"roles":{"default":[],"items":{"type":"string"},"title":"Roles","type":"array"},"timezone":{"default":"America/New_York","title":"Timezone","type":"string"},"zip_code":{"title":"Zip Code","type":"string"}},"required":["id","email","first_name","last_name","zip_code"],"title":"UserWithPermissionsResponse","type":"object"},"ValidateWeekRequest":{"description":"Request to validate week changes","properties":{"current_week":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array"},"title":"Current Week","type":"object"},"saved_week":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array"},"title":"Saved Week","type":"object"},"week_start":{"format":"date","title":"Week Start","type":"string"}},"required":["current_week","saved_week","week_start"],"title":"ValidateWeekRequest","type":"object"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"title":"Location","type":"array"},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}},"required":["loc","msg","type"],"title":"ValidationError","type":"object"},"ValidationSlotDetail":{"description":"Details about a slot operation in validation","properties":{"action":{"title":"Action","type":"string"},"conflicts_with":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Conflicts With"},"date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"operation_index":{"title":"Operation Index","type":"integer"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"required":["operation_index","action"],"title":"ValidationSlotDetail","type":"object"},"ValidationSummary":{"description":"Summary of validation results","properties":{"estimated_changes":{"additionalProperties":{"type":"integer"},"title":"Estimated Changes","type":"object"},"has_conflicts":{"title":"Has Conflicts","type":"boolean"},"invalid_operations":{"title":"Invalid Operations","type":"integer"},"operations_by_type":{"additionalProperties":{"type":"integer"},"title":"Operations By Type","type":"object"},"total_operations":{"title":"Total Operations","type":"integer"},"valid_operations":{"title":"Valid Operations","type":"integer"}},"required":["total_operations","valid_operations","invalid_operations","operations_by_type","has_conflicts","estimated_changes"],"title":"ValidationSummary","type":"object"},"WebhookResponse":{"description":"Response for webhook processing.","properties":{"event_type":{"description":"Stripe event type","title":"Event Type","type":"string"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Additional information","title":"Message"},"status":{"description":"Processing status (success, ignored, error)","title":"Status","type":"string"}},"required":["status","event_type"],"title":"WebhookResponse","type":"object"},"WeekAvailabilityUpdateResponse":{"description":"Response for updating weekly availability.","properties":{"message":{"title":"Message","type":"string"},"week_end":{"format":"date","title":"Week End","type":"string"},"week_start":{"format":"date","title":"Week Start","type":"string"},"windows_created":{"title":"Windows Created","type":"integer"},"windows_deleted":{"title":"Windows Deleted","type":"integer"},"windows_updated":{"title":"Windows Updated","type":"integer"}},"required":["message","week_start","week_end","windows_created","windows_updated","windows_deleted"],"title":"WeekAvailabilityUpdateResponse","type":"object"},"WeekSpecificScheduleCreate":{"description":"Schema for creating schedule for specific dates.","properties":{"clear_existing":{"default":true,"description":"Whether to clear existing entries for the week before saving","title":"Clear Existing","type":"boolean"},"schedule":{"items":{"additionalProperties":true,"type":"object"},"title":"Schedule","type":"array"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional optimistic concurrency token (ETag) for this week","title":"Version"},"week_start":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Optional Monday date. If not provided, inferred from schedule dates","title":"Week Start"}},"required":["schedule"],"title":"WeekSpecificScheduleCreate","type":"object"},"WeekValidationResponse":{"description":"Response for week schedule validation","properties":{"details":{"items":{"$ref":"#/components/schemas/ValidationSlotDetail"},"title":"Details","type":"array"},"summary":{"$ref":"#/components/schemas/ValidationSummary"},"valid":{"title":"Valid","type":"boolean"},"warnings":{"default":[],"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["valid","summary","details"],"title":"WeekValidationResponse","type":"object"},"app__routes__addresses__DeleteResponse":{"properties":{"message":{"title":"Message","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","message"],"title":"DeleteResponse","type":"object"},"app__schemas__base_responses__DeleteResponse":{"description":"Standard response for delete operations.","example":{"deleted_at":"2025-01-20T10:30:00Z","message":"Resource deleted successfully","success":true},"properties":{"deleted_at":{"description":"Deletion timestamp","format":"date-time","title":"Deleted At","type":"string"},"message":{"description":"Human-readable deletion message","title":"Message","type":"string"},"success":{"default":true,"description":"Deletion success status","title":"Success","type":"boolean"}},"required":["message"],"title":"DeleteResponse","type":"object"},"app__schemas__booking__InstructorInfo":{"description":"Instructor information for booking display.\n\nPrivacy-aware: Only shows last initial for privacy protection.\nFull last name never exposed to students.","properties":{"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_initial":{"title":"Last Initial","type":"string"}},"required":["id","first_name","last_initial"],"title":"InstructorInfo","type":"object"},"app__schemas__main_responses__PerformanceMetricsResponse":{"description":"Response for performance metrics endpoint.","properties":{"metrics":{"additionalProperties":true,"description":"Performance metrics data","title":"Metrics","type":"object"}},"required":["metrics"],"title":"PerformanceMetricsResponse","type":"object"},"app__schemas__monitoring_responses__PerformanceMetricsResponse":{"description":"Comprehensive performance metrics response.","example":{"availability_service":{"cache_operations":800,"db_operations":200,"operations":{"get_availability":1000},"total_operations":1000},"booking_service":{"cache_operations":10,"db_operations":40,"operations":{"create_booking":50},"total_operations":50},"cache":{"hit_rate":"85.0%","hits":8500,"misses":1500},"conflict_checker":{"cache_operations":150,"db_operations":50,"operations":{"check_conflicts":200},"total_operations":200},"database":{"active_connections":5,"pool_status":{"pool_size":20,"usage_percent":25.0}},"system":{"cpu_percent":25.5,"disk_usage":60.0,"memory_percent":45.2}},"properties":{"availability_service":{"$ref":"#/components/schemas/ServiceMetrics","description":"Availability service metrics"},"booking_service":{"$ref":"#/components/schemas/ServiceMetrics","description":"Booking service metrics"},"cache":{"additionalProperties":true,"description":"Cache statistics","title":"Cache","type":"object"},"conflict_checker":{"$ref":"#/components/schemas/ServiceMetrics","description":"Conflict checker metrics"},"database":{"additionalProperties":true,"description":"Database connection metrics","title":"Database","type":"object"},"system":{"additionalProperties":{"type":"number"},"description":"System resource metrics","title":"System","type":"object"}},"required":["availability_service","booking_service","conflict_checker","cache","system","database"],"title":"PerformanceMetricsResponse","type":"object"},"app__schemas__payment_schemas__DeleteResponse":{"description":"Response for delete operations.","properties":{"success":{"description":"Whether deletion was successful","title":"Success","type":"boolean"}},"required":["success"],"title":"DeleteResponse","type":"object"},"app__schemas__search_responses__InstructorInfo":{"description":"Instructor information in search results with privacy protection.","properties":{"areas_of_service":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Service areas","title":"Areas Of Service"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor bio","title":"Bio"},"first_name":{"description":"Instructor first name","title":"First Name","type":"string"},"id":{"description":"Instructor user ID","title":"Id","type":"string"},"last_initial":{"description":"Instructor last name initial only","title":"Last Initial","type":"string"},"years_experience":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Years of experience","title":"Years Experience"}},"required":["id","first_name","last_initial"],"title":"InstructorInfo","type":"object"}},"securitySchemes":{"OAuth2PasswordBearer":{"flows":{"password":{"scopes":{},"tokenUrl":"auth/login"}},"type":"oauth2"}}},"info":{"description":"Backend API for iNSTAiNSTRU - A platform connecting students with instructors","title":"iNSTAiNSTRU API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/":{"get":{"description":"Root endpoint - API information","operationId":"read_root__get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RootResponse"}}},"description":"Successful Response"}},"summary":"Read Root"}},"/api/account/deactivate":{"post":{"description":"Permanently deactivate the current user's instructor account.\n\nRequirements:\n- User must be an instructor\n- Cannot have any future bookings\n- Deactivated instructors cannot login or be reactivated through the API","operationId":"deactivate_account_api_account_deactivate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Deactivate Account","tags":["account-management"]}},"/api/account/reactivate":{"post":{"description":"Reactivate a suspended instructor account.\n\nRequirements:\n- User must be an instructor\n- Account must be suspended (not deactivated)\n- Once reactivated, instructor can receive bookings again","operationId":"reactivate_account_api_account_reactivate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reactivate Account","tags":["account-management"]}},"/api/account/status":{"get":{"description":"Check the current account status and available status change options.\n\nReturns:\n- Current account status\n- Whether the instructor can login\n- Whether the instructor can receive bookings\n- Available status change options based on current state and future bookings","operationId":"check_account_status_api_account_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Account Status","tags":["account-management"]}},"/api/account/suspend":{"post":{"description":"Suspend the current user's instructor account.\n\nRequirements:\n- User must be an instructor\n- Cannot have any future bookings\n- Suspended instructors can still login but cannot receive new bookings","operationId":"suspend_account_api_account_suspend_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Suspend Account","tags":["account-management"]}},"/api/addresses/coverage/bulk":{"get":{"description":"Return GeoJSON FeatureCollection of neighborhoods served by the given instructors.\n\n'ids' is a comma-separated list of instructor user IDs.","operationId":"get_bulk_coverage_geojson_api_addresses_coverage_bulk_get","parameters":[{"in":"query","name":"ids","required":true,"schema":{"title":"Ids","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoverageFeatureCollectionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Bulk Coverage Geojson","tags":["addresses"]}},"/api/addresses/me":{"get":{"operationId":"list_my_addresses_api_addresses_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressListResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List My Addresses","tags":["addresses"]},"post":{"operationId":"create_my_address_api_addresses_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create My Address","tags":["addresses"]}},"/api/addresses/me/{address_id}":{"delete":{"operationId":"delete_my_address_api_addresses_me__address_id__delete","parameters":[{"in":"path","name":"address_id","required":true,"schema":{"title":"Address Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__routes__addresses__DeleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete My Address","tags":["addresses"]},"patch":{"operationId":"update_my_address_api_addresses_me__address_id__patch","parameters":[{"in":"path","name":"address_id","required":true,"schema":{"title":"Address Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update My Address","tags":["addresses"]}},"/api/addresses/places/autocomplete":{"get":{"description":"Provider-agnostic autocomplete passthrough.\n\nUses the configured provider to retrieve suggestions.","operationId":"places_autocomplete_api_addresses_places_autocomplete_get","parameters":[{"in":"query","name":"q","required":true,"schema":{"title":"Q","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutocompleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Places Autocomplete","tags":["addresses"]}},"/api/addresses/places/details":{"get":{"description":"Return normalized place details for a selected suggestion.\n\nFrontend uses this to auto-fill form fields without exposing provider payloads.","operationId":"place_details_api_addresses_places_details_get","parameters":[{"in":"query","name":"place_id","required":true,"schema":{"title":"Place Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceDetails"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Place Details","tags":["addresses"]}},"/api/addresses/regions/neighborhoods":{"get":{"operationId":"list_neighborhoods_api_addresses_regions_neighborhoods_get","parameters":[{"in":"query","name":"region_type","required":false,"schema":{"default":"nyc","title":"Region Type","type":"string"}},{"in":"query","name":"borough","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":100,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NeighborhoodsListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Neighborhoods","tags":["addresses"]}},"/api/addresses/service-areas/me":{"get":{"operationId":"list_my_service_areas_api_addresses_service_areas_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List My Service Areas","tags":["addresses"]},"put":{"operationId":"replace_my_service_areas_api_addresses_service_areas_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Replace My Service Areas","tags":["addresses"]}},"/api/addresses/zip/is-nyc":{"get":{"description":"Lightweight NYC ZIP check.\n\nArgs:\n    zip: Five-digit ZIP code.\n\nReturns:\n    { \"is_nyc\": bool, \"borough\": Optional[str] }\n\nNotes:\n    - This endpoint is deterministic and does not require geocoding APIs.\n    - It is sufficient for onboarding gating; deeper enrichment occurs when\n      we create an address with lat/lng.","operationId":"is_nyc_zip_api_addresses_zip_is_nyc_get","parameters":[{"in":"query","name":"zip","required":true,"schema":{"title":"Zip","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NYCZipCheckResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Is Nyc Zip","tags":["addresses"]}},"/api/analytics/codebase/history":{"get":{"description":"Return historical metrics from metrics_history.json if present.","operationId":"get_codebase_metrics_history_api_analytics_codebase_history_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodebaseHistoryResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Codebase Metrics History","tags":["analytics"]}},"/api/analytics/codebase/history/append":{"post":{"description":"Append current snapshot to metrics_history.json to persist trends.","operationId":"append_codebase_metrics_history_api_analytics_codebase_history_append_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppendHistoryResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Append Codebase Metrics History","tags":["analytics"]}},"/api/analytics/codebase/metrics":{"get":{"description":"Return the current codebase metrics as JSON.","operationId":"get_codebase_metrics_api_analytics_codebase_metrics_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodebaseMetricsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Codebase Metrics","tags":["analytics"]}},"/api/analytics/export":{"post":{"description":"Export analytics data in various formats.\n\nRequires EXPORT_ANALYTICS permission.\n\nArgs:\n    format: Export format (csv, xlsx, json)\n    current_user: The authenticated user with required permissions\n    db: Database session\n\nReturns:\n    Exported data or download link","operationId":"export_analytics_api_analytics_export_post","parameters":[{"in":"query","name":"format","required":false,"schema":{"default":"csv","title":"Format","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExportAnalyticsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export Analytics","tags":["analytics","analytics"]}},"/api/analytics/search/candidates/category-trends":{"get":{"operationId":"candidates_category_trends_api_analytics_search_candidates_category_trends_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateCategoryTrendsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Category Trends","tags":["analytics","analytics"]}},"/api/analytics/search/candidates/queries":{"get":{"description":"List queries that produced candidates for a given service (recent first).","operationId":"candidate_service_queries_api_analytics_search_candidates_queries_get","parameters":[{"in":"query","name":"service_catalog_id","required":true,"schema":{"title":"Service Catalog Id","type":"string"}},{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateServiceQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidate Service Queries","tags":["analytics","analytics"]}},"/api/analytics/search/candidates/score-distribution":{"get":{"operationId":"candidates_score_distribution_api_analytics_search_candidates_score_distribution_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateScoreDistributionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Score Distribution","tags":["analytics","analytics"]}},"/api/analytics/search/candidates/summary":{"get":{"operationId":"candidates_summary_api_analytics_search_candidates_summary_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Summary","tags":["analytics","analytics"]}},"/api/analytics/search/candidates/top-services":{"get":{"operationId":"candidates_top_services_api_analytics_search_candidates_top_services_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateTopServicesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Top Services","tags":["analytics","analytics"]}},"/api/analytics/search/conversion-metrics":{"get":{"description":"Get guest-to-user conversion metrics.\n\nReturns conversion rates and guest engagement data.","operationId":"get_conversion_metrics_api_analytics_search_conversion_metrics_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionMetricsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Conversion Metrics","tags":["analytics","analytics"]}},"/api/analytics/search/popular-searches":{"get":{"description":"Get most popular search queries.\n\nReturns search queries ordered by frequency with user counts and average results.","operationId":"get_popular_searches_api_analytics_search_popular_searches_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PopularSearchesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Popular Searches","tags":["analytics","analytics"]}},"/api/analytics/search/referrers":{"get":{"description":"Get pages that drive searches (referrers).\n\nReturns referrer pages with search counts and unique sessions.","operationId":"get_search_referrers_api_analytics_search_referrers_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchReferrersResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Referrers","tags":["analytics","analytics"]}},"/api/analytics/search/search-analytics-summary":{"get":{"description":"Get comprehensive search analytics summary.\n\nReturns totals, user breakdown, search types, conversions, and performance metrics.","operationId":"get_search_analytics_summary_api_analytics_search_search_analytics_summary_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchAnalyticsSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Analytics Summary","tags":["analytics","analytics"]}},"/api/analytics/search/search-performance":{"get":{"description":"Get search performance metrics.\n\nReturns result distribution, effectiveness metrics, and problematic queries.","operationId":"get_search_performance_api_analytics_search_search_performance_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchPerformanceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Performance","tags":["analytics","analytics"]}},"/api/analytics/search/search-trends":{"get":{"description":"Get search trends over time.\n\nReturns daily search counts, unique users, and unique guests.","operationId":"get_search_trends_api_analytics_search_search_trends_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchTrendsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Trends","tags":["analytics","analytics"]}},"/api/auth/2fa/disable":{"post":{"operationId":"disable_api_auth_2fa_disable_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFADisableRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFADisableResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Disable","tags":["2fa"]}},"/api/auth/2fa/regenerate-backup-codes":{"post":{"operationId":"regenerate_backup_codes_api_auth_2fa_regenerate_backup_codes_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackupCodesResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Regenerate Backup Codes","tags":["2fa"]}},"/api/auth/2fa/setup/initiate":{"post":{"operationId":"setup_initiate_api_auth_2fa_setup_initiate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupInitiateResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Setup Initiate","tags":["2fa"]}},"/api/auth/2fa/setup/verify":{"post":{"operationId":"setup_verify_api_auth_2fa_setup_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupVerifyRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupVerifyResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Setup Verify","tags":["2fa"]}},"/api/auth/2fa/status":{"get":{"operationId":"status_endpoint_api_auth_2fa_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Status Endpoint","tags":["2fa"]}},"/api/auth/2fa/verify-login":{"post":{"operationId":"verify_login_api_auth_2fa_verify_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAVerifyLoginRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAVerifyLoginResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Verify Login","tags":["2fa"]}},"/api/auth/password-reset/confirm":{"post":{"description":"Confirm password reset with token and new password.\n\nRate limited to prevent token brute forcing.\n\nArgs:\n    request: Token and new password\n    password_reset_service: Password reset service\n\nReturns:\n    PasswordResetResponse: Success message\n\nRaises:\n    HTTPException: If token is invalid, expired, already used, or rate limit exceeded","operationId":"confirm_password_reset_api_auth_password_reset_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetConfirm"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Confirm Password Reset","tags":["password-reset"]}},"/api/auth/password-reset/request":{"post":{"description":"Request a password reset email.\n\nThis endpoint always returns success to prevent email enumeration attacks.\nIf the email exists, a reset link will be sent.\n\nRate limited by both IP and email to prevent abuse.\n\nArgs:\n    request: Email address for password reset\n    password_reset_service: Password reset service\n\nReturns:\n    PasswordResetResponse: Success message\n\nRaises:\n    HTTPException: If rate limit exceeded","operationId":"request_password_reset_api_auth_password_reset_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Request Password Reset","tags":["password-reset"]}},"/api/auth/password-reset/verify/{token}":{"get":{"description":"Verify if a reset token is valid.\n\nThis endpoint can be used by the frontend to check if a token\nis valid before showing the password reset form.\n\nRate limited to prevent token enumeration.\n\nArgs:\n    token: The reset token to verify\n    password_reset_service: Password reset service\n\nReturns:\n    dict: Validity status and user email (masked)\n\nRaises:\n    HTTPException: If rate limit exceeded","operationId":"verify_reset_token_api_auth_password_reset_verify__token__get","parameters":[{"in":"path","name":"token","required":true,"schema":{"title":"Token","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/PasswordResetVerifyResponseValid"},{"$ref":"#/components/schemas/PasswordResetVerifyResponseInvalid"}],"title":"Response Verify Reset Token Api Auth Password Reset Verify  Token  Get"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Verify Reset Token","tags":["password-reset"]}},"/api/beta/invites/consume":{"post":{"operationId":"consume_invite_api_beta_invites_consume_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteConsumeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessGrantResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Consume Invite","tags":["beta"]}},"/api/beta/invites/generate":{"post":{"operationId":"generate_invites_api_beta_invites_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteGenerateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteGenerateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Generate Invites","tags":["beta"]}},"/api/beta/invites/send":{"post":{"operationId":"send_invite_api_beta_invites_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite","tags":["beta"]}},"/api/beta/invites/send-batch":{"post":{"operationId":"send_invite_batch_api_beta_invites_send_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite Batch","tags":["beta"]}},"/api/beta/invites/send-batch-async":{"post":{"operationId":"send_invite_batch_async_api_beta_invites_send_batch_async_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchAsyncStartResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite Batch Async","tags":["beta"]}},"/api/beta/invites/send-batch-progress":{"get":{"operationId":"get_invite_batch_progress_api_beta_invites_send_batch_progress_get","parameters":[{"in":"query","name":"task_id","required":true,"schema":{"title":"Task Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchProgressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Invite Batch Progress","tags":["beta"]}},"/api/beta/invites/validate":{"get":{"operationId":"validate_invite_api_beta_invites_validate_get","parameters":[{"in":"query","name":"code","required":true,"schema":{"title":"Code","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteValidateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Validate Invite","tags":["beta"]}},"/api/beta/metrics/summary":{"get":{"description":"Lightweight summary derived from in-process counters.\n\nNote: Without Prometheus remote-read, we return cumulative counts observed since process start.","operationId":"get_beta_metrics_summary_api_beta_metrics_summary_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaMetricsSummaryResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Beta Metrics Summary","tags":["beta"]}},"/api/beta/settings":{"get":{"operationId":"get_beta_settings_api_beta_settings_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsPayload"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Beta Settings","tags":["beta"]},"put":{"operationId":"update_beta_settings_api_beta_settings_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsPayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsPayload"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Beta Settings","tags":["beta"]}},"/api/database/health":{"get":{"description":"Simple database health check endpoint.\n\nNo authentication required - helps verify database connectivity.\n\nReturns:\n    Database connection status","operationId":"database_health_api_database_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Database Health","tags":["monitoring"]}},"/api/database/pool-status":{"get":{"description":"Get detailed database connection pool statistics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Connection pool metrics including:\n    - Active connections\n    - Available connections\n    - Pool configuration\n    - Usage percentage","operationId":"database_pool_status_api_database_pool_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabasePoolStatusResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Database Pool Status","tags":["monitoring"]}},"/api/database/stats":{"get":{"description":"Get comprehensive database statistics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Database metrics including pool status and performance indicators","operationId":"database_stats_api_database_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseStatsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Database Stats","tags":["monitoring"]}},"/api/favorites":{"get":{"description":"Get the current user's list of favorited instructors.\n\nArgs:\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoritesList with favorited instructors\n\nRaises:\n    HTTPException: If user not found","operationId":"get_favorites_api_favorites_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoritesList"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Favorites","tags":["favorites"]}},"/api/favorites/check/{instructor_id}":{"get":{"description":"Check if the current user has favorited a specific instructor.\n\nArgs:\n    instructor_id: ID of the instructor to check\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    Dictionary with is_favorited boolean\n\nRaises:\n    HTTPException: If user not found","operationId":"check_favorite_status_api_favorites_check__instructor_id__get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Favorite Status","tags":["favorites"]}},"/api/favorites/{instructor_id}":{"delete":{"description":"Remove an instructor from the current user's favorites.\n\nArgs:\n    instructor_id: ID of the instructor to unfavorite\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoriteResponse with success status\n\nRaises:\n    HTTPException: If validation fails or user not found","operationId":"remove_favorite_api_favorites__instructor_id__delete","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Remove Favorite","tags":["favorites"]},"post":{"description":"Add an instructor to the current user's favorites.\n\nArgs:\n    instructor_id: ID of the instructor to favorite\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoriteResponse with success status\n\nRaises:\n    HTTPException: If validation fails or user not found","operationId":"add_favorite_api_favorites__instructor_id__post","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Favorite","tags":["favorites"]}},"/api/messages/config":{"get":{"description":"Public config values for the messaging UI.","operationId":"get_message_config_api_messages_config_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageConfigResponse"}}},"description":"Successful Response"}},"summary":"Get Message Config","tags":["messages"]}},"/api/messages/history/{booking_id}":{"get":{"description":"Get message history for a booking.\n\nReturns paginated list of messages in chronological order.\nRequires VIEW_MESSAGES permission.","operationId":"get_message_history_api_messages_history__booking_id__get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"minimum":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessagesHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Message History","tags":["messages"]}},"/api/messages/mark-read":{"post":{"description":"Mark messages as read.\n\nCan mark specific messages or all messages in a booking.\nRequires VIEW_MESSAGES permission.","operationId":"mark_messages_as_read_api_messages_mark_read_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarkMessagesReadRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarkMessagesReadResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark Messages As Read","tags":["messages"]}},"/api/messages/send":{"post":{"description":"Send a message in a booking chat.\n\nRequires SEND_MESSAGES permission.\nRate limited to 10 messages per minute.","operationId":"send_message_api_messages_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Message","tags":["messages"]}},"/api/messages/stream/{booking_id}":{"get":{"description":"SSE endpoint for real-time message streaming.\n\nEstablishes a Server-Sent Events connection for receiving\nreal-time messages for a specific booking.\n\nRequires VIEW_MESSAGES permission.\nNote: Permission check is done manually since SSE endpoints\ncan't use regular FastAPI dependencies with EventSource.","operationId":"stream_messages_api_messages_stream__booking_id__get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}},{"in":"query","name":"token","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Token"}},{"in":"cookie","name":"access_token","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"content":{"application/json":{"schema":{}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Stream Messages","tags":["messages"]}},"/api/messages/typing/{booking_id}":{"post":{"description":"Send a typing indicator for a booking chat (ephemeral, no DB writes).\nBroadcasts a NOTIFY with type=typing_status.","operationId":"send_typing_indicator_api_messages_typing__booking_id__post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TypingStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Typing Indicator","tags":["messages"]}},"/api/messages/unread-count":{"get":{"description":"Get total unread message count for current user.\n\nRequires VIEW_MESSAGES permission.","operationId":"get_unread_count_api_messages_unread_count_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnreadCountResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Unread Count","tags":["messages"]}},"/api/messages/{message_id}":{"delete":{"description":"Soft delete a message.\n\nOnly the sender can delete their own messages.\nRequires SEND_MESSAGES permission.","operationId":"delete_message_api_messages__message_id__delete","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteMessageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Message","tags":["messages"]},"patch":{"operationId":"edit_message_api_messages__message_id__patch","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditMessageRequest"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Edit Message","tags":["messages"]}},"/api/messages/{message_id}/reactions":{"delete":{"operationId":"remove_reaction_api_messages__message_id__reactions_delete","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReactionRequest"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Remove Reaction","tags":["messages"]},"post":{"operationId":"add_reaction_api_messages__message_id__reactions_post","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReactionRequest"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Reaction","tags":["messages"]}},"/api/monitoring/alerts/acknowledge/{alert_type}":{"post":{"description":"Acknowledge an alert to reset its cooldown.","operationId":"acknowledge_alert_api_monitoring_alerts_acknowledge__alert_type__post","parameters":[{"in":"path","name":"alert_type","required":true,"schema":{"title":"Alert Type","type":"string"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertAcknowledgeResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Acknowledge Alert","tags":["monitoring"]}},"/api/monitoring/alerts/live":{"get":{"description":"Get very recent alerts (similar to live view).","operationId":"get_live_alerts_api_monitoring_alerts_live_get","parameters":[{"description":"Get alerts from last N minutes","in":"query","name":"minutes","required":false,"schema":{"default":5,"description":"Get alerts from last N minutes","title":"Minutes","type":"integer"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LiveAlertsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Live Alerts","tags":["monitoring"]}},"/api/monitoring/alerts/recent":{"get":{"description":"Get recent alerts from the database.","operationId":"get_recent_alerts_api_monitoring_alerts_recent_get","parameters":[{"description":"Get alerts from last N hours","in":"query","name":"hours","required":false,"schema":{"default":24,"description":"Get alerts from last N hours","title":"Hours","type":"integer"}},{"description":"Maximum number of alerts to return","in":"query","name":"limit","required":false,"schema":{"default":50,"description":"Maximum number of alerts to return","title":"Limit","type":"integer"}},{"description":"Filter by severity","in":"query","name":"severity","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by severity","title":"Severity"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecentAlertsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Recent Alerts","tags":["monitoring"]}},"/api/monitoring/alerts/summary":{"get":{"description":"Get alert summary statistics.","operationId":"get_alert_summary_api_monitoring_alerts_summary_get","parameters":[{"description":"Number of days to summarize","in":"query","name":"days","required":false,"schema":{"default":7,"description":"Number of days to summarize","title":"Days","type":"integer"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Alert Summary","tags":["monitoring"]}},"/api/monitoring/cache/extended-stats":{"get":{"description":"Get extended cache statistics.","operationId":"get_extended_cache_stats_api_monitoring_cache_extended_stats_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtendedCacheStats"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Extended Cache Stats","tags":["monitoring"]}},"/api/monitoring/dashboard":{"get":{"description":"Get comprehensive monitoring dashboard data.\n\nRequires monitoring API key in production.","operationId":"get_monitoring_dashboard_api_monitoring_dashboard_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitoringDashboardResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Monitoring Dashboard","tags":["monitoring"]}},"/api/monitoring/payment-health":{"get":{"description":"Get payment system health metrics.\n\nReturns metrics about:\n- Pending authorizations\n- Failed authorizations\n- Recent processing activity\n- System alerts\n\nRequires monitoring API key in production.","operationId":"get_payment_system_health_api_monitoring_payment_health_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Payment System Health","tags":["monitoring"]}},"/api/monitoring/slow-queries":{"get":{"description":"Get recent slow queries.","operationId":"get_slow_queries_api_monitoring_slow_queries_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":10,"title":"Limit","type":"integer"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowQueriesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Slow Queries","tags":["monitoring"]}},"/api/monitoring/slow-requests":{"get":{"description":"Get recent slow requests.","operationId":"get_slow_requests_api_monitoring_slow_requests_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":10,"title":"Limit","type":"integer"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowRequestsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Slow Requests","tags":["monitoring"]}},"/api/monitoring/trigger-payment-health-check":{"post":{"description":"Manually trigger a payment system health check.\n\nThis will run the health check task immediately and return the results.\n\nRequires monitoring API key in production.","operationId":"trigger_payment_health_check_api_monitoring_trigger_payment_health_check_post","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentHealthCheckTriggerResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Trigger Payment Health Check","tags":["monitoring"]}},"/api/payments/checkout":{"post":{"description":"Create a checkout/payment for a booking.\n\nArgs:\n    request: Checkout details including booking and payment method\n\nReturns:\n    CheckoutResponse with payment details\n\nRaises:\n    HTTPException: If checkout creation fails","operationId":"create_checkout_api_payments_checkout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Checkout","tags":["payments"]}},"/api/payments/connect/dashboard":{"get":{"description":"Get a link to the Stripe Express dashboard for an instructor.\n\nReturns:\n    DashboardLinkResponse with dashboard URL\n\nRaises:\n    HTTPException: If dashboard link creation fails","operationId":"get_dashboard_link_api_payments_connect_dashboard_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardLinkResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Dashboard Link","tags":["payments"]}},"/api/payments/connect/instant-payout":{"post":{"description":"Trigger an instant payout for an instructor's connected account.\n\nUses Stripe's instant payout capability (account eligibility required). This does NOT aggregate platform funds; it\ntriggers Stripe to pay out the instructor's available balance instantly. We record a metric for adoption.","operationId":"request_instant_payout_api_payments_connect_instant_payout_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstantPayoutResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Request Instant Payout","tags":["payments"]}},"/api/payments/connect/onboard":{"post":{"description":"Start Stripe Connect onboarding for an instructor.\n\nCreates a Stripe Express account and generates an onboarding link.\nIf the instructor already has an account, returns existing details.\n\nReturns:\n    OnboardingResponse with account ID and onboarding URL\n\nRaises:\n    HTTPException: If onboarding setup fails","operationId":"start_onboarding_api_payments_connect_onboard_post","parameters":[{"in":"query","name":"return_to","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Return To"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Start Onboarding","tags":["payments"]}},"/api/payments/connect/payout-schedule":{"post":{"description":"Set payout schedule for the current instructor's connected account.\n\nDefault: weekly on Tuesday. Valid anchors: monday..sunday.","operationId":"set_payout_schedule_api_payments_connect_payout_schedule_post","parameters":[{"in":"query","name":"interval","required":false,"schema":{"default":"weekly","title":"Interval","type":"string"}},{"in":"query","name":"weekly_anchor","required":false,"schema":{"default":"tuesday","title":"Weekly Anchor","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayoutScheduleResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Set Payout Schedule","tags":["payments"]}},"/api/payments/connect/status":{"get":{"description":"Get the onboarding status for an instructor's Stripe account.\n\nReturns:\n    OnboardingStatusResponse with account status details\n\nRaises:\n    HTTPException: If status check fails","operationId":"get_onboarding_status_api_payments_connect_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Onboarding Status","tags":["payments"]}},"/api/payments/credits":{"get":{"description":"Get user's credit balance\n\nReturns available credits and expiration","operationId":"get_credit_balance_api_payments_credits_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreditBalanceResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Credit Balance","tags":["payments"]}},"/api/payments/earnings":{"get":{"description":"Get earnings statistics for an instructor.\n\nReturns:\n    Instructor earnings data\n\nRaises:\n    HTTPException: If earnings calculation fails","operationId":"get_instructor_earnings_api_payments_earnings_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EarningsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Instructor Earnings","tags":["payments"]}},"/api/payments/identity/refresh":{"post":{"description":"Fetch latest Stripe Identity status and persist verification on success.\n\nThis avoids blocking general status calls and lets the UI trigger a one-off refresh\nright after the modal/hosted flow returns.","operationId":"refresh_identity_status_api_payments_identity_refresh_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentityRefreshResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Refresh Identity Status","tags":["payments"]}},"/api/payments/identity/session":{"post":{"description":"Create a Stripe Identity verification session for the current user.","operationId":"create_identity_session_api_payments_identity_session_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentitySessionResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Identity Session","tags":["payments"]}},"/api/payments/methods":{"get":{"description":"List all payment methods for a student.\n\nReturns:\n    List of PaymentMethodResponse objects\n\nRaises:\n    HTTPException: If payment method listing fails","operationId":"list_payment_methods_api_payments_methods_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PaymentMethodResponse"},"title":"Response List Payment Methods Api Payments Methods Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Payment Methods","tags":["payments"]},"post":{"description":"Save a payment method for a student.\n\nArgs:\n    request: Payment method details\n\nReturns:\n    PaymentMethodResponse with saved payment method details\n\nRaises:\n    HTTPException: If payment method saving fails","operationId":"save_payment_method_api_payments_methods_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavePaymentMethodRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentMethodResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Save Payment Method","tags":["payments"]}},"/api/payments/methods/{method_id}":{"delete":{"description":"Delete a payment method for a student.\n\nArgs:\n    method_id: Payment method ID to delete\n\nReturns:\n    Success confirmation\n\nRaises:\n    HTTPException: If payment method deletion fails","operationId":"delete_payment_method_api_payments_methods__method_id__delete","parameters":[{"in":"path","name":"method_id","required":true,"schema":{"title":"Method Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__payment_schemas__DeleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Payment Method","tags":["payments"]}},"/api/payments/transactions":{"get":{"description":"Get user's transaction history\n\nReturns list of completed payments with booking details","operationId":"get_transaction_history_api_payments_transactions_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":20,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TransactionHistoryItem"},"title":"Response Get Transaction History Api Payments Transactions Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Transaction History","tags":["payments"]}},"/api/payments/webhooks/stripe":{"post":{"description":"Handle Stripe webhook events from both platform and connected accounts.\n\nWorks with both local development (single secret) and deployed environments (multiple secrets).\nTries each configured webhook secret until one successfully verifies the signature.\n\nReturns:\n    Success confirmation (always returns 200 to prevent Stripe retries)\n\nNote:\n    This endpoint has no authentication as it uses webhook signature verification","operationId":"handle_stripe_webhook_api_payments_webhooks_stripe_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Handle Stripe Webhook","tags":["payments"]}},"/api/privacy/delete/me":{"post":{"description":"Delete user data (GDPR right to be forgotten).\n\nCan either anonymize data or completely delete the account.","operationId":"delete_my_data_api_privacy_delete_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete My Data","tags":["privacy","privacy"]}},"/api/privacy/delete/user/{user_id}":{"post":{"description":"Delete data for any user (admin only).\n\nFor handling deletion requests on behalf of users.","operationId":"delete_user_data_admin_api_privacy_delete_user__user_id__post","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete User Data Admin","tags":["privacy","privacy"]}},"/api/privacy/export/me":{"get":{"description":"Export all data for the current user (GDPR data portability).\n\nReturns all personal data in a structured format.","operationId":"export_my_data_api_privacy_export_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataExportResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export My Data","tags":["privacy","privacy"]}},"/api/privacy/export/user/{user_id}":{"get":{"description":"Export data for any user (admin only).\n\nFor handling data requests on behalf of users.","operationId":"export_user_data_admin_api_privacy_export_user__user_id__get","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataExportResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export User Data Admin","tags":["privacy","privacy"]}},"/api/privacy/retention/apply":{"post":{"description":"Manually trigger data retention policies (admin only).\n\nThis is usually run automatically via scheduled tasks.","operationId":"apply_retention_policies_api_privacy_retention_apply_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetentionPolicyResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Apply Retention Policies","tags":["privacy","privacy"]}},"/api/privacy/statistics":{"get":{"description":"Get privacy and data retention statistics (admin only).\n\nShows counts of data eligible for retention policies.","operationId":"get_privacy_statistics_api_privacy_statistics_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivacyStatisticsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Privacy Statistics","tags":["privacy","privacy"]}},"/api/public/instructors/{instructor_id}/availability":{"get":{"description":"Public endpoint to view instructor's available time slots for booking. No authentication required. Response detail level depends on configuration.","operationId":"get_instructor_public_availability_api_public_instructors__instructor_id__availability_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"description":"Start date for availability search","in":"query","name":"start_date","required":true,"schema":{"description":"Start date for availability search","format":"date","title":"Start Date","type":"string"}},{"description":"End date (defaults to configured days from start)","in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"End date (defaults to configured days from start)","title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicInstructorAvailability"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get instructor availability for students","tags":["public"]}},"/api/public/instructors/{instructor_id}/next-available":{"get":{"description":"Quick endpoint to find the next available booking slot","operationId":"get_next_available_slot_api_public_instructors__instructor_id__next_available_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"description":"Required duration in minutes","in":"query","name":"duration_minutes","required":false,"schema":{"default":60,"description":"Required duration in minutes","title":"Duration Minutes","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextAvailableSlotResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get next available slot for an instructor","tags":["public"]}},"/api/public/logout":{"post":{"description":"Clear known session cookies. Public to support cross-origin preview logout.\n\nThis does not revoke server sessions; it only instructs the browser to drop cookies.","operationId":"public_logout_api_public_logout_post","responses":{"200":{"content":{"application/json":{"schema":{}}},"description":"Successful Response"}},"summary":"Public Logout","tags":["public"]}},"/api/public/referrals/send":{"post":{"description":"Send referral invitation emails to one or more recipients.","operationId":"send_referral_invites_api_public_referrals_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Send referral invites","tags":["public"]}},"/api/public/session/guest":{"post":{"description":"Issue a first-party guest_id cookie used for optional auth endpoints.\n\nSets cookie attributes appropriate for cross-site subdomains in preview/prod.","operationId":"create_guest_session_api_public_session_guest_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSessionResponse"}}},"description":"Successful Response"}},"summary":"Create Guest Session","tags":["public"]}},"/api/redis/celery-queues":{"get":{"description":"Get Celery queue status and pending tasks.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Queue lengths and task counts","operationId":"celery_queue_status_api_redis_celery_queues_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisCeleryQueuesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Celery Queue Status","tags":["monitoring"]}},"/api/redis/connection-audit":{"get":{"description":"Audit all Redis connections across the system.\n\nChecks which Redis instance each service is using and identifies\nany remaining Upstash connections.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Summary of Redis connections across all services","operationId":"redis_connection_audit_api_redis_connection_audit_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisConnectionAuditResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Redis Connection Audit","tags":["monitoring"]}},"/api/redis/flush-queues":{"delete":{"description":"Flush all Celery queues (DANGER: removes all pending tasks).\n\nRequires ACCESS_MONITORING permission.\nUse with caution - this will delete all pending tasks!\n\nReturns:\n    Number of tasks removed from each queue","operationId":"flush_celery_queues_api_redis_flush_queues_delete","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisFlushQueuesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Flush Celery Queues","tags":["monitoring"]}},"/api/redis/health":{"get":{"description":"Check Redis connection health.\n\nReturns:\n    Basic health status","operationId":"redis_health_api_redis_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Redis Health","tags":["monitoring"]}},"/api/redis/stats":{"get":{"description":"Get detailed Redis statistics and metrics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Comprehensive Redis metrics including:\n    - Memory usage\n    - Connection stats\n    - Operation counts\n    - Celery queue lengths","operationId":"redis_stats_api_redis_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisStatsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Redis Stats","tags":["monitoring"]}},"/api/redis/test":{"get":{"description":"Simple Redis connection test endpoint.\n\nNo authentication required - helps verify Redis migration is working.\n\nReturns:\n    Connection status and basic info","operationId":"redis_test_api_redis_test_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisTestResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Redis Test","tags":["monitoring"]}},"/api/reviews/booking/existing":{"post":{"operationId":"get_existing_reviews_for_bookings_api_reviews_booking_existing_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"title":"Booking Ids","type":"array"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"items":{"type":"string"},"title":"Response Get Existing Reviews For Bookings Api Reviews Booking Existing Post","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Existing Reviews For Bookings","tags":["reviews"]}},"/api/reviews/booking/{booking_id}":{"get":{"operationId":"get_review_for_booking_api_reviews_booking__booking_id__get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ReviewItem"},{"type":"null"}],"title":"Response Get Review For Booking Api Reviews Booking  Booking Id  Get"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Review For Booking","tags":["reviews"]}},"/api/reviews/instructor/{instructor_id}/ratings":{"get":{"operationId":"get_instructor_ratings_api_reviews_instructor__instructor_id__ratings_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorRatingsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Instructor Ratings","tags":["reviews"]}},"/api/reviews/instructor/{instructor_id}/recent":{"get":{"operationId":"get_recent_reviews_api_reviews_instructor__instructor_id__recent_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"in":"query","name":"instructor_service_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Service Id"}},{"in":"query","name":"limit","required":false,"schema":{"default":10,"maximum":50,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"min_rating","required":false,"schema":{"anyOf":[{"maximum":5,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Min Rating"}},{"in":"query","name":"with_text","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"With Text"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewListPageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Recent Reviews","tags":["reviews"]}},"/api/reviews/instructor/{instructor_id}/search-rating":{"get":{"operationId":"get_search_rating_api_reviews_instructor__instructor_id__search_rating_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"in":"query","name":"instructor_service_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Service Id"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRatingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Search Rating","tags":["reviews"]}},"/api/reviews/ratings/batch":{"post":{"operationId":"get_ratings_batch_api_reviews_ratings_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingsBatchRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingsBatchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Ratings Batch","tags":["reviews"]}},"/api/reviews/reviews/{review_id}/respond":{"post":{"operationId":"respond_to_review_api_reviews_reviews__review_id__respond_post","parameters":[{"in":"path","name":"review_id","required":true,"schema":{"title":"Review Id","type":"string"}},{"in":"query","name":"response_text","required":true,"schema":{"title":"Response Text","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponseModel"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Respond To Review","tags":["reviews"]}},"/api/reviews/submit":{"post":{"operationId":"submit_review_api_reviews_submit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewSubmitRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewSubmitResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Submit Review","tags":["reviews"]}},"/api/search-history/":{"get":{"description":"Get recent searches for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\n\nArgs:\n    limit: Maximum number of searches to return (default 3)\n    context: Search context with user/guest identity\n    db: Database session\n\nReturns:\n    List of recent search history entries","operationId":"get_recent_searches_api_search_history__get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":3,"title":"Limit","type":"integer"}},{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SearchHistoryResponse"},"title":"Response Get Recent Searches Api Search History  Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Recent Searches","tags":["search-history"]},"post":{"description":"Record a search for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\nOptional headers:\n- X-Session-ID: Browser session ID for analytics\n- X-Search-Origin: Page where search originated\n\nArgs:\n    search_data: The search details to record\n    context: Search context with user/guest identity and tracking info\n    db: Database session\n\nReturns:\n    The created or updated search history entry","operationId":"record_search_api_search_history__post","parameters":[{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Record Search","tags":["search-history"]}},"/api/search-history/interaction":{"post":{"description":"Track user interaction with search results.\n\nRecords clicks, hovers, bookmarks, and other interactions with search results\nto measure search effectiveness and result relevance.\n\nArgs:\n    interaction_data: Interaction details including:\n        - search_event_id: ID of the search event\n        - interaction_type: Type of interaction (click, hover, bookmark)\n        - instructor_id: ID of the instructor interacted with\n        - result_position: Position in search results\n        - time_to_interaction: Time from search to interaction (seconds)\n    request: HTTP request for headers\n    context: Search user context\n    db: Database session\n\nReturns:\n    Interaction tracking confirmation","operationId":"track_interaction_api_search_history_interaction_post","parameters":[{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Interaction Data","type":"object"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchInteractionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Track Interaction","tags":["search-history"]}},"/api/search-history/{search_id}":{"delete":{"description":"Delete a search for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\n\nArgs:\n    search_id: ID of the search to delete\n    current_user: The authenticated user (if applicable)\n    x_guest_session_id: Guest session ID header (if applicable)\n    db: Database session\n\nReturns:\n    204 No Content on success\n\nRaises:\n    404 if search not found or doesn't belong to the user/guest","operationId":"delete_search_api_search_history__search_id__delete","parameters":[{"in":"path","name":"search_id","required":true,"schema":{"title":"Search Id","type":"string"}},{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Search","tags":["search-history"]}},"/api/search/instructors":{"get":{"description":"Search for instructors using natural language queries.\n\nSupports queries like:\n- \"piano lessons under $50\"\n- \"math tutor near me\"\n- \"online yoga classes\"\n- \"SAT prep this weekend\"\n\nArgs:\n    q: The search query string\n    limit: Maximum number of results to return (1-100, default 20)\n    db: Database session\n\nReturns:\n    Search results with instructors, services, and metadata","operationId":"search_instructors_api_search_instructors_get","parameters":[{"description":"Search query","in":"query","name":"q","required":true,"schema":{"description":"Search query","minLength":1,"title":"Q","type":"string"}},{"description":"Maximum results to return","in":"query","name":"limit","required":false,"schema":{"anyOf":[{"maximum":100,"minimum":1,"type":"integer"},{"type":"null"}],"default":20,"description":"Maximum results to return","title":"Limit"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Search Instructors","tags":["search"]}},"/api/uploads/r2/finalize/profile-picture":{"post":{"description":"Finalize a previously uploaded profile picture: validate, process, version, store.","operationId":"finalize_profile_picture_api_uploads_r2_finalize_profile_picture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalizeProfilePictureRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Finalize Profile Picture","tags":["uploads"]}},"/api/uploads/r2/signed-url":{"post":{"description":"Create a short-lived signed PUT URL for uploading files to R2.\n\nWe implement SigV4 signing locally to avoid requiring boto3.","operationId":"create_signed_upload_api_uploads_r2_signed_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSignedUploadRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedUploadResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Signed Upload","tags":["uploads"]}},"/api/users/me/profile-picture":{"delete":{"operationId":"delete_profile_picture_api_users_me_profile_picture_delete","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__base_responses__DeleteResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Profile Picture","tags":["users","assets"]},"post":{"operationId":"upload_finalize_profile_picture_api_users_me_profile_picture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalizeProfilePicturePayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Upload Finalize Profile Picture","tags":["users","assets"]}},"/api/users/{user_id}/profile-picture-url":{"get":{"operationId":"get_profile_picture_url_api_users__user_id__profile_picture_url_get","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}},{"in":"query","name":"variant","required":false,"schema":{"anyOf":[{"enum":["original","display","thumb"],"type":"string"},{"type":"null"}],"default":"display","title":"Variant"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Profile Picture Url","tags":["users","assets"]}},"/api/webhooks/stripe":{"post":{"description":"Redirect old webhook URL to new location.\n\nThis endpoint exists for backward compatibility with webhooks configured\nat /api/webhooks/stripe instead of /api/payments/webhooks/stripe.\nIt simply forwards the request to the correct handler.","operationId":"redirect_stripe_webhook_api_webhooks_stripe_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Redirect Stripe Webhook"}},"/auth/change-password":{"post":{"description":"Change password for the current authenticated user.\n\nVerifies the current password, enforces minimal strength, and updates the hash.","operationId":"change_password_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Change Password","tags":["auth"]}},"/auth/login":{"post":{"description":"Login with username (email) and password.\n\nRate limited to prevent brute force attacks.\n\nArgs:\n    form_data: OAuth2 form with username and password\n    auth_service: Authentication service\n\nReturns:\n    Token: Access token and token type\n\nRaises:\n    HTTPException: If credentials are invalid or rate limit exceeded","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Login","tags":["auth"]}},"/auth/login-with-session":{"post":{"description":"Login with email and password, optionally converting guest searches.\n\nThis endpoint supports guest session conversion.\n\nArgs:\n    login_data: Login credentials with optional guest_session_id\n    auth_service: Authentication service\n    db: Database session\n\nReturns:\n    Token: Access token and token type\n\nRaises:\n    HTTPException: If credentials are invalid or rate limit exceeded","operationId":"login_with_session_auth_login_with_session_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Login With Session","tags":["auth"]}},"/auth/me":{"get":{"description":"Get current user information with roles and permissions.\n\nNo additional rate limiting as this requires authentication.\n\nArgs:\n    current_user: Current user email from JWT\n    auth_service: Authentication service\n    db: Database session\n\nReturns:\n    UserWithPermissionsResponse: Current user data with roles and permissions\n\nRaises:\n    HTTPException: If user not found","operationId":"read_users_me_auth_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithPermissionsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Read Users Me","tags":["auth"]},"patch":{"description":"Update current user's profile (including timezone).\n\nArgs:\n    user_update: Fields to update\n    current_user: Current user email from JWT\n    auth_service: Authentication service\n    db: Database session\n\nReturns:\n    UserWithPermissionsResponse: Updated user data\n\nRaises:\n    HTTPException: If user not found or update fails","operationId":"update_current_user_auth_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithPermissionsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Current User","tags":["auth"]}},"/auth/register":{"post":{"description":"Register a new user.\n\nRate limited to prevent spam registrations.\n\nArgs:\n    user: User creation data (including optional guest_session_id)\n    auth_service: Authentication service\n    db: Database session\n\nReturns:\n    UserResponse: The created user\n\nRaises:\n    HTTPException: If email already registered or rate limit exceeded","operationId":"register_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Register","tags":["auth"]}},"/bookings/":{"get":{"description":"Get bookings for the current user with advanced filtering.\n\nParameters:\n- status: Filter by specific booking status\n- upcoming/upcoming_only: Only return future bookings (accepts both parameter names)\n- exclude_future_confirmed: Exclude future confirmed bookings (for History tab)\n- include_past_confirmed: Include past confirmed bookings (for BookAgain)\n- page/per_page: Pagination parameters\n\nReturns: Standardized PaginatedResponse with BookingResponse items","operationId":"get_bookings_bookings__get","parameters":[{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingStatus"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"upcoming_only","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Upcoming Only"}},{"in":"query","name":"upcoming","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Upcoming"}},{"in":"query","name":"exclude_future_confirmed","required":false,"schema":{"default":false,"title":"Exclude Future Confirmed","type":"boolean"}},{"in":"query","name":"include_past_confirmed","required":false,"schema":{"default":false,"title":"Include Past Confirmed","type":"boolean"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Bookings","tags":["bookings"]},"post":{"description":"Create a booking with payment setup (Phase 2.1).\n\nTwo-step flow:\n1. Creates booking with 'pending_payment' status\n2. Returns SetupIntent client_secret for card collection\n3. Frontend collects card details\n4. Call /bookings/{id}/confirm-payment to complete\n\nCLEAN ARCHITECTURE: Uses instructor_id, date, and time range.\nNo slot references. Bookings are self-contained.\n\nRate limited per user to prevent booking spam.","operationId":"create_booking_bookings__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Booking","tags":["bookings"]}},"/bookings/check-availability":{"post":{"description":"Check if a time range is available for booking.\n\nCLEAN ARCHITECTURE: Uses time-based checking.\nNo slot references. Direct time conflict checking.\n\nRate limited to prevent abuse of expensive availability checks.","operationId":"check_availability_bookings_check_availability_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCheckRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCheckResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Availability","tags":["bookings"]}},"/bookings/send-reminders":{"post":{"description":"Send 24-hour reminder emails for tomorrow's bookings.\n\nShould be called by scheduled job/cron.\nRate limited to prevent email spam.\n\nRequires: MANAGE_ALL_BOOKINGS permission (admin only)","operationId":"send_reminder_emails_bookings_send_reminders_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendRemindersResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Reminder Emails","tags":["bookings"]}},"/bookings/stats":{"get":{"description":"Get booking statistics for instructors.","operationId":"get_booking_stats_bookings_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingStatsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Stats","tags":["bookings"]}},"/bookings/upcoming":{"get":{"description":"Get upcoming bookings for dashboard widget.","operationId":"get_upcoming_bookings_bookings_upcoming_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":5,"maximum":20,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_UpcomingBookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Upcoming Bookings","tags":["bookings"]}},"/bookings/{booking_id}":{"get":{"description":"Get full booking details with privacy protection for students.","operationId":"get_booking_details_bookings__booking_id__get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Details","tags":["bookings"]},"patch":{"description":"Update booking details (instructor only).","operationId":"update_booking_bookings__booking_id__patch","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Booking","tags":["bookings"]}},"/bookings/{booking_id}/cancel":{"post":{"description":"Cancel a booking.","operationId":"cancel_booking_bookings__booking_id__cancel_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCancel"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Cancel Booking","tags":["bookings"]}},"/bookings/{booking_id}/complete":{"post":{"description":"Mark a booking as completed.\n\nRequires: COMPLETE_BOOKINGS permission (instructor only)","operationId":"complete_booking_bookings__booking_id__complete_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Complete Booking","tags":["bookings"]}},"/bookings/{booking_id}/confirm-payment":{"post":{"description":"Confirm payment method for a booking (Phase 2.1).\n\nCalled after frontend collects card details via SetupIntent.\nThis completes the booking creation flow:\n1. Saves payment method to booking\n2. Schedules authorization based on lesson timing\n3. Updates booking status from 'pending_payment' to 'confirmed'\n\nArgs:\n    booking_id: The booking to confirm payment for\n    payment_data: Payment method ID and save preference\n\nReturns:\n    Updated BookingResponse with confirmed status","operationId":"confirm_booking_payment_bookings__booking_id__confirm_payment_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingConfirmPayment"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Confirm Booking Payment","tags":["bookings"]}},"/bookings/{booking_id}/payment-method":{"patch":{"description":"Update booking payment method and retry authorization immediately.\n\n- Verifies ownership (student)\n- Saves payment method (optional set_as_default)\n- Retries authorization off-session (immediate if <24h)","operationId":"update_booking_payment_method_bookings__booking_id__payment_method_patch","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingPaymentMethodUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Booking Payment Method","tags":["bookings"]}},"/bookings/{booking_id}/preview":{"get":{"description":"Get preview information for a booking.\n\nClean implementation - returns only meaningful data.","operationId":"get_booking_preview_bookings__booking_id__preview_get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingPreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Preview","tags":["bookings"]}},"/bookings/{booking_id}/reschedule":{"post":{"description":"Reschedule flow (server-orchestrated):\n- Validates access to the original booking\n- Cancels the original booking according to policy (releasing/capturing as needed)\n- Creates a new booking with the requested time (using original instructor/service unless overridden)\n- Links audit events via payment history; returns the new booking\n\nNote: This keeps UI simple and makes payment windows naturally align to the new schedule.","operationId":"reschedule_booking_bookings__booking_id__reschedule_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRescheduleRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reschedule Booking","tags":["bookings"]}},"/health":{"get":{"description":"Health check endpoint with headers for mode/phase/commit.","operationId":"health_check_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}},"description":"Successful Response"}},"summary":"Health Check"}},"/health/lite":{"get":{"description":"Lightweight health check that doesn't hit database","operationId":"health_check_lite_health_lite_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthLiteResponse"}}},"description":"Successful Response"}},"summary":"Health Check Lite"}},"/instructors/":{"get":{"description":"Get instructors offering a specific service.\n\nService-first model: service_catalog_id is required.\nAdditional filters:\n- min_price/max_price: Price range filtering for the specified service\n\nReturns a standardized paginated response with 'items' field.","operationId":"get_all_instructors_instructors__get","parameters":[{"description":"Service catalog ID (required)","in":"query","name":"service_catalog_id","required":true,"schema":{"description":"Service catalog ID (required)","title":"Service Catalog Id","type":"string"}},{"description":"Minimum hourly rate","in":"query","name":"min_price","required":false,"schema":{"description":"Minimum hourly rate","maximum":1000,"minimum":0,"title":"Min Price","type":"number"}},{"description":"Maximum hourly rate","in":"query","name":"max_price","required":false,"schema":{"description":"Maximum hourly rate","maximum":1000,"minimum":0,"title":"Max Price","type":"number"}},{"description":"Filter by age group: 'kids' or 'adults'","in":"query","name":"age_group","required":false,"schema":{"description":"Filter by age group: 'kids' or 'adults'","title":"Age Group","type":"string"}},{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_InstructorProfileResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get All Instructors","tags":["instructors"]}},"/instructors/availability/":{"get":{"description":"Get all availability windows.\n\nCLEAN ARCHITECTURE: Returns only meaningful fields.\nNo legacy patterns.","operationId":"get_all_availability_instructors_availability__get","parameters":[{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AvailabilityWindowResponse"},"title":"Response Get All Availability Instructors Availability  Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get All Availability","tags":["availability"]}},"/instructors/availability/apply-to-date-range":{"post":{"description":"Apply a week's pattern to a date range.","operationId":"apply_to_date_range_instructors_availability_apply_to_date_range_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyToDateRangeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyToDateRangeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Apply To Date Range","tags":["availability"]}},"/instructors/availability/blackout-dates":{"get":{"description":"Get instructor's blackout dates.","operationId":"get_blackout_dates_instructors_availability_blackout_dates_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BlackoutDateResponse"},"title":"Response Get Blackout Dates Instructors Availability Blackout Dates Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Blackout Dates","tags":["availability"]},"post":{"description":"Add a blackout date (vacation/unavailable).","operationId":"add_blackout_date_instructors_availability_blackout_dates_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackoutDateCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackoutDateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Blackout Date","tags":["availability"]}},"/instructors/availability/blackout-dates/{blackout_id}":{"delete":{"description":"Delete a blackout date.","operationId":"delete_blackout_date_instructors_availability_blackout_dates__blackout_id__delete","parameters":[{"in":"path","name":"blackout_id","required":true,"schema":{"title":"Blackout Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteBlackoutResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Blackout Date","tags":["availability"]}},"/instructors/availability/bulk-update":{"patch":{"description":"Bulk update availability slots.","operationId":"bulk_update_availability_instructors_availability_bulk_update_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkUpdateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bulk Update Availability","tags":["availability"]}},"/instructors/availability/copy-week":{"post":{"description":"Copy availability from one week to another.","operationId":"copy_week_availability_instructors_availability_copy_week_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CopyWeekRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CopyWeekResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Copy Week Availability","tags":["availability"]}},"/instructors/availability/specific-date":{"post":{"description":"Add availability for a specific date.\n\nReturns clean response using schema.","operationId":"add_specific_date_availability_instructors_availability_specific_date_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpecificDateAvailabilityCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Specific Date Availability","tags":["availability"]}},"/instructors/availability/week":{"get":{"description":"Get availability for a specific week.\n\nReturns clean data structure without legacy fields.","operationId":"get_week_availability_instructors_availability_week_get","parameters":[{"description":"Monday of the week","in":"query","name":"start_date","required":true,"schema":{"description":"Monday of the week","format":"date","title":"Start Date","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeRange"},"type":"array"},"title":"Response Get Week Availability Instructors Availability Week Get","type":"object"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Week Availability","tags":["availability"]},"post":{"description":"Save availability for specific dates in a week.\n\nClean implementation with proper cache warming.","operationId":"save_week_availability_instructors_availability_week_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekSpecificScheduleCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekAvailabilityUpdateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Save Week Availability","tags":["availability"]}},"/instructors/availability/week/booked-slots":{"get":{"description":"Get all booked slots for a week with preview information.","operationId":"get_week_booked_slots_instructors_availability_week_booked_slots_get","parameters":[{"description":"Start date (Monday) of the week","in":"query","name":"start_date","required":true,"schema":{"description":"Start date (Monday) of the week","format":"date","title":"Start Date","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookedSlotsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Week Booked Slots","tags":["availability"]}},"/instructors/availability/week/validate-changes":{"post":{"description":"Validate planned changes to week availability.","operationId":"validate_week_changes_instructors_availability_week_validate_changes_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateWeekRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekValidationResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Validate Week Changes","tags":["availability"]}},"/instructors/availability/{window_id}":{"delete":{"description":"Delete an availability time slot.","operationId":"delete_availability_window_instructors_availability__window_id__delete","parameters":[{"in":"path","name":"window_id","required":true,"schema":{"title":"Window Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteWindowResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Availability Window","tags":["availability"]},"patch":{"description":"Update an availability time slot.\n\nCLEAN ARCHITECTURE: Returns proper schema response.\nNo manual response building.","operationId":"update_availability_window_instructors_availability__window_id__patch","parameters":[{"in":"path","name":"window_id","required":true,"schema":{"title":"Window Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Availability Window","tags":["availability"]}},"/instructors/bookings/completed":{"get":{"description":"Get instructor's completed bookings.\n\nArgs:\n    limit: Maximum number of results\n    offset: Pagination offset\n\nReturns:\n    List of completed bookings","operationId":"get_completed_bookings_instructors_bookings_completed_get","parameters":[{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Completed Bookings","tags":["instructor-bookings"]}},"/instructors/bookings/pending-completion":{"get":{"description":"Get all bookings that are pending completion by the instructor.\n\nReturns bookings that:\n- Are confirmed status\n- Have ended (based on date/time)\n- Haven't been marked complete yet\n\nReturns:\n    List of bookings pending completion","operationId":"get_pending_completion_bookings_instructors_bookings_pending_completion_get","parameters":[{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Pending Completion Bookings","tags":["instructor-bookings"]}},"/instructors/bookings/{booking_id}/complete":{"post":{"description":"Mark a lesson as completed by the instructor.\n\nThis triggers the 24-hour payment capture timer. The payment will be\ncaptured 24 hours after this endpoint is called, giving the student\ntime to dispute if needed.\n\nArgs:\n    booking_id: The booking to mark as complete\n    notes: Optional completion notes from instructor\n\nReturns:\n    Updated booking information\n\nRaises:\n    404: Booking not found\n    422: Booking cannot be marked complete (wrong status, not instructor's booking)","operationId":"mark_lesson_complete_instructors_bookings__booking_id__complete_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}},{"in":"query","name":"notes","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark Lesson Complete","tags":["instructor-bookings"]}},"/instructors/bookings/{booking_id}/dispute":{"post":{"description":"Dispute a lesson completion as an instructor.\n\nUsed when a student marks a lesson as complete but the instructor disagrees.\nThis pauses payment capture pending resolution.\n\nArgs:\n    booking_id: The booking to dispute\n    reason: Reason for disputing the completion\n\nReturns:\n    Updated booking information","operationId":"dispute_completion_instructors_bookings__booking_id__dispute_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}},{"in":"query","name":"reason","required":true,"schema":{"title":"Reason","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Dispute Completion","tags":["instructor-bookings"]}},"/instructors/me":{"delete":{"description":"Delete instructor profile and revert to student role.","operationId":"delete_instructor_profile_instructors_me_delete","responses":{"204":{"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Instructor Profile","tags":["instructors"]},"get":{"description":"Get current instructor's profile.","operationId":"get_my_profile_instructors_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get My Profile","tags":["instructors"]},"post":{"description":"Create a new instructor profile.","operationId":"create_instructor_profile_instructors_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Instructor Profile","tags":["instructors"]},"put":{"description":"Update instructor profile with soft delete support.","operationId":"update_profile_instructors_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Profile","tags":["instructors"]}},"/instructors/me/go-live":{"post":{"description":"Mark instructor profile as live if all mandatory steps are completed.\n\nMandatory steps:\n- Stripe Connect onboarding completed\n- Identity verification completed\n- At least one service configured (skills/pricing)\n\nBackground check is optional and does NOT gate going live.","operationId":"go_live_instructors_me_go_live_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Go Live","tags":["instructors"]}},"/instructors/{instructor_id}":{"get":{"description":"Get a specific instructor's profile by user ID with privacy protection and favorite status.","operationId":"get_instructor_profile_instructors__instructor_id__get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Instructor Profile","tags":["instructors"]}},"/instructors/{instructor_id}/coverage":{"get":{"operationId":"get_instructor_coverage_instructors__instructor_id__coverage_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoverageFeatureCollectionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Instructor Coverage","tags":["instructors"]}},"/metrics":{"get":{"description":"Prometheus metrics endpoint (lightweight).","operationId":"metrics_endpoint_metrics_get","responses":{"200":{"content":{"application/json":{"schema":{}}},"description":"Successful Response"}},"summary":"Metrics Endpoint"}},"/metrics/cache":{"get":{"description":"Get detailed cache metrics including availability-specific stats.","operationId":"get_cache_metrics_metrics_cache_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheMetricsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Cache Metrics","tags":["monitoring"]}},"/metrics/cache/availability":{"get":{"description":"Get detailed availability-specific cache metrics and top cached keys.","operationId":"get_availability_cache_metrics_metrics_cache_availability_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCacheMetricsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Availability Cache Metrics","tags":["monitoring"]}},"/metrics/cache/reset-stats":{"post":{"description":"Reset cache statistics.","operationId":"reset_cache_stats_metrics_cache_reset_stats_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Cache Stats","tags":["monitoring"]}},"/metrics/health":{"get":{"description":"Basic health check endpoint.","operationId":"health_check_metrics_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}},"description":"Successful Response"}},"summary":"Health Check","tags":["monitoring"]}},"/metrics/performance":{"get":{"operationId":"get_performance_metrics_metrics_performance_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__main_responses__PerformanceMetricsResponse"}}},"description":"Successful Response"}},"summary":"Get Performance Metrics"}},"/metrics/rate-limits":{"get":{"description":"Get current rate limit statistics.\n\nShows:\n- Total rate limit keys\n- Breakdown by endpoint/type\n- Top limited clients\n\nRequires authentication.","operationId":"get_rate_limit_stats_metrics_rate_limits_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitStats"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Rate Limit Stats","tags":["monitoring"]}},"/metrics/rate-limits/reset":{"post":{"description":"Reset rate limits matching a pattern.\n\nUseful for:\n- Unblocking legitimate users\n- Testing\n- Emergency response\n\nRequires admin privileges.","operationId":"reset_rate_limits_metrics_rate_limits_reset_post","parameters":[{"description":"Pattern to match (e.g., 'email_*', 'ip_192.168.*')","in":"query","name":"pattern","required":true,"schema":{"description":"Pattern to match (e.g., 'email_*', 'ip_192.168.*')","title":"Pattern","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Rate Limits","tags":["monitoring"]}},"/metrics/rate-limits/test":{"get":{"description":"Test endpoint to verify rate limiting is working.\n\nThis endpoint has a low rate limit for testing purposes.\nTry making multiple requests to see rate limiting in action.","operationId":"test_rate_limit_metrics_rate_limits_test_get","parameters":[{"description":"Number of requests to simulate","in":"query","name":"requests","required":false,"schema":{"default":5,"description":"Number of requests to simulate","maximum":20,"minimum":1,"title":"Requests","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitTestResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Test Rate Limit","tags":["monitoring"]}},"/metrics/slow-queries":{"get":{"description":"Get recent slow queries.","operationId":"get_slow_queries_metrics_slow_queries_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowQueriesResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Slow Queries","tags":["monitoring"]}},"/services/catalog":{"get":{"description":"Get available services from the catalog.\n\nOptionally filter by category slug (e.g., 'music-arts', 'academic').","operationId":"get_catalog_services_services_catalog_get","parameters":[{"description":"Filter by category slug","in":"query","name":"category","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category slug","title":"Category"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CatalogServiceResponse"},"title":"Response Get Catalog Services Services Catalog Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Catalog Services","tags":["services"]}},"/services/catalog/all-with-instructors":{"get":{"description":"Get all catalog services organized by category with active instructor counts.\n\nThis endpoint is optimized for the All Services page, providing all services\nwith instructor availability information in a single request. Results are\ncached for 5 minutes to balance performance with data freshness.\n\nReturns:\n    Dictionary with categories and their services, including active instructor counts","operationId":"get_all_services_with_instructors_services_catalog_all_with_instructors_get","responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Response Get All Services With Instructors Services Catalog All With Instructors Get","type":"object"}}},"description":"Successful Response"}},"summary":"Get All Services With Instructors","tags":["services"]}},"/services/catalog/kids-available":{"get":{"description":"Return catalog services that have at least one active instructor who teaches kids.\n\nMinimal payload: id, name, slug. Cached for 5 minutes.","operationId":"get_kids_available_services_services_catalog_kids_available_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CatalogServiceMinimalResponse"},"title":"Response Get Kids Available Services Services Catalog Kids Available Get","type":"array"}}},"description":"Successful Response"}},"summary":"Get Kids Available Services","tags":["services"]}},"/services/catalog/top-per-category":{"get":{"description":"Get top N services per category for homepage capsules.\n\nOptimized endpoint that returns only the most popular services per category,\nperfect for homepage display. Cached for 1 hour since popularity changes daily\nbut we want fast response times.\n\nArgs:\n    limit: Number of top services per category (default: 7)\n\nReturns:\n    Dictionary with categories and their top services","operationId":"get_top_services_per_category_services_catalog_top_per_category_get","parameters":[{"description":"Number of top services per category","in":"query","name":"limit","required":false,"schema":{"default":7,"description":"Number of top services per category","maximum":20,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Response Get Top Services Per Category Services Catalog Top Per Category Get","type":"object"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Top Services Per Category","tags":["services"]}},"/services/categories":{"get":{"description":"Get all service categories.","operationId":"get_service_categories_services_categories_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategoryResponse"},"title":"Response Get Service Categories Services Categories Get","type":"array"}}},"description":"Successful Response"}},"summary":"Get Service Categories","tags":["services"]}},"/services/instructor/add":{"post":{"description":"Add a service from the catalog to instructor's profile.\n\nRequires INSTRUCTOR role.","operationId":"add_service_to_profile_services_instructor_add_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Service To Profile","tags":["services"]}},"/services/search":{"get":{"description":"Search for instructors by service.\n\nThis is an alias for the instructor search endpoint that focuses on service matching.\nSearches across service names, categories, and search terms.","operationId":"search_services_services_search_get","parameters":[{"description":"Search query","in":"query","name":"q","required":true,"schema":{"description":"Search query","minLength":2,"title":"Q","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Response Search Services Services Search Get","type":"object"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Search Services","tags":["services"]}},"/v1/gated/ping":{"get":{"operationId":"gated_ping_v1_gated_ping_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatedPingResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Gated Ping","tags":["gated"]}},"/webhooks/stripe/account-events":{"post":{"description":"Handle Stripe Connect account-related webhook events.\n\nProcesses events like:\n- account.updated (onboarding status changes)\n- account.application.deauthorized\n- capability.updated\n\nReturns:\n    Success confirmation message\n\nRaises:\n    HTTPException: If webhook processing fails","operationId":"handle_account_events_webhooks_stripe_account_events_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Handle Account Events","tags":["stripe-webhooks"]}},"/webhooks/stripe/payment-events":{"post":{"description":"Handle Stripe payment-related webhook events.\n\nProcesses events like:\n- payment_intent.succeeded\n- payment_intent.payment_failed\n- payment_intent.canceled\n- payment_intent.requires_action\n\nReturns:\n    Success confirmation message\n\nRaises:\n    HTTPException: If webhook processing fails","operationId":"handle_payment_events_webhooks_stripe_payment_events_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Handle Payment Events","tags":["stripe-webhooks"]}},"/webhooks/stripe/test":{"get":{"description":"Test endpoint to verify webhook endpoint is accessible.\n\nThis endpoint can be used to test that the webhook route is working\nand accessible from Stripe's servers.\n\nReturns:\n    Simple success message","operationId":"test_webhook_endpoint_webhooks_stripe_test_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Test Webhook Endpoint","tags":["stripe-webhooks"]}}}}
