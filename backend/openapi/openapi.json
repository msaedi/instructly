{"components":{"schemas":{"AccessGrantResponse":{"additionalProperties":false,"properties":{"access_id":{"title":"Access Id","type":"string"},"invited_by_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invited By Code"},"phase":{"title":"Phase","type":"string"},"role":{"title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["access_id","user_id","role","phase"],"title":"AccessGrantResponse","type":"object"},"AccountStatusChangeResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"},"new_status":{"title":"New Status","type":"string"},"previous_status":{"title":"Previous Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","message","previous_status","new_status"],"title":"AccountStatusChangeResponse","type":"object"},"AccountStatusResponse":{"additionalProperties":false,"properties":{"account_status":{"title":"Account Status","type":"string"},"can_deactivate":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Deactivate"},"can_login":{"title":"Can Login","type":"boolean"},"can_reactivate":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Reactivate"},"can_receive_bookings":{"title":"Can Receive Bookings","type":"boolean"},"can_suspend":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Suspend"},"future_bookings_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Future Bookings Count"},"has_future_bookings":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Future Bookings"},"is_active":{"title":"Is Active","type":"boolean"},"is_deactivated":{"title":"Is Deactivated","type":"boolean"},"is_suspended":{"title":"Is Suspended","type":"boolean"},"role":{"title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","role","account_status","can_login","can_receive_bookings","is_active","is_suspended","is_deactivated"],"title":"AccountStatusResponse","type":"object"},"AddressCreate":{"additionalProperties":false,"properties":{"administrative_area":{"title":"Administrative Area","type":"string"},"country_code":{"default":"US","title":"Country Code","type":"string"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"is_default":{"default":false,"title":"Is Default","type":"boolean"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"home|work|other","title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"title":"Locality","type":"string"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"title":"Postal Code","type":"string"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"title":"Street Line1","type":"string"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unverified","title":"Verification Status"}},"required":["street_line1","locality","administrative_area","postal_code"],"title":"AddressCreate","type":"object"},"AddressDeleteResponse":{"additionalProperties":false,"description":"Standard delete acknowledgement for address resources.","properties":{"message":{"title":"Message","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","message"],"title":"AddressDeleteResponse","type":"object"},"AddressListResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/AddressResponse"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"AddressListResponse","type":"object"},"AddressResponse":{"properties":{"administrative_area":{"title":"Administrative Area","type":"string"},"country_code":{"default":"US","title":"Country Code","type":"string"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"district":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"District"},"id":{"title":"Id","type":"string"},"is_active":{"title":"Is Active","type":"boolean"},"is_default":{"default":false,"title":"Is Default","type":"boolean"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"home|work|other","title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"title":"Locality","type":"string"},"location_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Location Metadata"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"neighborhood":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Neighborhood"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"title":"Postal Code","type":"string"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"title":"Street Line1","type":"string"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"subneighborhood":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subneighborhood"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unverified","title":"Verification Status"}},"required":["street_line1","locality","administrative_area","postal_code","id","is_active"],"title":"AddressResponse","type":"object"},"AddressUpdate":{"additionalProperties":false,"properties":{"administrative_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Administrative Area"},"country_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Code"},"custom_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Label"},"is_default":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Default"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"locality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locality"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"recipient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient Name"},"street_line1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line1"},"street_line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Line2"},"verification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verification Status"}},"title":"AddressUpdate","type":"object"},"AdminAuditActor":{"additionalProperties":false,"properties":{"email":{"title":"Email","type":"string"},"id":{"title":"Id","type":"string"}},"required":["id","email"],"title":"AdminAuditActor","type":"object"},"AdminAuditEntry":{"additionalProperties":false,"properties":{"action":{"title":"Action","type":"string"},"admin":{"$ref":"#/components/schemas/AdminAuditActor"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"},"id":{"title":"Id","type":"string"},"resource_id":{"title":"Resource Id","type":"string"},"resource_type":{"title":"Resource Type","type":"string"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["id","timestamp","admin","action","resource_type","resource_id"],"title":"AdminAuditEntry","type":"object"},"AdminAuditLogResponse":{"additionalProperties":false,"properties":{"entries":{"items":{"$ref":"#/components/schemas/AdminAuditEntry"},"title":"Entries","type":"array"},"page":{"title":"Page","type":"integer"},"per_page":{"title":"Per Page","type":"integer"},"summary":{"$ref":"#/components/schemas/AdminAuditLogSummary"},"total":{"title":"Total","type":"integer"},"total_pages":{"title":"Total Pages","type":"integer"}},"required":["entries","summary","total","page","per_page","total_pages"],"title":"AdminAuditLogResponse","type":"object"},"AdminAuditLogSummary":{"additionalProperties":false,"properties":{"captures_count":{"title":"Captures Count","type":"integer"},"captures_total":{"title":"Captures Total","type":"number"},"refunds_count":{"title":"Refunds Count","type":"integer"},"refunds_total":{"title":"Refunds Total","type":"number"}},"required":["refunds_count","refunds_total","captures_count","captures_total"],"title":"AdminAuditLogSummary","type":"object"},"AdminAwardBadgeSchema":{"properties":{"criteria_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Criteria Type"},"name":{"title":"Name","type":"string"},"slug":{"title":"Slug","type":"string"}},"required":["slug","name"],"title":"AdminAwardBadgeSchema","type":"object"},"AdminAwardListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AdminAwardSchema"},"title":"Items","type":"array"},"next_offset":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Next Offset"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"AdminAwardListResponse","type":"object"},"AdminAwardSchema":{"properties":{"award_id":{"title":"Award Id","type":"string"},"awarded_at":{"format":"date-time","title":"Awarded At","type":"string"},"badge":{"$ref":"#/components/schemas/AdminAwardBadgeSchema"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"hold_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Hold Until"},"progress_snapshot":{"anyOf":[{"$ref":"#/components/schemas/BadgeProgressView"},{"type":"null"}]},"revoked_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Revoked At"},"status":{"title":"Status","type":"string"},"student":{"$ref":"#/components/schemas/AdminAwardStudentSchema"}},"required":["award_id","status","awarded_at","badge","student"],"title":"AdminAwardSchema","type":"object"},"AdminAwardStudentSchema":{"properties":{"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"id":{"title":"Id","type":"string"}},"required":["id"],"title":"AdminAwardStudentSchema","type":"object"},"AdminBookingDetailResponse":{"additionalProperties":false,"properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"booking_end_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking End Utc"},"booking_start_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Start Utc"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/AdminBookingPerson"},"instructor_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Note"},"instructor_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Timezone"},"lesson_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lesson Timezone"},"location_type":{"anyOf":[{"enum":["student_location","instructor_location","online","neutral_location"],"type":"string"},{"type":"null"}],"title":"Location Type"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"payment":{"$ref":"#/components/schemas/AdminBookingPaymentInfo"},"service":{"$ref":"#/components/schemas/AdminBookingServiceInfo"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"title":"Status","type":"string"},"student":{"$ref":"#/components/schemas/AdminBookingPerson"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"student_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Timezone"},"timeline":{"items":{"$ref":"#/components/schemas/AdminBookingTimelineEvent"},"title":"Timeline","type":"array"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["id","student","instructor","service","booking_date","start_time","end_time","status","payment","timeline"],"title":"AdminBookingDetailResponse","type":"object"},"AdminBookingDetailServiceInfo":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"title":"Slug","type":"string"}},"required":["slug","name","category"],"title":"AdminBookingDetailServiceInfo","type":"object"},"AdminBookingListItem":{"additionalProperties":false,"properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"booking_end_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking End Utc"},"booking_start_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Start Utc"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/AdminBookingPerson"},"instructor_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Timezone"},"lesson_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lesson Timezone"},"payment_intent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Intent Id"},"payment_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Status"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"title":"Status","type":"string"},"student":{"$ref":"#/components/schemas/AdminBookingPerson"},"student_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Timezone"},"total_price":{"title":"Total Price","type":"number"}},"required":["id","student","instructor","service_name","booking_date","start_time","end_time","total_price","status"],"title":"AdminBookingListItem","type":"object"},"AdminBookingListResponse":{"additionalProperties":false,"properties":{"bookings":{"items":{"$ref":"#/components/schemas/AdminBookingListItem"},"title":"Bookings","type":"array"},"page":{"title":"Page","type":"integer"},"per_page":{"title":"Per Page","type":"integer"},"total":{"title":"Total","type":"integer"},"total_pages":{"title":"Total Pages","type":"integer"}},"required":["bookings","total","page","per_page","total_pages"],"title":"AdminBookingListResponse","type":"object"},"AdminBookingNote":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"created_by":{"anyOf":[{"$ref":"#/components/schemas/AdminNoteAuthor"},{"type":"null"}]},"id":{"title":"Id","type":"string"},"note":{"title":"Note","type":"string"},"visibility":{"title":"Visibility","type":"string"}},"required":["id","note","visibility","category","created_at"],"title":"AdminBookingNote","type":"object"},"AdminBookingPaymentInfo":{"additionalProperties":false,"properties":{"credits_applied":{"title":"Credits Applied","type":"number"},"instructor_payout":{"title":"Instructor Payout","type":"number"},"lesson_price":{"title":"Lesson Price","type":"number"},"payment_intent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Intent Id"},"payment_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Status"},"platform_fee":{"title":"Platform Fee","type":"number"},"platform_revenue":{"title":"Platform Revenue","type":"number"},"stripe_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stripe Url"},"total_price":{"title":"Total Price","type":"number"}},"required":["total_price","lesson_price","platform_fee","credits_applied","instructor_payout","platform_revenue"],"title":"AdminBookingPaymentInfo","type":"object"},"AdminBookingPerson":{"additionalProperties":false,"properties":{"email":{"title":"Email","type":"string"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"required":["id","name","email"],"title":"AdminBookingPerson","type":"object"},"AdminBookingServiceInfo":{"additionalProperties":false,"properties":{"duration_minutes":{"title":"Duration Minutes","type":"integer"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"name":{"title":"Name","type":"string"}},"required":["name","duration_minutes","hourly_rate"],"title":"AdminBookingServiceInfo","type":"object"},"AdminBookingStatsNeedsAction":{"additionalProperties":false,"properties":{"disputed":{"title":"Disputed","type":"integer"},"pending_completion":{"title":"Pending Completion","type":"integer"}},"required":["pending_completion","disputed"],"title":"AdminBookingStatsNeedsAction","type":"object"},"AdminBookingStatsResponse":{"additionalProperties":false,"properties":{"needs_action":{"$ref":"#/components/schemas/AdminBookingStatsNeedsAction"},"this_week":{"$ref":"#/components/schemas/AdminBookingStatsWeek"},"today":{"$ref":"#/components/schemas/AdminBookingStatsToday"}},"required":["today","this_week","needs_action"],"title":"AdminBookingStatsResponse","type":"object"},"AdminBookingStatsToday":{"additionalProperties":false,"properties":{"booking_count":{"title":"Booking Count","type":"integer"},"revenue":{"title":"Revenue","type":"number"}},"required":["booking_count","revenue"],"title":"AdminBookingStatsToday","type":"object"},"AdminBookingStatsWeek":{"additionalProperties":false,"properties":{"gmv":{"title":"Gmv","type":"number"},"platform_revenue":{"title":"Platform Revenue","type":"number"}},"required":["gmv","platform_revenue"],"title":"AdminBookingStatsWeek","type":"object"},"AdminBookingStatusUpdate":{"enum":["COMPLETED","NO_SHOW"],"title":"AdminBookingStatusUpdate","type":"string"},"AdminBookingStatusUpdateRequest":{"additionalProperties":false,"properties":{"note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"title":"Note"},"status":{"$ref":"#/components/schemas/AdminBookingStatusUpdate"}},"required":["status"],"title":"AdminBookingStatusUpdateRequest","type":"object"},"AdminBookingStatusUpdateResponse":{"additionalProperties":false,"properties":{"booking_id":{"title":"Booking Id","type":"string"},"booking_status":{"title":"Booking Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","booking_id","booking_status"],"title":"AdminBookingStatusUpdateResponse","type":"object"},"AdminBookingSummary":{"additionalProperties":false,"description":"Summary statistics for bookings in a time period.","properties":{"avg_booking_value_cents":{"title":"Avg Booking Value Cents","type":"integer"},"by_status":{"additionalProperties":{"type":"integer"},"title":"By Status","type":"object"},"new_students":{"title":"New Students","type":"integer"},"period":{"title":"Period","type":"string"},"repeat_students":{"title":"Repeat Students","type":"integer"},"top_categories":{"items":{"$ref":"#/components/schemas/TopCategory"},"title":"Top Categories","type":"array"},"total_bookings":{"title":"Total Bookings","type":"integer"},"total_revenue_cents":{"title":"Total Revenue Cents","type":"integer"}},"required":["period","total_bookings","by_status","total_revenue_cents","avg_booking_value_cents","new_students","repeat_students","top_categories"],"title":"AdminBookingSummary","type":"object"},"AdminBookingTimelineEvent":{"additionalProperties":false,"properties":{"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"event":{"title":"Event","type":"string"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["timestamp","event"],"title":"AdminBookingTimelineEvent","type":"object"},"AdminCancelBookingRequest":{"additionalProperties":false,"properties":{"note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"title":"Note"},"reason":{"maxLength":100,"title":"Reason","type":"string"},"refund":{"default":false,"title":"Refund","type":"boolean"}},"required":["reason"],"title":"AdminCancelBookingRequest","type":"object"},"AdminCancelBookingResponse":{"additionalProperties":false,"properties":{"booking_id":{"title":"Booking Id","type":"string"},"booking_status":{"title":"Booking Status","type":"string"},"refund_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refund Id"},"refund_issued":{"title":"Refund Issued","type":"boolean"},"success":{"title":"Success","type":"boolean"}},"required":["success","booking_id","booking_status","refund_issued"],"title":"AdminCancelBookingResponse","type":"object"},"AdminInstructorDetailResponse":{"additionalProperties":false,"description":"Detailed instructor metadata for administrative tooling.","properties":{"bgc_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Completed At"},"bgc_dispute_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Dispute Note"},"bgc_dispute_opened_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Dispute Opened At"},"bgc_dispute_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Dispute Resolved At"},"bgc_expires_in_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Bgc Expires In Days"},"bgc_in_dispute":{"default":false,"title":"Bgc In Dispute","type":"boolean"},"bgc_includes_canceled":{"default":false,"title":"Bgc Includes Canceled","type":"boolean"},"bgc_is_expired":{"default":false,"title":"Bgc Is Expired","type":"boolean"},"bgc_report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Report Id"},"bgc_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Status"},"bgc_valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Valid Until"},"consent_recent_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Consent Recent At"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"email":{"title":"Email","type":"string"},"id":{"title":"Id","type":"string"},"is_live":{"title":"Is Live","type":"boolean"},"name":{"title":"Name","type":"string"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["id","name","email","is_live"],"title":"AdminInstructorDetailResponse","type":"object"},"AdminLocationLearningAliasActionResponse":{"additionalProperties":false,"properties":{"alias_id":{"title":"Alias Id","type":"string"},"status":{"enum":["approved","rejected"],"title":"Status","type":"string"}},"required":["status","alias_id"],"title":"AdminLocationLearningAliasActionResponse","type":"object"},"AdminLocationLearningClickCount":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"region_boundary_id":{"title":"Region Boundary Id","type":"string"},"region_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region Name"}},"required":["region_boundary_id","count"],"title":"AdminLocationLearningClickCount","type":"object"},"AdminLocationLearningCreateAliasRequest":{"description":"Create a manual location alias mapping.","properties":{"alias":{"description":"Alias text to map","maxLength":255,"minLength":1,"title":"Alias","type":"string"},"alias_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"landmark","description":"Classification for this alias (abbreviation|colloquial|landmark|typo)","title":"Alias Type"},"candidate_region_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"If provided (len>=2), create an ambiguous alias requiring clarification","title":"Candidate Region Ids"},"region_boundary_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"RegionBoundary id to map to (single-resolution alias)","title":"Region Boundary Id"}},"required":["alias"],"title":"AdminLocationLearningCreateAliasRequest","type":"object"},"AdminLocationLearningCreateAliasResponse":{"additionalProperties":false,"properties":{"alias_id":{"title":"Alias Id","type":"string"},"status":{"const":"created","title":"Status","type":"string"}},"required":["status","alias_id"],"title":"AdminLocationLearningCreateAliasResponse","type":"object"},"AdminLocationLearningDismissQueryResponse":{"additionalProperties":false,"properties":{"query_normalized":{"title":"Query Normalized","type":"string"},"status":{"const":"dismissed","title":"Status","type":"string"}},"required":["status","query_normalized"],"title":"AdminLocationLearningDismissQueryResponse","type":"object"},"AdminLocationLearningLearnedAliasItem":{"additionalProperties":false,"properties":{"alias_normalized":{"title":"Alias Normalized","type":"string"},"confidence":{"title":"Confidence","type":"number"},"confirmations":{"title":"Confirmations","type":"integer"},"region_boundary_id":{"title":"Region Boundary Id","type":"string"},"status":{"title":"Status","type":"string"}},"required":["alias_normalized","region_boundary_id","confidence","status","confirmations"],"title":"AdminLocationLearningLearnedAliasItem","type":"object"},"AdminLocationLearningPendingAliasItem":{"additionalProperties":false,"properties":{"alias_normalized":{"title":"Alias Normalized","type":"string"},"confidence":{"title":"Confidence","type":"number"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"region_boundary_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region Boundary Id"},"region_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region Name"},"status":{"title":"Status","type":"string"},"user_count":{"title":"User Count","type":"integer"}},"required":["id","alias_normalized","confidence","user_count","status","created_at"],"title":"AdminLocationLearningPendingAliasItem","type":"object"},"AdminLocationLearningPendingAliasesResponse":{"additionalProperties":false,"properties":{"aliases":{"items":{"$ref":"#/components/schemas/AdminLocationLearningPendingAliasItem"},"title":"Aliases","type":"array"}},"required":["aliases"],"title":"AdminLocationLearningPendingAliasesResponse","type":"object"},"AdminLocationLearningProcessResponse":{"additionalProperties":false,"properties":{"learned":{"items":{"$ref":"#/components/schemas/AdminLocationLearningLearnedAliasItem"},"title":"Learned","type":"array"},"learned_count":{"title":"Learned Count","type":"integer"}},"required":["learned","learned_count"],"title":"AdminLocationLearningProcessResponse","type":"object"},"AdminLocationLearningRegionItem":{"additionalProperties":false,"properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name"],"title":"AdminLocationLearningRegionItem","type":"object"},"AdminLocationLearningRegionsResponse":{"additionalProperties":false,"properties":{"regions":{"items":{"$ref":"#/components/schemas/AdminLocationLearningRegionItem"},"title":"Regions","type":"array"}},"required":["regions"],"title":"AdminLocationLearningRegionsResponse","type":"object"},"AdminLocationLearningUnresolvedQueriesResponse":{"additionalProperties":false,"properties":{"queries":{"items":{"$ref":"#/components/schemas/AdminLocationLearningUnresolvedQueryItem"},"title":"Queries","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["queries","total"],"title":"AdminLocationLearningUnresolvedQueriesResponse","type":"object"},"AdminLocationLearningUnresolvedQueryItem":{"additionalProperties":false,"properties":{"click_count":{"title":"Click Count","type":"integer"},"clicks":{"items":{"$ref":"#/components/schemas/AdminLocationLearningClickCount"},"title":"Clicks","type":"array"},"first_seen_at":{"format":"date-time","title":"First Seen At","type":"string"},"id":{"title":"Id","type":"string"},"last_seen_at":{"format":"date-time","title":"Last Seen At","type":"string"},"query_normalized":{"title":"Query Normalized","type":"string"},"sample_original_queries":{"items":{"type":"string"},"title":"Sample Original Queries","type":"array"},"search_count":{"title":"Search Count","type":"integer"},"status":{"title":"Status","type":"string"},"unique_user_count":{"title":"Unique User Count","type":"integer"}},"required":["id","query_normalized","search_count","unique_user_count","click_count","clicks","sample_original_queries","first_seen_at","last_seen_at","status"],"title":"AdminLocationLearningUnresolvedQueryItem","type":"object"},"AdminNoShowResolution":{"enum":["confirmed_after_review","dispute_upheld","cancelled"],"title":"AdminNoShowResolution","type":"string"},"AdminNoShowResolutionRequest":{"additionalProperties":false,"properties":{"admin_notes":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"title":"Admin Notes"},"resolution":{"$ref":"#/components/schemas/AdminNoShowResolution"}},"required":["resolution"],"title":"AdminNoShowResolutionRequest","type":"object"},"AdminNoShowResolutionResponse":{"additionalProperties":false,"properties":{"booking_id":{"title":"Booking Id","type":"string"},"resolution":{"title":"Resolution","type":"string"},"settlement_outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Settlement Outcome"},"success":{"title":"Success","type":"boolean"}},"required":["success","booking_id","resolution"],"title":"AdminNoShowResolutionResponse","type":"object"},"AdminNoteAuthor":{"additionalProperties":false,"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"}},"title":"AdminNoteAuthor","type":"object"},"AdminPaymentAmount":{"additionalProperties":false,"properties":{"credits_applied":{"title":"Credits Applied","type":"number"},"gross":{"title":"Gross","type":"number"},"net_to_instructor":{"title":"Net To Instructor","type":"number"},"platform_fee":{"title":"Platform Fee","type":"number"},"tip":{"title":"Tip","type":"number"}},"required":["gross","platform_fee","credits_applied","tip","net_to_instructor"],"title":"AdminPaymentAmount","type":"object"},"AdminPaymentFailure":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"last_failed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Last Failed At"}},"required":["category"],"title":"AdminPaymentFailure","type":"object"},"AdminPaymentRefund":{"additionalProperties":false,"properties":{"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"refund_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refund Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"title":"AdminPaymentRefund","type":"object"},"AdminPaymentStatusEvent":{"additionalProperties":false,"properties":{"state":{"title":"State","type":"string"},"ts":{"format":"date-time","title":"Ts","type":"string"}},"required":["ts","state"],"title":"AdminPaymentStatusEvent","type":"object"},"AdminPaymentTimelineFlags":{"additionalProperties":false,"properties":{"has_failed_payment":{"title":"Has Failed Payment","type":"boolean"},"has_pending_refund":{"title":"Has Pending Refund","type":"boolean"},"possible_double_charge":{"title":"Possible Double Charge","type":"boolean"}},"required":["has_failed_payment","has_pending_refund","possible_double_charge"],"title":"AdminPaymentTimelineFlags","type":"object"},"AdminPaymentTimelineItem":{"additionalProperties":false,"properties":{"amount":{"$ref":"#/components/schemas/AdminPaymentAmount"},"booking_id":{"title":"Booking Id","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"failure":{"anyOf":[{"$ref":"#/components/schemas/AdminPaymentFailure"},{"type":"null"}]},"provider_refs":{"additionalProperties":{"type":"string"},"title":"Provider Refs","type":"object"},"refunds":{"items":{"$ref":"#/components/schemas/AdminPaymentRefund"},"title":"Refunds","type":"array"},"scheduled_authorize_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled Authorize At"},"scheduled_capture_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled Capture At"},"status":{"title":"Status","type":"string"},"status_timeline":{"items":{"$ref":"#/components/schemas/AdminPaymentStatusEvent"},"title":"Status Timeline","type":"array"}},"required":["booking_id","created_at","amount","status","status_timeline"],"title":"AdminPaymentTimelineItem","type":"object"},"AdminPaymentTimelineMeta":{"additionalProperties":false,"properties":{"time_window":{"$ref":"#/components/schemas/MCPTimeWindow"},"total_count":{"title":"Total Count","type":"integer"}},"required":["time_window","total_count"],"title":"AdminPaymentTimelineMeta","type":"object"},"AdminPaymentTimelineResponse":{"additionalProperties":false,"properties":{"flags":{"$ref":"#/components/schemas/AdminPaymentTimelineFlags"},"meta":{"$ref":"#/components/schemas/AdminPaymentTimelineMeta"},"payments":{"items":{"$ref":"#/components/schemas/AdminPaymentTimelineItem"},"title":"Payments","type":"array"},"summary":{"$ref":"#/components/schemas/AdminPaymentTimelineSummary"}},"required":["payments","summary","flags","meta"],"title":"AdminPaymentTimelineResponse","type":"object"},"AdminPaymentTimelineSummary":{"additionalProperties":false,"properties":{"by_status":{"additionalProperties":{"type":"integer"},"title":"By Status","type":"object"}},"required":["by_status"],"title":"AdminPaymentTimelineSummary","type":"object"},"AdminReferralsConfigOut":{"description":"Configuration snapshot for the referral program.","properties":{"expiry_months":{"title":"Expiry Months","type":"integer"},"flags":{"additionalProperties":{"type":"boolean"},"title":"Flags","type":"object"},"global_cap":{"title":"Global Cap","type":"integer"},"hold_days":{"title":"Hold Days","type":"integer"},"instructor_amount_cents":{"title":"Instructor Amount Cents","type":"integer"},"min_basket_cents":{"title":"Min Basket Cents","type":"integer"},"source":{"enum":["db","defaults"],"title":"Source","type":"string"},"student_amount_cents":{"title":"Student Amount Cents","type":"integer"},"version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Version"}},"required":["student_amount_cents","instructor_amount_cents","min_basket_cents","hold_days","expiry_months","global_cap","version","source","flags"],"title":"AdminReferralsConfigOut","type":"object"},"AdminReferralsHealthOut":{"description":"Unlocker worker and data health for admin dashboards.","properties":{"backlog_pending_due":{"title":"Backlog Pending Due","type":"integer"},"last_run_age_s":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Last Run Age S"},"pending_total":{"title":"Pending Total","type":"integer"},"unlocked_total":{"title":"Unlocked Total","type":"integer"},"void_total":{"title":"Void Total","type":"integer"},"workers":{"items":{"type":"string"},"title":"Workers","type":"array"},"workers_alive":{"title":"Workers Alive","type":"integer"}},"required":["workers_alive","workers","backlog_pending_due","pending_total","unlocked_total","void_total"],"title":"AdminReferralsHealthOut","type":"object"},"AdminReferralsSummaryOut":{"description":"Aggregate referral summary metrics for admins.","properties":{"attributions_24h":{"title":"Attributions 24H","type":"integer"},"cap_utilization_percent":{"title":"Cap Utilization Percent","type":"number"},"clicks_24h":{"title":"Clicks 24H","type":"integer"},"counts_by_status":{"additionalProperties":{"type":"integer"},"title":"Counts By Status","type":"object"},"top_referrers":{"items":{"$ref":"#/components/schemas/TopReferrerOut"},"title":"Top Referrers","type":"array"}},"required":["counts_by_status","cap_utilization_percent","top_referrers","clicks_24h","attributions_24h"],"title":"AdminReferralsSummaryOut","type":"object"},"AdminRefundReason":{"enum":["instructor_no_show","dispute","platform_error","other"],"title":"AdminRefundReason","type":"string"},"AdminRefundRequest":{"properties":{"amount_cents":{"anyOf":[{"exclusiveMinimum":0.0,"type":"integer"},{"type":"null"}],"description":"Refund amount in cents. Full refund if not provided.","title":"Amount Cents"},"note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"description":"Admin note explaining the refund","title":"Note"},"reason":{"$ref":"#/components/schemas/AdminRefundReason","description":"Reason for refund"}},"required":["reason"],"title":"AdminRefundRequest","type":"object"},"AdminRefundResponse":{"properties":{"amount_refunded_cents":{"title":"Amount Refunded Cents","type":"integer"},"booking_id":{"title":"Booking Id","type":"string"},"booking_status":{"title":"Booking Status","type":"string"},"message":{"title":"Message","type":"string"},"refund_id":{"title":"Refund Id","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","refund_id","amount_refunded_cents","booking_id","booking_status","message"],"title":"AdminRefundResponse","type":"object"},"AdminSearchConfigResponse":{"additionalProperties":false,"description":"Admin search configuration with runtime controls.","properties":{"available_embedding_models":{"description":"Available embedding models","items":{"$ref":"#/components/schemas/ModelOption"},"title":"Available Embedding Models","type":"array"},"available_parsing_models":{"description":"Available parsing models","items":{"$ref":"#/components/schemas/ModelOption"},"title":"Available Parsing Models","type":"array"},"current_in_flight_requests":{"description":"Current in-flight uncached searches","minimum":0.0,"title":"Current In Flight Requests","type":"integer"},"embedding_model":{"description":"Current embedding model","title":"Embedding Model","type":"string"},"embedding_timeout_ms":{"description":"Embedding timeout in ms","maximum":10000.0,"minimum":500.0,"title":"Embedding Timeout Ms","type":"integer"},"high_load_budget_ms":{"description":"High load budget in ms","minimum":50.0,"title":"High Load Budget Ms","type":"integer"},"high_load_threshold":{"description":"Concurrent requests to trigger high load","minimum":1.0,"title":"High Load Threshold","type":"integer"},"location_model":{"description":"Current location model","title":"Location Model","type":"string"},"location_timeout_ms":{"description":"Location LLM timeout in ms","maximum":10000.0,"minimum":500.0,"title":"Location Timeout Ms","type":"integer"},"openai_max_retries":{"description":"OpenAI max retries","minimum":0.0,"title":"Openai Max Retries","type":"integer"},"parsing_model":{"description":"Current parsing model","title":"Parsing Model","type":"string"},"parsing_timeout_ms":{"description":"Parsing timeout in ms","maximum":10000.0,"minimum":500.0,"title":"Parsing Timeout Ms","type":"integer"},"search_budget_ms":{"description":"Default request budget in ms","minimum":50.0,"title":"Search Budget Ms","type":"integer"},"uncached_concurrency":{"description":"Max concurrent uncached searches per worker","minimum":1.0,"title":"Uncached Concurrency","type":"integer"}},"required":["parsing_model","parsing_timeout_ms","embedding_model","embedding_timeout_ms","location_model","location_timeout_ms","search_budget_ms","high_load_budget_ms","high_load_threshold","uncached_concurrency","openai_max_retries","current_in_flight_requests","available_parsing_models","available_embedding_models"],"title":"AdminSearchConfigResponse","type":"object"},"AdminSearchConfigUpdate":{"additionalProperties":false,"description":"Admin update payload for search runtime settings.","properties":{"embedding_timeout_ms":{"anyOf":[{"maximum":10000.0,"minimum":500.0,"type":"integer"},{"type":"null"}],"description":"New embedding timeout in ms","title":"Embedding Timeout Ms"},"high_load_budget_ms":{"anyOf":[{"minimum":50.0,"type":"integer"},{"type":"null"}],"description":"New high load budget in ms","title":"High Load Budget Ms"},"high_load_threshold":{"anyOf":[{"minimum":1.0,"type":"integer"},{"type":"null"}],"description":"New high load threshold","title":"High Load Threshold"},"location_model":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"New location model","title":"Location Model"},"location_timeout_ms":{"anyOf":[{"maximum":10000.0,"minimum":500.0,"type":"integer"},{"type":"null"}],"description":"New location LLM timeout in ms","title":"Location Timeout Ms"},"openai_max_retries":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"New OpenAI max retries","title":"Openai Max Retries"},"parsing_model":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"New parsing model","title":"Parsing Model"},"parsing_timeout_ms":{"anyOf":[{"maximum":10000.0,"minimum":500.0,"type":"integer"},{"type":"null"}],"description":"New parsing timeout in ms","title":"Parsing Timeout Ms"},"search_budget_ms":{"anyOf":[{"minimum":50.0,"type":"integer"},{"type":"null"}],"description":"New request budget in ms","title":"Search Budget Ms"},"uncached_concurrency":{"anyOf":[{"minimum":1.0,"type":"integer"},{"type":"null"}],"description":"New uncached concurrency limit","title":"Uncached Concurrency"}},"title":"AdminSearchConfigUpdate","type":"object"},"Alert":{"properties":{"acknowledged_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Acknowledged At"},"acknowledged_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Acknowledged By"},"category":{"title":"Category","type":"string"},"current_value":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Current Value","type":"string"},"description":{"title":"Description","type":"string"},"id":{"title":"Id","type":"string"},"metric_name":{"title":"Metric Name","type":"string"},"recommended_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommended Action"},"severity":{"title":"Severity","type":"string"},"threshold_value":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Threshold Value","type":"string"},"title":{"title":"Title","type":"string"},"triggered_at":{"format":"date-time","title":"Triggered At","type":"string"}},"required":["id","severity","category","title","description","metric_name","current_value","threshold_value","triggered_at"],"title":"Alert","type":"object"},"AlertAcknowledgeResponse":{"additionalProperties":false,"description":"Alert acknowledgement response.","properties":{"alert_type":{"description":"Alert type that was acknowledged","title":"Alert Type","type":"string"},"status":{"description":"Acknowledgement status","title":"Status","type":"string"}},"required":["status","alert_type"],"title":"AlertAcknowledgeResponse","type":"object"},"AlertCategory":{"enum":["revenue","operations","quality","technical"],"title":"AlertCategory","type":"string"},"AlertDetail":{"additionalProperties":false,"description":"Individual alert details.","properties":{"created_at":{"description":"When the alert was created (ISO format)","title":"Created At","type":"string"},"details":{"anyOf":[{"discriminator":{"mapping":{"extremely_slow_query":"#/components/schemas/ExtremelySlowQueryDetails","extremely_slow_request":"#/components/schemas/ExtremelySlowRequestDetails","high_db_pool_usage":"#/components/schemas/HighDbPoolUsageDetails","high_memory_usage":"#/components/schemas/HighMemoryUsageDetails","low_cache_hit_rate":"#/components/schemas/LowCacheHitRateDetails"},"propertyName":"alert_type"},"oneOf":[{"$ref":"#/components/schemas/ExtremelySlowQueryDetails"},{"$ref":"#/components/schemas/ExtremelySlowRequestDetails"},{"$ref":"#/components/schemas/HighDbPoolUsageDetails"},{"$ref":"#/components/schemas/HighMemoryUsageDetails"},{"$ref":"#/components/schemas/LowCacheHitRateDetails"}]},{"type":"null"}],"description":"Type-specific alert details","title":"Details"},"email_sent":{"description":"Whether email notification was sent","title":"Email Sent","type":"boolean"},"github_issue":{"description":"Whether GitHub issue was created","title":"Github Issue","type":"boolean"},"id":{"description":"Alert ID","title":"Id","type":"string"},"message":{"description":"Alert message","title":"Message","type":"string"},"severity":{"description":"Alert severity level","title":"Severity","type":"string"},"title":{"description":"Alert title","title":"Title","type":"string"},"type":{"description":"Type of alert","title":"Type","type":"string"}},"required":["id","type","severity","title","message","created_at","email_sent","github_issue"],"title":"AlertDetail","type":"object"},"AlertInfo":{"description":"Alert information.","properties":{"message":{"description":"Alert message","title":"Message","type":"string"},"severity":{"description":"Alert severity (info/warning/critical)","title":"Severity","type":"string"},"timestamp":{"description":"Alert timestamp","format":"date-time","title":"Timestamp","type":"string"},"type":{"description":"Alert type","title":"Type","type":"string"}},"required":["type","severity","message","timestamp"],"title":"AlertInfo","type":"object"},"AlertSeverity":{"enum":["critical","warning","info"],"title":"AlertSeverity","type":"string"},"AlertSummaryResponse":{"additionalProperties":false,"description":"Response for alert summary endpoint.","properties":{"by_day":{"description":"Daily alert counts","items":{"$ref":"#/components/schemas/DailyAlertCount"},"title":"By Day","type":"array"},"by_severity":{"additionalProperties":{"type":"integer"},"description":"Alert counts grouped by severity","title":"By Severity","type":"object"},"by_type":{"additionalProperties":{"type":"integer"},"description":"Alert counts grouped by type","title":"By Type","type":"object"},"days":{"description":"Number of days included in summary","title":"Days","type":"integer"},"total":{"description":"Total number of alerts in the period","title":"Total","type":"integer"}},"required":["days","by_type","by_severity","by_day","total"],"title":"AlertSummaryResponse","type":"object"},"AllServicesMetadata":{"additionalProperties":false,"description":"Metadata for full catalog-with-instructors payload.","properties":{"cached_for_seconds":{"title":"Cached For Seconds","type":"integer"},"total_categories":{"title":"Total Categories","type":"integer"},"total_services":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Services"},"updated_at":{"title":"Updated At","type":"string"}},"required":["total_categories","cached_for_seconds","updated_at"],"title":"AllServicesMetadata","type":"object"},"AllServicesWithInstructorsResponse":{"additionalProperties":false,"description":"Full catalog payload including instructor analytics.","properties":{"categories":{"items":{"$ref":"#/components/schemas/CategoryWithServices"},"title":"Categories","type":"array"},"metadata":{"$ref":"#/components/schemas/AllServicesMetadata"}},"required":["metadata"],"title":"AllServicesWithInstructorsResponse","type":"object"},"AnnouncementAudience":{"enum":["all_users","all_students","all_instructors","active_students","active_instructors","founding_instructors"],"title":"AnnouncementAudience","type":"string"},"AnnouncementExecuteRequest":{"properties":{"confirm_token":{"title":"Confirm Token","type":"string"},"idempotency_key":{"title":"Idempotency Key","type":"string"}},"required":["confirm_token","idempotency_key"],"title":"AnnouncementExecuteRequest","type":"object"},"AnnouncementExecuteResponse":{"properties":{"audience_size":{"title":"Audience Size","type":"integer"},"batch_id":{"title":"Batch Id","type":"string"},"channel_results":{"additionalProperties":{"additionalProperties":{"type":"integer"},"type":"object"},"title":"Channel Results","type":"object"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled For"},"status":{"title":"Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","status","batch_id","audience_size","channel_results"],"title":"AnnouncementExecuteResponse","type":"object"},"AnnouncementPreviewRequest":{"properties":{"audience":{"$ref":"#/components/schemas/AnnouncementAudience"},"body":{"maxLength":5000,"minLength":1,"title":"Body","type":"string"},"channels":{"items":{"$ref":"#/components/schemas/CommunicationChannel"},"minItems":1,"title":"Channels","type":"array"},"high_priority":{"default":false,"title":"High Priority","type":"boolean"},"schedule_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Schedule At"},"subject":{"anyOf":[{"maxLength":200,"type":"string"},{"type":"null"}],"title":"Subject"},"title":{"maxLength":200,"minLength":1,"title":"Title","type":"string"}},"required":["audience","channels","title","body"],"title":"AnnouncementPreviewRequest","type":"object"},"AnnouncementPreviewResponse":{"properties":{"audience_size":{"title":"Audience Size","type":"integer"},"channel_breakdown":{"additionalProperties":{"type":"integer"},"title":"Channel Breakdown","type":"object"},"confirm_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Confirm Token"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key"},"rendered_content":{"$ref":"#/components/schemas/RenderedContent"},"warnings":{"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["audience_size","channel_breakdown","rendered_content"],"title":"AnnouncementPreviewResponse","type":"object"},"AppendHistoryResponse":{"additionalProperties":false,"properties":{"count":{"minimum":0.0,"title":"Count","type":"integer"},"status":{"title":"Status","type":"string"}},"required":["status","count"],"title":"AppendHistoryResponse","type":"object"},"ApplyToDateRangeRequest":{"additionalProperties":false,"description":"Schema for applying a week pattern to a date range.","properties":{"end_date":{"format":"date","title":"End Date","type":"string"},"from_week_start":{"format":"date","title":"From Week Start","type":"string"},"start_date":{"format":"date","title":"Start Date","type":"string"}},"required":["from_week_start","start_date","end_date"],"title":"ApplyToDateRangeRequest","type":"object"},"ApplyToDateRangeResponse":{"additionalProperties":false,"properties":{"dates_processed":{"default":0,"title":"Dates Processed","type":"integer"},"dates_with_slots":{"default":0,"title":"Dates With Slots","type":"integer"},"dates_with_windows":{"default":0,"title":"Dates With Windows","type":"integer"},"days_written":{"title":"Days Written","type":"integer"},"edited_dates":{"items":{"type":"string"},"title":"Edited Dates","type":"array"},"end_date":{"format":"date","title":"End Date","type":"string"},"message":{"title":"Message","type":"string"},"skipped_past_targets":{"default":0,"title":"Skipped Past Targets","type":"integer"},"start_date":{"format":"date","title":"Start Date","type":"string"},"weeks_affected":{"title":"Weeks Affected","type":"integer"},"weeks_applied":{"title":"Weeks Applied","type":"integer"},"windows_created":{"title":"Windows Created","type":"integer"},"written_dates":{"items":{"type":"string"},"title":"Written Dates","type":"array"}},"required":["message","start_date","end_date","weeks_applied","windows_created","weeks_affected","days_written"],"title":"ApplyToDateRangeResponse","type":"object"},"AuditActor":{"additionalProperties":false,"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"type":{"title":"Type","type":"string"}},"required":["type"],"title":"AuditActor","type":"object"},"AuditEntry":{"additionalProperties":false,"properties":{"action":{"title":"Action","type":"string"},"actor":{"$ref":"#/components/schemas/AuditActor"},"changes":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Changes"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"resource":{"$ref":"#/components/schemas/AuditResource"},"status":{"title":"Status","type":"string"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["id","timestamp","actor","action","resource","status"],"title":"AuditEntry","type":"object"},"AuditLogListResponse":{"description":"Paginated audit log response.","properties":{"items":{"items":{"$ref":"#/components/schemas/AuditLogView"},"title":"Items","type":"array"},"limit":{"title":"Limit","type":"integer"},"offset":{"title":"Offset","type":"integer"},"total":{"title":"Total","type":"integer"}},"required":["items","total","limit","offset"],"title":"AuditLogListResponse","type":"object"},"AuditLogView":{"description":"Single audit log entry.","properties":{"action":{"title":"Action","type":"string"},"actor_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Id"},"actor_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Role"},"after":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"After"},"before":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Before"},"entity_id":{"title":"Entity Id","type":"string"},"entity_type":{"title":"Entity Type","type":"string"},"id":{"title":"Id","type":"string"},"occurred_at":{"format":"date-time","title":"Occurred At","type":"string"}},"required":["id","entity_type","entity_id","action","occurred_at"],"title":"AuditLogView","type":"object"},"AuditResource":{"additionalProperties":false,"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"type":{"title":"Type","type":"string"}},"required":["type"],"title":"AuditResource","type":"object"},"AuditSearchMeta":{"additionalProperties":false,"properties":{"returned_count":{"title":"Returned Count","type":"integer"},"since_hours":{"title":"Since Hours","type":"integer"},"time_window":{"$ref":"#/components/schemas/MCPTimeWindow"},"total_count":{"title":"Total Count","type":"integer"}},"required":["since_hours","total_count","returned_count","time_window"],"title":"AuditSearchMeta","type":"object"},"AuditSearchResponse":{"additionalProperties":false,"properties":{"entries":{"items":{"$ref":"#/components/schemas/AuditEntry"},"title":"Entries","type":"array"},"meta":{"$ref":"#/components/schemas/AuditSearchMeta"},"summary":{"$ref":"#/components/schemas/AuditSearchSummary"}},"required":["meta","summary","entries"],"title":"AuditSearchResponse","type":"object"},"AuditSearchSummary":{"additionalProperties":false,"properties":{"by_action":{"additionalProperties":{"type":"integer"},"title":"By Action","type":"object"},"by_actor_type":{"additionalProperties":{"type":"integer"},"title":"By Actor Type","type":"object"},"by_status":{"additionalProperties":{"type":"integer"},"title":"By Status","type":"object"}},"required":["by_action","by_actor_type","by_status"],"title":"AuditSearchSummary","type":"object"},"AuthUserWithPermissionsResponse":{"additionalProperties":false,"description":"Extends auth user response with optional beta metadata.","properties":{"beta_access":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Beta Access"},"beta_invited_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Invited By"},"beta_phase":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Phase"},"beta_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Beta Role"},"email":{"format":"email","title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"founding_instructor_granted":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True if founding instructor status was granted during registration","title":"Founding Instructor Granted"},"has_profile_picture":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Has Profile Picture"},"id":{"title":"Id","type":"string"},"is_active":{"default":true,"title":"Is Active","type":"boolean"},"last_name":{"title":"Last Name","type":"string"},"permissions":{"items":{"type":"string"},"title":"Permissions","type":"array"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"phone_verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Phone Verified"},"profile_picture_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"title":"Profile Picture Version"},"roles":{"items":{"type":"string"},"title":"Roles","type":"array"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"zip_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zip Code"}},"required":["id","email","first_name","last_name"],"title":"AuthUserWithPermissionsResponse","type":"object"},"AutocompleteResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/PlaceSuggestion"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"AutocompleteResponse","type":"object"},"AvailabilityCacheMetrics":{"description":"Detailed availability cache metrics.","properties":{"cache_efficiency":{"default":"unknown","description":"Cache efficiency rating","title":"Cache Efficiency","type":"string"},"hit_rate":{"default":"0.0%","description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"hits":{"default":0,"description":"Cache hits","title":"Hits","type":"integer"},"invalidations":{"default":0,"description":"Cache invalidations","title":"Invalidations","type":"integer"},"misses":{"default":0,"description":"Cache misses","title":"Misses","type":"integer"},"total_requests":{"default":0,"description":"Total cache requests","title":"Total Requests","type":"integer"}},"title":"AvailabilityCacheMetrics","type":"object"},"AvailabilityCacheMetricsResponse":{"additionalProperties":false,"description":"Availability-specific cache metrics response.","properties":{"availability_cache_metrics":{"$ref":"#/components/schemas/AvailabilityCacheMetrics","description":"Availability cache metrics"},"cache_tiers_info":{"additionalProperties":{"type":"string"},"description":"Cache tier configuration","title":"Cache Tiers Info","type":"object"},"recommendations":{"description":"Performance recommendations","items":{"type":"string"},"title":"Recommendations","type":"array"},"top_cached_keys_sample":{"description":"Sample of top cached keys","items":{"type":"string"},"title":"Top Cached Keys Sample","type":"array"}},"required":["availability_cache_metrics","top_cached_keys_sample","recommendations","cache_tiers_info"],"title":"AvailabilityCacheMetricsResponse","type":"object"},"AvailabilityCheckRequest":{"additionalProperties":false,"description":"Check if a specific time is available for booking.\n\nClean Architecture: Uses instructor, date, and time directly.\nNo slot references needed.","properties":{"booking_date":{"description":"Date to check","format":"date","title":"Booking Date","type":"string"},"end_time":{"description":"End time to check","format":"time","title":"End Time","type":"string"},"instructor_id":{"description":"Instructor to check","title":"Instructor Id","type":"string"},"instructor_service_id":{"description":"Service to book","title":"Instructor Service Id","type":"string"},"start_time":{"description":"Start time to check","format":"time","title":"Start Time","type":"string"}},"required":["instructor_id","instructor_service_id","booking_date","start_time","end_time"],"title":"AvailabilityCheckRequest","type":"object"},"AvailabilityCheckResponse":{"additionalProperties":false,"description":"Response for availability check.","properties":{"available":{"title":"Available","type":"boolean"},"conflicts_with":{"anyOf":[{"items":{"$ref":"#/components/schemas/ConflictingBookingInfo"},"type":"array"},{"type":"null"}],"description":"List of conflicting bookings if any","title":"Conflicts With"},"min_advance_hours":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Advance Hours"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"time_info":{"anyOf":[{"$ref":"#/components/schemas/TimeSlotInfo"},{"type":"null"}],"description":"Time slot information for the availability check"}},"required":["available"],"title":"AvailabilityCheckResponse","type":"object"},"AvailabilityConflictInfo":{"additionalProperties":false,"description":"Information about a booking that conflicts with an availability operation.","properties":{"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of conflicting booking","title":"Booking Id"},"end_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End time of conflict","title":"End Time"},"start_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start time of conflict","title":"Start Time"}},"title":"AvailabilityConflictInfo","type":"object"},"AvailabilityMetrics":{"description":"Availability-specific cache metrics.","properties":{"availability_hit_rate":{"default":"0.0%","description":"Availability cache hit rate","title":"Availability Hit Rate","type":"string"},"availability_invalidations":{"default":0,"description":"Availability cache invalidations","title":"Availability Invalidations","type":"integer"},"availability_total_requests":{"default":0,"description":"Total availability requests","title":"Availability Total Requests","type":"integer"}},"title":"AvailabilityMetrics","type":"object"},"AvailabilityWindowBulkUpdateRequest":{"additionalProperties":false,"description":"Request schema for bulk availability update.","properties":{"operations":{"items":{"$ref":"#/components/schemas/SlotOperation"},"title":"Operations","type":"array"},"validate_only":{"default":false,"description":"If true, only validate without making changes","title":"Validate Only","type":"boolean"}},"required":["operations"],"title":"AvailabilityWindowBulkUpdateRequest","type":"object"},"AvailabilityWindowResponse":{"description":"Response schema for availability windows.\nClean Architecture: Only meaningful fields for single-table design.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"specific_date":{"format":"date","title":"Specific Date","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["id","instructor_id","specific_date","start_time","end_time"],"title":"AvailabilityWindowResponse","type":"object"},"AvailabilityWindowUpdate":{"additionalProperties":false,"description":"Schema for updating an availability window.","properties":{"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"title":"AvailabilityWindowUpdate","type":"object"},"BGCCaseCountsResponse":{"additionalProperties":false,"properties":{"pending":{"title":"Pending","type":"integer"},"review":{"title":"Review","type":"integer"}},"required":["review","pending"],"title":"BGCCaseCountsResponse","type":"object"},"BGCCaseItemModel":{"additionalProperties":false,"properties":{"bgc_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Completed At"},"bgc_eta":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Eta"},"bgc_expires_in_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Bgc Expires In Days"},"bgc_includes_canceled":{"default":false,"title":"Bgc Includes Canceled","type":"boolean"},"bgc_is_expired":{"default":false,"title":"Bgc Is Expired","type":"boolean"},"bgc_report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Report Id"},"bgc_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Status"},"bgc_valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Valid Until"},"checkr_report_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Checkr Report Url"},"consent_recent":{"title":"Consent Recent","type":"boolean"},"consent_recent_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Consent Recent At"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"dispute_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Dispute Note"},"dispute_opened_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Opened At"},"dispute_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Resolved At"},"email":{"title":"Email","type":"string"},"in_dispute":{"default":false,"title":"In Dispute","type":"boolean"},"instructor_id":{"title":"Instructor Id","type":"string"},"is_live":{"title":"Is Live","type":"boolean"},"name":{"title":"Name","type":"string"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["instructor_id","name","email","is_live","consent_recent"],"title":"BGCCaseItemModel","type":"object"},"BGCCaseListResponse":{"additionalProperties":false,"properties":{"has_next":{"title":"Has Next","type":"boolean"},"has_prev":{"title":"Has Prev","type":"boolean"},"items":{"items":{"$ref":"#/components/schemas/BGCCaseItemModel"},"title":"Items","type":"array"},"page":{"title":"Page","type":"integer"},"page_size":{"title":"Page Size","type":"integer"},"total":{"title":"Total","type":"integer"},"total_pages":{"title":"Total Pages","type":"integer"}},"required":["items","total","page","page_size","total_pages","has_next","has_prev"],"title":"BGCCaseListResponse","type":"object"},"BGCDisputeResponse":{"additionalProperties":false,"properties":{"dispute_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Dispute Note"},"dispute_opened_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Opened At"},"dispute_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Resolved At"},"in_dispute":{"title":"In Dispute","type":"boolean"},"ok":{"title":"Ok","type":"boolean"},"resumed":{"default":false,"title":"Resumed","type":"boolean"},"scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled For"}},"required":["ok","in_dispute"],"title":"BGCDisputeResponse","type":"object"},"BGCExpiringItem":{"additionalProperties":false,"properties":{"bgc_valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Valid Until"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"instructor_id":{"title":"Instructor Id","type":"string"}},"required":["instructor_id"],"title":"BGCExpiringItem","type":"object"},"BGCHistoryItem":{"additionalProperties":false,"properties":{"completed_at":{"format":"date-time","title":"Completed At","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"env":{"title":"Env","type":"string"},"id":{"title":"Id","type":"string"},"package":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Package"},"report_id_present":{"title":"Report Id Present","type":"boolean"},"result":{"title":"Result","type":"string"}},"required":["id","result","env","completed_at","created_at","report_id_present"],"title":"BGCHistoryItem","type":"object"},"BGCHistoryResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/BGCHistoryItem"},"title":"Items","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["items"],"title":"BGCHistoryResponse","type":"object"},"BGCLatestConsentResponse":{"additionalProperties":false,"properties":{"consent_version":{"title":"Consent Version","type":"string"},"consented_at":{"format":"date-time","title":"Consented At","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"ip_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"}},"required":["instructor_id","consented_at","consent_version"],"title":"BGCLatestConsentResponse","type":"object"},"BGCOverrideResponse":{"additionalProperties":false,"properties":{"new_status":{"enum":["passed","failed"],"title":"New Status","type":"string"},"ok":{"title":"Ok","type":"boolean"}},"required":["ok","new_status"],"title":"BGCOverrideResponse","type":"object"},"BGCReviewCountResponse":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"}},"required":["count"],"title":"BGCReviewCountResponse","type":"object"},"BGCReviewItemModel":{"additionalProperties":false,"properties":{"bgc_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Completed At"},"bgc_eta":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Eta"},"bgc_expires_in_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Bgc Expires In Days"},"bgc_includes_canceled":{"default":false,"title":"Bgc Includes Canceled","type":"boolean"},"bgc_is_expired":{"default":false,"title":"Bgc Is Expired","type":"boolean"},"bgc_report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Report Id"},"bgc_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bgc Status"},"bgc_valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Valid Until"},"checkr_report_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Checkr Report Url"},"consented_at_recent":{"title":"Consented At Recent","type":"boolean"},"consented_at_recent_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Consented At Recent At"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"dispute_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Dispute Note"},"dispute_opened_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Opened At"},"dispute_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Dispute Resolved At"},"email":{"title":"Email","type":"string"},"in_dispute":{"default":false,"title":"In Dispute","type":"boolean"},"instructor_id":{"title":"Instructor Id","type":"string"},"is_live":{"title":"Is Live","type":"boolean"},"name":{"title":"Name","type":"string"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["instructor_id","name","email","consented_at_recent","is_live"],"title":"BGCReviewItemModel","type":"object"},"BGCReviewListResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/BGCReviewItemModel"},"title":"Items","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["items"],"title":"BGCReviewListResponse","type":"object"},"BGCWebhookLogEntry":{"additionalProperties":false,"properties":{"candidate_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Candidate Id"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"delivery_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Id"},"event_type":{"title":"Event Type","type":"string"},"http_status":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Http Status"},"id":{"title":"Id","type":"string"},"instructor_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Id"},"invitation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invitation Id"},"payload":{"additionalProperties":true,"title":"Payload","type":"object"},"report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report Id"},"resource_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Id"},"result":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Result"},"signature":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Signature"}},"required":["id","event_type","created_at","payload"],"title":"BGCWebhookLogEntry","type":"object"},"BGCWebhookLogListResponse":{"additionalProperties":false,"properties":{"error_count_24h":{"title":"Error Count 24H","type":"integer"},"items":{"items":{"$ref":"#/components/schemas/BGCWebhookLogEntry"},"title":"Items","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["items","error_count_24h"],"title":"BGCWebhookLogListResponse","type":"object"},"BGCWebhookStatsResponse":{"additionalProperties":false,"properties":{"error_count_24h":{"title":"Error Count 24H","type":"integer"}},"required":["error_count_24h"],"title":"BGCWebhookStatsResponse","type":"object"},"BackgroundCheckInviteRequest":{"additionalProperties":false,"description":"Payload accepted by the background check invite endpoint.","properties":{"package_slug":{"anyOf":[{"maxLength":64,"minLength":1,"type":"string"},{"type":"null"}],"description":"Optional Checkr package slug override","title":"Package Slug"}},"title":"BackgroundCheckInviteRequest","type":"object"},"BackgroundCheckInviteResponse":{"additionalProperties":false,"description":"Response returned after invoking a background check invitation.","properties":{"already_in_progress":{"default":false,"title":"Already In Progress","type":"boolean"},"candidate_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Candidate Id"},"invitation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invitation Id"},"ok":{"default":true,"title":"Ok","type":"boolean"},"report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report Id"},"status":{"enum":["pending","review","consider","passed","failed","canceled"],"title":"Status","type":"string"}},"required":["status"],"title":"BackgroundCheckInviteResponse","type":"object"},"BackgroundCheckStatusResponse":{"additionalProperties":false,"description":"Current background check status for an instructor.","properties":{"bgc_includes_canceled":{"default":false,"title":"Bgc Includes Canceled","type":"boolean"},"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"consent_recent":{"default":false,"title":"Consent Recent","type":"boolean"},"consent_recent_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Consent Recent At"},"env":{"enum":["sandbox","production"],"title":"Env","type":"string"},"eta":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Eta"},"expires_in_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Expires In Days"},"is_expired":{"default":false,"title":"Is Expired","type":"boolean"},"report_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report Id"},"status":{"enum":["pending","review","consider","passed","failed","canceled"],"title":"Status","type":"string"},"valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Valid Until"}},"required":["status","env"],"title":"BackgroundCheckStatusResponse","type":"object"},"BackupCodesResponse":{"additionalProperties":false,"properties":{"backup_codes":{"items":{"type":"string"},"title":"Backup Codes","type":"array"}},"required":["backup_codes"],"title":"BackupCodesResponse","type":"object"},"BadgeProgressView":{"additionalProperties":true,"properties":{"current":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current"},"goal":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Goal"},"percent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Percent"}},"title":"BadgeProgressView","type":"object"},"BalanceMetrics":{"properties":{"demand_fulfillment":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Demand Fulfillment","type":"string"},"status":{"title":"Status","type":"string"},"supply_demand_ratio":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Supply Demand Ratio","type":"string"},"supply_utilization":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Supply Utilization","type":"string"}},"required":["supply_utilization","demand_fulfillment","supply_demand_ratio","status"],"title":"BalanceMetrics","type":"object"},"BaseDeleteResponse":{"additionalProperties":false,"description":"Standard response for delete operations.","properties":{"deleted_at":{"description":"Deletion timestamp","format":"date-time","title":"Deleted At","type":"string"},"message":{"description":"Human-readable deletion message","title":"Message","type":"string"},"success":{"default":true,"description":"Deletion success status","title":"Success","type":"boolean"}},"required":["message"],"title":"BaseDeleteResponse","type":"object"},"BasicCacheStats":{"description":"Basic cache statistics.","properties":{"errors":{"default":0,"description":"Cache errors","title":"Errors","type":"integer"},"hit_rate":{"default":"0.0%","description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"hits":{"default":0,"description":"Cache hits","title":"Hits","type":"integer"},"misses":{"default":0,"description":"Cache misses","title":"Misses","type":"integer"}},"title":"BasicCacheStats","type":"object"},"BetaMetricsSummaryResponse":{"additionalProperties":false,"properties":{"invites_errors_24h":{"title":"Invites Errors 24H","type":"integer"},"invites_sent_24h":{"title":"Invites Sent 24H","type":"integer"},"phase_counts_24h":{"additionalProperties":{"type":"integer"},"title":"Phase Counts 24H","type":"object"}},"required":["invites_sent_24h","invites_errors_24h","phase_counts_24h"],"title":"BetaMetricsSummaryResponse","type":"object"},"BetaSettingsResponse":{"additionalProperties":false,"description":"Response payload describing beta feature flags.","properties":{"allow_signup_without_invite":{"title":"Allow Signup Without Invite","type":"boolean"},"beta_disabled":{"title":"Beta Disabled","type":"boolean"},"beta_phase":{"title":"Beta Phase","type":"string"}},"required":["beta_disabled","beta_phase","allow_signup_without_invite"],"title":"BetaSettingsResponse","type":"object"},"BetaSettingsUpdateRequest":{"additionalProperties":false,"description":"Request payload for updating beta settings.","properties":{"allow_signup_without_invite":{"title":"Allow Signup Without Invite","type":"boolean"},"beta_disabled":{"title":"Beta Disabled","type":"boolean"},"beta_phase":{"title":"Beta Phase","type":"string"}},"required":["beta_disabled","beta_phase","allow_signup_without_invite"],"title":"BetaSettingsUpdateRequest","type":"object"},"BlackoutDateCreate":{"additionalProperties":false,"description":"Schema for creating a blackout date.","properties":{"date":{"format":"date","title":"Date","type":"string"},"reason":{"anyOf":[{"maxLength":255,"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["date"],"title":"BlackoutDateCreate","type":"object"},"BlackoutDateResponse":{"description":"Response schema for blackout dates.","properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"date":{"format":"date","title":"Date","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["id","instructor_id","date","created_at"],"title":"BlackoutDateResponse","type":"object"},"BlockedAccount":{"description":"Blocked account information.","properties":{"blocks":{"$ref":"#/components/schemas/BlocksState"},"email":{"title":"Email","type":"string"},"failure_count":{"default":0,"title":"Failure Count","type":"integer"}},"required":["email","blocks"],"title":"BlockedAccount","type":"object"},"BlocksState":{"description":"All block states for an account.","properties":{"captcha_required":{"anyOf":[{"$ref":"#/components/schemas/CaptchaState"},{"type":"null"}]},"lockout":{"anyOf":[{"$ref":"#/components/schemas/LockoutState"},{"type":"null"}]},"rate_limit_hour":{"anyOf":[{"$ref":"#/components/schemas/RateLimitState"},{"type":"null"}]},"rate_limit_minute":{"anyOf":[{"$ref":"#/components/schemas/RateLimitState"},{"type":"null"}]}},"title":"BlocksState","type":"object"},"Body_dispute_completion_api_v1_instructor_bookings__booking_id__dispute_post":{"properties":{"reason":{"title":"Reason","type":"string"}},"required":["reason"],"title":"Body_dispute_completion_api_v1_instructor_bookings__booking_id__dispute_post","type":"object"},"Body_login_api_v1_auth_login_post":{"properties":{"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"},"grant_type":{"anyOf":[{"pattern":"^password$","type":"string"},{"type":"null"}],"title":"Grant Type"},"password":{"format":"password","title":"Password","type":"string"},"scope":{"default":"","title":"Scope","type":"string"},"username":{"title":"Username","type":"string"}},"required":["username","password"],"title":"Body_login_api_v1_auth_login_post","type":"object"},"Body_proxy_upload_to_r2_api_v1_uploads_r2_proxy_post":{"properties":{"content_type":{"description":"Content type reported by the browser","title":"Content Type","type":"string"},"file":{"format":"binary","title":"File","type":"string"},"key":{"description":"Temporary object key from the signed upload response","title":"Key","type":"string"}},"required":["file","key","content_type"],"title":"Body_proxy_upload_to_r2_api_v1_uploads_r2_proxy_post","type":"object"},"Body_respond_to_review_api_v1_reviews__review_id__respond_post":{"properties":{"response_text":{"title":"Response Text","type":"string"}},"required":["response_text"],"title":"Body_respond_to_review_api_v1_reviews__review_id__respond_post","type":"object"},"BookedSlotItem":{"additionalProperties":false,"description":"Individual booked slot with booking details for calendar display.","properties":{"booking_id":{"description":"ULID of the booking","title":"Booking Id","type":"string"},"date":{"description":"ISO date string (YYYY-MM-DD)","title":"Date","type":"string"},"duration_minutes":{"description":"Duration of the booking in minutes","title":"Duration Minutes","type":"integer"},"end_time":{"description":"ISO time string (HH:MM:SS)","title":"End Time","type":"string"},"location_type":{"description":"Location type (student_location, instructor_location, online, neutral_location)","enum":["student_location","instructor_location","online","neutral_location"],"title":"Location Type","type":"string"},"service_area_short":{"description":"Abbreviated service area","title":"Service Area Short","type":"string"},"service_name":{"description":"Name of the service booked","title":"Service Name","type":"string"},"start_time":{"description":"ISO time string (HH:MM:SS)","title":"Start Time","type":"string"},"student_first_name":{"description":"Student's first name","title":"Student First Name","type":"string"},"student_last_initial":{"description":"Student's last name initial","title":"Student Last Initial","type":"string"}},"required":["location_type","booking_id","date","start_time","end_time","student_first_name","student_last_initial","service_name","service_area_short","duration_minutes"],"title":"BookedSlotItem","type":"object"},"BookedSlotsResponse":{"additionalProperties":false,"properties":{"booked_slots":{"description":"List of booked slots with booking details","items":{"$ref":"#/components/schemas/BookedSlotItem"},"title":"Booked Slots","type":"array"},"week_end":{"format":"date","title":"Week End","type":"string"},"week_start":{"format":"date","title":"Week Start","type":"string"}},"required":["week_start","week_end","booked_slots"],"title":"BookedSlotsResponse","type":"object"},"BookingCancel":{"additionalProperties":false,"properties":{"reason":{"description":"Cancellation reason","maxLength":500,"minLength":1,"title":"Reason","type":"string"}},"required":["reason"],"title":"BookingCancel","type":"object"},"BookingConfirmPayment":{"additionalProperties":false,"properties":{"payment_method_id":{"description":"Stripe payment method ID from completed SetupIntent","title":"Payment Method Id","type":"string"},"save_payment_method":{"default":false,"description":"Whether to save this payment method for future use","title":"Save Payment Method","type":"boolean"}},"required":["payment_method_id"],"title":"BookingConfirmPayment","type":"object"},"BookingCreate":{"additionalProperties":false,"description":"Create a booking with self-contained time information.\n\nClean Architecture: No slot references - bookings are independent.\nThe booking contains all necessary information about when and where\nthe lesson will occur.","properties":{"booking_date":{"description":"Date of the booking","format":"date","title":"Booking Date","type":"string"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"description":"Calculated end time (set automatically)","title":"End Time"},"instructor_id":{"description":"Instructor to book","title":"Instructor Id","type":"string"},"instructor_service_id":{"description":"Instructor service being booked","title":"Instructor Service Id","type":"string"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Structured location address for in-person lessons","title":"Location Address"},"location_lat":{"anyOf":[{"maximum":90.0,"minimum":-90.0,"type":"number"},{"type":"null"}],"description":"Latitude for the lesson location","title":"Location Lat"},"location_lng":{"anyOf":[{"maximum":180.0,"minimum":-180.0,"type":"number"},{"type":"null"}],"description":"Longitude for the lesson location","title":"Location Lng"},"location_place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Place ID for the lesson location","title":"Location Place Id"},"location_type":{"anyOf":[{"enum":["student_location","instructor_location","online","neutral_location"],"type":"string"},{"type":"null"}],"default":"online","description":"Type of meeting location","title":"Location Type"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Specific meeting location if applicable","title":"Meeting Location"},"selected_duration":{"description":"Selected duration in minutes from service's duration_options","maximum":720.0,"minimum":15.0,"title":"Selected Duration","type":"integer"},"start_time":{"description":"Start time","format":"time","title":"Start Time","type":"string"},"student_note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"description":"Optional note from student","title":"Student Note"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"IANA timezone for booking times (defaults to instructor timezone)","title":"Timezone"}},"required":["instructor_id","instructor_service_id","booking_date","start_time","selected_duration"],"title":"BookingCreate","type":"object"},"BookingCreateResponse":{"description":"Response after creating a booking with payment setup.\n\nIncludes SetupIntent client_secret for collecting payment method.","properties":{"auth_attempted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Auth Attempted At"},"auth_failure_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Auth Failure Count"},"auth_last_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Last Error"},"auth_scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Auth Scheduled For"},"booking_date":{"format":"date","title":"Booking Date","type":"string"},"booking_end_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking End Utc"},"booking_start_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Start Utc"},"can_join_lesson":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Join Lesson"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"cancelled_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Cancelled At"},"cancelled_by_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancelled By Id"},"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"credits_reserved_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Credits Reserved Cents"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"format":"time","title":"End Time","type":"string"},"has_locked_funds":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Locked Funds"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/InstructorInfo"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Note"},"instructor_payout_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Instructor Payout Amount"},"instructor_service":{"$ref":"#/components/schemas/BookingServiceInfo"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"instructor_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Timezone"},"join_closes_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Join Closes At"},"join_opens_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Join Opens At"},"lesson_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lesson Timezone"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address"},"location_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lat"},"location_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lng"},"location_place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Place Id"},"location_type":{"anyOf":[{"enum":["student_location","instructor_location","online","neutral_location"],"type":"string"},{"type":"null"}],"title":"Location Type"},"lock_resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lock Resolution"},"lock_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Lock Resolved At"},"locked_amount_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Locked Amount Cents"},"locked_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Locked At"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"no_show_dispute_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Dispute Reason"},"no_show_disputed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"No Show Disputed"},"no_show_disputed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Disputed At"},"no_show_reported_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Reported At"},"no_show_reported_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Reported By"},"no_show_resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Resolution"},"no_show_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Resolved At"},"no_show_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Type"},"payment_summary":{"anyOf":[{"$ref":"#/components/schemas/PaymentSummary"},{"type":"null"}]},"refunded_to_card_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Refunded To Card Amount"},"requires_payment_method":{"default":true,"description":"Whether payment method is required before confirmation","title":"Requires Payment Method","type":"boolean"},"rescheduled_from":{"anyOf":[{"$ref":"#/components/schemas/RescheduledFromInfo"},{"type":"null"}]},"rescheduled_from_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled From Booking Id"},"rescheduled_to_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled To Booking Id"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"settlement_outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Settlement Outcome"},"setup_intent_client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe SetupIntent client_secret for collecting payment method","title":"Setup Intent Client Secret"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"$ref":"#/components/schemas/BookingStatus"},"student":{"$ref":"#/components/schemas/StudentInfo"},"student_credit_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Credit Amount"},"student_id":{"title":"Student Id","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"student_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Timezone"},"total_price":{"title":"Total Price","type":"number"},"video_instructor_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Instructor Joined At"},"video_room_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Video Room Id"},"video_session_duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Video Session Duration Seconds"},"video_session_ended_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Session Ended At"},"video_session_started_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Session Started At"},"video_student_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Student Joined At"}},"required":["id","student_id","instructor_id","instructor_service_id","booking_date","start_time","end_time","service_name","hourly_rate","total_price","duration_minutes","status","service_area","meeting_location","location_type","student_note","instructor_note","created_at","confirmed_at","completed_at","cancelled_at","cancelled_by_id","cancellation_reason","student","instructor","instructor_service"],"title":"BookingCreateResponse","type":"object"},"BookingDetailMeta":{"additionalProperties":false,"properties":{"booking_id":{"title":"Booking Id","type":"string"},"generated_at":{"format":"date-time","title":"Generated At","type":"string"}},"required":["generated_at","booking_id"],"title":"BookingDetailMeta","type":"object"},"BookingDetailResponse":{"additionalProperties":false,"properties":{"admin_notes":{"items":{"$ref":"#/components/schemas/AdminBookingNote"},"title":"Admin Notes","type":"array"},"booking":{"$ref":"#/components/schemas/BookingInfo"},"messages":{"anyOf":[{"$ref":"#/components/schemas/MessagesSummary"},{"type":"null"}]},"meta":{"$ref":"#/components/schemas/BookingDetailMeta"},"payment":{"anyOf":[{"$ref":"#/components/schemas/PaymentInfo"},{"type":"null"}]},"recommended_actions":{"items":{"$ref":"#/components/schemas/RecommendedAction"},"title":"Recommended Actions","type":"array"},"timeline":{"items":{"$ref":"#/components/schemas/TimelineEvent"},"title":"Timeline","type":"array"},"traces":{"anyOf":[{"$ref":"#/components/schemas/TracesSummary"},{"type":"null"}]},"webhooks":{"anyOf":[{"$ref":"#/components/schemas/WebhooksSummary"},{"type":"null"}]}},"required":["meta","booking","timeline","payment","messages","webhooks","traces","recommended_actions"],"title":"BookingDetailResponse","type":"object"},"BookingFunnel":{"properties":{"biggest_drop_off":{"title":"Biggest Drop Off","type":"string"},"drop_off_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Drop Off Rate","type":"string"},"overall_conversion":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Overall Conversion","type":"string"},"period":{"title":"Period","type":"string"},"recommendations":{"items":{"type":"string"},"title":"Recommendations","type":"array"},"segments":{"anyOf":[{"additionalProperties":{"items":{"$ref":"#/components/schemas/FunnelStage"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Segments"},"stages":{"items":{"$ref":"#/components/schemas/FunnelStage"},"title":"Stages","type":"array"}},"required":["period","stages","overall_conversion","biggest_drop_off","drop_off_rate"],"title":"BookingFunnel","type":"object"},"BookingFunnelPeriod":{"enum":["last_7_days","last_30_days","this_month"],"title":"BookingFunnelPeriod","type":"string"},"BookingInfo":{"additionalProperties":false,"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/ParticipantInfo"},"location_type":{"title":"Location Type","type":"string"},"scheduled_at":{"format":"date-time","title":"Scheduled At","type":"string"},"service":{"$ref":"#/components/schemas/AdminBookingDetailServiceInfo"},"status":{"title":"Status","type":"string"},"student":{"$ref":"#/components/schemas/ParticipantInfo"},"updated_at":{"format":"date-time","title":"Updated At","type":"string"}},"required":["id","status","scheduled_at","duration_minutes","location_type","service","student","instructor","created_at","updated_at"],"title":"BookingInfo","type":"object"},"BookingListItem":{"additionalProperties":false,"description":"A booking in a list view with privacy-safe names.","properties":{"booking_date":{"title":"Booking Date","type":"string"},"booking_id":{"title":"Booking Id","type":"string"},"category":{"title":"Category","type":"string"},"created_at":{"title":"Created At","type":"string"},"end_time":{"title":"End Time","type":"string"},"instructor_name":{"title":"Instructor Name","type":"string"},"location_type":{"title":"Location Type","type":"string"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"title":"Start Time","type":"string"},"status":{"title":"Status","type":"string"},"student_name":{"title":"Student Name","type":"string"},"total_cents":{"title":"Total Cents","type":"integer"}},"required":["booking_id","status","booking_date","start_time","end_time","student_name","instructor_name","service_name","category","total_cents","location_type","created_at"],"title":"BookingListItem","type":"object"},"BookingPaymentMethodUpdate":{"additionalProperties":false,"description":"Request to update a booking's payment method, with optional default flag.","properties":{"payment_method_id":{"description":"Stripe payment method ID","title":"Payment Method Id","type":"string"},"set_as_default":{"default":false,"description":"Whether to save as default for the student","title":"Set As Default","type":"boolean"}},"required":["payment_method_id"],"title":"BookingPaymentMethodUpdate","type":"object"},"BookingPeriod":{"enum":["today","yesterday","this_week","last_7_days","this_month"],"title":"BookingPeriod","type":"string"},"BookingPreviewResponse":{"additionalProperties":false,"description":"Response for booking preview with privacy protection.","properties":{"booking_date":{"title":"Booking Date","type":"string"},"booking_id":{"title":"Booking Id","type":"string"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"title":"End Time","type":"string"},"instructor_first_name":{"title":"Instructor First Name","type":"string"},"instructor_last_name":{"title":"Instructor Last Name","type":"string"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address"},"location_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lat"},"location_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lng"},"location_place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Place Id"},"location_type":{"enum":["student_location","instructor_location","online","neutral_location"],"title":"Location Type","type":"string"},"location_type_display":{"title":"Location Type Display","type":"string"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"title":"Start Time","type":"string"},"status":{"title":"Status","type":"string"},"student_first_name":{"title":"Student First Name","type":"string"},"student_last_name":{"title":"Student Last Name","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"total_price":{"title":"Total Price","type":"number"}},"required":["booking_id","student_first_name","student_last_name","instructor_first_name","instructor_last_name","service_name","booking_date","start_time","end_time","duration_minutes","location_type","location_type_display","meeting_location","service_area","status","student_note","total_price"],"title":"BookingPreviewResponse","type":"object"},"BookingRescheduleRequest":{"additionalProperties":false,"description":"Request to reschedule an existing booking by specifying a new date/time and duration.\n\nFrontend will subsequently create a new booking; this endpoint prepares the system by\ncancelling the old booking according to policy and recording audit events.","properties":{"booking_date":{"description":"New date for the lesson","format":"date","title":"Booking Date","type":"string"},"instructor_service_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Override service if needed (defaults to old)","title":"Instructor Service Id"},"selected_duration":{"description":"New selected duration in minutes","maximum":720.0,"minimum":15.0,"title":"Selected Duration","type":"integer"},"start_time":{"description":"New start time (HH:MM)","format":"time","title":"Start Time","type":"string"}},"required":["booking_date","start_time","selected_duration"],"title":"BookingRescheduleRequest","type":"object"},"BookingResponse":{"description":"Complete booking response with privacy protection.\n\nShows instructor as \"FirstName L\" (last initial only).\nStudents see their own full information.\nClean Architecture: No availability slot references.","properties":{"auth_attempted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Auth Attempted At"},"auth_failure_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Auth Failure Count"},"auth_last_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Last Error"},"auth_scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Auth Scheduled For"},"booking_date":{"format":"date","title":"Booking Date","type":"string"},"booking_end_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking End Utc"},"booking_start_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Start Utc"},"can_join_lesson":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Join Lesson"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"cancelled_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Cancelled At"},"cancelled_by_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancelled By Id"},"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"credits_reserved_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Credits Reserved Cents"},"duration_minutes":{"title":"Duration Minutes","type":"integer"},"end_time":{"format":"time","title":"End Time","type":"string"},"has_locked_funds":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Locked Funds"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"instructor":{"$ref":"#/components/schemas/InstructorInfo"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Note"},"instructor_payout_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Instructor Payout Amount"},"instructor_service":{"$ref":"#/components/schemas/BookingServiceInfo"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"instructor_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Timezone"},"join_closes_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Join Closes At"},"join_opens_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Join Opens At"},"lesson_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lesson Timezone"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address"},"location_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lat"},"location_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Lng"},"location_place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Place Id"},"location_type":{"anyOf":[{"enum":["student_location","instructor_location","online","neutral_location"],"type":"string"},{"type":"null"}],"title":"Location Type"},"lock_resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lock Resolution"},"lock_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Lock Resolved At"},"locked_amount_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Locked Amount Cents"},"locked_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Locked At"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"no_show_dispute_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Dispute Reason"},"no_show_disputed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"No Show Disputed"},"no_show_disputed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Disputed At"},"no_show_reported_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Reported At"},"no_show_reported_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Reported By"},"no_show_resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Resolution"},"no_show_resolved_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"No Show Resolved At"},"no_show_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Show Type"},"payment_summary":{"anyOf":[{"$ref":"#/components/schemas/PaymentSummary"},{"type":"null"}]},"refunded_to_card_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Refunded To Card Amount"},"rescheduled_from":{"anyOf":[{"$ref":"#/components/schemas/RescheduledFromInfo"},{"type":"null"}]},"rescheduled_from_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled From Booking Id"},"rescheduled_to_booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rescheduled To Booking Id"},"service_area":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area"},"service_name":{"title":"Service Name","type":"string"},"settlement_outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Settlement Outcome"},"start_time":{"format":"time","title":"Start Time","type":"string"},"status":{"$ref":"#/components/schemas/BookingStatus"},"student":{"$ref":"#/components/schemas/StudentInfo"},"student_credit_amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Credit Amount"},"student_id":{"title":"Student Id","type":"string"},"student_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Note"},"student_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Timezone"},"total_price":{"title":"Total Price","type":"number"},"video_instructor_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Instructor Joined At"},"video_room_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Video Room Id"},"video_session_duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Video Session Duration Seconds"},"video_session_ended_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Session Ended At"},"video_session_started_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Session Started At"},"video_student_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Video Student Joined At"}},"required":["id","student_id","instructor_id","instructor_service_id","booking_date","start_time","end_time","service_name","hourly_rate","total_price","duration_minutes","status","service_area","meeting_location","location_type","student_note","instructor_note","created_at","confirmed_at","completed_at","cancelled_at","cancelled_by_id","cancellation_reason","student","instructor","instructor_service"],"title":"BookingResponse","type":"object"},"BookingServiceInfo":{"description":"Basic service information for booking display.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name","description"],"title":"BookingServiceInfo","type":"object"},"BookingStatsResponse":{"description":"Booking statistics for instructors.","properties":{"average_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Rating"},"cancelled_bookings":{"title":"Cancelled Bookings","type":"integer"},"completed_bookings":{"title":"Completed Bookings","type":"integer"},"this_month_earnings":{"title":"This Month Earnings","type":"number"},"total_bookings":{"title":"Total Bookings","type":"integer"},"total_earnings":{"title":"Total Earnings","type":"number"},"upcoming_bookings":{"title":"Upcoming Bookings","type":"integer"}},"required":["total_bookings","upcoming_bookings","completed_bookings","cancelled_bookings","total_earnings","this_month_earnings"],"title":"BookingStatsResponse","type":"object"},"BookingStatus":{"description":"Booking lifecycle statuses.\n\nCase-insensitive: accepts 'completed', 'COMPLETED', or 'Completed'.","enum":["PENDING","CONFIRMED","COMPLETED","CANCELLED","NO_SHOW"],"title":"BookingStatus","type":"string"},"BookingSummary":{"description":"Minimal booking info shown in conversation context.","properties":{"date":{"title":"Date","type":"string"},"id":{"title":"Id","type":"string"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"title":"Start Time","type":"string"}},"required":["id","date","start_time","service_name"],"title":"BookingSummary","type":"object"},"BookingSummaryResponse":{"additionalProperties":false,"description":"Response for booking summary endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"summary":{"$ref":"#/components/schemas/AdminBookingSummary"}},"required":["summary","checked_at"],"title":"BookingSummaryResponse","type":"object"},"BookingUpdate":{"additionalProperties":false,"description":"Schema for updating booking details.\n\nLimited fields can be updated after booking creation.","properties":{"instructor_note":{"anyOf":[{"maxLength":1000,"type":"string"},{"type":"null"}],"title":"Instructor Note"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"}},"title":"BookingUpdate","type":"object"},"BudgetInfo":{"additionalProperties":false,"description":"Request budget tracking.","properties":{"degradation_level":{"description":"Degradation level label","title":"Degradation Level","type":"string"},"initial_ms":{"description":"Initial request budget in ms","minimum":0.0,"title":"Initial Ms","type":"integer"},"over_budget":{"description":"Whether the budget was exceeded","title":"Over Budget","type":"boolean"},"remaining_ms":{"description":"Remaining budget in ms","minimum":0.0,"title":"Remaining Ms","type":"integer"},"skipped_operations":{"description":"Skipped operations due to budget","items":{"type":"string"},"title":"Skipped Operations","type":"array"}},"required":["initial_ms","remaining_ms","over_budget","degradation_level"],"title":"BudgetInfo","type":"object"},"BuildResponseStageDetails":{"additionalProperties":false,"description":"Details for build_response pipeline stage.","properties":{"result_count":{"description":"Number of results in final response","title":"Result Count","type":"integer"}},"required":["result_count"],"title":"BuildResponseStageDetails","type":"object"},"BulkNotificationExecuteRequest":{"properties":{"confirm_token":{"title":"Confirm Token","type":"string"},"idempotency_key":{"title":"Idempotency Key","type":"string"}},"required":["confirm_token","idempotency_key"],"title":"BulkNotificationExecuteRequest","type":"object"},"BulkNotificationExecuteResponse":{"properties":{"audience_size":{"title":"Audience Size","type":"integer"},"batch_id":{"title":"Batch Id","type":"string"},"channel_results":{"additionalProperties":{"additionalProperties":{"type":"integer"},"type":"object"},"title":"Channel Results","type":"object"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled For"},"status":{"title":"Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","status","batch_id","audience_size","channel_results"],"title":"BulkNotificationExecuteResponse","type":"object"},"BulkNotificationPreviewRequest":{"properties":{"body":{"maxLength":5000,"minLength":1,"title":"Body","type":"string"},"channels":{"items":{"$ref":"#/components/schemas/CommunicationChannel"},"minItems":1,"title":"Channels","type":"array"},"schedule_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Schedule At"},"subject":{"anyOf":[{"maxLength":200,"type":"string"},{"type":"null"}],"title":"Subject"},"target":{"$ref":"#/components/schemas/BulkTarget"},"title":{"maxLength":200,"minLength":1,"title":"Title","type":"string"},"variables":{"additionalProperties":{"type":"string"},"title":"Variables","type":"object"}},"required":["target","channels","title","body"],"title":"BulkNotificationPreviewRequest","type":"object"},"BulkNotificationPreviewResponse":{"properties":{"audience_size":{"title":"Audience Size","type":"integer"},"channel_breakdown":{"additionalProperties":{"type":"integer"},"title":"Channel Breakdown","type":"object"},"confirm_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Confirm Token"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key"},"rendered_content":{"$ref":"#/components/schemas/RenderedContent"},"sample_recipients":{"items":{"$ref":"#/components/schemas/RecipientSample"},"title":"Sample Recipients","type":"array"},"warnings":{"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["audience_size","channel_breakdown","rendered_content"],"title":"BulkNotificationPreviewResponse","type":"object"},"BulkTarget":{"properties":{"active_within_days":{"anyOf":[{"maximum":365.0,"minimum":1.0,"type":"integer"},{"type":"null"}],"title":"Active Within Days"},"categories":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Categories"},"locations":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Locations"},"user_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"User Ids"},"user_type":{"anyOf":[{"$ref":"#/components/schemas/BulkUserType"},{"type":"null"}]}},"title":"BulkTarget","type":"object"},"BulkUpdateResponse":{"additionalProperties":false,"properties":{"failed":{"title":"Failed","type":"integer"},"results":{"items":{"$ref":"#/components/schemas/OperationResult"},"title":"Results","type":"array"},"skipped":{"title":"Skipped","type":"integer"},"successful":{"title":"Successful","type":"integer"}},"required":["successful","failed","skipped","results"],"title":"BulkUpdateResponse","type":"object"},"BulkUserType":{"enum":["all","student","instructor"],"title":"BulkUserType","type":"string"},"Burst1StageDetails":{"additionalProperties":false,"description":"Details for burst1 pipeline stage (pre-OpenAI batch).","properties":{"location_tier":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Location resolution tier used","title":"Location Tier"},"region_lookup_loaded":{"description":"Whether region lookup was loaded","title":"Region Lookup Loaded","type":"boolean"},"text_candidates":{"description":"Number of text search candidates","title":"Text Candidates","type":"integer"}},"required":["text_candidates","region_lookup_loaded"],"title":"Burst1StageDetails","type":"object"},"Burst2StageDetails":{"additionalProperties":false,"description":"Details for burst2 pipeline stage (post-OpenAI batch).","properties":{"filter_failed":{"description":"Whether filtering failed","title":"Filter Failed","type":"boolean"},"ranking_failed":{"description":"Whether ranking failed","title":"Ranking Failed","type":"boolean"},"total_candidates":{"description":"Total candidates after retrieval","title":"Total Candidates","type":"integer"},"vector_search_used":{"description":"Whether vector search was used","title":"Vector Search Used","type":"boolean"}},"required":["vector_search_used","total_candidates","filter_failed","ranking_failed"],"title":"Burst2StageDetails","type":"object"},"CacheCheckStageDetails":{"additionalProperties":false,"description":"Details for cache_check pipeline stage.","properties":{"latency_ms":{"description":"Cache check latency in milliseconds","title":"Latency Ms","type":"integer"}},"required":["latency_ms"],"title":"CacheCheckStageDetails","type":"object"},"CacheHealthStatus":{"description":"Cache health and performance status.","properties":{"errors":{"description":"Cache error count","title":"Errors","type":"integer"},"hit_rate":{"description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"recommendations":{"description":"Performance recommendations","items":{"type":"string"},"title":"Recommendations","type":"array"},"status":{"description":"Health status (healthy/degraded/unhealthy)","title":"Status","type":"string"},"total_requests":{"description":"Total cache requests","title":"Total Requests","type":"integer"}},"required":["status","hit_rate","total_requests","errors","recommendations"],"title":"CacheHealthStatus","type":"object"},"CacheMetricsResponse":{"additionalProperties":false,"description":"Detailed cache metrics response.","properties":{"availability_metrics":{"$ref":"#/components/schemas/AvailabilityMetrics","description":"Availability-specific cache metrics"},"errors":{"description":"Cache errors","title":"Errors","type":"integer"},"hit_rate":{"description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"hits":{"description":"Cache hits","title":"Hits","type":"integer"},"misses":{"description":"Cache misses","title":"Misses","type":"integer"},"performance_insights":{"description":"Cache performance insights","items":{"type":"string"},"title":"Performance Insights","type":"array"},"redis_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Redis server information","title":"Redis Info"}},"required":["hits","misses","errors","hit_rate","availability_metrics","performance_insights"],"title":"CacheMetricsResponse","type":"object"},"CandidateCategoryTrend":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"count":{"title":"Count","type":"integer"},"date":{"title":"Date","type":"string"}},"required":["date","category","count"],"title":"CandidateCategoryTrend","type":"object"},"CandidateCategoryTrendsResponse":{"items":{"$ref":"#/components/schemas/CandidateCategoryTrend"},"title":"CandidateCategoryTrendsResponse","type":"array"},"CandidateScoreDistributionResponse":{"additionalProperties":false,"properties":{"gte_0_70_lt_0_80":{"title":"Gte 0 70 Lt 0 80","type":"integer"},"gte_0_80_lt_0_90":{"title":"Gte 0 80 Lt 0 90","type":"integer"},"gte_0_90":{"title":"Gte 0 90","type":"integer"},"lt_0_70":{"title":"Lt 0 70","type":"integer"}},"required":["gte_0_90","gte_0_80_lt_0_90","gte_0_70_lt_0_80","lt_0_70"],"title":"CandidateScoreDistributionResponse","type":"object"},"CandidateServiceQueriesResponse":{"items":{"$ref":"#/components/schemas/CandidateServiceQuery"},"title":"CandidateServiceQueriesResponse","type":"array"},"CandidateServiceQuery":{"additionalProperties":false,"properties":{"position":{"title":"Position","type":"integer"},"results_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Results Count"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score"},"search_query":{"title":"Search Query","type":"string"},"searched_at":{"title":"Searched At","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"required":["searched_at","search_query","results_count","position","score","source"],"title":"CandidateServiceQuery","type":"object"},"CandidateSummaryResponse":{"additionalProperties":false,"properties":{"avg_candidates_per_event":{"title":"Avg Candidates Per Event","type":"number"},"events_with_candidates":{"title":"Events With Candidates","type":"integer"},"source_breakdown":{"additionalProperties":{"type":"integer"},"title":"Source Breakdown","type":"object"},"total_candidates":{"title":"Total Candidates","type":"integer"},"zero_result_events_with_candidates":{"title":"Zero Result Events With Candidates","type":"integer"}},"required":["total_candidates","events_with_candidates","avg_candidates_per_event","zero_result_events_with_candidates","source_breakdown"],"title":"CandidateSummaryResponse","type":"object"},"CandidateTopService":{"additionalProperties":false,"properties":{"active_instructors":{"title":"Active Instructors","type":"integer"},"avg_position":{"title":"Avg Position","type":"number"},"avg_score":{"title":"Avg Score","type":"number"},"candidate_count":{"title":"Candidate Count","type":"integer"},"category_name":{"title":"Category Name","type":"string"},"opportunity_score":{"title":"Opportunity Score","type":"number"},"service_catalog_id":{"title":"Service Catalog Id","type":"string"},"service_name":{"title":"Service Name","type":"string"}},"required":["service_catalog_id","service_name","category_name","candidate_count","avg_score","avg_position","active_instructors","opportunity_score"],"title":"CandidateTopService","type":"object"},"CandidateTopServicesResponse":{"items":{"$ref":"#/components/schemas/CandidateTopService"},"title":"CandidateTopServicesResponse","type":"array"},"CaptchaState":{"description":"CAPTCHA requirement state.","properties":{"active":{"title":"Active","type":"boolean"}},"required":["active"],"title":"CaptchaState","type":"object"},"CatalogServiceMinimalResponse":{"additionalProperties":false,"description":"Minimal catalog service response for pills/lists.","properties":{"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["id","name"],"title":"CatalogServiceMinimalResponse","type":"object"},"CatalogServiceResponse":{"additionalProperties":false,"description":"Catalog service response.","properties":{"category_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Display Order"},"eligible_age_groups":{"description":"Age groups this service is available for","items":{"enum":["toddler","kids","teens","adults"],"type":"string"},"title":"Eligible Age Groups","type":"array"},"id":{"title":"Id","type":"string"},"max_recommended_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Recommended Price"},"min_recommended_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Recommended Price"},"name":{"title":"Name","type":"string"},"online_capable":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Online Capable"},"requires_certification":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Requires Certification"},"search_terms":{"items":{"type":"string"},"title":"Search Terms","type":"array"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategory_id":{"title":"Subcategory Id","type":"string"},"typical_duration_options":{"items":{"type":"integer"},"title":"Typical Duration Options","type":"array"}},"required":["id","subcategory_id","name"],"title":"CatalogServiceResponse","type":"object"},"CategoryDetail":{"additionalProperties":false,"description":"Full category detail for /categories/{slug} pages.\n\nIncludes subcategory listing with counts.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"meta_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Description"},"meta_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Title"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategories":{"items":{"$ref":"#/components/schemas/SubcategorySummary"},"title":"Subcategories","type":"array"}},"required":["id","name"],"title":"CategoryDetail","type":"object"},"CategoryMetrics":{"properties":{"avg_price":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Avg Price","type":"string"},"avg_rating":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Avg Rating","type":"string"},"bookings":{"title":"Bookings","type":"integer"},"category_id":{"title":"Category Id","type":"string"},"category_name":{"title":"Category Name","type":"string"},"conversion_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Conversion Rate","type":"string"},"gmv":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv","type":"string"},"growth_pct":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Growth Pct","type":"string"},"instructor_count":{"title":"Instructor Count","type":"integer"},"rank_change":{"title":"Rank Change","type":"integer"},"repeat_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Repeat Rate","type":"string"},"revenue":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Revenue","type":"string"},"student_count":{"title":"Student Count","type":"integer"}},"required":["category_id","category_name","bookings","revenue","gmv","avg_price","avg_rating","instructor_count","student_count","conversion_rate","repeat_rate","growth_pct","rank_change"],"title":"CategoryMetrics","type":"object"},"CategoryPerformance":{"properties":{"categories":{"items":{"$ref":"#/components/schemas/CategoryMetrics"},"title":"Categories","type":"array"},"insights":{"items":{"type":"string"},"title":"Insights","type":"array"},"needs_attention":{"items":{"$ref":"#/components/schemas/CategoryMetrics"},"title":"Needs Attention","type":"array"},"period":{"title":"Period","type":"string"},"top_growing":{"anyOf":[{"$ref":"#/components/schemas/CategoryMetrics"},{"type":"null"}]},"top_revenue":{"anyOf":[{"$ref":"#/components/schemas/CategoryMetrics"},{"type":"null"}]}},"required":["period","categories"],"title":"CategoryPerformance","type":"object"},"CategoryPerformancePeriod":{"enum":["last_7_days","last_30_days","this_month","last_quarter"],"title":"CategoryPerformancePeriod","type":"string"},"CategoryResponse":{"additionalProperties":false,"description":"Service category response.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"title":"Display Order","type":"integer"},"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"}},"required":["id","name","display_order"],"title":"CategoryResponse","type":"object"},"CategoryServiceDetail":{"additionalProperties":false,"description":"Detailed catalog service information with instructor analytics.","properties":{"active_instructors":{"default":0,"title":"Active Instructors","type":"integer"},"actual_max_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Actual Max Price"},"actual_min_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Actual Min Price"},"demand_score":{"default":0.0,"title":"Demand Score","type":"number"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Display Order"},"eligible_age_groups":{"items":{"enum":["toddler","kids","teens","adults"],"type":"string"},"title":"Eligible Age Groups","type":"array"},"id":{"title":"Id","type":"string"},"instructor_count":{"default":0,"title":"Instructor Count","type":"integer"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"is_trending":{"default":false,"title":"Is Trending","type":"boolean"},"name":{"title":"Name","type":"string"},"online_capable":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Online Capable"},"requires_certification":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Requires Certification"},"search_terms":{"items":{"type":"string"},"title":"Search Terms","type":"array"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategory_id":{"title":"Subcategory Id","type":"string"}},"required":["id","subcategory_id","name"],"title":"CategoryServiceDetail","type":"object"},"CategorySortBy":{"enum":["revenue","bookings","growth","conversion"],"title":"CategorySortBy","type":"string"},"CategorySummary":{"additionalProperties":false,"description":"Lightweight category for homepage grid.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategory_count":{"default":0,"title":"Subcategory Count","type":"integer"}},"required":["id","name"],"title":"CategorySummary","type":"object"},"CategoryTreeResponse":{"additionalProperties":false,"description":"Full 3-level tree: category  subcategories  services.\n\nUsed for onboarding flows and admin category management.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"title":"Display Order","type":"integer"},"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"subcategories":{"items":{"$ref":"#/components/schemas/SubcategoryWithServices"},"title":"Subcategories","type":"array"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"}},"required":["id","name","display_order"],"title":"CategoryTreeResponse","type":"object"},"CategoryWithServices":{"additionalProperties":false,"description":"Category record containing detailed services.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"services":{"items":{"$ref":"#/components/schemas/CategoryServiceDetail"},"title":"Services","type":"array"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"}},"required":["id","name"],"title":"CategoryWithServices","type":"object"},"CategoryWithSubcategories":{"additionalProperties":false,"description":"Category with subcategory list (for browse page).","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"title":"Display Order","type":"integer"},"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"subcategories":{"items":{"$ref":"#/components/schemas/SubcategoryBrief"},"title":"Subcategories","type":"array"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"}},"required":["id","name","display_order"],"title":"CategoryWithSubcategories","type":"object"},"CeleryQueuesData":{"description":"Celery queue status data.","properties":{"queues":{"additionalProperties":{"type":"integer"},"title":"Queues","type":"object"},"status":{"default":"unknown","title":"Status","type":"string"},"total_pending":{"default":0,"title":"Total Pending","type":"integer"}},"title":"CeleryQueuesData","type":"object"},"CheckoutApplyRequest":{"additionalProperties":false,"properties":{"order_id":{"title":"Order Id","type":"string"}},"required":["order_id"],"title":"CheckoutApplyRequest","type":"object"},"CheckoutApplyResponse":{"additionalProperties":false,"properties":{"applied_cents":{"title":"Applied Cents","type":"integer"}},"required":["applied_cents"],"title":"CheckoutApplyResponse","type":"object"},"CheckoutResponse":{"additionalProperties":false,"properties":{"amount":{"description":"Payment amount in cents","title":"Amount","type":"integer"},"application_fee":{"description":"Platform fee in cents","title":"Application Fee","type":"integer"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Client secret for frontend confirmation","title":"Client Secret"},"payment_intent_id":{"description":"Stripe payment intent ID","title":"Payment Intent Id","type":"string"},"requires_action":{"default":false,"description":"Whether payment requires additional action","title":"Requires Action","type":"boolean"},"status":{"description":"Payment status","title":"Status","type":"string"},"success":{"description":"Whether payment was successful","title":"Success","type":"boolean"}},"required":["success","payment_intent_id","status","amount","application_fee"],"title":"CheckoutResponse","type":"object"},"ClearBlocksRequest":{"description":"Request to clear auth blocks.","properties":{"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Reason for clearing blocks (for audit)","title":"Reason"},"types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Block types to clear: lockout, rate_limit, captcha, failures. If not specified, clears all.","title":"Types"}},"title":"ClearBlocksRequest","type":"object"},"ClearBlocksResponse":{"description":"Response after clearing blocks.","properties":{"cleared":{"items":{"type":"string"},"title":"Cleared","type":"array"},"cleared_at":{"title":"Cleared At","type":"string"},"cleared_by":{"title":"Cleared By","type":"string"},"email":{"title":"Email","type":"string"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["email","cleared","cleared_by","cleared_at"],"title":"ClearBlocksResponse","type":"object"},"CodebaseCategoryStats":{"properties":{"files":{"minimum":0.0,"title":"Files","type":"integer"},"lines":{"minimum":0.0,"title":"Lines","type":"integer"}},"required":["files","lines"],"title":"CodebaseCategoryStats","type":"object"},"CodebaseFileInfo":{"properties":{"lines":{"minimum":0.0,"title":"Lines","type":"integer"},"lines_with_blanks":{"minimum":0.0,"title":"Lines With Blanks","type":"integer"},"path":{"title":"Path","type":"string"},"size_kb":{"minimum":0.0,"title":"Size Kb","type":"number"}},"required":["path","lines","lines_with_blanks","size_kb"],"title":"CodebaseFileInfo","type":"object"},"CodebaseHistoryEntry":{"properties":{"backend_lines":{"minimum":0.0,"title":"Backend Lines","type":"integer"},"categories":{"anyOf":[{"additionalProperties":{"additionalProperties":{"$ref":"#/components/schemas/CodebaseCategoryStats"},"type":"object"},"type":"object"},{"type":"null"}],"title":"Categories"},"frontend_lines":{"minimum":0.0,"title":"Frontend Lines","type":"integer"},"git_commits":{"minimum":0.0,"title":"Git Commits","type":"integer"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"},"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"}},"required":["timestamp","total_lines","total_files","backend_lines","frontend_lines","git_commits"],"title":"CodebaseHistoryEntry","type":"object"},"CodebaseHistoryResponse":{"additionalProperties":false,"properties":{"current":{"anyOf":[{"$ref":"#/components/schemas/CodebaseMetricsResponse"},{"type":"null"}]},"items":{"items":{"$ref":"#/components/schemas/CodebaseHistoryEntry"},"title":"Items","type":"array"}},"title":"CodebaseHistoryResponse","type":"object"},"CodebaseMetricsResponse":{"additionalProperties":false,"properties":{"backend":{"$ref":"#/components/schemas/CodebaseSection"},"frontend":{"$ref":"#/components/schemas/CodebaseSection"},"git":{"$ref":"#/components/schemas/GitStats"},"summary":{"$ref":"#/components/schemas/CodebaseMetricsSummary"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["timestamp","backend","frontend","git","summary"],"title":"CodebaseMetricsResponse","type":"object"},"CodebaseMetricsSummary":{"properties":{"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"}},"required":["total_lines","total_files"],"title":"CodebaseMetricsSummary","type":"object"},"CodebaseSection":{"properties":{"categories":{"additionalProperties":{"$ref":"#/components/schemas/CodebaseCategoryStats"},"title":"Categories","type":"object"},"largest_files":{"items":{"$ref":"#/components/schemas/CodebaseFileInfo"},"title":"Largest Files","type":"array"},"total_files":{"minimum":0.0,"title":"Total Files","type":"integer"},"total_lines":{"minimum":0.0,"title":"Total Lines","type":"integer"},"total_lines_with_blanks":{"minimum":0.0,"title":"Total Lines With Blanks","type":"integer"}},"required":["total_files","total_lines","total_lines_with_blanks"],"title":"CodebaseSection","type":"object"},"CohortData":{"properties":{"cohort_label":{"title":"Cohort Label","type":"string"},"cohort_size":{"title":"Cohort Size","type":"integer"},"retention":{"items":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},"title":"Retention","type":"array"}},"required":["cohort_label","cohort_size","retention"],"title":"CohortData","type":"object"},"CohortMetric":{"enum":["active","booking","revenue"],"title":"CohortMetric","type":"string"},"CohortPeriod":{"enum":["week","month"],"title":"CohortPeriod","type":"string"},"CohortRetention":{"properties":{"avg_retention":{"additionalProperties":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},"title":"Avg Retention","type":"object"},"benchmark_comparison":{"title":"Benchmark Comparison","type":"string"},"cohorts":{"items":{"$ref":"#/components/schemas/CohortData"},"title":"Cohorts","type":"array"},"insights":{"items":{"type":"string"},"title":"Insights","type":"array"},"metric":{"title":"Metric","type":"string"},"user_type":{"title":"User Type","type":"string"}},"required":["user_type","metric","cohorts","avg_retention","benchmark_comparison"],"title":"CohortRetention","type":"object"},"CohortUserType":{"enum":["student","instructor"],"title":"CohortUserType","type":"string"},"CommunicationChannel":{"enum":["email","push","in_app"],"title":"CommunicationChannel","type":"string"},"ConflictingBookingInfo":{"additionalProperties":false,"description":"Information about a conflicting booking.","properties":{"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of the conflicting booking","title":"Booking Id"},"end_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End time of conflict (HH:MM:SS)","title":"End Time"},"start_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start time of conflict (HH:MM:SS)","title":"Start Time"}},"title":"ConflictingBookingInfo","type":"object"},"ConsentPayload":{"description":"Payload required to record FCRA consent.","properties":{"consent_version":{"maxLength":50,"minLength":1,"title":"Consent Version","type":"string"},"disclosure_version":{"maxLength":50,"minLength":1,"title":"Disclosure Version","type":"string"},"user_agent":{"anyOf":[{"maxLength":512,"type":"string"},{"type":"null"}],"title":"User Agent"}},"required":["consent_version","disclosure_version"],"title":"ConsentPayload","type":"object"},"ConsentResponse":{"additionalProperties":false,"description":"Acknowledgement returned after recording consent.","properties":{"ok":{"default":true,"description":"Whether the consent record was stored","title":"Ok","type":"boolean"}},"title":"ConsentResponse","type":"object"},"ConversationDetail":{"description":"Full conversation details.","properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"next_booking":{"anyOf":[{"$ref":"#/components/schemas/BookingSummary"},{"type":"null"}]},"other_user":{"$ref":"#/components/schemas/UserSummary"},"state":{"default":"active","title":"State","type":"string"},"upcoming_bookings":{"items":{"$ref":"#/components/schemas/BookingSummary"},"title":"Upcoming Bookings","type":"array"}},"required":["id","other_user","created_at"],"title":"ConversationDetail","type":"object"},"ConversationListItem":{"description":"Single conversation in the inbox list.","properties":{"id":{"title":"Id","type":"string"},"last_message":{"anyOf":[{"$ref":"#/components/schemas/LastMessage"},{"type":"null"}]},"next_booking":{"anyOf":[{"$ref":"#/components/schemas/BookingSummary"},{"type":"null"}]},"other_user":{"$ref":"#/components/schemas/UserSummary"},"state":{"default":"active","title":"State","type":"string"},"unread_count":{"default":0,"title":"Unread Count","type":"integer"},"upcoming_booking_count":{"default":0,"title":"Upcoming Booking Count","type":"integer"},"upcoming_bookings":{"items":{"$ref":"#/components/schemas/BookingSummary"},"title":"Upcoming Bookings","type":"array"}},"required":["id","other_user"],"title":"ConversationListItem","type":"object"},"ConversationListResponse":{"description":"Response for GET /conversations.","properties":{"conversations":{"items":{"$ref":"#/components/schemas/ConversationListItem"},"title":"Conversations","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["conversations"],"title":"ConversationListResponse","type":"object"},"ConversionBehavior":{"additionalProperties":false,"description":"Conversion behavior metrics.","properties":{"avg_days_to_conversion":{"description":"Average days to conversion","title":"Avg Days To Conversion","type":"number"},"avg_searches_before_conversion":{"description":"Average searches before conversion","title":"Avg Searches Before Conversion","type":"number"},"most_common_first_search":{"description":"Most common first search query","title":"Most Common First Search","type":"string"}},"required":["avg_searches_before_conversion","avg_days_to_conversion","most_common_first_search"],"title":"ConversionBehavior","type":"object"},"ConversionMetrics":{"additionalProperties":false,"description":"Combined conversion metrics.","properties":{"conversion_behavior":{"$ref":"#/components/schemas/ConversionBehavior","description":"Conversion behavior metrics"},"guest_sessions":{"$ref":"#/components/schemas/GuestConversionMetrics","description":"Guest session metrics"}},"required":["guest_sessions","conversion_behavior"],"title":"ConversionMetrics","type":"object"},"ConversionMetricsResponse":{"additionalProperties":false,"description":"Guest-to-user conversion metrics response.","properties":{"conversion_behavior":{"$ref":"#/components/schemas/ConversionBehavior","description":"Conversion behavior patterns"},"guest_engagement":{"$ref":"#/components/schemas/GuestEngagement","description":"Guest engagement metrics"},"guest_sessions":{"$ref":"#/components/schemas/GuestConversionMetrics","description":"Guest session conversion metrics"},"period":{"$ref":"#/components/schemas/DateRange","description":"Time period for metrics"}},"required":["period","guest_sessions","conversion_behavior","guest_engagement"],"title":"ConversionMetricsResponse","type":"object"},"CopyWeekRequest":{"additionalProperties":false,"description":"Schema for copying availability between weeks.","properties":{"from_week_start":{"format":"date","title":"From Week Start","type":"string"},"to_week_start":{"format":"date","title":"To Week Start","type":"string"}},"required":["from_week_start","to_week_start"],"title":"CopyWeekRequest","type":"object"},"CopyWeekResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"},"source_week_start":{"format":"date","title":"Source Week Start","type":"string"},"target_week_start":{"format":"date","title":"Target Week Start","type":"string"},"windows_copied":{"title":"Windows Copied","type":"integer"}},"required":["message","source_week_start","target_week_start","windows_copied"],"title":"CopyWeekResponse","type":"object"},"CoverageFeatureCollectionResponse":{"additionalProperties":false,"properties":{"features":{"items":{"additionalProperties":true,"type":"object"},"title":"Features","type":"array"},"type":{"title":"Type","type":"string"}},"required":["type","features"],"title":"CoverageFeatureCollectionResponse","type":"object"},"CreateCheckoutRequest":{"additionalProperties":false,"description":"Request to create a checkout/payment for a booking.","properties":{"booking_id":{"description":"Booking ID to process payment for","title":"Booking Id","type":"string"},"payment_method_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe payment method ID to use when a balance remains","title":"Payment Method Id"},"requested_credit_cents":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Optional wallet credit amount (in cents) the student wants to apply","title":"Requested Credit Cents"},"save_payment_method":{"default":false,"description":"Whether to save payment method for future use","title":"Save Payment Method","type":"boolean"}},"required":["booking_id"],"title":"CreateCheckoutRequest","type":"object"},"CreateConversationRequest":{"description":"Request to create a pre-booking conversation.","properties":{"initial_message":{"anyOf":[{"maxLength":1000,"minLength":1,"type":"string"},{"type":"null"}],"title":"Initial Message"},"instructor_id":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}},"required":["instructor_id"],"title":"CreateConversationRequest","type":"object"},"CreateConversationResponse":{"description":"Response for POST /conversations.","properties":{"created":{"title":"Created","type":"boolean"},"id":{"title":"Id","type":"string"}},"required":["id","created"],"title":"CreateConversationResponse","type":"object"},"CreateSignedUploadRequest":{"additionalProperties":false,"properties":{"content_type":{"description":"Browser-reported MIME type","title":"Content Type","type":"string"},"filename":{"description":"Original file name, used for extension validation","title":"Filename","type":"string"},"purpose":{"enum":["background_check","profile_picture"],"title":"Purpose","type":"string"},"size_bytes":{"description":"Max 10MB","maximum":10485760.0,"minimum":1.0,"title":"Size Bytes","type":"integer"}},"required":["filename","content_type","size_bytes","purpose"],"title":"CreateSignedUploadRequest","type":"object"},"CreditBalanceResponse":{"additionalProperties":false,"properties":{"available":{"description":"Available credit balance","title":"Available","type":"number"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Credit expiration date","title":"Expires At"},"pending":{"description":"Reserved (pending) credits","title":"Pending","type":"number"}},"required":["available","pending"],"title":"CreditBalanceResponse","type":"object"},"DailyAlertCount":{"additionalProperties":false,"description":"Daily alert count for summary.","properties":{"count":{"description":"Number of alerts on this date","title":"Count","type":"integer"},"date":{"description":"Date in YYYY-MM-DD format","title":"Date","type":"string"}},"required":["date","count"],"title":"DailyAlertCount","type":"object"},"DailySearchTrend":{"additionalProperties":false,"description":"Daily search trend data.","properties":{"date":{"description":"Date in ISO format","title":"Date","type":"string"},"total_searches":{"description":"Total searches for the day","title":"Total Searches","type":"integer"},"unique_guests":{"description":"Unique guest sessions","title":"Unique Guests","type":"integer"},"unique_users":{"description":"Unique authenticated users","title":"Unique Users","type":"integer"}},"required":["date","total_searches","unique_users","unique_guests"],"title":"DailySearchTrend","type":"object"},"DashboardLinkResponse":{"additionalProperties":false,"properties":{"dashboard_url":{"description":"URL to Stripe Express dashboard","title":"Dashboard Url","type":"string"},"expires_in_minutes":{"default":5,"description":"Minutes until link expires","title":"Expires In Minutes","type":"integer"}},"required":["dashboard_url"],"title":"DashboardLinkResponse","type":"object"},"DataExportResponse":{"additionalProperties":false,"properties":{"data":{"additionalProperties":true,"description":"The exported user data","title":"Data","type":"object"},"message":{"description":"Human-readable message","title":"Message","type":"string"},"status":{"description":"Status of the export request","title":"Status","type":"string"}},"required":["status","message","data"],"title":"DataExportResponse","type":"object"},"DatabaseDashboardMetrics":{"description":"Database metrics for monitoring dashboard.","properties":{"average_pool_usage_percent":{"default":0.0,"description":"Average pool usage percentage","title":"Average Pool Usage Percent","type":"number"},"pool":{"$ref":"#/components/schemas/DatabasePoolStatus","description":"Connection pool status"},"slow_queries_count":{"default":0,"description":"Number of slow queries","title":"Slow Queries Count","type":"integer"}},"required":["pool"],"title":"DatabaseDashboardMetrics","type":"object"},"DatabaseHealthMetrics":{"description":"Database health metrics.","properties":{"status":{"description":"Health status","title":"Status","type":"string"},"utilization_pct":{"description":"Pool utilization percentage","title":"Utilization Pct","type":"number"}},"required":["status","utilization_pct"],"title":"DatabaseHealthMetrics","type":"object"},"DatabaseHealthResponse":{"additionalProperties":false,"description":"Response for database health check endpoint.","properties":{"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if unhealthy","title":"Error"},"message":{"description":"Health check message","title":"Message","type":"string"},"pool_status":{"anyOf":[{"$ref":"#/components/schemas/DatabasePoolMetrics"},{"type":"null"}],"description":"Connection pool status"},"status":{"description":"Health status (healthy/unhealthy)","title":"Status","type":"string"}},"required":["status","message"],"title":"DatabaseHealthResponse","type":"object"},"DatabasePoolConfiguration":{"description":"SQLAlchemy pool configuration.","properties":{"max_overflow":{"description":"Maximum overflow connections","title":"Max Overflow","type":"integer"},"pool_size":{"description":"Base pool size","title":"Pool Size","type":"integer"},"recycle":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Connection recycle time seconds","title":"Recycle"},"timeout":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Connection timeout seconds","title":"Timeout"}},"required":["pool_size","max_overflow"],"title":"DatabasePoolConfiguration","type":"object"},"DatabasePoolMetrics":{"description":"Database connection pool metrics.","properties":{"checked_in":{"description":"Available connections","title":"Checked In","type":"integer"},"checked_out":{"description":"Active connections","title":"Checked Out","type":"integer"},"max_capacity":{"description":"Total possible connections (size + max_overflow)","title":"Max Capacity","type":"integer"},"max_overflow":{"description":"Maximum overflow connections","title":"Max Overflow","type":"integer"},"overflow_in_use":{"description":"Current overflow connections (negative when below base size)","title":"Overflow In Use","type":"integer"},"size":{"description":"Base pool size","title":"Size","type":"integer"},"utilization_pct":{"description":"Pool utilization percentage","title":"Utilization Pct","type":"number"}},"required":["size","max_overflow","max_capacity","checked_in","checked_out","overflow_in_use","utilization_pct"],"title":"DatabasePoolMetrics","type":"object"},"DatabasePoolStatus":{"description":"Database connection pool status.","properties":{"checked_in":{"description":"Available connections","title":"Checked In","type":"integer"},"checked_out":{"description":"Active connections","title":"Checked Out","type":"integer"},"max_capacity":{"description":"Total possible connections (size + max_overflow)","title":"Max Capacity","type":"integer"},"max_overflow":{"description":"Maximum overflow connections","title":"Max Overflow","type":"integer"},"overflow_in_use":{"description":"Current overflow connections (negative when below base size)","title":"Overflow In Use","type":"integer"},"size":{"description":"Base pool size","title":"Size","type":"integer"},"utilization_pct":{"description":"Pool utilization percentage","title":"Utilization Pct","type":"number"}},"required":["size","max_overflow","max_capacity","checked_in","checked_out","overflow_in_use","utilization_pct"],"title":"DatabasePoolStatus","type":"object"},"DatabasePoolStatusResponse":{"additionalProperties":false,"description":"Response for database pool status endpoint.","properties":{"configuration":{"$ref":"#/components/schemas/DatabasePoolConfiguration"},"pool":{"$ref":"#/components/schemas/DatabasePoolMetrics"},"recommendations":{"$ref":"#/components/schemas/DatabaseRecommendations"},"status":{"title":"Status","type":"string"}},"required":["status","pool","configuration","recommendations"],"title":"DatabasePoolStatusResponse","type":"object"},"DatabaseRecommendations":{"description":"Database pool recommendations.","properties":{"current_load":{"description":"Current load level","enum":["low","normal","high"],"title":"Current Load","type":"string"},"increase_pool_size":{"description":"Whether pool size should be increased","title":"Increase Pool Size","type":"boolean"}},"required":["increase_pool_size","current_load"],"title":"DatabaseRecommendations","type":"object"},"DatabaseStatsResponse":{"additionalProperties":false,"description":"Response for database statistics endpoint.","properties":{"configuration":{"$ref":"#/components/schemas/DatabasePoolConfiguration"},"health":{"$ref":"#/components/schemas/DatabaseHealthMetrics"},"pool":{"$ref":"#/components/schemas/DatabasePoolMetrics"},"status":{"title":"Status","type":"string"}},"required":["status","pool","configuration","health"],"title":"DatabaseStatsResponse","type":"object"},"DateRange":{"additionalProperties":false,"description":"Date range for analytics.","properties":{"days":{"description":"Number of days in range","title":"Days","type":"integer"},"end":{"description":"End date in ISO format","title":"End","type":"string"},"start":{"description":"Start date in ISO format","title":"Start","type":"string"}},"required":["start","end","days"],"title":"DateRange","type":"object"},"DeleteBlackoutResponse":{"additionalProperties":false,"properties":{"blackout_id":{"title":"Blackout Id","type":"string"},"message":{"default":"Blackout date removed successfully","title":"Message","type":"string"}},"required":["blackout_id"],"title":"DeleteBlackoutResponse","type":"object"},"DeleteMessageResponse":{"additionalProperties":false,"properties":{"message":{"default":"Message deleted successfully","description":"Success message","title":"Message","type":"string"},"success":{"default":true,"title":"Success","type":"boolean"}},"title":"DeleteMessageResponse","type":"object"},"DeleteWindowResponse":{"additionalProperties":false,"properties":{"message":{"default":"Availability window deleted successfully","title":"Message","type":"string"},"window_id":{"title":"Window Id","type":"string"}},"required":["window_id"],"title":"DeleteWindowResponse","type":"object"},"DemandMetrics":{"properties":{"booking_attempts":{"title":"Booking Attempts","type":"integer"},"successful_bookings":{"title":"Successful Bookings","type":"integer"},"total_searches":{"title":"Total Searches","type":"integer"},"unfulfilled_searches":{"title":"Unfulfilled Searches","type":"integer"},"unique_searchers":{"title":"Unique Searchers","type":"integer"}},"required":["total_searches","unique_searchers","booking_attempts","successful_bookings","unfulfilled_searches"],"title":"DemandMetrics","type":"object"},"DeviceContext":{"additionalProperties":false,"description":"Device information for analytics.","properties":{"browser":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Browser"},"connection_effective_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Connection Effective Type"},"connection_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Connection Type"},"device_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Type"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"os":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Os"},"screen_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Screen Height"},"screen_resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screen Resolution"},"screen_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Screen Width"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"viewport_size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Viewport Size"}},"title":"DeviceContext","type":"object"},"EarningsExportRequest":{"additionalProperties":false,"description":"Request to export instructor earnings.","properties":{"end_date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"End date (inclusive) for the export","title":"End Date"},"format":{"default":"csv","description":"Export format (csv or pdf)","enum":["csv","pdf"],"title":"Format","type":"string"},"start_date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Start date (inclusive) for the export","title":"Start Date"}},"title":"EarningsExportRequest","type":"object"},"EarningsResponse":{"additionalProperties":false,"properties":{"average_earning":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Average earning per booking","title":"Average Earning"},"booking_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of bookings","title":"Booking Count"},"hours_invoiced":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Total hours invoiced for completed lessons","title":"Hours Invoiced"},"invoices":{"description":"Recent invoices contributing to earnings","items":{"$ref":"#/components/schemas/InstructorInvoiceSummary"},"title":"Invoices","type":"array"},"period_end":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"End of period","title":"Period End"},"period_start":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"Start of period","title":"Period Start"},"service_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of completed services contributing to earnings","title":"Service Count"},"total_earned":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total earnings in cents","title":"Total Earned"},"total_fees":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total fees in cents","title":"Total Fees"},"total_lesson_value":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total value of all lessons (before any fees)","title":"Total Lesson Value"},"total_platform_fees":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total platform fees deducted from instructor earnings","title":"Total Platform Fees"},"total_tips":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total tips received","title":"Total Tips"}},"title":"EarningsResponse","type":"object"},"EditMessageRequest":{"additionalProperties":false,"properties":{"content":{"description":"New message content","maxLength":5000,"minLength":1,"title":"Content","type":"string"}},"required":["content"],"title":"EditMessageRequest","type":"object"},"EmailPreviewRequest":{"properties":{"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"template":{"title":"Template","type":"string"},"test_send_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Test Send To"},"variables":{"additionalProperties":{"type":"string"},"title":"Variables","type":"object"}},"required":["template"],"title":"EmailPreviewRequest","type":"object"},"EmailPreviewResponse":{"properties":{"html_content":{"title":"Html Content","type":"string"},"missing_variables":{"items":{"type":"string"},"title":"Missing Variables","type":"array"},"subject":{"title":"Subject","type":"string"},"template":{"title":"Template","type":"string"},"test_send_success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Test Send Success"},"text_content":{"title":"Text Content","type":"string"},"valid":{"title":"Valid","type":"boolean"}},"required":["template","subject","html_content","text_content","missing_variables","valid"],"title":"EmailPreviewResponse","type":"object"},"EmbeddingStageDetails":{"additionalProperties":false,"description":"Details for embedding pipeline stage.","properties":{"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Skip/error reason if any","title":"Reason"},"used":{"description":"Whether embedding was actually used","title":"Used","type":"boolean"}},"required":["used"],"title":"EmbeddingStageDetails","type":"object"},"ExistingReviewIdsResponse":{"items":{"type":"string"},"title":"ExistingReviewIdsResponse","type":"array"},"ExportAnalyticsResponse":{"additionalProperties":false,"description":"Analytics export response.","properties":{"download_url":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Download URL when ready","title":"Download Url"},"format":{"description":"Export format (csv, xlsx, json)","title":"Format","type":"string"},"message":{"description":"Status message","title":"Message","type":"string"},"status":{"description":"Export status","title":"Status","type":"string"},"user":{"description":"User email who requested export","title":"User","type":"string"}},"required":["message","format","user","status"],"title":"ExportAnalyticsResponse","type":"object"},"ExtendedCacheStats":{"description":"Extended cache statistics.","properties":{"basic_stats":{"$ref":"#/components/schemas/BasicCacheStats","description":"Basic cache statistics"},"key_patterns":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"description":"Cache key pattern counts","title":"Key Patterns"},"redis_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Redis server information","title":"Redis Info"}},"required":["basic_stats"],"title":"ExtendedCacheStats","type":"object"},"ExtremelySlowQueryDetails":{"additionalProperties":false,"description":"Details for extremely slow database queries.","properties":{"alert_type":{"const":"extremely_slow_query","default":"extremely_slow_query","description":"Alert type discriminator","title":"Alert Type","type":"string"},"duration_ms":{"description":"Query duration in milliseconds","title":"Duration Ms","type":"number"},"full_query":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Full query text (only for queries > 2000ms)","title":"Full Query"},"query_preview":{"description":"First 200 chars of the query","title":"Query Preview","type":"string"}},"required":["duration_ms","query_preview"],"title":"ExtremelySlowQueryDetails","type":"object"},"ExtremelySlowRequestDetails":{"additionalProperties":false,"description":"Details for extremely slow HTTP requests.","properties":{"alert_type":{"const":"extremely_slow_request","default":"extremely_slow_request","description":"Alert type discriminator","title":"Alert Type","type":"string"},"client":{"description":"Client IP address","title":"Client","type":"string"},"duration_ms":{"description":"Request duration in milliseconds","title":"Duration Ms","type":"number"},"method":{"description":"HTTP method (GET, POST, etc.)","title":"Method","type":"string"},"path":{"description":"Request path","title":"Path","type":"string"},"status_code":{"description":"HTTP response status code","title":"Status Code","type":"integer"}},"required":["duration_ms","method","path","status_code","client"],"title":"ExtremelySlowRequestDetails","type":"object"},"FavoriteResponse":{"additionalProperties":false,"description":"Response for favorite add/remove operations.","properties":{"already_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True if already favorited (for add)","title":"Already Favorited"},"favorite_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of the created favorite (for add operations)","title":"Favorite Id"},"message":{"description":"Human-readable message about the operation","title":"Message","type":"string"},"not_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True if not favorited (for remove)","title":"Not Favorited"},"success":{"description":"Whether the operation was successful","title":"Success","type":"boolean"}},"required":["success","message"],"title":"FavoriteResponse","type":"object"},"FavoriteStatusResponse":{"additionalProperties":false,"description":"Response for single favorite status check.","properties":{"is_favorited":{"description":"Whether the instructor is favorited","title":"Is Favorited","type":"boolean"}},"required":["is_favorited"],"title":"FavoriteStatusResponse","type":"object"},"FavoritedInstructor":{"description":"Instructor with favorite metadata.","properties":{"email":{"description":"Instructor email","title":"Email","type":"string"},"favorited_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"When this instructor was favorited","title":"Favorited At"},"first_name":{"description":"Instructor first name","title":"First Name","type":"string"},"id":{"description":"Instructor user ID (ULID)","title":"Id","type":"string"},"is_active":{"default":true,"description":"Whether the instructor is active","title":"Is Active","type":"boolean"},"last_name":{"description":"Instructor last name","title":"Last Name","type":"string"},"profile":{"anyOf":[{"$ref":"#/components/schemas/InstructorProfileResponse"},{"type":"null"}],"description":"Instructor profile details"}},"required":["id","email","first_name","last_name"],"title":"FavoritedInstructor","type":"object"},"FavoritesList":{"description":"List of favorited instructors.","properties":{"favorites":{"description":"List of favorited instructors","items":{"$ref":"#/components/schemas/FavoritedInstructor"},"title":"Favorites","type":"array"},"total":{"description":"Total number of favorites","title":"Total","type":"integer"}},"required":["favorites","total"],"title":"FavoritesList","type":"object"},"FilterOptionResponse":{"additionalProperties":false,"description":"A single filter option value.","properties":{"display_name":{"description":"Human-readable label (e.g., 'Elementary (K-5)')","title":"Display Name","type":"string"},"display_order":{"default":0,"description":"Order for UI display","title":"Display Order","type":"integer"},"id":{"title":"Id","type":"string"},"value":{"description":"Machine-readable value (e.g., 'elementary')","title":"Value","type":"string"}},"required":["id","value","display_name"],"title":"FilterOptionResponse","type":"object"},"FilterValidationResponse":{"additionalProperties":false,"description":"Response for filter validation.","properties":{"errors":{"items":{"type":"string"},"title":"Errors","type":"array"},"valid":{"title":"Valid","type":"boolean"}},"required":["valid"],"title":"FilterValidationResponse","type":"object"},"FinalizeProfilePicturePayload":{"additionalProperties":false,"properties":{"object_key":{"title":"Object Key","type":"string"}},"required":["object_key"],"title":"FinalizeProfilePicturePayload","type":"object"},"FinalizeProfilePictureRequest":{"additionalProperties":false,"properties":{"object_key":{"description":"Temporary upload object key from signed PUT","title":"Object Key","type":"string"}},"required":["object_key"],"title":"FinalizeProfilePictureRequest","type":"object"},"FoundingCountResponse":{"additionalProperties":false,"description":"Summary of founding instructor utilization.","properties":{"cap":{"title":"Cap","type":"integer"},"count":{"title":"Count","type":"integer"},"remaining":{"title":"Remaining","type":"integer"}},"required":["count","cap","remaining"],"title":"FoundingCountResponse","type":"object"},"FoundingStatusResponse":{"description":"Public founding phase status.","properties":{"is_founding_phase":{"title":"Is Founding Phase","type":"boolean"},"spots_filled":{"title":"Spots Filled","type":"integer"},"spots_remaining":{"title":"Spots Remaining","type":"integer"},"total_founding_spots":{"title":"Total Founding Spots","type":"integer"}},"required":["is_founding_phase","total_founding_spots","spots_filled","spots_remaining"],"title":"FoundingStatusResponse","type":"object"},"FunnelSegmentBy":{"enum":["device","category","source"],"title":"FunnelSegmentBy","type":"string"},"FunnelSnapshotComparison":{"enum":["previous_period","same_period_last_week","same_period_last_month"],"title":"FunnelSnapshotComparison","type":"string"},"FunnelSnapshotPeriod":{"enum":["today","yesterday","last_7_days","last_30_days","this_month"],"title":"FunnelSnapshotPeriod","type":"string"},"FunnelSnapshotPeriodData":{"properties":{"overall_conversion":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Overall Conversion","type":"string"},"period_end":{"format":"date-time","title":"Period End","type":"string"},"period_start":{"format":"date-time","title":"Period Start","type":"string"},"stages":{"items":{"$ref":"#/components/schemas/FunnelSnapshotStage"},"title":"Stages","type":"array"}},"required":["period_start","period_end","stages","overall_conversion"],"title":"FunnelSnapshotPeriodData","type":"object"},"FunnelSnapshotResponse":{"properties":{"comparison_period":{"anyOf":[{"$ref":"#/components/schemas/FunnelSnapshotPeriodData"},{"type":"null"}]},"current_period":{"$ref":"#/components/schemas/FunnelSnapshotPeriodData"},"deltas":{"anyOf":[{"additionalProperties":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},"type":"object"},{"type":"null"}],"title":"Deltas"},"insights":{"items":{"type":"string"},"title":"Insights","type":"array"}},"required":["current_period"],"title":"FunnelSnapshotResponse","type":"object"},"FunnelSnapshotStage":{"properties":{"conversion_rate":{"anyOf":[{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},{"type":"null"}],"title":"Conversion Rate"},"count":{"title":"Count","type":"integer"},"drop_off_rate":{"anyOf":[{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},{"type":"null"}],"title":"Drop Off Rate"},"stage":{"title":"Stage","type":"string"}},"required":["stage","count"],"title":"FunnelSnapshotStage","type":"object"},"FunnelStage":{"properties":{"conversion_to_next":{"anyOf":[{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","type":"string"},{"type":"null"}],"title":"Conversion To Next"},"count":{"title":"Count","type":"integer"},"stage":{"title":"Stage","type":"string"}},"required":["stage","count"],"title":"FunnelStage","type":"object"},"GatedPingResponse":{"additionalProperties":false,"description":"Simple response indicating gated ping success.","properties":{"ok":{"title":"Ok","type":"boolean"}},"required":["ok"],"title":"GatedPingResponse","type":"object"},"GitStats":{"properties":{"current_branch":{"title":"Current Branch","type":"string"},"first_commit":{"title":"First Commit","type":"string"},"last_commit":{"title":"Last Commit","type":"string"},"total_commits":{"minimum":0.0,"title":"Total Commits","type":"integer"},"unique_contributors":{"minimum":0.0,"title":"Unique Contributors","type":"integer"}},"required":["total_commits","unique_contributors","first_commit","last_commit","current_branch"],"title":"GitStats","type":"object"},"GuestConversionMetrics":{"additionalProperties":false,"description":"Guest session conversion metrics.","properties":{"conversion_rate":{"description":"Conversion rate percentage","title":"Conversion Rate","type":"number"},"converted":{"description":"Number of converted sessions","title":"Converted","type":"integer"},"total":{"description":"Total guest sessions","title":"Total","type":"integer"}},"required":["total","converted","conversion_rate"],"title":"GuestConversionMetrics","type":"object"},"GuestEngagement":{"additionalProperties":false,"description":"Guest engagement metrics.","properties":{"avg_searches_per_session":{"description":"Average searches per guest session","title":"Avg Searches Per Session","type":"number"},"engaged_sessions":{"description":"Sessions with multiple searches","title":"Engaged Sessions","type":"integer"},"engagement_rate":{"description":"Percentage of engaged sessions","title":"Engagement Rate","type":"number"}},"required":["avg_searches_per_session","engaged_sessions","engagement_rate"],"title":"GuestEngagement","type":"object"},"GuestSearchHistoryCreate":{"additionalProperties":false,"description":"Schema for creating guest search history (no user_id required).","properties":{"guest_session_id":{"description":"UUID for guest session tracking","maxLength":36,"title":"Guest Session Id","type":"string"},"results_count":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Number of results returned","title":"Results Count"},"search_query":{"description":"The search query string","minLength":1,"title":"Search Query","type":"string"},"search_type":{"default":"natural_language","description":"Type of search: natural_language, category, service_pill, filter, or search_history","title":"Search Type","type":"string"}},"required":["search_query","guest_session_id"],"title":"GuestSearchHistoryCreate","type":"object"},"GuestSessionResponse":{"additionalProperties":false,"properties":{"guest_id":{"title":"Guest Id","type":"string"}},"required":["guest_id"],"title":"GuestSessionResponse","type":"object"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"title":"Detail","type":"array"}},"title":"HTTPValidationError","type":"object"},"HealthCheckResponse":{"additionalProperties":false,"description":"Standard health check response.","properties":{"checks":{"additionalProperties":{"type":"boolean"},"description":"Individual component health checks","title":"Checks","type":"object"},"service":{"default":"iNSTAiNSTRU API","description":"Service name","title":"Service","type":"string"},"status":{"description":"Service health status","pattern":"^(healthy|degraded|unhealthy)$","title":"Status","type":"string"},"timestamp":{"description":"Check timestamp","format":"date-time","title":"Timestamp","type":"string"},"version":{"description":"API version","title":"Version","type":"string"}},"required":["status","version","checks"],"title":"HealthCheckResponse","type":"object"},"HealthLiteResponse":{"additionalProperties":false,"properties":{"status":{"description":"Health status (ok/error)","title":"Status","type":"string"}},"required":["status"],"title":"HealthLiteResponse","type":"object"},"HealthResponse":{"additionalProperties":false,"properties":{"environment":{"description":"Environment name","title":"Environment","type":"string"},"git_sha":{"description":"Short git SHA for the running service","title":"Git Sha","type":"string"},"service":{"description":"Service name","title":"Service","type":"string"},"status":{"description":"Health status","title":"Status","type":"string"},"timestamp":{"description":"UTC ISO8601Z timestamp of the health response","title":"Timestamp","type":"string"},"version":{"description":"API version","title":"Version","type":"string"}},"required":["status","service","version","environment","timestamp","git_sha"],"title":"HealthResponse","type":"object"},"HighDbPoolUsageDetails":{"additionalProperties":false,"description":"Details for high database connection pool usage.","properties":{"alert_type":{"const":"high_db_pool_usage","default":"high_db_pool_usage","description":"Alert type discriminator","title":"Alert Type","type":"string"},"checked_out":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of checked out connections","title":"Checked Out"},"total_possible":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total possible connections","title":"Total Possible"},"usage_percent":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Pool usage percentage","title":"Usage Percent"}},"title":"HighDbPoolUsageDetails","type":"object"},"HighMemoryUsageDetails":{"additionalProperties":false,"description":"Details for high memory usage alerts.","properties":{"alert_type":{"const":"high_memory_usage","default":"high_memory_usage","description":"Alert type discriminator","title":"Alert Type","type":"string"},"memory_mb":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Memory usage in MB","title":"Memory Mb"},"percent":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Memory usage percentage","title":"Percent"}},"title":"HighMemoryUsageDetails","type":"object"},"HydrateStageDetails":{"additionalProperties":false,"description":"Details for hydrate pipeline stage.","properties":{"result_count":{"description":"Number of results after hydration","title":"Result Count","type":"integer"}},"required":["result_count"],"title":"HydrateStageDetails","type":"object"},"IdentityRefreshResponse":{"additionalProperties":false,"properties":{"status":{"description":"Latest verification status from Stripe","title":"Status","type":"string"},"verified":{"description":"Whether the user is now verified","title":"Verified","type":"boolean"}},"required":["status","verified"],"title":"IdentityRefreshResponse","type":"object"},"IdentitySessionResponse":{"additionalProperties":false,"properties":{"client_secret":{"description":"Client secret for the verification session","title":"Client Secret","type":"string"},"verification_session_id":{"description":"Stripe verification session identifier","title":"Verification Session Id","type":"string"}},"required":["verification_session_id","client_secret"],"title":"IdentitySessionResponse","type":"object"},"InstantPayoutResponse":{"additionalProperties":false,"properties":{"ok":{"description":"Whether the instant payout request succeeded","title":"Ok","type":"boolean"},"payout_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe payout identifier if one was created","title":"Payout Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe status of the payout (e.g., pending, paid)","title":"Status"}},"required":["ok"],"title":"InstantPayoutResponse","type":"object"},"InstructorFilterContext":{"additionalProperties":false,"description":"Filter context for instructor skill selection.\n\nCombines available filters with current selections for a specific\nsubcategory+instructor combination.","properties":{"available_filters":{"description":"Filters available for this subcategory","items":{"$ref":"#/components/schemas/SubcategoryFilterResponse"},"title":"Available Filters","type":"array"},"current_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Instructor's current filter selections (filter_key -> [selected values])","title":"Current Selections","type":"object"}},"title":"InstructorFilterContext","type":"object"},"InstructorInfo":{"description":"Instructor information for booking display.\n\nPrivacy-aware: Only shows last initial for privacy protection.\nFull last name never exposed to students.","properties":{"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_initial":{"title":"Last Initial","type":"string"}},"required":["id","first_name","last_initial"],"title":"InstructorInfo","type":"object"},"InstructorInvoiceSummary":{"additionalProperties":false,"properties":{"booking_id":{"description":"Associated booking ID","title":"Booking Id","type":"string"},"created_at":{"description":"When the payment was completed","format":"date-time","title":"Created At","type":"string"},"duration_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Duration of the lesson in minutes","title":"Duration Minutes"},"instructor_share_cents":{"description":"Net payout to the instructor after fees (in cents)","title":"Instructor Share Cents","type":"integer"},"lesson_date":{"description":"Date of the lesson","format":"date","title":"Lesson Date","type":"string"},"lesson_price_cents":{"description":"Base lesson price (instructor's rate  duration)","title":"Lesson Price Cents","type":"integer"},"platform_fee_cents":{"description":"Platform fee deducted from instructor earnings","title":"Platform Fee Cents","type":"integer"},"platform_fee_rate":{"description":"Platform fee rate applied (e.g., 0.1 for 10%)","title":"Platform Fee Rate","type":"number"},"service_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Name of the service taught","title":"Service Name"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"description":"Lesson start time","title":"Start Time"},"status":{"description":"Invoice/payment status","title":"Status","type":"string"},"student_fee_cents":{"description":"Booking protection fee added to student (not deducted from instructor)","title":"Student Fee Cents","type":"integer"},"student_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Student name (privacy aware)","title":"Student Name"},"tip_cents":{"description":"Tip amount included with the payment in cents","title":"Tip Cents","type":"integer"},"total_paid_cents":{"description":"Total amount paid by the student in cents","title":"Total Paid Cents","type":"integer"}},"required":["booking_id","lesson_date","total_paid_cents","tip_cents","instructor_share_cents","status","created_at","lesson_price_cents","platform_fee_cents","platform_fee_rate","student_fee_cents"],"title":"InstructorInvoiceSummary","type":"object"},"InstructorProfileCreate":{"additionalProperties":false,"description":"Schema for creating an instructor profile.\n\nRequires at least one service to be defined.","properties":{"bio":{"description":"Instructor biography/description","maxLength":1000,"minLength":10,"title":"Bio","type":"string"},"buffer_time_minutes":{"default":0,"description":"Buffer time between bookings","maximum":60.0,"minimum":0.0,"title":"Buffer Time Minutes","type":"integer"},"min_advance_booking_hours":{"default":2,"description":"Minimum hours in advance for bookings","maximum":168.0,"minimum":0.0,"title":"Min Advance Booking Hours","type":"integer"},"services":{"description":"Services offered by the instructor","items":{"$ref":"#/components/schemas/ServiceCreate"},"maxItems":20,"minItems":1,"title":"Services","type":"array"},"years_experience":{"description":"Years of teaching experience","maximum":50.0,"minimum":0.0,"title":"Years Experience","type":"integer"}},"required":["bio","years_experience","services"],"title":"InstructorProfileCreate","type":"object"},"InstructorProfileResponse":{"description":"Schema for instructor profile responses with privacy protection.\n\nIncludes all profile data plus relationships and metadata.\nStudent-facing endpoints will show only instructor last initial.","properties":{"background_check_object_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Background Check Object Key"},"background_check_uploaded_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Background Check Uploaded At"},"bgc_status":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Background check status for public display","title":"Bgc Status"},"bio":{"description":"Instructor biography/description","maxLength":1000,"minLength":10,"title":"Bio","type":"string"},"buffer_time_minutes":{"default":0,"description":"Buffer time between bookings","maximum":60.0,"minimum":0.0,"title":"Buffer Time Minutes","type":"integer"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"favorited_count":{"default":0,"description":"Number of students who favorited this instructor","title":"Favorited Count","type":"integer"},"id":{"title":"Id","type":"string"},"identity_verification_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Identity Verification Session Id"},"identity_verified_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Identity Verified At"},"is_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the current user has favorited this instructor","title":"Is Favorited"},"is_founding_instructor":{"default":false,"description":"Whether the instructor is a founding instructor","title":"Is Founding Instructor","type":"boolean"},"is_live":{"default":false,"title":"Is Live","type":"boolean"},"min_advance_booking_hours":{"default":2,"description":"Minimum hours in advance for bookings","maximum":168.0,"minimum":0.0,"title":"Min Advance Booking Hours","type":"integer"},"onboarding_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Onboarding Completed At"},"preferred_public_spaces":{"items":{"$ref":"#/components/schemas/PreferredPublicSpaceOut"},"title":"Preferred Public Spaces","type":"array"},"preferred_teaching_locations":{"items":{"$ref":"#/components/schemas/PreferredTeachingLocationOut"},"title":"Preferred Teaching Locations","type":"array"},"service_area_boroughs":{"items":{"type":"string"},"title":"Service Area Boroughs","type":"array"},"service_area_neighborhoods":{"items":{"$ref":"#/components/schemas/ServiceAreaNeighborhood"},"title":"Service Area Neighborhoods","type":"array"},"service_area_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area Summary"},"services":{"items":{"$ref":"#/components/schemas/ServiceResponse"},"title":"Services","type":"array"},"skills_configured":{"default":false,"description":"Whether skills/pricing were configured at least once","title":"Skills Configured","type":"boolean"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"},"user":{"$ref":"#/components/schemas/UserBasicPrivacy"},"user_id":{"title":"User Id","type":"string"},"years_experience":{"description":"Years of teaching experience","maximum":50.0,"minimum":0.0,"title":"Years Experience","type":"integer"}},"required":["bio","years_experience","id","user_id","created_at","user","services"],"title":"InstructorProfileResponse","type":"object"},"InstructorProfileUpdate":{"additionalProperties":false,"description":"Schema for updating an instructor profile.\n\nAll fields are optional for partial updates.","properties":{"bio":{"anyOf":[{"maxLength":1000,"minLength":10,"type":"string"},{"type":"null"}],"title":"Bio"},"buffer_time_minutes":{"anyOf":[{"maximum":60.0,"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Buffer time between bookings","title":"Buffer Time Minutes"},"min_advance_booking_hours":{"anyOf":[{"maximum":168.0,"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Minimum hours in advance for bookings","title":"Min Advance Booking Hours"},"preferred_public_spaces":{"anyOf":[{"items":{"$ref":"#/components/schemas/PreferredPublicSpaceIn"},"type":"array"},{"type":"null"}],"title":"Preferred Public Spaces"},"preferred_teaching_locations":{"anyOf":[{"items":{"$ref":"#/components/schemas/PreferredTeachingLocationIn"},"type":"array"},{"type":"null"}],"title":"Preferred Teaching Locations"},"services":{"anyOf":[{"items":{"$ref":"#/components/schemas/ServiceCreate"},"maxItems":20,"minItems":0,"type":"array"},{"type":"null"}],"title":"Services"},"years_experience":{"anyOf":[{"maximum":50.0,"minimum":0.0,"type":"integer"},{"type":"null"}],"title":"Years Experience"}},"title":"InstructorProfileUpdate","type":"object"},"InstructorRatingsResponse":{"additionalProperties":false,"description":"Instructor rating statistics with overall and per-service breakdown.","properties":{"by_service":{"description":"Per-service rating breakdown","items":{"$ref":"#/components/schemas/ServiceRatingStats"},"title":"By Service","type":"array"},"confidence_level":{"pattern":"^(new|establishing|established|trusted)$","title":"Confidence Level","type":"string"},"overall":{"$ref":"#/components/schemas/OverallRatingStats","description":"Overall rating statistics"}},"required":["overall","confidence_level"],"title":"InstructorRatingsResponse","type":"object"},"InstructorSearchResult":{"additionalProperties":false,"description":"Instructor in search results.","properties":{"average_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Rating"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"favorited_count":{"default":0,"title":"Favorited Count","type":"integer"},"first_name":{"title":"First Name","type":"string"},"has_profile_picture":{"default":false,"title":"Has Profile Picture","type":"boolean"},"id":{"title":"Id","type":"string"},"is_favorited":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Favorited"},"is_live":{"default":false,"title":"Is Live","type":"boolean"},"last_initial":{"title":"Last Initial","type":"string"},"profile_picture_version":{"default":0,"title":"Profile Picture Version","type":"integer"},"review_count":{"default":0,"title":"Review Count","type":"integer"},"service_area_boroughs":{"items":{"type":"string"},"title":"Service Area Boroughs","type":"array"},"service_area_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Area Summary"},"services":{"items":{"$ref":"#/components/schemas/InstructorSearchResultService"},"title":"Services","type":"array"},"teaches_adults":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Teaches Adults"},"teaches_kids":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Teaches Kids"},"user_id":{"title":"User Id","type":"string"},"years_experience":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Years Experience"}},"required":["id","user_id","first_name","last_initial"],"title":"InstructorSearchResult","type":"object"},"InstructorSearchResultService":{"additionalProperties":false,"description":"Service offering in search results.","properties":{"catalog_service_id":{"title":"Catalog Service Id","type":"string"},"custom_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Description"},"duration_options":{"items":{"type":"integer"},"title":"Duration Options","type":"array"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"is_active":{"default":true,"title":"Is Active","type":"boolean"},"name":{"title":"Name","type":"string"}},"required":["id","catalog_service_id","name","hourly_rate"],"title":"InstructorSearchResultService","type":"object"},"InstructorServiceAreaCheckResponse":{"additionalProperties":false,"description":"Response payload for instructor service area coverage checks.","properties":{"coordinates":{"$ref":"#/components/schemas/ServiceAreaCheckCoordinates"},"instructor_id":{"description":"Instructor user ULID","title":"Instructor Id","type":"string"},"is_covered":{"description":"True when the coordinates fall inside an instructor's active service areas","title":"Is Covered","type":"boolean"}},"required":["instructor_id","is_covered","coordinates"],"title":"InstructorServiceAreaCheckResponse","type":"object"},"InstructorServiceCapabilitiesUpdate":{"additionalProperties":false,"description":"Partial update for instructor service location capabilities.","properties":{"offers_at_location":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Offers At Location"},"offers_online":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Offers Online"},"offers_travel":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Offers Travel"}},"title":"InstructorServiceCapabilitiesUpdate","type":"object"},"InstructorServiceCreate":{"additionalProperties":false,"description":"Create instructor service from catalog.","properties":{"catalog_service_id":{"description":"ID of the catalog service","title":"Catalog Service Id","type":"string"},"custom_description":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Custom description (optional)","title":"Custom Description"},"duration_options":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"description":"Custom duration options in minutes (uses catalog defaults if not provided)","title":"Duration Options"},"hourly_rate":{"description":"Hourly rate for this service","exclusiveMinimum":0.0,"maximum":10000.0,"title":"Hourly Rate","type":"number"}},"required":["catalog_service_id","hourly_rate"],"title":"InstructorServiceCreate","type":"object"},"InstructorServiceResponse":{"additionalProperties":false,"description":"Instructor service response with catalog info.","properties":{"catalog_service_id":{"title":"Catalog Service Id","type":"string"},"category":{"title":"Category","type":"string"},"created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Created At"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration_options":{"items":{"type":"integer"},"title":"Duration Options","type":"array"},"filter_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"title":"Filter Selections","type":"object"},"hourly_rate":{"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"is_active":{"default":true,"title":"Is Active","type":"boolean"},"name":{"title":"Name","type":"string"},"offers_at_location":{"default":false,"title":"Offers At Location","type":"boolean"},"offers_online":{"default":true,"title":"Offers Online","type":"boolean"},"offers_travel":{"default":false,"title":"Offers Travel","type":"boolean"},"service_catalog_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Human-readable name of the catalog service","title":"Service Catalog Name"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["id","catalog_service_id","name","category","hourly_rate"],"title":"InstructorServiceResponse","type":"object"},"InstructorSummary":{"additionalProperties":false,"description":"Embedded instructor info for search results.","properties":{"bio_snippet":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"First 150 chars of bio","title":"Bio Snippet"},"first_name":{"description":"Instructor first name","title":"First Name","type":"string"},"id":{"description":"Instructor user ID","title":"Id","type":"string"},"is_founding_instructor":{"default":false,"description":"Founding instructor status","title":"Is Founding Instructor","type":"boolean"},"last_initial":{"description":"Last name initial for privacy (e.g., 'D')","title":"Last Initial","type":"string"},"profile_picture_url":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Profile picture URL","title":"Profile Picture Url"},"teaching_locations":{"description":"Approximate teaching locations for studio pins","items":{"$ref":"#/components/schemas/InstructorTeachingLocationSummary"},"title":"Teaching Locations","type":"array"},"verified":{"default":false,"description":"Whether instructor is verified","title":"Verified","type":"boolean"},"years_experience":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Years of experience","title":"Years Experience"}},"required":["id","first_name","last_initial"],"title":"InstructorSummary","type":"object"},"InstructorTeachingLocationSummary":{"additionalProperties":false,"description":"Approximate teaching location data for public maps.","properties":{"approx_lat":{"description":"Approximate latitude","title":"Approx Lat","type":"number"},"approx_lng":{"description":"Approximate longitude","title":"Approx Lng","type":"number"},"neighborhood":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Neighborhood or city label","title":"Neighborhood"}},"required":["approx_lat","approx_lng"],"title":"InstructorTeachingLocationSummary","type":"object"},"InviteBatchAsyncStartResponse":{"additionalProperties":false,"properties":{"task_id":{"title":"Task Id","type":"string"}},"required":["task_id"],"title":"InviteBatchAsyncStartResponse","type":"object"},"InviteBatchProgressResponse":{"additionalProperties":false,"properties":{"current":{"title":"Current","type":"integer"},"failed":{"title":"Failed","type":"integer"},"failed_items":{"anyOf":[{"items":{"$ref":"#/components/schemas/InviteBatchSendFailure"},"type":"array"},{"type":"null"}],"title":"Failed Items"},"sent":{"title":"Sent","type":"integer"},"sent_items":{"anyOf":[{"items":{"$ref":"#/components/schemas/InviteSendResponse"},"type":"array"},{"type":"null"}],"title":"Sent Items"},"state":{"title":"State","type":"string"},"task_id":{"title":"Task Id","type":"string"},"total":{"title":"Total","type":"integer"}},"required":["task_id","state","current","total","sent","failed"],"title":"InviteBatchProgressResponse","type":"object"},"InviteBatchSendFailure":{"properties":{"email":{"format":"email","title":"Email","type":"string"},"reason":{"title":"Reason","type":"string"}},"required":["email","reason"],"title":"InviteBatchSendFailure","type":"object"},"InviteBatchSendRequest":{"additionalProperties":false,"properties":{"base_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Url"},"emails":{"items":{"format":"email","type":"string"},"minItems":1,"title":"Emails","type":"array"},"expires_in_days":{"default":14,"maximum":180.0,"minimum":1.0,"title":"Expires In Days","type":"integer"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"title":"InviteBatchSendRequest","type":"object"},"InviteBatchSendResponse":{"additionalProperties":false,"properties":{"failed":{"items":{"$ref":"#/components/schemas/InviteBatchSendFailure"},"title":"Failed","type":"array"},"sent":{"items":{"$ref":"#/components/schemas/InviteSendResponse"},"title":"Sent","type":"array"}},"required":["sent","failed"],"title":"InviteBatchSendResponse","type":"object"},"InviteConsumeRequest":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"},"phase":{"default":"instructor_only","title":"Phase","type":"string"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["code","user_id"],"title":"InviteConsumeRequest","type":"object"},"InviteGenerateRequest":{"additionalProperties":false,"properties":{"count":{"default":1,"title":"Count","type":"integer"},"emails":{"anyOf":[{"items":{"format":"email","type":"string"},"type":"array"},{"type":"null"}],"title":"Emails"},"expires_in_days":{"default":30,"title":"Expires In Days","type":"integer"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"title":"InviteGenerateRequest","type":"object"},"InviteGenerateResponse":{"additionalProperties":false,"properties":{"invites":{"items":{"$ref":"#/components/schemas/InviteRecord"},"title":"Invites","type":"array"}},"required":["invites"],"title":"InviteGenerateResponse","type":"object"},"InviteRecord":{"properties":{"code":{"title":"Code","type":"string"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"format":"date-time","title":"Expires At","type":"string"},"id":{"title":"Id","type":"string"},"role":{"title":"Role","type":"string"}},"required":["id","code","role","expires_at"],"title":"InviteRecord","type":"object"},"InviteSendRequest":{"additionalProperties":false,"properties":{"base_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Url"},"expires_in_days":{"default":14,"maximum":180.0,"minimum":1.0,"title":"Expires In Days","type":"integer"},"grant_founding_status":{"default":true,"title":"Grant Founding Status","type":"boolean"},"role":{"default":"instructor_beta","title":"Role","type":"string"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"to_email":{"format":"email","title":"To Email","type":"string"}},"required":["to_email"],"title":"InviteSendRequest","type":"object"},"InviteSendResponse":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"},"email":{"format":"email","title":"Email","type":"string"},"id":{"title":"Id","type":"string"},"join_url":{"title":"Join Url","type":"string"},"welcome_url":{"title":"Welcome Url","type":"string"}},"required":["id","code","email","join_url","welcome_url"],"title":"InviteSendResponse","type":"object"},"InviteStatus":{"enum":["pending","accepted","expired","revoked"],"title":"InviteStatus","type":"string"},"InviteValidateResponse":{"additionalProperties":false,"properties":{"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Expires At"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"used_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Used At"},"valid":{"title":"Valid","type":"boolean"}},"required":["valid"],"title":"InviteValidateResponse","type":"object"},"LastMessage":{"description":"Preview of the last message in a conversation.","properties":{"content":{"title":"Content","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"is_from_me":{"title":"Is From Me","type":"boolean"}},"required":["content","created_at","is_from_me"],"title":"LastMessage","type":"object"},"LineItem":{"properties":{"amount_cents":{"maximum":1000000000.0,"minimum":-1000000000.0,"title":"Amount Cents","type":"integer"},"label":{"title":"Label","type":"string"}},"required":["label","amount_cents"],"title":"LineItem","type":"object"},"ListAuthIssuesResponse":{"description":"Response for listing accounts with auth issues.","properties":{"accounts":{"items":{"$ref":"#/components/schemas/BlockedAccount"},"title":"Accounts","type":"array"},"scanned_at":{"title":"Scanned At","type":"string"},"total":{"title":"Total","type":"integer"}},"required":["accounts","total","scanned_at"],"title":"ListAuthIssuesResponse","type":"object"},"LiveAlertItem":{"additionalProperties":false,"description":"Simplified alert item for live view.","properties":{"message":{"description":"Alert message (truncated if long)","title":"Message","type":"string"},"severity":{"description":"Alert severity (uppercase)","title":"Severity","type":"string"},"time":{"description":"Time in HH:MM:SS format","title":"Time","type":"string"},"type":{"description":"Alert type","title":"Type","type":"string"}},"required":["time","severity","type","message"],"title":"LiveAlertItem","type":"object"},"LiveAlertsResponse":{"additionalProperties":false,"description":"Response for live alerts endpoint.","properties":{"alerts":{"description":"List of recent alerts","items":{"$ref":"#/components/schemas/LiveAlertItem"},"title":"Alerts","type":"array"},"count":{"description":"Number of alerts in the time period","title":"Count","type":"integer"},"minutes":{"description":"Number of minutes included","title":"Minutes","type":"integer"}},"required":["minutes","count","alerts"],"title":"LiveAlertsResponse","type":"object"},"LocationResolutionInfo":{"additionalProperties":false,"description":"Detailed location resolution breakdown.","properties":{"query":{"description":"Original location query","title":"Query","type":"string"},"resolved_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved location name","title":"Resolved Name"},"resolved_regions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Resolved sub-regions if applicable","title":"Resolved Regions"},"successful_tier":{"anyOf":[{"maximum":5.0,"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Successful tier number if any","title":"Successful Tier"},"tiers":{"description":"Per-tier results","items":{"$ref":"#/components/schemas/LocationTierResult"},"title":"Tiers","type":"array"}},"required":["query"],"title":"LocationResolutionInfo","type":"object"},"LocationResolutionStageDetails":{"additionalProperties":false,"description":"Details for location_resolution pipeline stage.","properties":{"resolved":{"description":"Whether location was successfully resolved","title":"Resolved","type":"boolean"},"tier":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Resolution tier that succeeded","title":"Tier"}},"required":["resolved"],"title":"LocationResolutionStageDetails","type":"object"},"LocationTierResult":{"additionalProperties":false,"description":"Result of a location resolution tier attempt.","properties":{"attempted":{"description":"Whether the tier was attempted","title":"Attempted","type":"boolean"},"confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Confidence score when available","title":"Confidence"},"details":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Additional tier details","title":"Details"},"duration_ms":{"description":"Tier duration in ms","minimum":0.0,"title":"Duration Ms","type":"integer"},"result":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved location name if any","title":"Result"},"status":{"$ref":"#/components/schemas/StageStatus","description":"Tier status"},"tier":{"description":"Location tier (0-5)","maximum":5.0,"minimum":0.0,"title":"Tier","type":"integer"}},"required":["tier","attempted","status","duration_ms"],"title":"LocationTierResult","type":"object"},"LockoutState":{"description":"Lockout block state.","properties":{"active":{"title":"Active","type":"boolean"},"level":{"default":"","title":"Level","type":"string"},"ttl_seconds":{"default":0,"title":"Ttl Seconds","type":"integer"}},"required":["active"],"title":"LockoutState","type":"object"},"LoginResponse":{"additionalProperties":false,"properties":{"requires_2fa":{"default":false,"title":"Requires 2Fa","type":"boolean"},"temp_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Temp Token"}},"title":"LoginResponse","type":"object"},"LowCacheHitRateDetails":{"additionalProperties":false,"description":"Details for low cache hit rate alerts.","properties":{"alert_type":{"const":"low_cache_hit_rate","default":"low_cache_hit_rate","description":"Alert type discriminator","title":"Alert Type","type":"string"},"hit_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Current cache hit rate","title":"Hit Rate"},"target":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Target cache hit rate","title":"Target"}},"title":"LowCacheHitRateDetails","type":"object"},"MCPActor":{"additionalProperties":false,"properties":{"email":{"title":"Email","type":"string"},"id":{"title":"Id","type":"string"},"principal_type":{"default":"service","enum":["user","service"],"title":"Principal Type","type":"string"}},"required":["id","email"],"title":"MCPActor","type":"object"},"MCPCeleryActiveTask":{"additionalProperties":false,"description":"Information about a currently running Celery task.","properties":{"args":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Args"},"kwargs":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kwargs"},"started_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Started At"},"task_id":{"title":"Task Id","type":"string"},"task_name":{"title":"Task Name","type":"string"},"worker":{"title":"Worker","type":"string"}},"required":["task_id","task_name","worker"],"title":"MCPCeleryActiveTask","type":"object"},"MCPCeleryActiveTasksResponse":{"additionalProperties":false,"description":"Response for active tasks endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"count":{"title":"Count","type":"integer"},"tasks":{"items":{"$ref":"#/components/schemas/MCPCeleryActiveTask"},"title":"Tasks","type":"array"}},"required":["tasks","count","checked_at"],"title":"MCPCeleryActiveTasksResponse","type":"object"},"MCPCeleryBeatScheduleResponse":{"additionalProperties":false,"description":"Response for beat schedule endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"count":{"title":"Count","type":"integer"},"tasks":{"items":{"$ref":"#/components/schemas/MCPCeleryScheduledTask"},"title":"Tasks","type":"array"}},"required":["tasks","count","checked_at"],"title":"MCPCeleryBeatScheduleResponse","type":"object"},"MCPCeleryFailedTask":{"additionalProperties":false,"description":"Information about a failed Celery task.","properties":{"exception":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Exception"},"failed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Failed At"},"queue":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Queue"},"task_args":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Args"},"task_id":{"title":"Task Id","type":"string"},"task_kwargs":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Kwargs"},"task_name":{"title":"Task Name","type":"string"},"traceback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Traceback"}},"required":["task_id","task_name"],"title":"MCPCeleryFailedTask","type":"object"},"MCPCeleryFailedTasksResponse":{"additionalProperties":false,"description":"Response for failed tasks endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"count":{"title":"Count","type":"integer"},"failed_tasks":{"items":{"$ref":"#/components/schemas/MCPCeleryFailedTask"},"title":"Failed Tasks","type":"array"}},"required":["failed_tasks","count","checked_at"],"title":"MCPCeleryFailedTasksResponse","type":"object"},"MCPCeleryLastTaskRun":{"additionalProperties":false,"description":"Information about the last run of a payment task.","properties":{"last_run_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Last Run At"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"task_name":{"title":"Task Name","type":"string"}},"required":["task_name"],"title":"MCPCeleryLastTaskRun","type":"object"},"MCPCeleryPaymentHealthIssue":{"additionalProperties":false,"description":"A payment health issue.","properties":{"count":{"title":"Count","type":"integer"},"message":{"title":"Message","type":"string"},"severity":{"title":"Severity","type":"string"}},"required":["severity","message","count"],"title":"MCPCeleryPaymentHealthIssue","type":"object"},"MCPCeleryPaymentHealthResponse":{"additionalProperties":false,"description":"Response for payment health endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"failed_payments_24h":{"title":"Failed Payments 24H","type":"integer"},"healthy":{"title":"Healthy","type":"boolean"},"issues":{"items":{"$ref":"#/components/schemas/MCPCeleryPaymentHealthIssue"},"title":"Issues","type":"array"},"last_task_runs":{"items":{"$ref":"#/components/schemas/MCPCeleryLastTaskRun"},"title":"Last Task Runs","type":"array"},"overdue_authorizations":{"title":"Overdue Authorizations","type":"integer"},"pending_authorizations":{"title":"Pending Authorizations","type":"integer"},"pending_captures":{"title":"Pending Captures","type":"integer"}},"required":["healthy","issues","pending_authorizations","overdue_authorizations","pending_captures","failed_payments_24h","last_task_runs","checked_at"],"title":"MCPCeleryPaymentHealthResponse","type":"object"},"MCPCeleryQueueInfo":{"additionalProperties":false,"description":"Information about a single Celery queue.","properties":{"consumers":{"title":"Consumers","type":"integer"},"depth":{"title":"Depth","type":"integer"},"name":{"title":"Name","type":"string"}},"required":["name","depth","consumers"],"title":"MCPCeleryQueueInfo","type":"object"},"MCPCeleryQueuesResponse":{"additionalProperties":false,"description":"Response for Celery queues endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"queues":{"items":{"$ref":"#/components/schemas/MCPCeleryQueueInfo"},"title":"Queues","type":"array"},"total_depth":{"title":"Total Depth","type":"integer"}},"required":["queues","total_depth","checked_at"],"title":"MCPCeleryQueuesResponse","type":"object"},"MCPCeleryScheduledTask":{"additionalProperties":false,"description":"Information about a scheduled periodic task.","properties":{"enabled":{"default":true,"title":"Enabled","type":"boolean"},"last_run":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Last Run"},"name":{"title":"Name","type":"string"},"next_run":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Next Run"},"schedule":{"title":"Schedule","type":"string"},"task":{"title":"Task","type":"string"}},"required":["name","task","schedule"],"title":"MCPCeleryScheduledTask","type":"object"},"MCPCeleryTaskHistoryItem":{"additionalProperties":false,"description":"Information about a historical Celery task execution.","properties":{"exception":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Exception"},"received_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Received At"},"result":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Result"},"retries":{"default":0,"title":"Retries","type":"integer"},"runtime_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Runtime Seconds"},"started_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Started At"},"state":{"title":"State","type":"string"},"succeeded_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Succeeded At"},"task_id":{"title":"Task Id","type":"string"},"task_name":{"title":"Task Name","type":"string"}},"required":["task_id","task_name","state"],"title":"MCPCeleryTaskHistoryItem","type":"object"},"MCPCeleryTaskHistoryResponse":{"additionalProperties":false,"description":"Response for task history endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"count":{"title":"Count","type":"integer"},"filters_applied":{"additionalProperties":true,"title":"Filters Applied","type":"object"},"tasks":{"items":{"$ref":"#/components/schemas/MCPCeleryTaskHistoryItem"},"title":"Tasks","type":"array"}},"required":["tasks","count","filters_applied","checked_at"],"title":"MCPCeleryTaskHistoryResponse","type":"object"},"MCPCeleryWorkerInfo":{"additionalProperties":false,"description":"Information about a single Celery worker.","properties":{"active_tasks":{"title":"Active Tasks","type":"integer"},"concurrency":{"title":"Concurrency","type":"integer"},"hostname":{"title":"Hostname","type":"string"},"processed_total":{"title":"Processed Total","type":"integer"},"queues":{"items":{"type":"string"},"title":"Queues","type":"array"},"status":{"title":"Status","type":"string"}},"required":["hostname","status","active_tasks","processed_total","concurrency","queues"],"title":"MCPCeleryWorkerInfo","type":"object"},"MCPCeleryWorkersResponse":{"additionalProperties":false,"description":"Response for Celery workers endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"summary":{"$ref":"#/components/schemas/MCPCeleryWorkersSummary"},"workers":{"items":{"$ref":"#/components/schemas/MCPCeleryWorkerInfo"},"title":"Workers","type":"array"}},"required":["workers","summary","checked_at"],"title":"MCPCeleryWorkersResponse","type":"object"},"MCPCeleryWorkersSummary":{"additionalProperties":false,"description":"Summary counts for workers.","properties":{"offline_workers":{"title":"Offline Workers","type":"integer"},"online_workers":{"title":"Online Workers","type":"integer"},"total_active_tasks":{"title":"Total Active Tasks","type":"integer"},"total_workers":{"title":"Total Workers","type":"integer"}},"required":["total_workers","online_workers","offline_workers","total_active_tasks"],"title":"MCPCeleryWorkersSummary","type":"object"},"MCPConversionRate":{"additionalProperties":false,"properties":{"from_stage":{"title":"From Stage","type":"string"},"rate":{"title":"Rate","type":"number"},"to_stage":{"title":"To Stage","type":"string"}},"required":["from_stage","to_stage","rate"],"title":"MCPConversionRate","type":"object"},"MCPDateWindow":{"additionalProperties":false,"properties":{"end":{"format":"date","title":"End","type":"string"},"start":{"format":"date","title":"Start","type":"string"}},"required":["start","end"],"title":"MCPDateWindow","type":"object"},"MCPFoundingCap":{"additionalProperties":false,"properties":{"cap":{"title":"Cap","type":"integer"},"is_founding_phase":{"title":"Is Founding Phase","type":"boolean"},"remaining":{"title":"Remaining","type":"integer"},"used":{"title":"Used","type":"integer"}},"required":["cap","used","remaining","is_founding_phase"],"title":"MCPFoundingCap","type":"object"},"MCPFunnelStage":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"description":{"title":"Description","type":"string"},"stage":{"title":"Stage","type":"string"}},"required":["stage","count","description"],"title":"MCPFunnelStage","type":"object"},"MCPFunnelSummaryResponse":{"additionalProperties":false,"properties":{"conversion_rates":{"items":{"$ref":"#/components/schemas/MCPConversionRate"},"title":"Conversion Rates","type":"array"},"founding_cap":{"$ref":"#/components/schemas/MCPFoundingCap"},"meta":{"$ref":"#/components/schemas/MCPMeta"},"stages":{"items":{"$ref":"#/components/schemas/MCPFunnelStage"},"title":"Stages","type":"array"},"time_window":{"$ref":"#/components/schemas/MCPTimeWindow"}},"required":["meta","stages","conversion_rates","founding_cap","time_window"],"title":"MCPFunnelSummaryResponse","type":"object"},"MCPInstructorBGC":{"additionalProperties":false,"properties":{"completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Completed At"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"valid_until":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Valid Until"}},"title":"MCPInstructorBGC","type":"object"},"MCPInstructorDetailResponse":{"additionalProperties":false,"properties":{"admin_url":{"title":"Admin Url","type":"string"},"bgc":{"$ref":"#/components/schemas/MCPInstructorBGC"},"email":{"title":"Email","type":"string"},"founding_granted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Founding Granted At"},"is_founding":{"title":"Is Founding","type":"boolean"},"live_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Live At"},"meta":{"$ref":"#/components/schemas/MCPMeta"},"name":{"title":"Name","type":"string"},"onboarding":{"$ref":"#/components/schemas/MCPInstructorOnboarding"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"services":{"items":{"$ref":"#/components/schemas/MCPInstructorService"},"title":"Services","type":"array"},"stats":{"$ref":"#/components/schemas/MCPInstructorStats"},"status":{"title":"Status","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["meta","user_id","name","email","status","is_founding","admin_url","onboarding","bgc","services","stats"],"title":"MCPInstructorDetailResponse","type":"object"},"MCPInstructorListItem":{"additionalProperties":false,"properties":{"admin_url":{"title":"Admin Url","type":"string"},"bookings_completed":{"title":"Bookings Completed","type":"integer"},"categories":{"items":{"type":"string"},"title":"Categories","type":"array"},"email":{"title":"Email","type":"string"},"founding_granted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Founding Granted At"},"is_founding":{"title":"Is Founding","type":"boolean"},"live_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Live At"},"name":{"title":"Name","type":"string"},"rating_avg":{"title":"Rating Avg","type":"number"},"services":{"items":{"type":"string"},"title":"Services","type":"array"},"status":{"title":"Status","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","name","email","status","is_founding","services","categories","rating_avg","bookings_completed","admin_url"],"title":"MCPInstructorListItem","type":"object"},"MCPInstructorListResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/MCPInstructorListItem"},"title":"Items","type":"array"},"limit":{"title":"Limit","type":"integer"},"meta":{"$ref":"#/components/schemas/MCPMeta"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["meta","items","limit"],"title":"MCPInstructorListResponse","type":"object"},"MCPInstructorOnboarding":{"additionalProperties":false,"properties":{"background_check_uploaded_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Background Check Uploaded At"},"bgc_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Completed At"},"bgc_invited_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Bgc Invited At"},"identity_verified_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Identity Verified At"},"onboarding_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Onboarding Completed At"},"profile_created_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Profile Created At"},"profile_updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Profile Updated At"}},"title":"MCPInstructorOnboarding","type":"object"},"MCPInstructorService":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"hourly_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Hourly Rate","type":"string"},"is_active":{"title":"Is Active","type":"boolean"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["name","category","hourly_rate","is_active"],"title":"MCPInstructorService","type":"object"},"MCPInstructorStats":{"additionalProperties":false,"properties":{"bookings_cancelled":{"title":"Bookings Cancelled","type":"integer"},"bookings_completed":{"title":"Bookings Completed","type":"integer"},"no_shows":{"title":"No Shows","type":"integer"},"rating_avg":{"title":"Rating Avg","type":"number"},"rating_count":{"title":"Rating Count","type":"integer"},"response_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Response Rate"}},"required":["bookings_completed","bookings_cancelled","no_shows","rating_avg","rating_count"],"title":"MCPInstructorStats","type":"object"},"MCPInviteDetailData":{"additionalProperties":false,"properties":{"accepted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Accepted At"},"code":{"title":"Code","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"format":"date-time","title":"Expires At","type":"string"},"grant_founding_status":{"title":"Grant Founding Status","type":"boolean"},"id":{"title":"Id","type":"string"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"role":{"title":"Role","type":"string"},"status":{"title":"Status","type":"string"},"status_history":{"items":{"$ref":"#/components/schemas/MCPInviteStatusEvent"},"title":"Status History","type":"array"},"used_by_user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Used By User Id"}},"required":["id","code","status","created_at","expires_at","role","grant_founding_status","status_history"],"title":"MCPInviteDetailData","type":"object"},"MCPInviteDetailResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPInviteDetailData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPInviteDetailResponse","type":"object"},"MCPInviteListData":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"invites":{"items":{"$ref":"#/components/schemas/MCPInviteListItem"},"title":"Invites","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["invites","count"],"title":"MCPInviteListData","type":"object"},"MCPInviteListItem":{"additionalProperties":false,"properties":{"accepted_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Accepted At"},"code":{"title":"Code","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"email":{"anyOf":[{"format":"email","type":"string"},{"type":"null"}],"title":"Email"},"expires_at":{"format":"date-time","title":"Expires At","type":"string"},"id":{"title":"Id","type":"string"},"status":{"title":"Status","type":"string"}},"required":["id","code","status","created_at","expires_at"],"title":"MCPInviteListItem","type":"object"},"MCPInviteListResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPInviteListData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPInviteListResponse","type":"object"},"MCPInvitePreview":{"additionalProperties":false,"properties":{"expires_at":{"format":"date-time","title":"Expires At","type":"string"},"founding_cap_remaining":{"title":"Founding Cap Remaining","type":"integer"},"grants_founding":{"title":"Grants Founding","type":"boolean"},"subject":{"title":"Subject","type":"string"}},"required":["subject","expires_at","grants_founding","founding_cap_remaining"],"title":"MCPInvitePreview","type":"object"},"MCPInvitePreviewData":{"additionalProperties":false,"properties":{"confirm_expires_at":{"format":"date-time","title":"Confirm Expires At","type":"string"},"confirm_token":{"title":"Confirm Token","type":"string"},"invite_preview":{"$ref":"#/components/schemas/MCPInvitePreview"},"recipient_count":{"title":"Recipient Count","type":"integer"},"recipients":{"items":{"$ref":"#/components/schemas/MCPInvitePreviewRecipient"},"title":"Recipients","type":"array"},"warnings":{"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["recipient_count","recipients","invite_preview","confirm_token","confirm_expires_at","warnings"],"title":"MCPInvitePreviewData","type":"object"},"MCPInvitePreviewRecipient":{"additionalProperties":false,"properties":{"email":{"format":"email","title":"Email","type":"string"},"exists_in_system":{"title":"Exists In System","type":"boolean"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},"required":["email","exists_in_system"],"title":"MCPInvitePreviewRecipient","type":"object"},"MCPInvitePreviewRequest":{"additionalProperties":false,"properties":{"expires_in_days":{"default":14,"maximum":180.0,"minimum":1.0,"title":"Expires In Days","type":"integer"},"grant_founding_status":{"default":true,"title":"Grant Founding Status","type":"boolean"},"message_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Note"},"recipient_emails":{"items":{"format":"email","type":"string"},"maxItems":100,"minItems":1,"title":"Recipient Emails","type":"array"}},"required":["recipient_emails"],"title":"MCPInvitePreviewRequest","type":"object"},"MCPInvitePreviewResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPInvitePreviewData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPInvitePreviewResponse","type":"object"},"MCPInviteSendData":{"additionalProperties":false,"properties":{"audit_id":{"title":"Audit Id","type":"string"},"failed_count":{"title":"Failed Count","type":"integer"},"invites":{"items":{"$ref":"#/components/schemas/MCPInviteSendResult"},"title":"Invites","type":"array"},"sent_count":{"title":"Sent Count","type":"integer"}},"required":["sent_count","failed_count","invites","audit_id"],"title":"MCPInviteSendData","type":"object"},"MCPInviteSendRequest":{"additionalProperties":false,"properties":{"confirm_token":{"title":"Confirm Token","type":"string"},"idempotency_key":{"title":"Idempotency Key","type":"string"}},"required":["confirm_token","idempotency_key"],"title":"MCPInviteSendRequest","type":"object"},"MCPInviteSendResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPInviteSendData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPInviteSendResponse","type":"object"},"MCPInviteSendResult":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"},"email":{"format":"email","title":"Email","type":"string"},"status":{"title":"Status","type":"string"}},"required":["email","code","status"],"title":"MCPInviteSendResult","type":"object"},"MCPInviteStatusEvent":{"additionalProperties":false,"properties":{"status":{"title":"Status","type":"string"},"timestamp":{"format":"date-time","title":"Timestamp","type":"string"}},"required":["status","timestamp"],"title":"MCPInviteStatusEvent","type":"object"},"MCPMeta":{"additionalProperties":false,"properties":{"actor":{"$ref":"#/components/schemas/MCPActor"},"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"request_id":{"title":"Request Id","type":"string"}},"required":["request_id","generated_at","actor"],"title":"MCPMeta","type":"object"},"MCPMetricDefinition":{"additionalProperties":false,"properties":{"definition":{"title":"Definition","type":"string"},"metric":{"title":"Metric","type":"string"},"related_metrics":{"items":{"type":"string"},"title":"Related Metrics","type":"array"},"requirements":{"items":{"type":"string"},"title":"Requirements","type":"array"},"source_fields":{"items":{"type":"string"},"title":"Source Fields","type":"array"}},"required":["metric","definition","requirements","source_fields","related_metrics"],"title":"MCPMetricDefinition","type":"object"},"MCPMetricResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPMetricDefinition"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPMetricResponse","type":"object"},"MCPServiceCatalogData":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"services":{"items":{"$ref":"#/components/schemas/MCPServiceCatalogItem"},"title":"Services","type":"array"}},"required":["services","count"],"title":"MCPServiceCatalogData","type":"object"},"MCPServiceCatalogItem":{"additionalProperties":false,"properties":{"category_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Name"},"id":{"title":"Id","type":"string"},"is_active":{"title":"Is Active","type":"boolean"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategory_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory Name"}},"required":["id","name","is_active"],"title":"MCPServiceCatalogItem","type":"object"},"MCPServiceCatalogResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPServiceCatalogData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPServiceCatalogResponse","type":"object"},"MCPServiceCoverageData":{"additionalProperties":false,"properties":{"group_by":{"title":"Group By","type":"string"},"labels":{"items":{"type":"string"},"title":"Labels","type":"array"},"total_instructors":{"title":"Total Instructors","type":"integer"},"total_services_offered":{"title":"Total Services Offered","type":"integer"},"values":{"items":{"type":"integer"},"title":"Values","type":"array"}},"required":["group_by","labels","values","total_instructors","total_services_offered"],"title":"MCPServiceCoverageData","type":"object"},"MCPServiceCoverageResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPServiceCoverageData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPServiceCoverageResponse","type":"object"},"MCPServiceLookupData":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"matches":{"items":{"$ref":"#/components/schemas/MCPServiceCatalogItem"},"title":"Matches","type":"array"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"query":{"title":"Query","type":"string"}},"required":["query","matches","count"],"title":"MCPServiceLookupData","type":"object"},"MCPServiceLookupResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPServiceLookupData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPServiceLookupResponse","type":"object"},"MCPStuckInstructor":{"additionalProperties":false,"properties":{"current_stage":{"title":"Current Stage","type":"string"},"days_in_stage":{"title":"Days In Stage","type":"integer"},"email":{"title":"Email","type":"string"},"name":{"title":"Name","type":"string"},"occurred_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Occurred At"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","name","email","current_stage","days_in_stage"],"title":"MCPStuckInstructor","type":"object"},"MCPStuckResponse":{"additionalProperties":false,"properties":{"instructors":{"items":{"$ref":"#/components/schemas/MCPStuckInstructor"},"title":"Instructors","type":"array"},"meta":{"$ref":"#/components/schemas/MCPMeta"},"summary":{"items":{"$ref":"#/components/schemas/MCPStuckSummary"},"title":"Summary","type":"array"},"total_stuck":{"title":"Total Stuck","type":"integer"}},"required":["meta","summary","instructors","total_stuck"],"title":"MCPStuckResponse","type":"object"},"MCPStuckSummary":{"additionalProperties":false,"properties":{"stage":{"title":"Stage","type":"string"},"stuck_count":{"title":"Stuck Count","type":"integer"}},"required":["stage","stuck_count"],"title":"MCPStuckSummary","type":"object"},"MCPTimeWindow":{"additionalProperties":false,"properties":{"end":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"start":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start"}},"title":"MCPTimeWindow","type":"object"},"MCPTopQueriesData":{"additionalProperties":false,"properties":{"queries":{"items":{"$ref":"#/components/schemas/MCPTopQuery"},"title":"Queries","type":"array"},"time_window":{"$ref":"#/components/schemas/MCPDateWindow"},"total_searches":{"title":"Total Searches","type":"integer"}},"required":["time_window","queries","total_searches"],"title":"MCPTopQueriesData","type":"object"},"MCPTopQueriesResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPTopQueriesData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPTopQueriesResponse","type":"object"},"MCPTopQuery":{"additionalProperties":false,"properties":{"avg_results":{"title":"Avg Results","type":"number"},"conversion_rate":{"title":"Conversion Rate","type":"number"},"count":{"title":"Count","type":"integer"},"query":{"title":"Query","type":"string"}},"required":["query","count","avg_results","conversion_rate"],"title":"MCPTopQuery","type":"object"},"MCPWebhookDetail":{"additionalProperties":false,"properties":{"event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Id"},"event_type":{"title":"Event Type","type":"string"},"headers":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Headers"},"id":{"title":"Id","type":"string"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key"},"payload":{"additionalProperties":true,"title":"Payload","type":"object"},"processed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Processed At"},"processing_duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Processing Duration Ms"},"processing_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Processing Error"},"received_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Received At"},"related_entity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Related Entity"},"replay_count":{"default":0,"title":"Replay Count","type":"integer"},"replay_of":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Replay Of"},"source":{"title":"Source","type":"string"},"status":{"title":"Status","type":"string"}},"required":["id","source","event_type","status","payload"],"title":"MCPWebhookDetail","type":"object"},"MCPWebhookDetailMeta":{"additionalProperties":false,"properties":{"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"request_id":{"title":"Request Id","type":"string"}},"required":["request_id","generated_at"],"title":"MCPWebhookDetailMeta","type":"object"},"MCPWebhookDetailResponse":{"additionalProperties":false,"properties":{"event":{"$ref":"#/components/schemas/MCPWebhookDetail"},"meta":{"$ref":"#/components/schemas/MCPWebhookDetailMeta"}},"required":["meta","event"],"title":"MCPWebhookDetailResponse","type":"object"},"MCPWebhookEventItem":{"additionalProperties":false,"properties":{"event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Id"},"event_type":{"title":"Event Type","type":"string"},"id":{"title":"Id","type":"string"},"processed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Processed At"},"processing_duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Processing Duration Ms"},"received_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Received At"},"related_entity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Related Entity"},"replay_count":{"default":0,"title":"Replay Count","type":"integer"},"replay_of":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Replay Of"},"source":{"title":"Source","type":"string"},"status":{"title":"Status","type":"string"}},"required":["id","source","event_type","status"],"title":"MCPWebhookEventItem","type":"object"},"MCPWebhookFailedItem":{"additionalProperties":false,"properties":{"event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Id"},"event_type":{"title":"Event Type","type":"string"},"id":{"title":"Id","type":"string"},"processed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Processed At"},"processing_duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Processing Duration Ms"},"processing_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Processing Error"},"received_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Received At"},"related_entity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Related Entity"},"replay_count":{"default":0,"title":"Replay Count","type":"integer"},"replay_of":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Replay Of"},"source":{"title":"Source","type":"string"},"status":{"title":"Status","type":"string"}},"required":["id","source","event_type","status"],"title":"MCPWebhookFailedItem","type":"object"},"MCPWebhookFailedMeta":{"additionalProperties":false,"properties":{"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"request_id":{"title":"Request Id","type":"string"},"returned_count":{"title":"Returned Count","type":"integer"},"since_hours":{"title":"Since Hours","type":"integer"},"time_window":{"$ref":"#/components/schemas/MCPTimeWindow"}},"required":["request_id","generated_at","since_hours","returned_count","time_window"],"title":"MCPWebhookFailedMeta","type":"object"},"MCPWebhookFailedResponse":{"additionalProperties":false,"properties":{"events":{"items":{"$ref":"#/components/schemas/MCPWebhookFailedItem"},"title":"Events","type":"array"},"meta":{"$ref":"#/components/schemas/MCPWebhookFailedMeta"}},"required":["meta","events"],"title":"MCPWebhookFailedResponse","type":"object"},"MCPWebhookListMeta":{"additionalProperties":false,"properties":{"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"request_id":{"title":"Request Id","type":"string"},"returned_count":{"title":"Returned Count","type":"integer"},"since_hours":{"title":"Since Hours","type":"integer"},"time_window":{"$ref":"#/components/schemas/MCPTimeWindow"},"total_count":{"title":"Total Count","type":"integer"}},"required":["request_id","generated_at","since_hours","total_count","returned_count","time_window"],"title":"MCPWebhookListMeta","type":"object"},"MCPWebhookListResponse":{"additionalProperties":false,"properties":{"events":{"items":{"$ref":"#/components/schemas/MCPWebhookEventItem"},"title":"Events","type":"array"},"meta":{"$ref":"#/components/schemas/MCPWebhookListMeta"},"summary":{"$ref":"#/components/schemas/MCPWebhookListSummary"}},"required":["meta","summary","events"],"title":"MCPWebhookListResponse","type":"object"},"MCPWebhookListSummary":{"additionalProperties":false,"properties":{"by_source":{"additionalProperties":{"type":"integer"},"title":"By Source","type":"object"},"by_status":{"additionalProperties":{"type":"integer"},"title":"By Status","type":"object"}},"title":"MCPWebhookListSummary","type":"object"},"MCPWebhookReplayMeta":{"additionalProperties":false,"properties":{"dry_run":{"title":"Dry Run","type":"boolean"},"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"request_id":{"title":"Request Id","type":"string"}},"required":["request_id","generated_at","dry_run"],"title":"MCPWebhookReplayMeta","type":"object"},"MCPWebhookReplayResponse":{"additionalProperties":false,"properties":{"event":{"anyOf":[{"$ref":"#/components/schemas/MCPWebhookEventItem"},{"type":"null"}]},"meta":{"$ref":"#/components/schemas/MCPWebhookReplayMeta"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"},"result":{"anyOf":[{"$ref":"#/components/schemas/MCPWebhookReplayResult"},{"type":"null"}]}},"required":["meta"],"title":"MCPWebhookReplayResponse","type":"object"},"MCPWebhookReplayResult":{"additionalProperties":false,"properties":{"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"replay_event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Replay Event Id"},"status":{"title":"Status","type":"string"}},"required":["status"],"title":"MCPWebhookReplayResult","type":"object"},"MCPZeroResultQuery":{"additionalProperties":false,"properties":{"count":{"title":"Count","type":"integer"},"query":{"title":"Query","type":"string"}},"required":["query","count"],"title":"MCPZeroResultQuery","type":"object"},"MCPZeroResultsData":{"additionalProperties":false,"properties":{"queries":{"items":{"$ref":"#/components/schemas/MCPZeroResultQuery"},"title":"Queries","type":"array"},"time_window":{"$ref":"#/components/schemas/MCPDateWindow"},"total_zero_result_searches":{"title":"Total Zero Result Searches","type":"integer"},"zero_result_rate":{"title":"Zero Result Rate","type":"number"}},"required":["time_window","queries","total_zero_result_searches","zero_result_rate"],"title":"MCPZeroResultsData","type":"object"},"MCPZeroResultsResponse":{"additionalProperties":false,"properties":{"data":{"$ref":"#/components/schemas/MCPZeroResultsData"},"meta":{"$ref":"#/components/schemas/MCPMeta"}},"required":["meta","data"],"title":"MCPZeroResultsResponse","type":"object"},"MarkMessagesReadRequest":{"additionalProperties":false,"description":"Request to mark messages as read.","properties":{"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Mark all messages in this conversation as read","title":"Conversation Id"},"message_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Specific message IDs to mark as read","title":"Message Ids"}},"title":"MarkMessagesReadRequest","type":"object"},"MarkMessagesReadResponse":{"additionalProperties":false,"properties":{"messages_marked":{"description":"Number of messages marked as read","title":"Messages Marked","type":"integer"},"success":{"default":true,"title":"Success","type":"boolean"}},"required":["messages_marked"],"title":"MarkMessagesReadResponse","type":"object"},"MemoryMetrics":{"description":"System memory metrics.","properties":{"percent":{"description":"Memory usage percentage","title":"Percent","type":"number"},"total_mb":{"description":"Total memory in MB","title":"Total Mb","type":"number"},"used_mb":{"description":"Used memory in MB","title":"Used Mb","type":"number"}},"required":["used_mb","total_mb","percent"],"title":"MemoryMetrics","type":"object"},"MessageConfigResponse":{"additionalProperties":false,"properties":{"edit_window_minutes":{"title":"Edit Window Minutes","type":"integer"}},"required":["edit_window_minutes"],"title":"MessageConfigResponse","type":"object"},"MessageResponse":{"description":"Single message in a conversation.","properties":{"booking_details":{"anyOf":[{"$ref":"#/components/schemas/BookingSummary"},{"type":"null"}]},"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Id"},"content":{"title":"Content","type":"string"},"conversation_id":{"title":"Conversation Id","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"delivered_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Delivered At"},"edited_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Edited At"},"id":{"title":"Id","type":"string"},"is_deleted":{"default":false,"title":"Is Deleted","type":"boolean"},"is_from_me":{"title":"Is From Me","type":"boolean"},"message_type":{"title":"Message Type","type":"string"},"reactions":{"items":{"$ref":"#/components/schemas/ReactionInfo"},"title":"Reactions","type":"array"},"read_by":{"items":{"$ref":"#/components/schemas/ReadReceiptEntry"},"title":"Read By","type":"array"},"sender_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sender Id"}},"required":["id","conversation_id","content","is_from_me","message_type","created_at"],"title":"MessageResponse","type":"object"},"MessagesResponse":{"description":"Response for GET /conversations/{id}/messages.","properties":{"has_more":{"default":false,"title":"Has More","type":"boolean"},"messages":{"items":{"$ref":"#/components/schemas/MessageResponse"},"title":"Messages","type":"array"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"required":["messages"],"title":"MessagesResponse","type":"object"},"MessagesSummary":{"additionalProperties":false,"properties":{"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id"},"included":{"title":"Included","type":"boolean"},"last_message_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Last Message At"},"message_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Message Count"}},"required":["included","conversation_id","message_count","last_message_at"],"title":"MessagesSummary","type":"object"},"MockStatusResponse":{"additionalProperties":false,"description":"Response returned by non-production mock status changers.","properties":{"ok":{"default":true,"description":"Whether the mock update succeeded","title":"Ok","type":"boolean"},"status":{"description":"Background check status after the mock update","enum":["pending","review","consider","passed","failed","canceled"],"title":"Status","type":"string"}},"required":["status"],"title":"MockStatusResponse","type":"object"},"ModelOption":{"additionalProperties":false,"description":"A selectable model option.","properties":{"description":{"description":"Model description","title":"Description","type":"string"},"id":{"description":"Model identifier","title":"Id","type":"string"},"name":{"description":"Display name","title":"Name","type":"string"}},"required":["id","name","description"],"title":"ModelOption","type":"object"},"MonitoringDashboardResponse":{"additionalProperties":false,"description":"Comprehensive monitoring dashboard response.","properties":{"alerts":{"description":"Active system alerts","items":{"$ref":"#/components/schemas/AlertInfo"},"title":"Alerts","type":"array"},"cache":{"$ref":"#/components/schemas/CacheHealthStatus","description":"Cache health status"},"database":{"$ref":"#/components/schemas/DatabaseDashboardMetrics","description":"Database metrics and pool status"},"memory":{"$ref":"#/components/schemas/MemoryMetrics","description":"System memory metrics"},"recommendations":{"description":"Performance recommendations","items":{"$ref":"#/components/schemas/PerformanceRecommendation"},"title":"Recommendations","type":"array"},"requests":{"$ref":"#/components/schemas/RequestMetrics","description":"Request processing metrics"},"status":{"description":"Overall system status","title":"Status","type":"string"},"timestamp":{"description":"Dashboard snapshot timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["status","timestamp","database","cache","requests","memory","alerts","recommendations"],"title":"MonitoringDashboardResponse","type":"object"},"NLSearchContentFilterDefinition":{"additionalProperties":false,"description":"Taxonomy content filter definition surfaced in NL search metadata.","properties":{"key":{"description":"Machine-readable filter key","title":"Key","type":"string"},"label":{"description":"Human-readable filter label","title":"Label","type":"string"},"options":{"description":"Available options for this filter key","items":{"$ref":"#/components/schemas/NLSearchContentFilterOption"},"title":"Options","type":"array"},"type":{"description":"Filter type (single_select|multi_select)","title":"Type","type":"string"}},"required":["key","label","type"],"title":"NLSearchContentFilterDefinition","type":"object"},"NLSearchContentFilterOption":{"additionalProperties":false,"description":"Taxonomy content filter option surfaced in NL search metadata.","properties":{"label":{"description":"Human-readable option label","title":"Label","type":"string"},"value":{"description":"Machine-readable option value","title":"Value","type":"string"}},"required":["value","label"],"title":"NLSearchContentFilterOption","type":"object"},"NLSearchMeta":{"additionalProperties":false,"description":"Search response metadata.","properties":{"available_content_filters":{"description":"Taxonomy content filter definitions available for this search context (excludes hard application until user explicitly applies filters)","items":{"$ref":"#/components/schemas/NLSearchContentFilterDefinition"},"title":"Available Content Filters","type":"array"},"cache_hit":{"default":false,"description":"Whether response was from cache","title":"Cache Hit","type":"boolean"},"corrected_query":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Typo-corrected query if different","title":"Corrected Query"},"degradation_reasons":{"description":"Reasons for degradation","items":{"type":"string"},"title":"Degradation Reasons","type":"array"},"degraded":{"default":false,"description":"Whether search was degraded","title":"Degraded","type":"boolean"},"diagnostics":{"anyOf":[{"$ref":"#/components/schemas/SearchDiagnostics"},{"type":"null"}],"description":"Detailed diagnostics for admin tooling"},"effective_subcategory_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved subcategory id used to derive taxonomy filter definitions","title":"Effective Subcategory Id"},"effective_subcategory_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved subcategory name used to derive taxonomy filter definitions","title":"Effective Subcategory Name"},"filter_stats":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"description":"Filter stage counts for debugging (optional)","title":"Filter Stats"},"filters_applied":{"description":"Filters applied during constraint filtering","items":{"type":"string"},"title":"Filters Applied","type":"array"},"inferred_filters":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Taxonomy filter values inferred from query text post-resolution","title":"Inferred Filters","type":"object"},"latency_ms":{"description":"Total search latency in ms","minimum":0.0,"title":"Latency Ms","type":"integer"},"limit":{"description":"Requested limit","minimum":1.0,"title":"Limit","type":"integer"},"location_message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User-facing message for location-related issues","title":"Location Message"},"location_not_found":{"default":false,"description":"True if the location text could not be resolved","title":"Location Not Found","type":"boolean"},"location_resolved":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved location name for display (if available)","title":"Location Resolved"},"parsed":{"$ref":"#/components/schemas/ParsedQueryInfo","description":"Parsed query details"},"parsing_mode":{"default":"regex","description":"Parsing mode used (regex/llm)","title":"Parsing Mode","type":"string"},"query":{"description":"Original search query","title":"Query","type":"string"},"requires_address":{"default":false,"description":"True if 'near me' was requested but user has no saved address","title":"Requires Address","type":"boolean"},"requires_auth":{"default":false,"description":"True if 'near me' was requested but user is not authenticated","title":"Requires Auth","type":"boolean"},"search_query_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search query ID for click tracking","title":"Search Query Id"},"skipped_operations":{"description":"Operations skipped during degradation","items":{"type":"string"},"title":"Skipped Operations","type":"array"},"soft_filter_message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User-facing message when constraints are relaxed","title":"Soft Filter Message"},"soft_filtering_used":{"default":false,"description":"Whether soft filtering/relaxation was applied","title":"Soft Filtering Used","type":"boolean"},"total_results":{"description":"Total results returned","minimum":0.0,"title":"Total Results","type":"integer"}},"required":["query","parsed","total_results","limit","latency_ms"],"title":"NLSearchMeta","type":"object"},"NLSearchResponse":{"additionalProperties":false,"description":"Complete NL search response with instructor-level results.","properties":{"meta":{"$ref":"#/components/schemas/NLSearchMeta","description":"Search metadata"},"results":{"description":"Instructor-level search results","items":{"$ref":"#/components/schemas/NLSearchResultItem"},"title":"Results","type":"array"}},"required":["results","meta"],"title":"NLSearchResponse","type":"object"},"NLSearchResultItem":{"additionalProperties":false,"description":"Single instructor result with all embedded data (eliminates N+1).","properties":{"best_match":{"$ref":"#/components/schemas/ServiceMatch","description":"Best matching service"},"coverage_areas":{"description":"Service area names","items":{"type":"string"},"title":"Coverage Areas","type":"array"},"distance_km":{"anyOf":[{"minimum":0.0,"type":"number"},{"type":"null"}],"description":"Distance from searched location in kilometers (optional)","title":"Distance Km"},"distance_mi":{"anyOf":[{"minimum":0.0,"type":"number"},{"type":"null"}],"description":"Distance from searched location in miles (optional)","title":"Distance Mi"},"instructor":{"$ref":"#/components/schemas/InstructorSummary","description":"Instructor profile info"},"instructor_id":{"description":"Instructor user ID","title":"Instructor Id","type":"string"},"other_matches":{"description":"Other matching services (max 3)","items":{"$ref":"#/components/schemas/ServiceMatch"},"title":"Other Matches","type":"array"},"rating":{"$ref":"#/components/schemas/RatingSummary","description":"Aggregated rating info"},"relevance_score":{"description":"Best match relevance score","maximum":1.0,"minimum":0.0,"title":"Relevance Score","type":"number"},"total_matching_services":{"default":1,"description":"Total number of matching services","minimum":1.0,"title":"Total Matching Services","type":"integer"}},"required":["instructor_id","instructor","rating","best_match","relevance_score"],"title":"NLSearchResultItem","type":"object"},"NYCZipCheckResponse":{"additionalProperties":false,"description":"Response payload for lightweight NYC ZIP verification.","properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"is_nyc":{"title":"Is Nyc","type":"boolean"}},"required":["is_nyc"],"title":"NYCZipCheckResponse","type":"object"},"NeighborhoodItem":{"additionalProperties":false,"description":"Single neighborhood entry with optional borough metadata.","properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name"],"title":"NeighborhoodItem","type":"object"},"NeighborhoodsListResponse":{"additionalProperties":false,"description":"Paginated list of neighborhoods.","properties":{"items":{"items":{"$ref":"#/components/schemas/NeighborhoodItem"},"title":"Items","type":"array"},"page":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page"},"per_page":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Per Page"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"NeighborhoodsListResponse","type":"object"},"NextAvailableSlotResponse":{"additionalProperties":false,"description":"Response for next available slot endpoint.","properties":{"date":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Date of the next available slot (YYYY-MM-DD)","title":"Date"},"duration_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Duration in minutes","title":"Duration Minutes"},"end_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End time (HH:MM:SS)","title":"End Time"},"found":{"title":"Found","type":"boolean"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Message when no slot is found","title":"Message"},"start_time":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start time (HH:MM:SS)","title":"Start Time"}},"required":["found"],"title":"NextAvailableSlotResponse","type":"object"},"NoShowDisputeRequest":{"additionalProperties":false,"description":"Schema for disputing a no-show report.","properties":{"reason":{"maxLength":500,"minLength":10,"title":"Reason","type":"string"}},"required":["reason"],"title":"NoShowDisputeRequest","type":"object"},"NoShowDisputeResponse":{"additionalProperties":false,"description":"Response for disputing a no-show report.","properties":{"booking_id":{"title":"Booking Id","type":"string"},"disputed":{"title":"Disputed","type":"boolean"},"requires_platform_review":{"title":"Requires Platform Review","type":"boolean"},"success":{"title":"Success","type":"boolean"}},"required":["success","booking_id","disputed","requires_platform_review"],"title":"NoShowDisputeResponse","type":"object"},"NoShowReportRequest":{"additionalProperties":false,"description":"Schema for reporting a no-show.","properties":{"no_show_type":{"enum":["instructor","student"],"title":"No Show Type","type":"string"},"reason":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["no_show_type"],"title":"NoShowReportRequest","type":"object"},"NoShowReportResponse":{"additionalProperties":false,"description":"Response for reporting a no-show.","properties":{"booking_id":{"title":"Booking Id","type":"string"},"dispute_window_ends":{"title":"Dispute Window Ends","type":"string"},"no_show_type":{"title":"No Show Type","type":"string"},"payment_status":{"title":"Payment Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","booking_id","no_show_type","payment_status","dispute_window_ends"],"title":"NoShowReportResponse","type":"object"},"NotificationHistoryEntry":{"properties":{"audience_size":{"title":"Audience Size","type":"integer"},"batch_id":{"title":"Batch Id","type":"string"},"channels":{"items":{"type":"string"},"title":"Channels","type":"array"},"click_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Click Rate","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"delivered":{"additionalProperties":{"type":"integer"},"title":"Delivered","type":"object"},"failed":{"additionalProperties":{"type":"integer"},"title":"Failed","type":"object"},"kind":{"title":"Kind","type":"string"},"open_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Open Rate","type":"string"},"scheduled_for":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled For"},"sent":{"additionalProperties":{"type":"integer"},"title":"Sent","type":"object"},"status":{"title":"Status","type":"string"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"required":["batch_id","kind","status","channels","created_at","audience_size","sent","delivered","failed","open_rate","click_rate"],"title":"NotificationHistoryEntry","type":"object"},"NotificationHistoryResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/NotificationHistoryEntry"},"title":"Items","type":"array"},"summary":{"$ref":"#/components/schemas/NotificationHistorySummary"}},"required":["items","summary"],"title":"NotificationHistoryResponse","type":"object"},"NotificationHistorySummary":{"properties":{"click_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Click Rate","type":"string"},"delivered":{"title":"Delivered","type":"integer"},"failed":{"title":"Failed","type":"integer"},"open_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Open Rate","type":"string"},"sent":{"title":"Sent","type":"integer"},"total":{"title":"Total","type":"integer"}},"required":["total","sent","delivered","failed","open_rate","click_rate"],"title":"NotificationHistorySummary","type":"object"},"NotificationListResponse":{"additionalProperties":false,"description":"Paginated notification response.","properties":{"notifications":{"items":{"$ref":"#/components/schemas/NotificationResponse"},"title":"Notifications","type":"array"},"total":{"title":"Total","type":"integer"},"unread_count":{"title":"Unread Count","type":"integer"}},"required":["notifications","total","unread_count"],"title":"NotificationListResponse","type":"object"},"NotificationPreferencesBulkUpdateRequest":{"additionalProperties":false,"description":"Bulk preference update request.","properties":{"updates":{"items":{"$ref":"#/components/schemas/PreferenceUpdate"},"title":"Updates","type":"array"}},"required":["updates"],"title":"NotificationPreferencesBulkUpdateRequest","type":"object"},"NotificationResponse":{"additionalProperties":false,"description":"Notification inbox entry.","properties":{"body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Body"},"category":{"title":"Category","type":"string"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"id":{"title":"Id","type":"string"},"read_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Read At"},"title":{"title":"Title","type":"string"},"type":{"title":"Type","type":"string"}},"required":["id","category","type","title","body","data","read_at","created_at"],"title":"NotificationResponse","type":"object"},"NotificationStatusResponse":{"additionalProperties":false,"description":"Simple status response for notification actions.","properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"success":{"title":"Success","type":"boolean"}},"required":["success"],"title":"NotificationStatusResponse","type":"object"},"NotificationTemplatesResponse":{"properties":{"templates":{"items":{"$ref":"#/components/schemas/TemplateInfo"},"title":"Templates","type":"array"}},"required":["templates"],"title":"NotificationTemplatesResponse","type":"object"},"NotificationUnreadCountResponse":{"additionalProperties":false,"description":"Unread notification count response.","properties":{"unread_count":{"minimum":0.0,"title":"Unread Count","type":"integer"}},"required":["unread_count"],"title":"NotificationUnreadCountResponse","type":"object"},"ObservabilityCandidate":{"additionalProperties":false,"description":"Search candidate for observability tracking.","properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"lexical_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lexical Score"},"position":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Position"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score"},"service_catalog_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Catalog Id"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"vector_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Vector Score"}},"title":"ObservabilityCandidate","type":"object"},"OnboardingResponse":{"additionalProperties":false,"properties":{"account_id":{"description":"Stripe connected account ID","title":"Account Id","type":"string"},"already_onboarded":{"description":"Whether onboarding was already completed","title":"Already Onboarded","type":"boolean"},"onboarding_url":{"description":"URL for onboarding flow","title":"Onboarding Url","type":"string"}},"required":["account_id","onboarding_url","already_onboarded"],"title":"OnboardingResponse","type":"object"},"OnboardingStatusResponse":{"additionalProperties":false,"properties":{"charges_enabled":{"description":"Whether account can accept payments","title":"Charges Enabled","type":"boolean"},"details_submitted":{"default":false,"description":"Whether required details are submitted","title":"Details Submitted","type":"boolean"},"has_account":{"description":"Whether instructor has a connected account","title":"Has Account","type":"boolean"},"onboarding_completed":{"description":"Whether onboarding is complete","title":"Onboarding Completed","type":"boolean"},"payouts_enabled":{"default":false,"description":"Whether account can receive payouts","title":"Payouts Enabled","type":"boolean"},"requirements":{"description":"Outstanding requirements","items":{"type":"string"},"title":"Requirements","type":"array"}},"required":["has_account","onboarding_completed","charges_enabled"],"title":"OnboardingStatusResponse","type":"object"},"OperationResult":{"description":"Result of a single operation in bulk update.","properties":{"action":{"title":"Action","type":"string"},"operation_index":{"title":"Operation Index","type":"integer"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"status":{"enum":["success","failed","skipped"],"title":"Status","type":"string"}},"required":["operation_index","action","status"],"title":"OperationResult","type":"object"},"OriginalPayment":{"properties":{"captured_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Captured At"},"gross":{"title":"Gross","type":"number"},"instructor_payout":{"title":"Instructor Payout","type":"number"},"platform_fee":{"title":"Platform Fee","type":"number"},"status":{"title":"Status","type":"string"}},"required":["gross","platform_fee","instructor_payout","status","captured_at"],"title":"OriginalPayment","type":"object"},"OverallRatingStats":{"additionalProperties":false,"description":"Overall rating statistics computed using Dirichlet smoothing.","properties":{"display_rating":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Display-formatted rating (e.g., '4.5') or None if below threshold","title":"Display Rating"},"rating":{"description":"Computed rating (Dirichlet-smoothed)","title":"Rating","type":"number"},"total_reviews":{"description":"Total number of reviews","title":"Total Reviews","type":"integer"}},"required":["rating","total_reviews"],"title":"OverallRatingStats","type":"object"},"OverridePayload":{"properties":{"action":{"enum":["approve","reject"],"title":"Action","type":"string"}},"required":["action"],"title":"OverridePayload","type":"object"},"PaginatedResponse_BookingResponse_":{"additionalProperties":false,"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/BookingResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[BookingResponse]","type":"object"},"PaginatedResponse_InstructorProfileResponse_":{"additionalProperties":false,"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/InstructorProfileResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[InstructorProfileResponse]","type":"object"},"PaginatedResponse_UpcomingBookingResponse_":{"additionalProperties":false,"properties":{"has_next":{"description":"Whether there's a next page","title":"Has Next","type":"boolean"},"has_prev":{"description":"Whether there's a previous page","title":"Has Prev","type":"boolean"},"items":{"description":"List of items","items":{"$ref":"#/components/schemas/UpcomingBookingResponse"},"title":"Items","type":"array"},"page":{"default":1,"description":"Current page number","minimum":1.0,"title":"Page","type":"integer"},"per_page":{"default":20,"description":"Items per page","maximum":100.0,"minimum":1.0,"title":"Per Page","type":"integer"},"total":{"description":"Total number of items","title":"Total","type":"integer"}},"required":["items","total","has_next","has_prev"],"title":"PaginatedResponse[UpcomingBookingResponse]","type":"object"},"ParseStageDetails":{"additionalProperties":false,"description":"Details for parse pipeline stage.","properties":{"mode":{"description":"Parsing mode used (regex/llm)","title":"Mode","type":"string"}},"required":["mode"],"title":"ParseStageDetails","type":"object"},"ParsedQueryInfo":{"additionalProperties":false,"description":"Parsed query details for response transparency.","properties":{"audience_hint":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Detected audience hint","title":"Audience Hint"},"date":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Extracted date","title":"Date"},"lesson_type":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Lesson type filter: 'online', 'in_person', or 'any'","title":"Lesson Type"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Extracted location","title":"Location"},"max_price":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Extracted max price","title":"Max Price"},"service_query":{"description":"Extracted service query","title":"Service Query","type":"string"},"skill_level":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Detected skill level","title":"Skill Level"},"time_after":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Extracted time constraint","title":"Time After"},"time_before":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Extracted time constraint end","title":"Time Before"},"urgency":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Detected urgency level","title":"Urgency"},"use_user_location":{"default":false,"description":"True if 'near me' detected and user location should be used","title":"Use User Location","type":"boolean"}},"required":["service_query"],"title":"ParsedQueryInfo","type":"object"},"ParticipantInfo":{"additionalProperties":false,"properties":{"email_hash":{"title":"Email Hash","type":"string"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"}},"required":["id","name","email_hash"],"title":"ParticipantInfo","type":"object"},"PasswordChangeRequest":{"additionalProperties":false,"properties":{"current_password":{"minLength":6,"title":"Current Password","type":"string"},"new_password":{"minLength":8,"title":"New Password","type":"string"}},"required":["current_password","new_password"],"title":"PasswordChangeRequest","type":"object"},"PasswordChangeResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"PasswordChangeResponse","type":"object"},"PasswordResetConfirm":{"additionalProperties":false,"description":"Request model for confirming password reset with new password","properties":{"new_password":{"minLength":8,"title":"New Password","type":"string"},"token":{"title":"Token","type":"string"}},"required":["token","new_password"],"title":"PasswordResetConfirm","type":"object"},"PasswordResetRequest":{"additionalProperties":false,"description":"Request model for initiating password reset","properties":{"email":{"format":"email","title":"Email","type":"string"}},"required":["email"],"title":"PasswordResetRequest","type":"object"},"PasswordResetResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"PasswordResetResponse","type":"object"},"PasswordResetVerifyResponse":{"additionalProperties":true,"type":"object"},"PaymentAmount":{"additionalProperties":false,"properties":{"credits_applied":{"title":"Credits Applied","type":"number"},"gross":{"title":"Gross","type":"number"},"net_to_instructor":{"title":"Net To Instructor","type":"number"},"platform_fee":{"title":"Platform Fee","type":"number"},"tip":{"title":"Tip","type":"number"}},"required":["gross","platform_fee","credits_applied","tip","net_to_instructor"],"title":"PaymentAmount","type":"object"},"PaymentDeleteResponse":{"additionalProperties":false,"properties":{"success":{"description":"Whether deletion was successful","title":"Success","type":"boolean"}},"required":["success"],"title":"PaymentDeleteResponse","type":"object"},"PaymentFailure":{"additionalProperties":false,"properties":{"category":{"title":"Category","type":"string"},"ts":{"format":"date-time","title":"Ts","type":"string"}},"required":["ts","category"],"title":"PaymentFailure","type":"object"},"PaymentHealthCheckTriggerResponse":{"additionalProperties":false,"description":"Response for manually triggered payment health check.","properties":{"message":{"description":"Status message","title":"Message","type":"string"},"status":{"description":"Trigger status","title":"Status","type":"string"},"task_id":{"description":"Celery task ID","title":"Task Id","type":"string"},"timestamp":{"description":"Trigger timestamp","title":"Timestamp","type":"string"}},"required":["status","task_id","message","timestamp"],"title":"PaymentHealthCheckTriggerResponse","type":"object"},"PaymentHealthResponse":{"additionalProperties":false,"description":"Payment system health monitoring response.","properties":{"alerts":{"description":"Current payment system alerts","items":{"type":"string"},"title":"Alerts","type":"array"},"metrics":{"additionalProperties":{"type":"integer"},"description":"Payment metrics breakdown","title":"Metrics","type":"object"},"minutes_since_last_auth":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Minutes since last successful auth","title":"Minutes Since Last Auth"},"overdue_authorizations":{"description":"Number of overdue authorizations","title":"Overdue Authorizations","type":"integer"},"payment_stats":{"additionalProperties":{"type":"integer"},"description":"Payment status counts","title":"Payment Stats","type":"object"},"recent_events":{"additionalProperties":{"type":"integer"},"description":"Recent payment event counts","title":"Recent Events","type":"object"},"status":{"description":"Payment system health status (healthy/warning/critical)","title":"Status","type":"string"},"timestamp":{"description":"Health check timestamp","title":"Timestamp","type":"string"}},"required":["status","timestamp","payment_stats","recent_events","overdue_authorizations","alerts","metrics"],"title":"PaymentHealthResponse","type":"object"},"PaymentIds":{"additionalProperties":false,"properties":{"charge":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Charge"},"payment_intent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Intent"}},"title":"PaymentIds","type":"object"},"PaymentInfo":{"additionalProperties":false,"properties":{"amount":{"$ref":"#/components/schemas/PaymentAmount"},"failures":{"items":{"$ref":"#/components/schemas/PaymentFailure"},"title":"Failures","type":"array"},"ids":{"$ref":"#/components/schemas/PaymentIds"},"scheduled_authorize_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled Authorize At"},"scheduled_capture_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Scheduled Capture At"},"status":{"title":"Status","type":"string"}},"required":["status","amount","ids"],"title":"PaymentInfo","type":"object"},"PaymentMethodResponse":{"additionalProperties":false,"description":"Response model for payment method information.","properties":{"brand":{"description":"Card brand (visa, mastercard, etc.)","title":"Brand","type":"string"},"created_at":{"description":"When the payment method was added","format":"date-time","title":"Created At","type":"string"},"id":{"description":"Payment method ID","title":"Id","type":"string"},"is_default":{"description":"Whether this is the default payment method","title":"Is Default","type":"boolean"},"last4":{"description":"Last 4 digits of card","title":"Last4","type":"string"}},"required":["id","last4","brand","is_default","created_at"],"title":"PaymentMethodResponse","type":"object"},"PaymentPipelineResponse":{"additionalProperties":false,"description":"Response for payment pipeline status endpoint.","properties":{"authorized":{"title":"Authorized","type":"integer"},"captured":{"title":"Captured","type":"integer"},"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"failed":{"title":"Failed","type":"integer"},"instructor_payouts_cents":{"title":"Instructor Payouts Cents","type":"integer"},"net_revenue_cents":{"title":"Net Revenue Cents","type":"integer"},"overdue_authorizations":{"title":"Overdue Authorizations","type":"integer"},"overdue_captures":{"title":"Overdue Captures","type":"integer"},"pending_authorization":{"title":"Pending Authorization","type":"integer"},"pending_capture":{"title":"Pending Capture","type":"integer"},"platform_fees_cents":{"title":"Platform Fees Cents","type":"integer"},"refunded":{"title":"Refunded","type":"integer"},"total_captured_cents":{"title":"Total Captured Cents","type":"integer"},"total_refunded_cents":{"title":"Total Refunded Cents","type":"integer"}},"required":["pending_authorization","authorized","pending_capture","captured","failed","refunded","overdue_authorizations","overdue_captures","total_captured_cents","total_refunded_cents","net_revenue_cents","platform_fees_cents","instructor_payouts_cents","checked_at"],"title":"PaymentPipelineResponse","type":"object"},"PaymentSummary":{"description":"Student-facing payment breakdown for a booking.","properties":{"credit_applied":{"title":"Credit Applied","type":"number"},"lesson_amount":{"title":"Lesson Amount","type":"number"},"service_fee":{"title":"Service Fee","type":"number"},"subtotal":{"title":"Subtotal","type":"number"},"tip_amount":{"title":"Tip Amount","type":"number"},"tip_last_updated":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Tip Last Updated"},"tip_paid":{"title":"Tip Paid","type":"number"},"tip_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tip Status"},"total_paid":{"title":"Total Paid","type":"number"}},"required":["lesson_amount","service_fee","credit_applied","subtotal","tip_amount","tip_paid","total_paid"],"title":"PaymentSummary","type":"object"},"PayoutHistoryResponse":{"additionalProperties":false,"properties":{"payout_count":{"default":0,"description":"Number of payouts","title":"Payout Count","type":"integer"},"payouts":{"description":"List of payouts","items":{"$ref":"#/components/schemas/PayoutSummary"},"title":"Payouts","type":"array"},"total_paid_cents":{"default":0,"description":"Total amount successfully paid out","title":"Total Paid Cents","type":"integer"},"total_pending_cents":{"default":0,"description":"Total amount pending payout","title":"Total Pending Cents","type":"integer"}},"title":"PayoutHistoryResponse","type":"object"},"PayoutScheduleResponse":{"additionalProperties":false,"properties":{"account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Stripe connected account identifier","title":"Account Id"},"ok":{"description":"Whether the schedule update succeeded","title":"Ok","type":"boolean"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Stripe payout schedule settings that were applied","title":"Settings"}},"required":["ok"],"title":"PayoutScheduleResponse","type":"object"},"PayoutSummary":{"additionalProperties":false,"properties":{"amount_cents":{"description":"Amount in cents","title":"Amount Cents","type":"integer"},"arrival_date":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"description":"Expected arrival date","title":"Arrival Date"},"created_at":{"description":"When the payout was created","format":"date-time","title":"Created At","type":"string"},"failure_code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Failure code if payout failed","title":"Failure Code"},"failure_message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Failure message if payout failed","title":"Failure Message"},"id":{"description":"Payout ID (Stripe)","title":"Id","type":"string"},"status":{"description":"Payout status (pending, in_transit, paid, failed, canceled)","title":"Status","type":"string"}},"required":["id","amount_cents","status","created_at"],"title":"PayoutSummary","type":"object"},"PendingPayoutItem":{"additionalProperties":false,"description":"An instructor with pending payout.","properties":{"completed_lessons":{"title":"Completed Lessons","type":"integer"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_name":{"title":"Instructor Name","type":"string"},"oldest_pending_date":{"title":"Oldest Pending Date","type":"string"},"pending_amount_cents":{"title":"Pending Amount Cents","type":"integer"},"stripe_connected":{"title":"Stripe Connected","type":"boolean"}},"required":["instructor_id","instructor_name","pending_amount_cents","completed_lessons","oldest_pending_date","stripe_connected"],"title":"PendingPayoutItem","type":"object"},"PendingPayoutsResponse":{"additionalProperties":false,"description":"Response for pending payouts endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"instructor_count":{"title":"Instructor Count","type":"integer"},"payouts":{"items":{"$ref":"#/components/schemas/PendingPayoutItem"},"title":"Payouts","type":"array"},"total_pending_cents":{"title":"Total Pending Cents","type":"integer"}},"required":["payouts","total_pending_cents","instructor_count","checked_at"],"title":"PendingPayoutsResponse","type":"object"},"PerformanceCacheStats":{"description":"Cache statistics for performance metrics.","properties":{"hit_rate":{"default":"0.0%","description":"Cache hit rate percentage","title":"Hit Rate","type":"string"},"hits":{"default":0,"description":"Cache hits","title":"Hits","type":"integer"},"misses":{"default":0,"description":"Cache misses","title":"Misses","type":"integer"}},"title":"PerformanceCacheStats","type":"object"},"PerformanceDatabaseMetrics":{"description":"Database metrics for performance monitoring.","properties":{"active_connections":{"default":0,"description":"Active database connections","title":"Active Connections","type":"integer"},"pool_status":{"$ref":"#/components/schemas/DatabasePoolStatus","description":"Connection pool status"}},"required":["pool_status"],"title":"PerformanceDatabaseMetrics","type":"object"},"PerformanceMetrics":{"additionalProperties":false,"description":"Search performance metrics.","properties":{"avg_results_per_search":{"description":"Average results per search","title":"Avg Results Per Search","type":"number"},"most_effective_type":{"description":"Most effective search type","title":"Most Effective Type","type":"string"},"zero_result_rate":{"description":"Percentage of searches with zero results","title":"Zero Result Rate","type":"number"}},"required":["avg_results_per_search","zero_result_rate","most_effective_type"],"title":"PerformanceMetrics","type":"object"},"PerformanceMetricsResponse":{"additionalProperties":false,"description":"Comprehensive performance metrics response.","properties":{"availability_service":{"$ref":"#/components/schemas/ServiceMetrics","description":"Availability service metrics"},"booking_service":{"$ref":"#/components/schemas/ServiceMetrics","description":"Booking service metrics"},"cache":{"$ref":"#/components/schemas/PerformanceCacheStats","description":"Cache statistics"},"conflict_checker":{"$ref":"#/components/schemas/ServiceMetrics","description":"Conflict checker metrics"},"database":{"$ref":"#/components/schemas/PerformanceDatabaseMetrics","description":"Database connection metrics"},"system":{"additionalProperties":{"type":"number"},"description":"System resource metrics","title":"System","type":"object"}},"required":["availability_service","booking_service","conflict_checker","cache","system","database"],"title":"PerformanceMetricsResponse","type":"object"},"PerformanceRecommendation":{"description":"Performance optimization recommendation.","properties":{"action":{"description":"Suggested action","title":"Action","type":"string"},"message":{"description":"Recommendation message","title":"Message","type":"string"},"severity":{"description":"Severity level (info/warning)","title":"Severity","type":"string"},"type":{"description":"Recommendation type (database/cache/memory/requests)","title":"Type","type":"string"}},"required":["type","severity","message","action"],"title":"PerformanceRecommendation","type":"object"},"PhoneUpdateRequest":{"properties":{"phone_number":{"description":"Phone number in E.164 format","title":"Phone Number","type":"string"}},"required":["phone_number"],"title":"PhoneUpdateRequest","type":"object"},"PhoneUpdateResponse":{"properties":{"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"verified":{"default":false,"title":"Verified","type":"boolean"}},"title":"PhoneUpdateResponse","type":"object"},"PhoneVerifyConfirmRequest":{"properties":{"code":{"maxLength":6,"minLength":6,"title":"Code","type":"string"}},"required":["code"],"title":"PhoneVerifyConfirmRequest","type":"object"},"PhoneVerifyResponse":{"properties":{"sent":{"default":false,"title":"Sent","type":"boolean"},"verified":{"default":false,"title":"Verified","type":"boolean"}},"title":"PhoneVerifyResponse","type":"object"},"PipelineStage":{"additionalProperties":false,"description":"Timing and status for a pipeline stage.","properties":{"details":{"anyOf":[{"$ref":"#/components/schemas/CacheCheckStageDetails"},{"$ref":"#/components/schemas/Burst1StageDetails"},{"$ref":"#/components/schemas/ParseStageDetails"},{"$ref":"#/components/schemas/EmbeddingStageDetails"},{"$ref":"#/components/schemas/LocationResolutionStageDetails"},{"$ref":"#/components/schemas/Burst2StageDetails"},{"$ref":"#/components/schemas/HydrateStageDetails"},{"$ref":"#/components/schemas/BuildResponseStageDetails"},{"$ref":"#/components/schemas/SkippedStageDetails"},{"type":"null"}],"description":"Type-specific stage details","title":"Details"},"duration_ms":{"description":"Stage duration in ms","minimum":0.0,"title":"Duration Ms","type":"integer"},"name":{"description":"Stage name","title":"Name","type":"string"},"status":{"$ref":"#/components/schemas/StageStatus","description":"Stage status"}},"required":["name","duration_ms","status"],"title":"PipelineStage","type":"object"},"PlaceDetails":{"properties":{"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"formatted_address":{"title":"Formatted Address","type":"string"},"latitude":{"title":"Latitude","type":"number"},"longitude":{"title":"Longitude","type":"number"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"provider_id":{"title":"Provider Id","type":"string"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"street_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Name"},"street_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Street Number"}},"required":["formatted_address","latitude","longitude","provider_id"],"title":"PlaceDetails","type":"object"},"PlaceSuggestion":{"properties":{"description":{"title":"Description","type":"string"},"place_id":{"title":"Place Id","type":"string"},"provider":{"title":"Provider","type":"string"},"text":{"title":"Text","type":"string"},"types":{"default":[],"items":{"type":"string"},"title":"Types","type":"array"}},"required":["text","place_id","description","provider"],"title":"PlaceSuggestion","type":"object"},"PlatformAlerts":{"properties":{"alerts":{"items":{"$ref":"#/components/schemas/Alert"},"title":"Alerts","type":"array"},"by_category":{"additionalProperties":{"type":"integer"},"title":"By Category","type":"object"},"by_severity":{"additionalProperties":{"type":"integer"},"title":"By Severity","type":"object"},"total_active":{"title":"Total Active","type":"integer"}},"required":["total_active","alerts","by_severity","by_category"],"title":"PlatformAlerts","type":"object"},"PlatformFees":{"properties":{"founding_instructor":{"description":"Platform fee for founding instructors","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Founding Instructor","type":"number"},"student_booking_fee":{"description":"Student booking protection fee","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Student Booking Fee","type":"number"},"tier_1":{"description":"Entry tier platform fee","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Tier 1","type":"number"},"tier_2":{"description":"Second tier platform fee","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Tier 2","type":"number"},"tier_3":{"description":"Third tier platform fee","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Tier 3","type":"number"}},"required":["founding_instructor","tier_1","tier_2","tier_3","student_booking_fee"],"title":"PlatformFees","type":"object"},"PopularQueriesResponse":{"additionalProperties":false,"description":"List of popular search queries.","properties":{"queries":{"description":"Popular queries","items":{"$ref":"#/components/schemas/PopularQueryItem"},"title":"Queries","type":"array"}},"required":["queries"],"title":"PopularQueriesResponse","type":"object"},"PopularQueryItem":{"additionalProperties":false,"description":"A popular search query.","properties":{"avg_latency_ms":{"anyOf":[{"minimum":0.0,"type":"number"},{"type":"null"}],"description":"Average latency in ms","title":"Avg Latency Ms"},"avg_results":{"description":"Average results for this query","minimum":0.0,"title":"Avg Results","type":"number"},"count":{"description":"Number of times searched","minimum":1.0,"title":"Count","type":"integer"},"query":{"description":"Search query text","title":"Query","type":"string"}},"required":["query","count","avg_results"],"title":"PopularQueryItem","type":"object"},"PopularSearch":{"additionalProperties":false,"description":"Popular search query data.","properties":{"average_results":{"description":"Average number of results returned","title":"Average Results","type":"number"},"query":{"description":"Search query text","title":"Query","type":"string"},"search_count":{"description":"Number of times searched","title":"Search Count","type":"integer"},"unique_users":{"description":"Number of unique users who searched","title":"Unique Users","type":"integer"}},"required":["query","search_count","unique_users","average_results"],"title":"PopularSearch","type":"object"},"PopularSearchesResponse":{"description":"Popular searches response.","items":{"$ref":"#/components/schemas/PopularSearch"},"title":"PopularSearchesResponse","type":"array"},"PopupDataResponse":{"description":"Data for the one-time referral popup after go-live.","properties":{"bonus_amount_cents":{"title":"Bonus Amount Cents","type":"integer"},"founding_spots_remaining":{"title":"Founding Spots Remaining","type":"integer"},"is_founding_phase":{"title":"Is Founding Phase","type":"boolean"},"referral_code":{"title":"Referral Code","type":"string"},"referral_link":{"title":"Referral Link","type":"string"}},"required":["is_founding_phase","bonus_amount_cents","founding_spots_remaining","referral_code","referral_link"],"title":"PopupDataResponse","type":"object"},"PreferenceResponse":{"additionalProperties":false,"description":"Single preference response.","properties":{"category":{"title":"Category","type":"string"},"channel":{"title":"Channel","type":"string"},"enabled":{"title":"Enabled","type":"boolean"},"id":{"title":"Id","type":"string"},"locked":{"title":"Locked","type":"boolean"}},"required":["id","category","channel","enabled","locked"],"title":"PreferenceResponse","type":"object"},"PreferenceUpdate":{"additionalProperties":false,"description":"Single preference update for bulk requests.","properties":{"category":{"title":"Category","type":"string"},"channel":{"title":"Channel","type":"string"},"enabled":{"title":"Enabled","type":"boolean"}},"required":["category","channel","enabled"],"title":"PreferenceUpdate","type":"object"},"PreferencesByCategory":{"additionalProperties":false,"description":"Preferences grouped by category for frontend consumption.","properties":{"learning_tips":{"additionalProperties":{"type":"boolean"},"title":"Learning Tips","type":"object"},"lesson_updates":{"additionalProperties":{"type":"boolean"},"title":"Lesson Updates","type":"object"},"messages":{"additionalProperties":{"type":"boolean"},"title":"Messages","type":"object"},"promotional":{"additionalProperties":{"type":"boolean"},"title":"Promotional","type":"object"},"reviews":{"additionalProperties":{"type":"boolean"},"title":"Reviews","type":"object"},"system_updates":{"additionalProperties":{"type":"boolean"},"title":"System Updates","type":"object"}},"required":["lesson_updates","messages","reviews","learning_tips","system_updates","promotional"],"title":"PreferencesByCategory","type":"object"},"PreferredPublicSpaceIn":{"additionalProperties":false,"description":"Preferred public space input payload.","properties":{"address":{"maxLength":512,"minLength":1,"title":"Address","type":"string"},"label":{"anyOf":[{"maxLength":64,"minLength":1,"type":"string"},{"type":"null"}],"title":"Label"}},"required":["address"],"title":"PreferredPublicSpaceIn","type":"object"},"PreferredPublicSpaceOut":{"additionalProperties":true,"type":"object"},"PreferredTeachingLocationIn":{"additionalProperties":false,"description":"Preferred teaching location input payload.","properties":{"address":{"maxLength":512,"minLength":1,"title":"Address","type":"string"},"label":{"anyOf":[{"maxLength":64,"minLength":1,"type":"string"},{"type":"null"}],"title":"Label"}},"required":["address"],"title":"PreferredTeachingLocationIn","type":"object"},"PreferredTeachingLocationOut":{"additionalProperties":true,"type":"object"},"PriceFloorConfig":{"properties":{"private_in_person":{"description":"Minimum cents for in-person private lessons","minimum":0.0,"title":"Private In Person","type":"integer"},"private_remote":{"description":"Minimum cents for remote private lessons","minimum":0.0,"title":"Private Remote","type":"integer"}},"required":["private_in_person","private_remote"],"title":"PriceFloorConfig","type":"object"},"PricingConfig":{"properties":{"founding_instructor_cap":{"default":100,"description":"Maximum number of founding instructors","exclusiveMinimum":0.0,"title":"Founding Instructor Cap","type":"integer"},"founding_instructor_rate_pct":{"default":0.08,"description":"Platform fee percentage for founding instructors","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Founding Instructor Rate Pct","type":"number"},"founding_search_boost":{"default":1.5,"description":"Search ranking multiplier for founding instructors","exclusiveMinimum":0.0,"title":"Founding Search Boost","type":"number"},"instructor_tiers":{"items":{"$ref":"#/components/schemas/TierConfig"},"title":"Instructor Tiers","type":"array"},"price_floor_cents":{"$ref":"#/components/schemas/PriceFloorConfig"},"student_credit_cycle":{"$ref":"#/components/schemas/StudentCreditCycle"},"student_fee_pct":{"description":"Student booking protection fee as decimal","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Student Fee Pct","type":"number"},"tier_activity_window_days":{"description":"Rolling window for tier activity","exclusiveMinimum":0.0,"title":"Tier Activity Window Days","type":"integer"},"tier_inactivity_reset_days":{"description":"Inactivity period before full reset","exclusiveMinimum":0.0,"title":"Tier Inactivity Reset Days","type":"integer"},"tier_stepdown_max":{"description":"Maximum tiers to drop per evaluation","minimum":0.0,"title":"Tier Stepdown Max","type":"integer"}},"required":["student_fee_pct","instructor_tiers","tier_activity_window_days","tier_stepdown_max","tier_inactivity_reset_days","price_floor_cents","student_credit_cycle"],"title":"PricingConfig","type":"object"},"PricingConfigPayload":{"description":"Alias for request payload compatibility.","properties":{"founding_instructor_cap":{"default":100,"description":"Maximum number of founding instructors","exclusiveMinimum":0.0,"title":"Founding Instructor Cap","type":"integer"},"founding_instructor_rate_pct":{"default":0.08,"description":"Platform fee percentage for founding instructors","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Founding Instructor Rate Pct","type":"number"},"founding_search_boost":{"default":1.5,"description":"Search ranking multiplier for founding instructors","exclusiveMinimum":0.0,"title":"Founding Search Boost","type":"number"},"instructor_tiers":{"items":{"$ref":"#/components/schemas/TierConfig"},"title":"Instructor Tiers","type":"array"},"price_floor_cents":{"$ref":"#/components/schemas/PriceFloorConfig"},"student_credit_cycle":{"$ref":"#/components/schemas/StudentCreditCycle"},"student_fee_pct":{"description":"Student booking protection fee as decimal","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Student Fee Pct","type":"number"},"tier_activity_window_days":{"description":"Rolling window for tier activity","exclusiveMinimum":0.0,"title":"Tier Activity Window Days","type":"integer"},"tier_inactivity_reset_days":{"description":"Inactivity period before full reset","exclusiveMinimum":0.0,"title":"Tier Inactivity Reset Days","type":"integer"},"tier_stepdown_max":{"description":"Maximum tiers to drop per evaluation","minimum":0.0,"title":"Tier Stepdown Max","type":"integer"}},"required":["student_fee_pct","instructor_tiers","tier_activity_window_days","tier_stepdown_max","tier_inactivity_reset_days","price_floor_cents","student_credit_cycle"],"title":"PricingConfigPayload","type":"object"},"PricingConfigResponse":{"properties":{"config":{"$ref":"#/components/schemas/PricingConfig"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["config"],"title":"PricingConfigResponse","type":"object"},"PricingPreviewIn":{"properties":{"applied_credit_cents":{"minimum":0.0,"title":"Applied Credit Cents","type":"integer"},"booking_date":{"minLength":1,"pattern":"^\\d{4}-\\d{2}-\\d{2}$","title":"Booking Date","type":"string"},"instructor_id":{"minLength":1,"title":"Instructor Id","type":"string"},"instructor_service_id":{"minLength":1,"title":"Instructor Service Id","type":"string"},"location_type":{"enum":["student_location","instructor_location","online","neutral_location"],"title":"Location Type","type":"string"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"selected_duration":{"exclusiveMinimum":0.0,"title":"Selected Duration","type":"integer"},"start_time":{"minLength":1,"pattern":"^\\d{2}:\\d{2}$","title":"Start Time","type":"string"}},"required":["instructor_id","instructor_service_id","booking_date","start_time","selected_duration","location_type","applied_credit_cents"],"title":"PricingPreviewIn","type":"object"},"PricingPreviewOut":{"properties":{"application_fee_cents":{"minimum":0.0,"title":"Application Fee Cents","type":"integer"},"base_price_cents":{"minimum":0.0,"title":"Base Price Cents","type":"integer"},"credit_applied_cents":{"minimum":0.0,"title":"Credit Applied Cents","type":"integer"},"instructor_platform_fee_cents":{"minimum":0.0,"title":"Instructor Platform Fee Cents","type":"integer"},"instructor_tier_pct":{"maximum":1.0,"minimum":0.0,"title":"Instructor Tier Pct","type":"number"},"line_items":{"items":{"$ref":"#/components/schemas/LineItem"},"title":"Line Items","type":"array"},"student_fee_cents":{"minimum":0.0,"title":"Student Fee Cents","type":"integer"},"student_pay_cents":{"minimum":0.0,"title":"Student Pay Cents","type":"integer"},"target_instructor_payout_cents":{"minimum":0.0,"title":"Target Instructor Payout Cents","type":"integer"},"top_up_transfer_cents":{"minimum":0.0,"title":"Top Up Transfer Cents","type":"integer"}},"required":["base_price_cents","student_fee_cents","instructor_platform_fee_cents","target_instructor_payout_cents","credit_applied_cents","student_pay_cents","application_fee_cents","top_up_transfer_cents","instructor_tier_pct","line_items"],"title":"PricingPreviewOut","type":"object"},"PrivacyStatistics":{"description":"Privacy and retention statistics returned by get_privacy_statistics.","properties":{"active_users":{"description":"Number of active users","title":"Active Users","type":"integer"},"search_event_records":{"description":"Number of search event records","title":"Search Event Records","type":"integer"},"search_events_eligible_for_deletion":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Search events eligible for deletion based on retention policy","title":"Search Events Eligible For Deletion"},"search_history_records":{"description":"Number of search history records","title":"Search History Records","type":"integer"},"total_bookings":{"description":"Total number of bookings","title":"Total Bookings","type":"integer"},"total_users":{"description":"Total number of users","title":"Total Users","type":"integer"}},"required":["total_users","active_users","search_history_records","search_event_records","total_bookings"],"title":"PrivacyStatistics","type":"object"},"PrivacyStatisticsResponse":{"additionalProperties":false,"properties":{"statistics":{"$ref":"#/components/schemas/PrivacyStatistics","description":"Privacy and retention statistics"},"status":{"description":"Status of the request","title":"Status","type":"string"}},"required":["status","statistics"],"title":"PrivacyStatisticsResponse","type":"object"},"ProblematicQuery":{"additionalProperties":false,"description":"Problematic search query with low results.","properties":{"avg_results":{"description":"Average results returned","title":"Avg Results","type":"number"},"count":{"description":"Number of times searched","title":"Count","type":"integer"},"query":{"description":"Search query text","title":"Query","type":"string"}},"required":["query","count","avg_results"],"title":"ProblematicQuery","type":"object"},"ProfilePictureUrlsResponse":{"properties":{"urls":{"additionalProperties":{"anyOf":[{"type":"string"},{"type":"null"}]},"title":"Urls","type":"object"}},"required":["urls"],"title":"ProfilePictureUrlsResponse","type":"object"},"ProxyUploadResponse":{"additionalProperties":false,"description":"Response payload for proxied uploads in local development.","properties":{"ok":{"title":"Ok","type":"boolean"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"}},"required":["ok"],"title":"ProxyUploadResponse","type":"object"},"PublicAvailabilitySummaryEntry":{"description":"Summary of availability for a single date.","properties":{"afternoon_available":{"default":false,"description":"Afternoon availability","title":"Afternoon Available","type":"boolean"},"date":{"description":"Date in YYYY-MM-DD format","title":"Date","type":"string"},"evening_available":{"default":false,"description":"Evening availability","title":"Evening Available","type":"boolean"},"morning_available":{"default":false,"description":"Morning availability","title":"Morning Available","type":"boolean"},"total_hours":{"default":0.0,"description":"Total available hours","title":"Total Hours","type":"number"}},"required":["date"],"title":"PublicAvailabilitySummaryEntry","type":"object"},"PublicConfigResponse":{"properties":{"fees":{"$ref":"#/components/schemas/PlatformFees"},"updated_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updated At"}},"required":["fees"],"title":"PublicConfigResponse","type":"object"},"PublicDayAvailability":{"description":"Availability for a single day.","properties":{"available_slots":{"description":"List of available time slots for booking","items":{"$ref":"#/components/schemas/PublicTimeSlot"},"title":"Available Slots","type":"array"},"date":{"description":"Date in YYYY-MM-DD format","title":"Date","type":"string"},"is_blackout":{"default":false,"description":"Whether this date is completely unavailable","title":"Is Blackout","type":"boolean"}},"required":["date"],"title":"PublicDayAvailability","type":"object"},"PublicInstructorAvailability":{"description":"Public availability response for an instructor.\n\nThis is the main response schema for the public endpoint.\nProvides all necessary information for students to view\navailability and make booking decisions.\n\nThe detail_level field indicates what data is populated:\n- \"minimal\": Only has_availability and earliest_available_date\n- \"summary\": Includes availability_summary but not specific slots\n- \"full\": Complete availability_by_date with all time slots","properties":{"availability_by_date":{"anyOf":[{"additionalProperties":{"$ref":"#/components/schemas/PublicDayAvailability"},"type":"object"},{"type":"null"}],"description":"Availability indexed by date string (YYYY-MM-DD) - only in full detail","title":"Availability By Date"},"availability_summary":{"anyOf":[{"additionalProperties":{"$ref":"#/components/schemas/PublicAvailabilitySummaryEntry"},"type":"object"},{"type":"null"}],"description":"Summary of availability by date - only in summary detail","title":"Availability Summary"},"detail_level":{"description":"Level of detail: minimal, summary, or full","title":"Detail Level","type":"string"},"earliest_available_date":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Earliest date with availability","title":"Earliest Available Date"},"has_availability":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether any availability exists","title":"Has Availability"},"instructor_first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor's first name if privacy settings allow","title":"Instructor First Name"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_last_initial":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor's last name initial for privacy","title":"Instructor Last Initial"},"timezone":{"default":"America/New_York","description":"Instructor's timezone","title":"Timezone","type":"string"},"total_available_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Number of days with availability","title":"Total Available Days"},"total_available_slots":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Total number of bookable slots in the date range","title":"Total Available Slots"}},"required":["instructor_id","detail_level"],"title":"PublicInstructorAvailability","type":"object"},"PublicTimeSlot":{"description":"A bookable time slot for public viewing.\n\nNote: No slot IDs exposed - frontend should use instructor_id + date + times\nfor booking requests.","properties":{"end_time":{"description":"End time in HH:MM format","title":"End Time","type":"string"},"start_time":{"description":"Start time in HH:MM format","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"PublicTimeSlot","type":"object"},"PushStatusResponse":{"additionalProperties":false,"description":"Response after subscribe/unsubscribe.","properties":{"message":{"title":"Message","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","message"],"title":"PushStatusResponse","type":"object"},"PushSubscribeRequest":{"additionalProperties":false,"description":"Request to subscribe to push notifications.","properties":{"auth":{"description":"Auth secret","maxLength":512,"title":"Auth","type":"string"},"endpoint":{"description":"Push service endpoint URL","maxLength":2048,"title":"Endpoint","type":"string"},"p256dh":{"description":"Public encryption key","maxLength":512,"title":"P256Dh","type":"string"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Browser/device info","title":"User Agent"}},"required":["endpoint","p256dh","auth"],"title":"PushSubscribeRequest","type":"object"},"PushSubscriptionResponse":{"additionalProperties":false,"description":"Push subscription details.","properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"endpoint":{"title":"Endpoint","type":"string"},"id":{"title":"Id","type":"string"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"}},"required":["id","endpoint","user_agent","created_at"],"title":"PushSubscriptionResponse","type":"object"},"PushUnsubscribeRequest":{"additionalProperties":false,"description":"Request to unsubscribe from push notifications.","properties":{"endpoint":{"description":"Push service endpoint URL to remove","title":"Endpoint","type":"string"}},"required":["endpoint"],"title":"PushUnsubscribeRequest","type":"object"},"RateLimitResetResponse":{"additionalProperties":false,"description":"Rate limit reset response.","properties":{"limits_reset":{"description":"Number of limits reset","title":"Limits Reset","type":"integer"},"message":{"description":"Result message","title":"Message","type":"string"},"pattern":{"description":"Pattern used for matching","title":"Pattern","type":"string"},"status":{"description":"Operation status","title":"Status","type":"string"}},"required":["status","pattern","limits_reset","message"],"title":"RateLimitResetResponse","type":"object"},"RateLimitState":{"description":"Rate limit block state.","properties":{"active":{"title":"Active","type":"boolean"},"count":{"default":0,"title":"Count","type":"integer"},"limit":{"title":"Limit","type":"integer"},"ttl_seconds":{"default":0,"title":"Ttl Seconds","type":"integer"}},"required":["active","limit"],"title":"RateLimitState","type":"object"},"RateLimitStats":{"additionalProperties":false,"description":"Rate limit statistics.","properties":{"breakdown_by_type":{"additionalProperties":{"type":"integer"},"description":"Breakdown by limit type","title":"Breakdown By Type","type":"object"},"top_limited_clients":{"description":"Top rate-limited clients","items":{"$ref":"#/components/schemas/RateLimitedClient"},"title":"Top Limited Clients","type":"array"},"total_keys":{"description":"Total rate limit keys in Redis","title":"Total Keys","type":"integer"}},"required":["total_keys","breakdown_by_type","top_limited_clients"],"title":"RateLimitStats","type":"object"},"RateLimitTestResponse":{"additionalProperties":false,"description":"Rate limit test endpoint response.","properties":{"message":{"description":"Test message","title":"Message","type":"string"},"note":{"description":"Rate limit information","title":"Note","type":"string"},"timestamp":{"description":"Request timestamp","title":"Timestamp","type":"string"}},"required":["message","timestamp","note"],"title":"RateLimitTestResponse","type":"object"},"RateLimitedClient":{"description":"Rate-limited client information.","properties":{"count":{"description":"Request count","title":"Count","type":"integer"},"endpoint":{"description":"Most rate-limited endpoint","title":"Endpoint","type":"string"},"key":{"description":"Client identifier key","title":"Key","type":"string"}},"required":["key","count","endpoint"],"title":"RateLimitedClient","type":"object"},"RatingSummary":{"additionalProperties":false,"description":"Aggregated rating info for an instructor.","properties":{"average":{"anyOf":[{"maximum":5.0,"minimum":0.0,"type":"number"},{"type":"null"}],"description":"Average rating (None if no reviews)","title":"Average"},"count":{"default":0,"description":"Number of reviews","minimum":0.0,"title":"Count","type":"integer"}},"title":"RatingSummary","type":"object"},"RatingsBatchItem":{"additionalProperties":false,"properties":{"instructor_id":{"title":"Instructor Id","type":"string"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"review_count":{"title":"Review Count","type":"integer"}},"required":["instructor_id","rating","review_count"],"title":"RatingsBatchItem","type":"object"},"RatingsBatchRequest":{"additionalProperties":false,"properties":{"instructor_ids":{"items":{"type":"string"},"minItems":1,"title":"Instructor Ids","type":"array"}},"required":["instructor_ids"],"title":"RatingsBatchRequest","type":"object"},"RatingsBatchResponse":{"additionalProperties":false,"properties":{"results":{"items":{"$ref":"#/components/schemas/RatingsBatchItem"},"title":"Results","type":"array"}},"required":["results"],"title":"RatingsBatchResponse","type":"object"},"ReactionInfo":{"description":"Reaction on a message.","properties":{"emoji":{"title":"Emoji","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","emoji"],"title":"ReactionInfo","type":"object"},"ReactionRequest":{"additionalProperties":false,"properties":{"emoji":{"title":"Emoji","type":"string"}},"required":["emoji"],"title":"ReactionRequest","type":"object"},"ReadReceiptEntry":{"description":"Read receipt entry showing who read and when.","properties":{"read_at":{"title":"Read At","type":"string"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","read_at"],"title":"ReadReceiptEntry","type":"object"},"ReadyProbeResponse":{"additionalProperties":false,"properties":{"notifications_healthy":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Health status of the notification service (real-time messaging)","title":"Notifications Healthy"},"status":{"description":"Overall readiness status","enum":["ok","db_not_ready","cache_not_ready","degraded"],"title":"Status","type":"string"}},"required":["status"],"title":"ReadyProbeResponse","type":"object"},"RecentAlertsResponse":{"additionalProperties":false,"description":"Response for recent alerts endpoint.","properties":{"alerts":{"description":"List of alert details","items":{"$ref":"#/components/schemas/AlertDetail"},"title":"Alerts","type":"array"},"hours":{"description":"Number of hours included in the query","title":"Hours","type":"integer"},"total":{"description":"Total number of alerts in the time period","title":"Total","type":"integer"}},"required":["total","hours","alerts"],"title":"RecentAlertsResponse","type":"object"},"RecentBookingsResponse":{"additionalProperties":false,"description":"Response for recent bookings endpoint.","properties":{"bookings":{"items":{"$ref":"#/components/schemas/BookingListItem"},"title":"Bookings","type":"array"},"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"count":{"title":"Count","type":"integer"},"filters_applied":{"additionalProperties":true,"title":"Filters Applied","type":"object"}},"required":["bookings","count","filters_applied","checked_at"],"title":"RecentBookingsResponse","type":"object"},"RecipientSample":{"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id"],"title":"RecipientSample","type":"object"},"RecommendedAction":{"additionalProperties":false,"properties":{"action":{"title":"Action","type":"string"},"allowed":{"title":"Allowed","type":"boolean"},"reason":{"title":"Reason","type":"string"}},"required":["action","reason","allowed"],"title":"RecommendedAction","type":"object"},"RedisActiveConnections":{"description":"Active Redis connection counts.","properties":{"local_redis":{"default":0,"title":"Local Redis","type":"integer"},"upstash":{"default":0,"title":"Upstash","type":"integer"}},"title":"RedisActiveConnections","type":"object"},"RedisCeleryQueuesResponse":{"additionalProperties":false,"description":"Response for Redis Celery queues.","properties":{"queues":{"$ref":"#/components/schemas/CeleryQueuesData"}},"required":["queues"],"title":"RedisCeleryQueuesResponse","type":"object"},"RedisClientStats":{"description":"Redis client statistics.","properties":{"blocked_clients":{"default":0,"title":"Blocked Clients","type":"integer"},"connected_clients":{"default":0,"title":"Connected Clients","type":"integer"}},"title":"RedisClientStats","type":"object"},"RedisConnectionAuditData":{"description":"Redis connection audit data.","properties":{"active_connections":{"$ref":"#/components/schemas/RedisActiveConnections"},"api_cache":{"title":"Api Cache","type":"string"},"celery_broker":{"title":"Celery Broker","type":"string"},"environment_variables":{"additionalProperties":{"type":"string"},"title":"Environment Variables","type":"object"},"migration_status":{"default":"unknown","title":"Migration Status","type":"string"},"recommendation":{"default":"","title":"Recommendation","type":"string"},"service_connections":{"additionalProperties":{"$ref":"#/components/schemas/RedisServiceConnection"},"title":"Service Connections","type":"object"},"upstash_detected":{"default":false,"title":"Upstash Detected","type":"boolean"}},"required":["api_cache","celery_broker"],"title":"RedisConnectionAuditData","type":"object"},"RedisConnectionAuditResponse":{"additionalProperties":false,"description":"Response for Redis connection audit.","properties":{"connections":{"items":{"$ref":"#/components/schemas/RedisConnectionAuditData"},"title":"Connections","type":"array"}},"required":["connections"],"title":"RedisConnectionAuditResponse","type":"object"},"RedisConnectionStats":{"description":"Redis connection statistics.","properties":{"evicted_keys":{"default":0,"title":"Evicted Keys","type":"integer"},"expired_keys":{"default":0,"title":"Expired Keys","type":"integer"},"instantaneous_ops_per_sec":{"default":0,"title":"Instantaneous Ops Per Sec","type":"integer"},"rejected_connections":{"default":0,"title":"Rejected Connections","type":"integer"},"total_commands_processed":{"default":0,"title":"Total Commands Processed","type":"integer"},"total_connections_received":{"default":0,"title":"Total Connections Received","type":"integer"}},"title":"RedisConnectionStats","type":"object"},"RedisFlushQueuesResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"},"queues_flushed":{"items":{"type":"string"},"title":"Queues Flushed","type":"array"}},"required":["message","queues_flushed"],"title":"RedisFlushQueuesResponse","type":"object"},"RedisHealthResponse":{"additionalProperties":false,"description":"Response for Redis health check endpoint.","properties":{"connected":{"description":"Whether Redis is connected","title":"Connected","type":"boolean"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if unhealthy","title":"Error"},"status":{"description":"Health status (healthy/unhealthy)","title":"Status","type":"string"}},"required":["status","connected"],"title":"RedisHealthResponse","type":"object"},"RedisMemoryInfo":{"description":"Redis memory metrics.","properties":{"maxmemory_human":{"default":"N/A","title":"Maxmemory Human","type":"string"},"mem_fragmentation_ratio":{"default":0,"title":"Mem Fragmentation Ratio","type":"number"},"used_memory_human":{"default":"N/A","title":"Used Memory Human","type":"string"},"used_memory_peak_human":{"default":"N/A","title":"Used Memory Peak Human","type":"string"},"used_memory_rss_human":{"default":"N/A","title":"Used Memory Rss Human","type":"string"}},"title":"RedisMemoryInfo","type":"object"},"RedisOperationMetrics":{"description":"Redis operation rate metrics.","properties":{"current_ops_per_sec":{"default":0,"title":"Current Ops Per Sec","type":"integer"},"estimated_daily_ops":{"default":0,"title":"Estimated Daily Ops","type":"integer"},"estimated_monthly_ops":{"default":0,"title":"Estimated Monthly Ops","type":"integer"}},"title":"RedisOperationMetrics","type":"object"},"RedisServerInfo":{"description":"Redis server information.","properties":{"redis_version":{"default":"unknown","title":"Redis Version","type":"string"},"uptime_in_days":{"default":0,"title":"Uptime In Days","type":"integer"}},"title":"RedisServerInfo","type":"object"},"RedisServiceConnection":{"description":"Redis connection info for a service.","properties":{"host":{"title":"Host","type":"string"},"type":{"title":"Type","type":"string"},"url":{"title":"Url","type":"string"}},"required":["url","host","type"],"title":"RedisServiceConnection","type":"object"},"RedisStatsData":{"description":"Complete Redis statistics data.","properties":{"celery":{"additionalProperties":{"type":"integer"},"title":"Celery","type":"object"},"clients":{"$ref":"#/components/schemas/RedisClientStats"},"memory":{"$ref":"#/components/schemas/RedisMemoryInfo"},"operations":{"$ref":"#/components/schemas/RedisOperationMetrics"},"server":{"$ref":"#/components/schemas/RedisServerInfo"},"stats":{"$ref":"#/components/schemas/RedisConnectionStats"},"status":{"default":"unknown","title":"Status","type":"string"}},"title":"RedisStatsData","type":"object"},"RedisStatsResponse":{"additionalProperties":false,"description":"Response for Redis statistics.","properties":{"stats":{"$ref":"#/components/schemas/RedisStatsData"}},"required":["stats"],"title":"RedisStatsResponse","type":"object"},"RedisTestResponse":{"additionalProperties":false,"description":"Response for Redis test endpoint.","properties":{"connected_clients":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"description":"Number of connected clients","title":"Connected Clients"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if failed","title":"Error"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Status message","title":"Message"},"ping":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Ping result","title":"Ping"},"redis_version":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"unknown","description":"Redis server version","title":"Redis Version"},"status":{"description":"Connection status","title":"Status","type":"string"},"uptime_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":0,"description":"Redis uptime in seconds","title":"Uptime Seconds"}},"required":["status"],"title":"RedisTestResponse","type":"object"},"ReferralClaimRequest":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"}},"required":["code"],"title":"ReferralClaimRequest","type":"object"},"ReferralClaimResponse":{"additionalProperties":false,"properties":{"attributed":{"title":"Attributed","type":"boolean"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"required":["attributed"],"title":"ReferralClaimResponse","type":"object"},"ReferralErrorResponse":{"additionalProperties":false,"properties":{"reason":{"title":"Reason","type":"string"}},"required":["reason"],"title":"ReferralErrorResponse","type":"object"},"ReferralLedgerResponse":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"},"expiry_notice_days":{"items":{"type":"integer"},"title":"Expiry Notice Days","type":"array"},"pending":{"items":{"$ref":"#/components/schemas/RewardOut"},"title":"Pending","type":"array"},"redeemed":{"items":{"$ref":"#/components/schemas/RewardOut"},"title":"Redeemed","type":"array"},"share_url":{"title":"Share Url","type":"string"},"unlocked":{"items":{"$ref":"#/components/schemas/RewardOut"},"title":"Unlocked","type":"array"}},"required":["code","share_url","pending","unlocked","redeemed","expiry_notice_days"],"title":"ReferralLedgerResponse","type":"object"},"ReferralResolveResponse":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"},"ok":{"title":"Ok","type":"boolean"},"redirect":{"title":"Redirect","type":"string"}},"required":["ok","code","redirect"],"title":"ReferralResolveResponse","type":"object"},"ReferralSendError":{"description":"Details for a failed referral send attempt.","properties":{"email":{"format":"email","title":"Email","type":"string"},"error":{"title":"Error","type":"string"}},"required":["email","error"],"title":"ReferralSendError","type":"object"},"ReferralSendRequest":{"additionalProperties":false,"description":"Request payload for sending referral invites.","properties":{"emails":{"description":"List of recipient email addresses","items":{"format":"email","type":"string"},"title":"Emails","type":"array"},"from_name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Display name of the inviter (falls back to a generic label if omitted)","title":"From Name"},"referral_link":{"description":"Referral link to include in the invite","format":"uri","minLength":1,"title":"Referral Link","type":"string"}},"required":["emails","referral_link"],"title":"ReferralSendRequest","type":"object"},"ReferralSendResponse":{"additionalProperties":false,"properties":{"errors":{"description":"List of errors for individual recipients","items":{"$ref":"#/components/schemas/ReferralSendError"},"title":"Errors","type":"array"},"failed":{"description":"Number of emails that failed to send","title":"Failed","type":"integer"},"sent":{"description":"Number of emails successfully sent","title":"Sent","type":"integer"},"status":{"description":"Operation status ('ok' if the operation ran)","title":"Status","type":"string"}},"required":["status","sent","failed"],"title":"ReferralSendResponse","type":"object"},"ReferralStatsResponse":{"description":"Stats for instructor's referral activity.","properties":{"completed_payouts":{"title":"Completed Payouts","type":"integer"},"current_bonus_cents":{"title":"Current Bonus Cents","type":"integer"},"founding_spots_remaining":{"title":"Founding Spots Remaining","type":"integer"},"is_founding_phase":{"title":"Is Founding Phase","type":"boolean"},"pending_payouts":{"title":"Pending Payouts","type":"integer"},"referral_code":{"title":"Referral Code","type":"string"},"referral_link":{"title":"Referral Link","type":"string"},"total_earned_cents":{"title":"Total Earned Cents","type":"integer"},"total_referred":{"title":"Total Referred","type":"integer"}},"required":["referral_code","referral_link","total_referred","pending_payouts","completed_payouts","total_earned_cents","is_founding_phase","founding_spots_remaining","current_bonus_cents"],"title":"ReferralStatsResponse","type":"object"},"ReferredInstructorInfo":{"description":"Info about an instructor this user referred.","properties":{"first_lesson_completed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"First Lesson Completed At"},"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"is_live":{"title":"Is Live","type":"boolean"},"last_initial":{"title":"Last Initial","type":"string"},"payout_amount_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Payout Amount Cents"},"payout_status":{"title":"Payout Status","type":"string"},"referred_at":{"format":"date-time","title":"Referred At","type":"string"},"went_live_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Went Live At"}},"required":["id","first_name","last_initial","referred_at","is_live","payout_status"],"title":"ReferredInstructorInfo","type":"object"},"ReferredInstructorsResponse":{"description":"List of instructors referred by current user.","properties":{"instructors":{"items":{"$ref":"#/components/schemas/ReferredInstructorInfo"},"title":"Instructors","type":"array"},"total_count":{"title":"Total Count","type":"integer"}},"required":["instructors","total_count"],"title":"ReferredInstructorsResponse","type":"object"},"RefundAmount":{"properties":{"type":{"$ref":"#/components/schemas/RefundAmountType"},"value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Value"}},"required":["type"],"title":"RefundAmount","type":"object"},"RefundAmountType":{"enum":["full","partial"],"title":"RefundAmountType","type":"string"},"RefundExecuteMeta":{"properties":{"booking_id":{"title":"Booking Id","type":"string"},"executed_at":{"format":"date-time","title":"Executed At","type":"string"},"idempotency_key":{"title":"Idempotency Key","type":"string"}},"required":["executed_at","booking_id","idempotency_key"],"title":"RefundExecuteMeta","type":"object"},"RefundExecuteRequest":{"properties":{"confirm_token":{"title":"Confirm Token","type":"string"},"idempotency_key":{"title":"Idempotency Key","type":"string"}},"required":["confirm_token","idempotency_key"],"title":"RefundExecuteRequest","type":"object"},"RefundExecuteResponse":{"properties":{"audit_id":{"title":"Audit Id","type":"string"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"meta":{"$ref":"#/components/schemas/RefundExecuteMeta"},"refund":{"anyOf":[{"$ref":"#/components/schemas/RefundResult"},{"type":"null"}]},"result":{"title":"Result","type":"string"},"updated_booking":{"anyOf":[{"$ref":"#/components/schemas/UpdatedBooking"},{"type":"null"}]},"updated_payment":{"anyOf":[{"$ref":"#/components/schemas/UpdatedPayment"},{"type":"null"}]}},"required":["meta","result","audit_id"],"title":"RefundExecuteResponse","type":"object"},"RefundImpact":{"properties":{"instructor_payout_delta":{"title":"Instructor Payout Delta","type":"number"},"original_payment":{"$ref":"#/components/schemas/OriginalPayment"},"platform_fee_refunded":{"title":"Platform Fee Refunded","type":"number"},"refund_method":{"title":"Refund Method","type":"string"},"student_card_refund":{"title":"Student Card Refund","type":"number"},"student_credit_issued":{"title":"Student Credit Issued","type":"number"}},"required":["refund_method","student_card_refund","student_credit_issued","instructor_payout_delta","platform_fee_refunded","original_payment"],"title":"RefundImpact","type":"object"},"RefundMeta":{"properties":{"booking_id":{"title":"Booking Id","type":"string"},"generated_at":{"format":"date-time","title":"Generated At","type":"string"},"reason_code":{"title":"Reason Code","type":"string"}},"required":["generated_at","booking_id","reason_code"],"title":"RefundMeta","type":"object"},"RefundPreviewRequest":{"properties":{"amount":{"$ref":"#/components/schemas/RefundAmount"},"booking_id":{"title":"Booking Id","type":"string"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"},"reason_code":{"$ref":"#/components/schemas/RefundReasonCode"}},"required":["booking_id","reason_code","amount"],"title":"RefundPreviewRequest","type":"object"},"RefundPreviewResponse":{"properties":{"confirm_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Confirm Token"},"eligible":{"title":"Eligible","type":"boolean"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key"},"impact":{"$ref":"#/components/schemas/RefundImpact"},"ineligible_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ineligible Reason"},"meta":{"$ref":"#/components/schemas/RefundMeta"},"policy_basis":{"title":"Policy Basis","type":"string"},"token_expires_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Token Expires At"},"warnings":{"default":[],"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["meta","eligible","policy_basis","impact"],"title":"RefundPreviewResponse","type":"object"},"RefundReasonCode":{"enum":["CANCEL_POLICY","GOODWILL","DUPLICATE","DISPUTE_PREVENTION","INSTRUCTOR_NO_SHOW","SERVICE_ISSUE"],"title":"RefundReasonCode","type":"string"},"RefundResult":{"properties":{"amount":{"title":"Amount","type":"number"},"method":{"title":"Method","type":"string"},"status":{"title":"Status","type":"string"},"stripe_refund_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stripe Refund Id"}},"required":["status","amount","method","stripe_refund_id"],"title":"RefundResult","type":"object"},"RegisterResponse":{"additionalProperties":false,"description":"Generic registration response that prevents email enumeration.","properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"RegisterResponse","type":"object"},"RenderedContent":{"properties":{"body":{"title":"Body","type":"string"},"html_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Html Body"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"text_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text Body"},"title":{"title":"Title","type":"string"}},"required":["title","body"],"title":"RenderedContent","type":"object"},"RequestMetrics":{"description":"Request processing metrics.","properties":{"active_count":{"description":"Currently active requests","title":"Active Count","type":"integer"},"average_response_time_ms":{"description":"Average response time in milliseconds","title":"Average Response Time Ms","type":"number"},"total_count":{"description":"Total requests processed","title":"Total Count","type":"integer"}},"required":["active_count","total_count","average_response_time_ms"],"title":"RequestMetrics","type":"object"},"RescheduledFromInfo":{"description":"Minimal info about the original booking used for annotation.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"id":{"title":"Id","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["id","booking_date","start_time"],"title":"RescheduledFromInfo","type":"object"},"ResultDistribution":{"additionalProperties":false,"description":"Search result distribution.","properties":{"1_5_results":{"description":"Searches with 1-5 results","title":"1 5 Results","type":"integer"},"6_10_results":{"description":"Searches with 6-10 results","title":"6 10 Results","type":"integer"},"over_10_results":{"description":"Searches with over 10 results","title":"Over 10 Results","type":"integer"},"zero_results":{"description":"Searches with zero results","title":"Zero Results","type":"integer"}},"required":["zero_results","1_5_results","6_10_results","over_10_results"],"title":"ResultDistribution","type":"object"},"RetentionPolicyResponse":{"additionalProperties":false,"properties":{"message":{"description":"Human-readable message","title":"Message","type":"string"},"stats":{"$ref":"#/components/schemas/RetentionStats","description":"Statistics of retention policy application"},"status":{"description":"Status of the retention policy application","title":"Status","type":"string"}},"required":["status","message","stats"],"title":"RetentionPolicyResponse","type":"object"},"RetentionStats":{"description":"Statistics from applying retention policies.","properties":{"old_bookings_anonymized":{"default":0,"description":"Number of old bookings anonymized","title":"Old Bookings Anonymized","type":"integer"},"search_events_deleted":{"default":0,"description":"Number of search events deleted","title":"Search Events Deleted","type":"integer"}},"title":"RetentionStats","type":"object"},"RetryPaymentResponse":{"additionalProperties":false,"description":"Response for retrying payment authorization.","properties":{"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"failure_count":{"title":"Failure Count","type":"integer"},"payment_status":{"title":"Payment Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","payment_status","failure_count"],"title":"RetryPaymentResponse","type":"object"},"RevenueBreakdownBy":{"enum":["day","week","category"],"title":"RevenueBreakdownBy","type":"string"},"RevenueComparison":{"properties":{"gmv":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv","type":"string"},"gmv_delta":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv Delta","type":"string"},"gmv_delta_pct":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv Delta Pct","type":"string"},"period":{"title":"Period","type":"string"},"revenue_delta":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Revenue Delta","type":"string"},"revenue_delta_pct":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Revenue Delta Pct","type":"string"}},"required":["period","gmv","gmv_delta","gmv_delta_pct","revenue_delta","revenue_delta_pct"],"title":"RevenueComparison","type":"object"},"RevenueComparisonMode":{"enum":["previous_period","same_period_last_month","same_period_last_year"],"title":"RevenueComparisonMode","type":"string"},"RevenueDashboard":{"properties":{"average_booking_value":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Average Booking Value","type":"string"},"breakdown":{"anyOf":[{"items":{"$ref":"#/components/schemas/RevenuePeriodBreakdown"},"type":"array"},{"type":"null"}],"title":"Breakdown"},"cancelled_bookings":{"title":"Cancelled Bookings","type":"integer"},"comparison":{"anyOf":[{"$ref":"#/components/schemas/RevenueComparison"},{"type":"null"}]},"completed_bookings":{"title":"Completed Bookings","type":"integer"},"completion_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Completion Rate","type":"string"},"gmv":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv","type":"string"},"health":{"$ref":"#/components/schemas/RevenueHealth"},"instructor_payouts":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Instructor Payouts","type":"string"},"net_revenue":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Net Revenue","type":"string"},"period":{"title":"Period","type":"string"},"period_end":{"format":"date-time","title":"Period End","type":"string"},"period_start":{"format":"date-time","title":"Period Start","type":"string"},"platform_revenue":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Platform Revenue","type":"string"},"take_rate":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Take Rate","type":"string"},"total_bookings":{"title":"Total Bookings","type":"integer"}},"required":["period","period_start","period_end","gmv","platform_revenue","instructor_payouts","net_revenue","take_rate","total_bookings","completed_bookings","cancelled_bookings","completion_rate","average_booking_value","health"],"title":"RevenueDashboard","type":"object"},"RevenueHealth":{"properties":{"alerts":{"items":{"type":"string"},"title":"Alerts","type":"array"},"status":{"title":"Status","type":"string"}},"required":["status"],"title":"RevenueHealth","type":"object"},"RevenuePeriod":{"enum":["today","yesterday","last_7_days","last_30_days","this_month","last_month","this_quarter"],"title":"RevenuePeriod","type":"string"},"RevenuePeriodBreakdown":{"properties":{"bookings":{"title":"Bookings","type":"integer"},"gmv":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gmv","type":"string"},"period_label":{"title":"Period Label","type":"string"},"revenue":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Revenue","type":"string"}},"required":["period_label","gmv","revenue","bookings"],"title":"RevenuePeriodBreakdown","type":"object"},"ReviewItem":{"additionalProperties":false,"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"rating":{"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Text"},"reviewer_display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Display Name"}},"required":["id","rating","review_text","created_at","instructor_service_id"],"title":"ReviewItem","type":"object"},"ReviewListPageResponse":{"additionalProperties":false,"properties":{"has_next":{"title":"Has Next","type":"boolean"},"has_prev":{"title":"Has Prev","type":"boolean"},"page":{"title":"Page","type":"integer"},"per_page":{"title":"Per Page","type":"integer"},"reviews":{"items":{"$ref":"#/components/schemas/ReviewItem"},"title":"Reviews","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["reviews","total","page","per_page","has_next","has_prev"],"title":"ReviewListPageResponse","type":"object"},"ReviewResponseModel":{"additionalProperties":false,"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"response_text":{"title":"Response Text","type":"string"},"review_id":{"title":"Review Id","type":"string"}},"required":["id","review_id","instructor_id","response_text","created_at"],"title":"ReviewResponseModel","type":"object"},"ReviewSubmitRequest":{"additionalProperties":false,"properties":{"booking_id":{"title":"Booking Id","type":"string"},"rating":{"maximum":5.0,"minimum":1.0,"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Review Text"},"tip_amount_cents":{"anyOf":[{"exclusiveMinimum":0.0,"type":"integer"},{"type":"null"}],"title":"Tip Amount Cents"}},"required":["booking_id","rating"],"title":"ReviewSubmitRequest","type":"object"},"ReviewSubmitResponse":{"additionalProperties":false,"properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"},"instructor_service_id":{"title":"Instructor Service Id","type":"string"},"rating":{"title":"Rating","type":"integer"},"review_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Text"},"reviewer_display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Display Name"},"tip_client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tip Client Secret"},"tip_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tip Status"}},"required":["id","rating","review_text","created_at","instructor_service_id"],"title":"ReviewSubmitResponse","type":"object"},"RewardOut":{"description":"Serialized reward payload.","properties":{"amount_cents":{"title":"Amount Cents","type":"integer"},"created_at":{"format":"date-time","title":"Created At","type":"string"},"expire_ts":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Expire Ts"},"id":{"title":"Id","type":"string"},"side":{"$ref":"#/components/schemas/RewardSide"},"status":{"$ref":"#/components/schemas/RewardStatus"},"unlock_ts":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Unlock Ts"}},"required":["id","side","status","amount_cents","created_at"],"title":"RewardOut","type":"object"},"RewardSide":{"description":"Which party receives the reward.","enum":["student","instructor"],"title":"RewardSide","type":"string"},"RewardStatus":{"description":"Lifecycle of a reward.","enum":["pending","unlocked","redeemed","void"],"title":"RewardStatus","type":"string"},"SavePaymentMethodRequest":{"additionalProperties":false,"description":"Request to save a payment method for a user.","properties":{"payment_method_id":{"description":"Stripe payment method ID","title":"Payment Method Id","type":"string"},"set_as_default":{"default":false,"description":"Whether to set as default payment method","title":"Set As Default","type":"boolean"}},"required":["payment_method_id"],"title":"SavePaymentMethodRequest","type":"object"},"ScheduleItem":{"additionalProperties":false,"description":"Individual schedule item for availability creation.","properties":{"date":{"description":"ISO date string (YYYY-MM-DD)","title":"Date","type":"string"},"end_time":{"description":"End time (HH:MM or HH:MM:SS)","title":"End Time","type":"string"},"start_time":{"description":"Start time (HH:MM or HH:MM:SS)","title":"Start Time","type":"string"}},"required":["date","start_time","end_time"],"title":"ScheduleItem","type":"object"},"SearchAnalyticsSummaryResponse":{"additionalProperties":false,"description":"Comprehensive search analytics summary.","properties":{"conversions":{"$ref":"#/components/schemas/ConversionMetrics","description":"Conversion metrics"},"date_range":{"$ref":"#/components/schemas/DateRange","description":"Date range for analytics"},"performance":{"$ref":"#/components/schemas/PerformanceMetrics","description":"Search performance metrics"},"search_types":{"additionalProperties":{"$ref":"#/components/schemas/SearchTypeMetrics"},"description":"Breakdown by search type","title":"Search Types","type":"object"},"totals":{"$ref":"#/components/schemas/SearchTotals","description":"Search totals and metrics"},"users":{"$ref":"#/components/schemas/UserBreakdown","description":"User breakdown by type"}},"required":["date_range","totals","users","search_types","conversions","performance"],"title":"SearchAnalyticsSummaryResponse","type":"object"},"SearchClickRequest":{"additionalProperties":false,"description":"Request payload for logging a search click.","properties":{"action":{"default":"view","description":"Action type: view, book, message, favorite","enum":["view","book","message","favorite"],"title":"Action","type":"string"},"instructor_id":{"description":"Instructor user ID that was clicked","title":"Instructor Id","type":"string"},"position":{"description":"Position in search results (1-indexed)","minimum":1.0,"title":"Position","type":"integer"},"search_query_id":{"description":"Search query ID from NL search","title":"Search Query Id","type":"string"},"service_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Service ID that was clicked (instructor_service_id)","title":"Service Id"}},"required":["search_query_id","instructor_id","position"],"title":"SearchClickRequest","type":"object"},"SearchClickResponse":{"additionalProperties":false,"description":"Response for logging a search click.","properties":{"click_id":{"description":"ID of the logged click","title":"Click Id","type":"string"}},"required":["click_id"],"title":"SearchClickResponse","type":"object"},"SearchConfigResetResponse":{"additionalProperties":false,"description":"Response after resetting configuration.","properties":{"config":{"$ref":"#/components/schemas/SearchConfigResponse","description":"Current config after reset"},"status":{"description":"Reset status","title":"Status","type":"string"}},"required":["status","config"],"title":"SearchConfigResetResponse","type":"object"},"SearchConfigResponse":{"additionalProperties":false,"description":"Current search configuration.","properties":{"available_embedding_models":{"description":"Available embedding models","items":{"$ref":"#/components/schemas/ModelOption"},"title":"Available Embedding Models","type":"array"},"available_parsing_models":{"description":"Available parsing models","items":{"$ref":"#/components/schemas/ModelOption"},"title":"Available Parsing Models","type":"array"},"embedding_model":{"description":"Current embedding model","title":"Embedding Model","type":"string"},"embedding_timeout_ms":{"description":"Embedding timeout in ms","maximum":10000.0,"minimum":500.0,"title":"Embedding Timeout Ms","type":"integer"},"parsing_model":{"description":"Current parsing model","title":"Parsing Model","type":"string"},"parsing_timeout_ms":{"description":"Parsing timeout in ms","maximum":10000.0,"minimum":500.0,"title":"Parsing Timeout Ms","type":"integer"}},"required":["parsing_model","parsing_timeout_ms","embedding_model","embedding_timeout_ms","available_parsing_models","available_embedding_models"],"title":"SearchConfigResponse","type":"object"},"SearchConfigUpdate":{"additionalProperties":false,"description":"Request to update search configuration.","properties":{"embedding_model":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"New embedding model","title":"Embedding Model"},"embedding_timeout_ms":{"anyOf":[{"maximum":10000.0,"minimum":500.0,"type":"integer"},{"type":"null"}],"description":"New embedding timeout in ms","title":"Embedding Timeout Ms"},"parsing_model":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"New parsing model","title":"Parsing Model"},"parsing_timeout_ms":{"anyOf":[{"maximum":10000.0,"minimum":500.0,"type":"integer"},{"type":"null"}],"description":"New parsing timeout in ms","title":"Parsing Timeout Ms"}},"title":"SearchConfigUpdate","type":"object"},"SearchContext":{"additionalProperties":false,"description":"Context about where the search originated.","properties":{"page_origin":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Page Origin"},"referrer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referrer"},"session_search_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Session Search Count"},"viewport_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Viewport Height"},"viewport_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Viewport Width"}},"title":"SearchContext","type":"object"},"SearchDiagnostics":{"additionalProperties":false,"description":"Full diagnostics for admin tooling.","properties":{"after_availability_filter":{"description":"Candidates after availability filter","minimum":0.0,"title":"After Availability Filter","type":"integer"},"after_location_filter":{"description":"Candidates after location filter","minimum":0.0,"title":"After Location Filter","type":"integer"},"after_price_filter":{"description":"Candidates after price filter","minimum":0.0,"title":"After Price Filter","type":"integer"},"after_text_search":{"description":"Candidates after text search","minimum":0.0,"title":"After Text Search","type":"integer"},"after_vector_search":{"description":"Candidates after vector search","minimum":0.0,"title":"After Vector Search","type":"integer"},"budget":{"$ref":"#/components/schemas/BudgetInfo","description":"Budget tracking info"},"cache_hit":{"description":"Whether cache was hit","title":"Cache Hit","type":"boolean"},"embedding_used":{"description":"Whether query embedding was used","title":"Embedding Used","type":"boolean"},"final_results":{"description":"Final result count","minimum":0.0,"title":"Final Results","type":"integer"},"initial_candidates":{"description":"Initial candidate count","minimum":0.0,"title":"Initial Candidates","type":"integer"},"location_resolution":{"anyOf":[{"$ref":"#/components/schemas/LocationResolutionInfo"},{"type":"null"}],"description":"Location resolution details"},"parsing_mode":{"description":"Parsing mode used","title":"Parsing Mode","type":"string"},"pipeline_stages":{"description":"Pipeline stage timings","items":{"$ref":"#/components/schemas/PipelineStage"},"title":"Pipeline Stages","type":"array"},"total_latency_ms":{"description":"Total latency in ms","minimum":0.0,"title":"Total Latency Ms","type":"integer"},"vector_search_used":{"description":"Whether vector search was used","title":"Vector Search Used","type":"boolean"}},"required":["total_latency_ms","budget","initial_candidates","after_text_search","after_vector_search","after_location_filter","after_price_filter","after_availability_filter","final_results","cache_hit","parsing_mode","embedding_used","vector_search_used"],"title":"SearchDiagnostics","type":"object"},"SearchEffectiveness":{"additionalProperties":false,"description":"Search effectiveness metrics.","properties":{"avg_results_per_search":{"description":"Average results per search","title":"Avg Results Per Search","type":"number"},"median_results":{"description":"Median results per search","title":"Median Results","type":"number"},"searches_with_results":{"description":"Number of searches with at least one result","title":"Searches With Results","type":"integer"},"zero_result_rate":{"description":"Percentage of searches with zero results","title":"Zero Result Rate","type":"number"}},"required":["avg_results_per_search","median_results","searches_with_results","zero_result_rate"],"title":"SearchEffectiveness","type":"object"},"SearchFiltersApplied":{"additionalProperties":false,"description":"Filters applied to instructor search.","properties":{"age_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Age Group"},"max_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Price"},"min_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Price"},"search":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"},"service_area_boroughs":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Service Area Boroughs"},"service_catalog_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Catalog Id"}},"title":"SearchFiltersApplied","type":"object"},"SearchHealthCache":{"additionalProperties":false,"description":"Cache health status.","properties":{"available":{"description":"Whether cache is available","title":"Available","type":"boolean"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Error message if unavailable","title":"Error"},"response_cache_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Current cache version","title":"Response Cache Version"},"ttls":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"description":"Cache TTL settings","title":"Ttls"}},"required":["available"],"title":"SearchHealthCache","type":"object"},"SearchHealthComponents":{"additionalProperties":false,"description":"Health status of search components.","properties":{"cache":{"$ref":"#/components/schemas/SearchHealthCache","description":"Cache health status"},"embedding_circuit":{"description":"Embedding circuit breaker state","title":"Embedding Circuit","type":"string"},"parsing_circuit":{"description":"Parsing circuit breaker state","title":"Parsing Circuit","type":"string"}},"required":["cache","parsing_circuit","embedding_circuit"],"title":"SearchHealthComponents","type":"object"},"SearchHealthResponse":{"additionalProperties":false,"description":"Health check response for search service.","properties":{"components":{"$ref":"#/components/schemas/SearchHealthComponents","description":"Component health details"},"status":{"description":"Overall health status","title":"Status","type":"string"}},"required":["status","components"],"title":"SearchHealthResponse","type":"object"},"SearchHistoryCreate":{"additionalProperties":false,"description":"Schema for creating search history.","properties":{"device_context":{"anyOf":[{"$ref":"#/components/schemas/DeviceContext"},{"type":"null"}],"description":"Device context from frontend including screen size, connection type, etc."},"guest_session_id":{"anyOf":[{"maxLength":36,"type":"string"},{"type":"null"}],"description":"UUID for guest session tracking","title":"Guest Session Id"},"observability_candidates":{"anyOf":[{"items":{"$ref":"#/components/schemas/ObservabilityCandidate"},"type":"array"},{"type":"null"}],"description":"Optional top-N candidate objects for observability. Each item may include: position, service_catalog_id (or id), score, vector_score, lexical_score, source.","title":"Observability Candidates"},"results_count":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Number of results returned","title":"Results Count"},"search_context":{"anyOf":[{"$ref":"#/components/schemas/SearchContext"},{"type":"null"}],"description":"Additional context like page origin, viewport size, etc."},"search_query":{"description":"The search query string","minLength":1,"title":"Search Query","type":"string"},"search_type":{"default":"natural_language","description":"Type of search: natural_language, category, service_pill, filter, or search_history","title":"Search Type","type":"string"}},"required":["search_query"],"title":"SearchHistoryCreate","type":"object"},"SearchHistoryResponse":{"additionalProperties":false,"description":"Schema for search history responses.","properties":{"first_searched_at":{"description":"When the search was first performed","title":"First Searched At","type":"string"},"guest_session_id":{"anyOf":[{"maxLength":36,"type":"string"},{"type":"null"}],"description":"UUID for guest session tracking","title":"Guest Session Id"},"id":{"description":"Unique identifier for the search history entry","title":"Id","type":"string"},"last_searched_at":{"description":"When the search was last performed","title":"Last Searched At","type":"string"},"results_count":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Number of results returned","title":"Results Count"},"search_count":{"description":"Number of times this search was performed","title":"Search Count","type":"integer"},"search_event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID of the associated search event for tracking interactions","title":"Search Event Id"},"search_query":{"description":"The search query string","minLength":1,"title":"Search Query","type":"string"},"search_type":{"default":"natural_language","description":"Type of search: natural_language, category, service_pill, filter, or search_history","title":"Search Type","type":"string"}},"required":["search_query","id","first_searched_at","last_searched_at","search_count"],"title":"SearchHistoryResponse","type":"object"},"SearchInteractionResponse":{"additionalProperties":false,"description":"Response for recording search interaction.","properties":{"interaction_id":{"title":"Interaction Id","type":"string"},"message":{"default":"Interaction recorded successfully","title":"Message","type":"string"},"status":{"default":"tracked","title":"Status","type":"string"},"success":{"title":"Success","type":"boolean"}},"required":["success","interaction_id"],"title":"SearchInteractionResponse","type":"object"},"SearchMetricsResponse":{"additionalProperties":false,"description":"Aggregate search metrics response.","properties":{"avg_latency_ms":{"description":"Average latency in ms","minimum":0.0,"title":"Avg Latency Ms","type":"number"},"avg_results":{"description":"Average results per search","minimum":0.0,"title":"Avg Results","type":"number"},"cache_hit_rate":{"description":"Cache hit rate","maximum":1.0,"minimum":0.0,"title":"Cache Hit Rate","type":"number"},"degradation_rate":{"description":"Search degradation rate","maximum":1.0,"minimum":0.0,"title":"Degradation Rate","type":"number"},"p50_latency_ms":{"description":"50th percentile latency","minimum":0.0,"title":"P50 Latency Ms","type":"number"},"p95_latency_ms":{"description":"95th percentile latency","minimum":0.0,"title":"P95 Latency Ms","type":"number"},"total_searches":{"description":"Total number of searches","minimum":0.0,"title":"Total Searches","type":"integer"},"zero_result_rate":{"description":"Rate of zero-result searches","maximum":1.0,"minimum":0.0,"title":"Zero Result Rate","type":"number"}},"required":["total_searches","avg_latency_ms","p50_latency_ms","p95_latency_ms","avg_results","zero_result_rate","cache_hit_rate","degradation_rate"],"title":"SearchMetricsResponse","type":"object"},"SearchPagination":{"additionalProperties":false,"description":"Pagination metadata for search results.","properties":{"count":{"default":0,"title":"Count","type":"integer"},"limit":{"default":100,"title":"Limit","type":"integer"},"skip":{"default":0,"title":"Skip","type":"integer"}},"title":"SearchPagination","type":"object"},"SearchPerformanceResponse":{"additionalProperties":false,"description":"Search performance metrics response.","properties":{"effectiveness":{"$ref":"#/components/schemas/SearchEffectiveness","description":"Search effectiveness metrics"},"problematic_queries":{"description":"Queries with poor results","items":{"$ref":"#/components/schemas/ProblematicQuery"},"title":"Problematic Queries","type":"array"},"result_distribution":{"$ref":"#/components/schemas/ResultDistribution","description":"Distribution of search results"}},"required":["result_distribution","effectiveness","problematic_queries"],"title":"SearchPerformanceResponse","type":"object"},"SearchRatingResponse":{"additionalProperties":false,"properties":{"is_service_specific":{"title":"Is Service Specific","type":"boolean"},"primary_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Primary Rating"},"review_count":{"title":"Review Count","type":"integer"}},"required":["primary_rating","review_count","is_service_specific"],"title":"SearchRatingResponse","type":"object"},"SearchReferrer":{"additionalProperties":false,"description":"Search referrer page data.","properties":{"page":{"description":"Referrer page URL or path","title":"Page","type":"string"},"search_count":{"description":"Number of searches from this page","title":"Search Count","type":"integer"},"search_types":{"description":"Types of searches from this page","items":{"type":"string"},"title":"Search Types","type":"array"},"unique_sessions":{"description":"Number of unique sessions","title":"Unique Sessions","type":"integer"}},"required":["page","search_count","unique_sessions","search_types"],"title":"SearchReferrer","type":"object"},"SearchReferrersResponse":{"description":"Search referrers response.","items":{"$ref":"#/components/schemas/SearchReferrer"},"title":"SearchReferrersResponse","type":"array"},"SearchTotals":{"additionalProperties":false,"description":"Search totals and deletion metrics.","properties":{"deleted_searches":{"description":"Number of deleted searches","title":"Deleted Searches","type":"integer"},"deletion_rate":{"description":"Percentage of searches deleted","title":"Deletion Rate","type":"number"},"total_searches":{"description":"Total number of searches","title":"Total Searches","type":"integer"},"total_users":{"description":"Total unique users (authenticated + guests)","title":"Total Users","type":"integer"},"unique_guests":{"description":"Unique guest sessions","title":"Unique Guests","type":"integer"},"unique_users":{"description":"Unique authenticated users","title":"Unique Users","type":"integer"}},"required":["total_searches","unique_users","unique_guests","total_users","deleted_searches","deletion_rate"],"title":"SearchTotals","type":"object"},"SearchTrendsResponse":{"description":"Search trends over time response.","items":{"$ref":"#/components/schemas/DailySearchTrend"},"title":"SearchTrendsResponse","type":"array"},"SearchTypeMetrics":{"additionalProperties":false,"description":"Metrics for a search type.","properties":{"count":{"description":"Number of searches of this type","title":"Count","type":"integer"},"percentage":{"description":"Percentage of total searches","title":"Percentage","type":"number"}},"required":["count","percentage"],"title":"SearchTypeMetrics","type":"object"},"SendMessageRequest":{"description":"Request to send a message.","properties":{"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Id"},"content":{"maxLength":1000,"minLength":1,"title":"Content","type":"string"}},"required":["content"],"title":"SendMessageRequest","type":"object"},"SendMessageResponse":{"description":"Response for POST /conversations/{id}/messages.","properties":{"created_at":{"format":"date-time","title":"Created At","type":"string"},"id":{"title":"Id","type":"string"}},"required":["id","created_at"],"title":"SendMessageResponse","type":"object"},"SendRemindersResponse":{"additionalProperties":false,"description":"Response for sending booking reminders.","properties":{"failed_reminders":{"title":"Failed Reminders","type":"integer"},"message":{"title":"Message","type":"string"},"reminders_sent":{"title":"Reminders Sent","type":"integer"}},"required":["message","reminders_sent","failed_reminders"],"title":"SendRemindersResponse","type":"object"},"ServiceAreaCheckCoordinates":{"additionalProperties":false,"description":"Coordinates payload for service area checks.","properties":{"lat":{"description":"Latitude","title":"Lat","type":"number"},"lng":{"description":"Longitude","title":"Lng","type":"number"}},"required":["lat","lng"],"title":"ServiceAreaCheckCoordinates","type":"object"},"ServiceAreaItem":{"properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"neighborhood_id":{"title":"Neighborhood Id","type":"string"},"ntacode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ntacode"}},"required":["neighborhood_id"],"title":"ServiceAreaItem","type":"object"},"ServiceAreaNeighborhood":{"additionalProperties":false,"description":"Normalized neighborhood metadata used in instructor service area responses.","properties":{"borough":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"neighborhood_id":{"title":"Neighborhood Id","type":"string"},"ntacode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ntacode"}},"required":["neighborhood_id"],"title":"ServiceAreaNeighborhood","type":"object"},"ServiceAreasResponse":{"additionalProperties":false,"properties":{"items":{"items":{"$ref":"#/components/schemas/ServiceAreaItem"},"title":"Items","type":"array"},"total":{"title":"Total","type":"integer"}},"required":["items","total"],"title":"ServiceAreasResponse","type":"object"},"ServiceAreasUpdateRequest":{"additionalProperties":false,"properties":{"neighborhood_ids":{"items":{"type":"string"},"title":"Neighborhood Ids","type":"array"}},"required":["neighborhood_ids"],"title":"ServiceAreasUpdateRequest","type":"object"},"ServiceCatalogDetail":{"additionalProperties":false,"description":"Full service detail for instructor onboarding or detail pages.","properties":{"default_duration_minutes":{"default":60,"title":"Default Duration Minutes","type":"integer"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"eligible_age_groups":{"items":{"enum":["toddler","kids","teens","adults"],"type":"string"},"title":"Eligible Age Groups","type":"array"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"price_floor_in_person_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Price Floor In Person Cents"},"price_floor_online_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Price Floor Online Cents"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"},"subcategory_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory Id"},"subcategory_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory Name"}},"required":["id","name"],"title":"ServiceCatalogDetail","type":"object"},"ServiceCatalogSummary":{"additionalProperties":false,"description":"Lightweight service listing within a subcategory.","properties":{"default_duration_minutes":{"default":60,"title":"Default Duration Minutes","type":"integer"},"eligible_age_groups":{"items":{"enum":["toddler","kids","teens","adults"],"type":"string"},"title":"Eligible Age Groups","type":"array"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["id","name"],"title":"ServiceCatalogSummary","type":"object"},"ServiceCreate":{"additionalProperties":false,"description":"Schema for creating a new service.","properties":{"age_groups":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Age groups this service is offered to. Allowed: 'toddler', 'kids', 'teens', 'adults'.","title":"Age Groups"},"description":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Description"},"duration_options":{"default":[60],"description":"Available duration options for this service in minutes","items":{"type":"integer"},"minItems":1,"title":"Duration Options","type":"array"},"equipment_required":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"List of equipment required (strings)","title":"Equipment Required"},"filter_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Instructor's filter choices for this service (e.g., {'grade_level': ['elementary']})","title":"Filter Selections","type":"object"},"hourly_rate":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"string"}],"description":"Hourly rate in USD","gt":0,"le":1000,"title":"Hourly Rate"},"offers_at_location":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the instructor offers lessons at their location for this service","title":"Offers At Location"},"offers_online":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the instructor offers online lessons for this service","title":"Offers Online"},"offers_travel":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the instructor travels to student locations for this service","title":"Offers Travel"},"requirements":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Requirements"},"service_catalog_id":{"description":"ID of the service from catalog","title":"Service Catalog Id","type":"string"}},"required":["service_catalog_id","hourly_rate"],"title":"ServiceCreate","type":"object"},"ServiceMatch":{"additionalProperties":false,"description":"A service that matched the search query.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Service description","title":"Description"},"name":{"description":"Service name","title":"Name","type":"string"},"offers_at_location":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Instructor teaches at their own location for this service","title":"Offers At Location"},"offers_online":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Instructor offers online lessons for this service","title":"Offers Online"},"offers_travel":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Instructor travels to student for this service","title":"Offers Travel"},"price_per_hour":{"description":"Hourly rate in dollars","minimum":0.0,"title":"Price Per Hour","type":"integer"},"relevance_score":{"description":"Semantic match score","maximum":1.0,"minimum":0.0,"title":"Relevance Score","type":"number"},"service_catalog_id":{"description":"Service catalog ID (for click tracking)","title":"Service Catalog Id","type":"string"},"service_id":{"description":"Instructor service ID (for booking)","title":"Service Id","type":"string"}},"required":["service_id","service_catalog_id","name","price_per_hour","relevance_score"],"title":"ServiceMatch","type":"object"},"ServiceMetrics":{"description":"Service-level performance metrics.","properties":{"cache_operations":{"description":"Cache operations performed","title":"Cache Operations","type":"integer"},"db_operations":{"description":"Database operations performed","title":"Db Operations","type":"integer"},"operations":{"additionalProperties":{"type":"integer"},"description":"Operation counts by type","title":"Operations","type":"object"},"total_operations":{"description":"Total operations performed","title":"Total Operations","type":"integer"}},"required":["operations","total_operations","cache_operations","db_operations"],"title":"ServiceMetrics","type":"object"},"ServiceRatingStats":{"additionalProperties":false,"description":"Per-service rating statistics.","properties":{"display_rating":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Display-formatted rating or None if below threshold","title":"Display Rating"},"instructor_service_id":{"description":"ID of the instructor's service offering","title":"Instructor Service Id","type":"string"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Computed rating or None if below min_reviews threshold","title":"Rating"},"review_count":{"description":"Number of reviews for this service","title":"Review Count","type":"integer"}},"required":["instructor_service_id","review_count"],"title":"ServiceRatingStats","type":"object"},"ServiceResponse":{"additionalProperties":false,"description":"Schema for service responses.\n\nIncludes the service ID and catalog information.","properties":{"age_groups":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Age groups this service is offered to. Allowed: 'toddler', 'kids', 'teens', 'adults'.","title":"Age Groups"},"description":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Description"},"display_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Display order hint from the catalog (nullable)","title":"Display Order"},"duration_options":{"default":[60],"description":"Available duration options for this service in minutes","items":{"type":"integer"},"minItems":1,"title":"Duration Options","type":"array"},"equipment_required":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"List of equipment required (strings)","title":"Equipment Required"},"filter_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Instructor's filter choices for this service (e.g., {'grade_level': ['elementary']})","title":"Filter Selections","type":"object"},"hourly_rate":{"description":"Hourly rate in USD","gt":0,"le":1000,"title":"Hourly Rate","type":"number"},"id":{"title":"Id","type":"string"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether this service is currently active for the instructor","title":"Is Active"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Resolved name of the service from the catalog","title":"Name"},"offers_at_location":{"default":false,"description":"Whether the instructor offers lessons at their location for this service","title":"Offers At Location","type":"boolean"},"offers_online":{"default":true,"description":"Whether the instructor offers online lessons for this service","title":"Offers Online","type":"boolean"},"offers_travel":{"default":false,"description":"Whether the instructor travels to student locations for this service","title":"Offers Travel","type":"boolean"},"online_capable":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the catalog service supports online delivery","title":"Online Capable"},"requirements":{"anyOf":[{"maxLength":500,"type":"string"},{"type":"null"}],"title":"Requirements"},"requires_certification":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Whether the catalog service requires certification","title":"Requires Certification"},"service_catalog_id":{"description":"ID of the service from catalog","title":"Service Catalog Id","type":"string"},"service_catalog_name":{"description":"Human-readable name of the catalog service","maxLength":255,"title":"Service Catalog Name","type":"string"}},"required":["service_catalog_id","hourly_rate","id","service_catalog_name"],"title":"ServiceResponse","type":"object"},"ServiceSearchMetadata":{"additionalProperties":false,"description":"Metadata describing instructor search results.","properties":{"active_instructors":{"default":0,"title":"Active Instructors","type":"integer"},"filters_applied":{"$ref":"#/components/schemas/SearchFiltersApplied"},"pagination":{"$ref":"#/components/schemas/SearchPagination"},"total_matches":{"default":0,"title":"Total Matches","type":"integer"}},"title":"ServiceSearchMetadata","type":"object"},"ServiceSearchResponse":{"additionalProperties":false,"description":"Envelope for service-focused instructor search results.","properties":{"instructors":{"items":{"$ref":"#/components/schemas/InstructorSearchResult"},"title":"Instructors","type":"array"},"metadata":{"$ref":"#/components/schemas/ServiceSearchMetadata"},"query":{"title":"Query","type":"string"},"search_type":{"const":"service","default":"service","title":"Search Type","type":"string"}},"required":["metadata","query"],"title":"ServiceSearchResponse","type":"object"},"SessionInvalidationResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"SessionInvalidationResponse","type":"object"},"SessionRefreshResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"SessionRefreshResponse","type":"object"},"SignedUploadResponse":{"additionalProperties":false,"description":"Response payload for signed upload requests.","properties":{"expires_at":{"title":"Expires At","type":"string"},"headers":{"additionalProperties":{"type":"string"},"title":"Headers","type":"object"},"object_key":{"title":"Object Key","type":"string"},"public_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Public Url"},"upload_url":{"title":"Upload Url","type":"string"}},"required":["upload_url","object_key","expires_at"],"title":"SignedUploadResponse","type":"object"},"SkippedStageDetails":{"additionalProperties":false,"description":"Details for skipped pipeline stages.","properties":{"reason":{"description":"Reason the stage was skipped","title":"Reason","type":"string"}},"required":["reason"],"title":"SkippedStageDetails","type":"object"},"SlotOperation":{"additionalProperties":false,"description":"Schema for a single slot operation in bulk update.","properties":{"action":{"enum":["add","remove","update"],"title":"Action","type":"string"},"date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"required":["action"],"title":"SlotOperation","type":"object"},"SlowQueriesResponse":{"additionalProperties":false,"description":"Slow queries response.","properties":{"slow_queries":{"description":"List of slow queries","items":{"$ref":"#/components/schemas/SlowQueryInfo"},"title":"Slow Queries","type":"array"},"total_count":{"description":"Total number of slow queries tracked","title":"Total Count","type":"integer"}},"required":["slow_queries","total_count"],"title":"SlowQueriesResponse","type":"object"},"SlowQueryInfo":{"description":"Slow query information.","properties":{"duration_ms":{"description":"Query duration in milliseconds","title":"Duration Ms","type":"number"},"endpoint":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"API endpoint that triggered the query","title":"Endpoint"},"query":{"description":"SQL query (truncated)","title":"Query","type":"string"},"timestamp":{"description":"Query execution timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["query","duration_ms","timestamp"],"title":"SlowQueryInfo","type":"object"},"SlowRequestInfo":{"description":"Slow request information.","properties":{"duration_ms":{"description":"Request duration in milliseconds","title":"Duration Ms","type":"number"},"method":{"description":"HTTP method","title":"Method","type":"string"},"path":{"description":"Request path","title":"Path","type":"string"},"status_code":{"description":"Response status code","title":"Status Code","type":"integer"},"timestamp":{"description":"Request timestamp","format":"date-time","title":"Timestamp","type":"string"}},"required":["path","method","duration_ms","timestamp","status_code"],"title":"SlowRequestInfo","type":"object"},"SlowRequestsResponse":{"additionalProperties":false,"description":"Slow requests response.","properties":{"slow_requests":{"description":"List of slow requests","items":{"$ref":"#/components/schemas/SlowRequestInfo"},"title":"Slow Requests","type":"array"},"total_count":{"description":"Total number of slow requests tracked","title":"Total Count","type":"integer"}},"required":["slow_requests","total_count"],"title":"SlowRequestsResponse","type":"object"},"SpecificDateAvailabilityCreate":{"additionalProperties":false,"description":"Schema for creating availability on a specific date.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"specific_date":{"format":"date","title":"Specific Date","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time","specific_date"],"title":"SpecificDateAvailabilityCreate","type":"object"},"SseTokenResponse":{"additionalProperties":false,"properties":{"expires_in_s":{"title":"Expires In S","type":"integer"},"token":{"title":"Token","type":"string"}},"required":["token","expires_in_s"],"title":"SseTokenResponse","type":"object"},"StageStatus":{"description":"Status for pipeline stages and location tiers.","enum":["success","skipped","timeout","error","cache_hit","miss","cancelled"],"title":"StageStatus","type":"string"},"StudentBadgeView":{"properties":{"awarded_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Awarded At"},"confirmed_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Confirmed At"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"earned":{"title":"Earned","type":"boolean"},"name":{"title":"Name","type":"string"},"progress":{"anyOf":[{"$ref":"#/components/schemas/BadgeProgressView"},{"type":"null"}]},"slug":{"title":"Slug","type":"string"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"required":["slug","name","earned"],"title":"StudentBadgeView","type":"object"},"StudentCreditCycle":{"properties":{"cents10":{"description":"Credit cents issued for $10 milestone","minimum":0.0,"title":"Cents10","type":"integer"},"cents20":{"description":"Credit cents issued for $20 milestone","minimum":0.0,"title":"Cents20","type":"integer"},"cycle_len":{"description":"Length of credit cycle in sessions","exclusiveMinimum":0.0,"title":"Cycle Len","type":"integer"},"mod10":{"description":"Modulo offset for $10 credit milestone","minimum":0.0,"title":"Mod10","type":"integer"},"mod20":{"description":"Modulo offset for $20 credit milestone","minimum":0.0,"title":"Mod20","type":"integer"}},"required":["cycle_len","mod10","cents10","mod20","cents20"],"title":"StudentCreditCycle","type":"object"},"StudentInfo":{"description":"Basic student information for booking display.","properties":{"email":{"title":"Email","type":"string"},"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_name":{"title":"Last Name","type":"string"}},"required":["id","first_name","last_name","email"],"title":"StudentInfo","type":"object"},"SubcategoryBrief":{"additionalProperties":false,"description":"Minimal subcategory for list views (browse page pills).","properties":{"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"service_count":{"default":0,"description":"Number of services in this subcategory","title":"Service Count","type":"integer"}},"required":["id","name"],"title":"SubcategoryBrief","type":"object"},"SubcategoryDetail":{"additionalProperties":false,"description":"Full subcategory detail for /category/subcategory pages.\n\nIncludes nested services and applicable filters.","properties":{"category":{"anyOf":[{"$ref":"#/components/schemas/CategoryResponse"},{"type":"null"}]},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"filters":{"items":{"$ref":"#/components/schemas/SubcategoryFilterResponse"},"title":"Filters","type":"array"},"id":{"title":"Id","type":"string"},"meta_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Description"},"meta_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Title"},"name":{"title":"Name","type":"string"},"services":{"items":{"$ref":"#/components/schemas/CatalogServiceResponse"},"title":"Services","type":"array"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["id","name"],"title":"SubcategoryDetail","type":"object"},"SubcategoryFilterResponse":{"additionalProperties":false,"description":"A filter as it applies to a specific subcategory (with only valid options).\n\nThis is the primary schema used by the frontend to render filter UI.","properties":{"filter_display_name":{"description":"Human-readable name","title":"Filter Display Name","type":"string"},"filter_key":{"description":"Filter key (e.g., 'grade_level')","title":"Filter Key","type":"string"},"filter_type":{"description":"'single_select' or 'multi_select'","enum":["single_select","multi_select"],"title":"Filter Type","type":"string"},"options":{"description":"Valid options for this subcategory","items":{"$ref":"#/components/schemas/FilterOptionResponse"},"title":"Options","type":"array"}},"required":["filter_key","filter_display_name","filter_type"],"title":"SubcategoryFilterResponse","type":"object"},"SubcategorySummary":{"additionalProperties":false,"description":"Subcategory summary for listing within a category page.","properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"service_count":{"default":0,"title":"Service Count","type":"integer"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["id","name"],"title":"SubcategorySummary","type":"object"},"SubcategoryWithServices":{"additionalProperties":false,"description":"Subcategory with nested services (for category detail / onboarding).","properties":{"category_id":{"title":"Category Id","type":"string"},"display_order":{"default":0,"description":"Order for UI display (lower numbers first)","title":"Display Order","type":"integer"},"id":{"title":"Id","type":"string"},"name":{"description":"Display name (e.g., 'Piano', 'Guitar')","maxLength":255,"title":"Name","type":"string"},"services":{"items":{"$ref":"#/components/schemas/CatalogServiceResponse"},"title":"Services","type":"array"}},"required":["name","id","category_id"],"title":"SubcategoryWithServices","type":"object"},"SuccessResponse":{"additionalProperties":false,"description":"Standard success response for operations.","properties":{"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"description":"Optional additional data","title":"Data"},"message":{"description":"Human-readable success message","title":"Message","type":"string"},"success":{"default":true,"description":"Operation success status","title":"Success","type":"boolean"}},"required":["message"],"title":"SuccessResponse","type":"object"},"SummaryStats":{"description":"Summary statistics for auth blocks.","properties":{"captcha_required":{"default":0,"title":"Captcha Required","type":"integer"},"locked_out":{"default":0,"title":"Locked Out","type":"integer"},"rate_limited":{"default":0,"title":"Rate Limited","type":"integer"},"total_blocked":{"default":0,"title":"Total Blocked","type":"integer"}},"title":"SummaryStats","type":"object"},"SupplyDemand":{"properties":{"balance":{"$ref":"#/components/schemas/BalanceMetrics"},"demand":{"$ref":"#/components/schemas/DemandMetrics"},"filters_applied":{"additionalProperties":{"type":"string"},"title":"Filters Applied","type":"object"},"gaps":{"items":{"$ref":"#/components/schemas/SupplyGap"},"title":"Gaps","type":"array"},"period":{"title":"Period","type":"string"},"supply":{"$ref":"#/components/schemas/SupplyMetrics"},"top_unfulfilled":{"items":{"$ref":"#/components/schemas/UnfulfilledSearch"},"title":"Top Unfulfilled","type":"array"}},"required":["period","filters_applied","supply","demand","balance"],"title":"SupplyDemand","type":"object"},"SupplyDemandPeriod":{"enum":["last_7_days","last_30_days"],"title":"SupplyDemandPeriod","type":"string"},"SupplyGap":{"properties":{"category":{"title":"Category","type":"string"},"demand_score":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Demand Score","type":"string"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"priority":{"title":"Priority","type":"string"},"supply_score":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Supply Score","type":"string"}},"required":["category","demand_score","supply_score","priority"],"title":"SupplyGap","type":"object"},"SupplyMetrics":{"properties":{"active_instructors":{"title":"Active Instructors","type":"integer"},"avg_availability_per_instructor":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Avg Availability Per Instructor","type":"string"},"churned_instructors":{"title":"Churned Instructors","type":"integer"},"new_instructors":{"title":"New Instructors","type":"integer"},"total_availability_hours":{"pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Availability Hours","type":"string"}},"required":["active_instructors","total_availability_hours","avg_availability_per_instructor","new_instructors","churned_instructors"],"title":"SupplyMetrics","type":"object"},"TFADisableRequest":{"additionalProperties":false,"properties":{"current_password":{"title":"Current Password","type":"string"}},"required":["current_password"],"title":"TFADisableRequest","type":"object"},"TFADisableResponse":{"additionalProperties":false,"properties":{"message":{"title":"Message","type":"string"}},"required":["message"],"title":"TFADisableResponse","type":"object"},"TFASetupInitiateResponse":{"additionalProperties":false,"properties":{"otpauth_url":{"title":"Otpauth Url","type":"string"},"qr_code_data_url":{"title":"Qr Code Data Url","type":"string"},"secret":{"title":"Secret","type":"string"}},"required":["secret","qr_code_data_url","otpauth_url"],"title":"TFASetupInitiateResponse","type":"object"},"TFASetupVerifyRequest":{"additionalProperties":false,"properties":{"code":{"title":"Code","type":"string"}},"required":["code"],"title":"TFASetupVerifyRequest","type":"object"},"TFASetupVerifyResponse":{"additionalProperties":false,"properties":{"backup_codes":{"items":{"type":"string"},"title":"Backup Codes","type":"array"},"enabled":{"title":"Enabled","type":"boolean"}},"required":["enabled","backup_codes"],"title":"TFASetupVerifyResponse","type":"object"},"TFAStatusResponse":{"additionalProperties":false,"properties":{"enabled":{"title":"Enabled","type":"boolean"},"last_used_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Used At"},"verified_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verified At"}},"required":["enabled"],"title":"TFAStatusResponse","type":"object"},"TFAVerifyLoginRequest":{"additionalProperties":false,"properties":{"backup_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Code"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"temp_token":{"title":"Temp Token","type":"string"}},"required":["temp_token"],"title":"TFAVerifyLoginRequest","type":"object"},"TFAVerifyLoginResponse":{"additionalProperties":false,"properties":{},"title":"TFAVerifyLoginResponse","type":"object"},"TemplateInfo":{"properties":{"category":{"title":"Category","type":"string"},"channels":{"items":{"type":"string"},"title":"Channels","type":"array"},"optional_variables":{"items":{"type":"string"},"title":"Optional Variables","type":"array"},"required_variables":{"items":{"type":"string"},"title":"Required Variables","type":"array"},"template_id":{"title":"Template Id","type":"string"},"usage_count":{"title":"Usage Count","type":"integer"}},"required":["template_id","category","channels","required_variables","optional_variables","usage_count"],"title":"TemplateInfo","type":"object"},"TierConfig":{"properties":{"max":{"anyOf":[{"minimum":0.0,"type":"integer"},{"type":"null"}],"description":"Maximum sessions for this tier (inclusive); null for open-ended","title":"Max"},"min":{"description":"Minimum completed sessions for this tier","minimum":0.0,"title":"Min","type":"integer"},"pct":{"description":"Commission percentage expressed as decimal","exclusiveMaximum":1.0,"exclusiveMinimum":0.0,"title":"Pct","type":"number"}},"required":["min","pct"],"title":"TierConfig","type":"object"},"TimeRange":{"additionalProperties":false,"description":"Simple time range for schedule entries.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"TimeRange","type":"object"},"TimeSlot":{"additionalProperties":false,"description":"Time slot for availability.","properties":{"end_time":{"format":"time","title":"End Time","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"}},"required":["start_time","end_time"],"title":"TimeSlot","type":"object"},"TimeSlotInfo":{"additionalProperties":false,"description":"Time slot information for availability checks.","properties":{"date":{"description":"ISO date string (YYYY-MM-DD)","title":"Date","type":"string"},"end_time":{"description":"ISO time string (HH:MM:SS)","title":"End Time","type":"string"},"instructor_id":{"description":"Instructor ID","title":"Instructor Id","type":"string"},"start_time":{"description":"ISO time string (HH:MM:SS)","title":"Start Time","type":"string"}},"required":["date","start_time","end_time","instructor_id"],"title":"TimeSlotInfo","type":"object"},"TimelineEvent":{"additionalProperties":false,"properties":{"details":{"additionalProperties":true,"title":"Details","type":"object"},"event":{"title":"Event","type":"string"},"ts":{"format":"date-time","title":"Ts","type":"string"}},"required":["ts","event"],"title":"TimelineEvent","type":"object"},"TopCategory":{"additionalProperties":false,"description":"A category with booking count.","properties":{"category":{"title":"Category","type":"string"},"count":{"title":"Count","type":"integer"}},"required":["category","count"],"title":"TopCategory","type":"object"},"TopCategoryItem":{"additionalProperties":false,"description":"Top services grouped under a category.","properties":{"icon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon Name"},"id":{"title":"Id","type":"string"},"name":{"title":"Name","type":"string"},"services":{"items":{"$ref":"#/components/schemas/TopCategoryServiceItem"},"title":"Services","type":"array"}},"required":["id","name"],"title":"TopCategoryItem","type":"object"},"TopCategoryServiceItem":{"additionalProperties":false,"description":"Minimal service representation for top-per-category capsules.","properties":{"active_instructors":{"default":0,"title":"Active Instructors","type":"integer"},"demand_score":{"default":0.0,"title":"Demand Score","type":"number"},"display_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Display Order"},"id":{"title":"Id","type":"string"},"is_trending":{"default":false,"title":"Is Trending","type":"boolean"},"name":{"title":"Name","type":"string"},"slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slug"}},"required":["id","name"],"title":"TopCategoryServiceItem","type":"object"},"TopReferrerOut":{"description":"Top referrer metadata for admin dashboards.","properties":{"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"count":{"title":"Count","type":"integer"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","count"],"title":"TopReferrerOut","type":"object"},"TopServicesMetadata":{"additionalProperties":false,"description":"Metadata for top-per-category payloads.","properties":{"cached_for_seconds":{"title":"Cached For Seconds","type":"integer"},"services_per_category":{"title":"Services Per Category","type":"integer"},"total_categories":{"title":"Total Categories","type":"integer"},"updated_at":{"title":"Updated At","type":"string"}},"required":["services_per_category","total_categories","cached_for_seconds","updated_at"],"title":"TopServicesMetadata","type":"object"},"TopServicesPerCategoryResponse":{"additionalProperties":false,"description":"Response payload for top services per category.","properties":{"categories":{"items":{"$ref":"#/components/schemas/TopCategoryItem"},"title":"Categories","type":"array"},"metadata":{"$ref":"#/components/schemas/TopServicesMetadata"}},"required":["metadata"],"title":"TopServicesPerCategoryResponse","type":"object"},"TracesSummary":{"additionalProperties":false,"properties":{"included":{"title":"Included","type":"boolean"},"support_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Support Code"},"trace_ids":{"items":{"type":"string"},"title":"Trace Ids","type":"array"}},"required":["included"],"title":"TracesSummary","type":"object"},"TransactionHistoryItem":{"description":"Individual transaction in payment history.","properties":{"booking_date":{"description":"Date of the booking","title":"Booking Date","type":"string"},"booking_id":{"description":"Booking ID","title":"Booking Id","type":"string"},"created_at":{"description":"When the payment was created","title":"Created At","type":"string"},"credit_applied":{"description":"Credits applied to this transaction","title":"Credit Applied","type":"number"},"duration_minutes":{"description":"Duration in minutes","title":"Duration Minutes","type":"integer"},"end_time":{"description":"End time of the booking","title":"End Time","type":"string"},"hourly_rate":{"description":"Hourly rate charged","title":"Hourly Rate","type":"number"},"id":{"description":"Payment intent ID","title":"Id","type":"string"},"instructor_name":{"description":"Instructor name (first name + last initial)","title":"Instructor Name","type":"string"},"lesson_amount":{"description":"Lesson price before fees","title":"Lesson Amount","type":"number"},"service_fee":{"description":"Student service fee amount","title":"Service Fee","type":"number"},"service_name":{"description":"Service name","title":"Service Name","type":"string"},"start_time":{"description":"Start time of the booking","title":"Start Time","type":"string"},"status":{"description":"Payment status","title":"Status","type":"string"},"tip_amount":{"description":"Tip amount recorded","title":"Tip Amount","type":"number"},"tip_paid":{"description":"Tip amount successfully charged","title":"Tip Paid","type":"number"},"tip_status":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Status of the tip payment","title":"Tip Status"},"total_paid":{"description":"Final amount charged including tips","title":"Total Paid","type":"number"}},"required":["id","booking_id","service_name","instructor_name","booking_date","start_time","end_time","duration_minutes","hourly_rate","lesson_amount","service_fee","credit_applied","tip_amount","tip_paid","total_paid","status","created_at"],"title":"TransactionHistoryItem","type":"object"},"TypingRequest":{"description":"Typing indicator payload.","properties":{"is_typing":{"default":true,"title":"Is Typing","type":"boolean"}},"title":"TypingRequest","type":"object"},"UnfulfilledSearch":{"additionalProperties":false,"properties":{"closest_match":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Closest Match"},"count":{"title":"Count","type":"integer"},"query":{"title":"Query","type":"string"}},"required":["query","count"],"title":"UnfulfilledSearch","type":"object"},"UnreadCountResponse":{"additionalProperties":false,"properties":{"unread_count":{"title":"Unread Count","type":"integer"},"user_id":{"title":"User Id","type":"string"}},"required":["unread_count","user_id"],"title":"UnreadCountResponse","type":"object"},"UpcomingBookingResponse":{"description":"Simplified response for upcoming bookings widget.\n\nPrivacy-aware: instructor_last_name shows last initial for students,\nfull last name for instructors viewing their own bookings.","properties":{"booking_date":{"format":"date","title":"Booking Date","type":"string"},"end_time":{"format":"time","title":"End Time","type":"string"},"id":{"title":"Id","type":"string"},"instructor_first_name":{"title":"Instructor First Name","type":"string"},"instructor_id":{"title":"Instructor Id","type":"string"},"instructor_last_name":{"title":"Instructor Last Name","type":"string"},"meeting_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meeting Location"},"service_name":{"title":"Service Name","type":"string"},"start_time":{"format":"time","title":"Start Time","type":"string"},"student_first_name":{"title":"Student First Name","type":"string"},"student_last_name":{"title":"Student Last Name","type":"string"},"total_price":{"title":"Total Price","type":"number"}},"required":["id","instructor_id","booking_date","start_time","end_time","service_name","student_first_name","student_last_name","instructor_first_name","instructor_last_name","meeting_location","total_price"],"title":"UpcomingBookingResponse","type":"object"},"UpdateConversationStateRequest":{"description":"Request to update a user's state for a conversation.","properties":{"state":{"enum":["active","archived","trashed"],"title":"State","type":"string"}},"required":["state"],"title":"UpdateConversationStateRequest","type":"object"},"UpdateConversationStateResponse":{"description":"Response for updating conversation state.","properties":{"id":{"title":"Id","type":"string"},"state":{"enum":["active","archived","trashed"],"title":"State","type":"string"}},"required":["id","state"],"title":"UpdateConversationStateResponse","type":"object"},"UpdateFilterSelectionsRequest":{"additionalProperties":false,"description":"Request to update filter selections on an instructor service.","properties":{"filter_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Filter key  selected option values","title":"Filter Selections","type":"object"}},"required":["filter_selections"],"title":"UpdateFilterSelectionsRequest","type":"object"},"UpdatePreferenceRequest":{"additionalProperties":false,"description":"Request to update a single preference.","properties":{"enabled":{"title":"Enabled","type":"boolean"}},"required":["enabled"],"title":"UpdatePreferenceRequest","type":"object"},"UpdatedBooking":{"properties":{"id":{"title":"Id","type":"string"},"status":{"title":"Status","type":"string"},"updated_at":{"format":"date-time","title":"Updated At","type":"string"}},"required":["id","status","updated_at"],"title":"UpdatedBooking","type":"object"},"UpdatedPayment":{"properties":{"refunded_at":{"format":"date-time","title":"Refunded At","type":"string"},"status":{"title":"Status","type":"string"}},"required":["status","refunded_at"],"title":"UpdatedPayment","type":"object"},"UserBasicPrivacy":{"description":"Basic user information with privacy protection.\n\nShows only last initial instead of full last name for privacy.\nUsed in student-facing endpoints to protect instructor privacy.\nEmail is omitted for privacy protection.","properties":{"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_initial":{"title":"Last Initial","type":"string"}},"required":["id","first_name","last_initial"],"title":"UserBasicPrivacy","type":"object"},"UserBookingHistoryResponse":{"additionalProperties":false,"description":"Response for user booking history endpoint.","properties":{"bookings":{"items":{"$ref":"#/components/schemas/BookingListItem"},"title":"Bookings","type":"array"},"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"total_count":{"title":"Total Count","type":"integer"},"user_id":{"title":"User Id","type":"string"},"user_name":{"title":"User Name","type":"string"},"user_role":{"title":"User Role","type":"string"}},"required":["user_id","user_name","user_role","bookings","total_count","checked_at"],"title":"UserBookingHistoryResponse","type":"object"},"UserBreakdown":{"additionalProperties":false,"description":"User type breakdown.","properties":{"authenticated":{"description":"Number of authenticated users","title":"Authenticated","type":"integer"},"converted_guests":{"description":"Number of guests who converted to users","title":"Converted Guests","type":"integer"},"guest_percentage":{"description":"Percentage of guests","title":"Guest Percentage","type":"number"},"guests":{"description":"Number of guest sessions","title":"Guests","type":"integer"},"user_percentage":{"description":"Percentage of authenticated users","title":"User Percentage","type":"number"}},"required":["authenticated","guests","converted_guests","user_percentage","guest_percentage"],"title":"UserBreakdown","type":"object"},"UserCreate":{"additionalProperties":false,"properties":{"email":{"format":"email","title":"Email","type":"string"},"first_name":{"maxLength":50,"minLength":1,"title":"First Name","type":"string"},"guest_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":true,"title":"Is Active"},"last_name":{"maxLength":50,"minLength":1,"title":"Last Name","type":"string"},"metadata":{"anyOf":[{"$ref":"#/components/schemas/UserRegistrationMetadata"},{"type":"null"}]},"password":{"title":"Password","type":"string"},"phone":{"anyOf":[{"maxLength":20,"type":"string"},{"type":"null"}],"title":"Phone"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"America/New_York","title":"Timezone"},"zip_code":{"pattern":"^\\d{5}$","title":"Zip Code","type":"string"}},"required":["email","first_name","last_name","zip_code","password"],"title":"UserCreate","type":"object"},"UserDataDeletionRequest":{"additionalProperties":false,"description":"Request schema for user data deletion.","properties":{"delete_account":{"default":false,"description":"Whether to delete the entire account or just anonymize data","title":"Delete Account","type":"boolean"}},"title":"UserDataDeletionRequest","type":"object"},"UserDataDeletionResponse":{"additionalProperties":false,"properties":{"account_deleted":{"description":"Whether the account was deleted","title":"Account Deleted","type":"boolean"},"deletion_stats":{"additionalProperties":{"type":"integer"},"description":"Statistics of deleted records","title":"Deletion Stats","type":"object"},"message":{"description":"Human-readable message","title":"Message","type":"string"},"status":{"description":"Status of the deletion request","title":"Status","type":"string"}},"required":["status","message","deletion_stats","account_deleted"],"title":"UserDataDeletionResponse","type":"object"},"UserInfo":{"additionalProperties":false,"description":"User information for admin lookup.","properties":{"created_at":{"title":"Created At","type":"string"},"email":{"title":"Email","type":"string"},"instructor_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Status"},"is_founding":{"title":"Is Founding","type":"boolean"},"is_verified":{"title":"Is Verified","type":"boolean"},"last_login":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Login"},"name":{"title":"Name","type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"review_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Review Count"},"role":{"title":"Role","type":"string"},"stripe_account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stripe Account Id"},"stripe_customer_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stripe Customer Id"},"total_bookings":{"title":"Total Bookings","type":"integer"},"total_earned_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Earned Cents"},"total_lessons":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Lessons"},"total_spent_cents":{"title":"Total Spent Cents","type":"integer"},"user_id":{"title":"User Id","type":"string"}},"required":["user_id","email","name","role","created_at","is_verified","is_founding","total_bookings","total_spent_cents"],"title":"UserInfo","type":"object"},"UserLogin":{"additionalProperties":false,"properties":{"captcha_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Captcha Token"},"email":{"format":"email","title":"Email","type":"string"},"guest_session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"},"password":{"title":"Password","type":"string"}},"required":["email","password"],"title":"UserLogin","type":"object"},"UserLookupResponse":{"additionalProperties":false,"description":"Response for user lookup endpoint.","properties":{"checked_at":{"format":"date-time","title":"Checked At","type":"string"},"found":{"title":"Found","type":"boolean"},"user":{"anyOf":[{"$ref":"#/components/schemas/UserInfo"},{"type":"null"}]}},"required":["found","checked_at"],"title":"UserLookupResponse","type":"object"},"UserRegistrationMetadata":{"additionalProperties":true,"description":"Metadata provided during user registration.","properties":{"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign"},"invite_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invite Code"},"marketing_tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Marketing Tag"},"referral_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referral Code"},"referral_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referral Source"}},"title":"UserRegistrationMetadata","type":"object"},"UserSummary":{"description":"Minimal user info for conversation list.","properties":{"first_name":{"title":"First Name","type":"string"},"id":{"title":"Id","type":"string"},"last_initial":{"title":"Last Initial","type":"string"},"profile_photo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Profile Photo Url"}},"required":["id","first_name","last_initial"],"title":"UserSummary","type":"object"},"UserUpdate":{"additionalProperties":false,"properties":{"first_name":{"anyOf":[{"maxLength":50,"minLength":1,"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"maxLength":50,"minLength":1,"type":"string"},{"type":"null"}],"title":"Last Name"},"phone":{"anyOf":[{"maxLength":20,"type":"string"},{"type":"null"}],"title":"Phone"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"zip_code":{"anyOf":[{"pattern":"^\\d{5}$","type":"string"},{"type":"null"}],"title":"Zip Code"}},"title":"UserUpdate","type":"object"},"ValidateFiltersRequest":{"additionalProperties":false,"description":"Request to validate filter selections for a catalog service.","properties":{"filter_selections":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"description":"Filter key  selected option values","title":"Filter Selections","type":"object"},"service_catalog_id":{"description":"Catalog service ID","title":"Service Catalog Id","type":"string"}},"required":["service_catalog_id","filter_selections"],"title":"ValidateFiltersRequest","type":"object"},"ValidateWeekRequest":{"additionalProperties":false,"description":"Request to validate week changes","properties":{"current_week":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array"},"title":"Current Week","type":"object"},"saved_week":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array"},"title":"Saved Week","type":"object"},"week_start":{"format":"date","title":"Week Start","type":"string"}},"required":["current_week","saved_week","week_start"],"title":"ValidateWeekRequest","type":"object"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"title":"Location","type":"array"},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}},"required":["loc","msg","type"],"title":"ValidationError","type":"object"},"ValidationSlotDetail":{"additionalProperties":false,"description":"Details about a slot operation in validation","properties":{"action":{"title":"Action","type":"string"},"conflicts_with":{"anyOf":[{"items":{"$ref":"#/components/schemas/AvailabilityConflictInfo"},"type":"array"},{"type":"null"}],"description":"Bookings that conflict with this operation","title":"Conflicts With"},"date":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date"},"end_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"End Time"},"operation_index":{"title":"Operation Index","type":"integer"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"slot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Id"},"start_time":{"anyOf":[{"format":"time","type":"string"},{"type":"null"}],"title":"Start Time"}},"required":["operation_index","action"],"title":"ValidationSlotDetail","type":"object"},"ValidationSummary":{"additionalProperties":false,"description":"Summary of validation results","properties":{"estimated_changes":{"additionalProperties":{"type":"integer"},"title":"Estimated Changes","type":"object"},"has_conflicts":{"title":"Has Conflicts","type":"boolean"},"invalid_operations":{"title":"Invalid Operations","type":"integer"},"operations_by_type":{"additionalProperties":{"type":"integer"},"title":"Operations By Type","type":"object"},"total_operations":{"title":"Total Operations","type":"integer"},"valid_operations":{"title":"Valid Operations","type":"integer"}},"required":["total_operations","valid_operations","invalid_operations","operations_by_type","has_conflicts","estimated_changes"],"title":"ValidationSummary","type":"object"},"VapidPublicKeyResponse":{"additionalProperties":false,"description":"VAPID public key response.","properties":{"public_key":{"title":"Public Key","type":"string"}},"required":["public_key"],"title":"VapidPublicKeyResponse","type":"object"},"VideoJoinResponse":{"additionalProperties":false,"description":"Response from POST /api/v1/lessons/{booking_id}/join.","properties":{"auth_token":{"title":"Auth Token","type":"string"},"booking_id":{"title":"Booking Id","type":"string"},"role":{"title":"Role","type":"string"},"room_id":{"title":"Room Id","type":"string"}},"required":["auth_token","room_id","role","booking_id"],"title":"VideoJoinResponse","type":"object"},"VideoSessionStatusResponse":{"additionalProperties":false,"description":"Response from GET /api/v1/lessons/{booking_id}/video-session.","properties":{"instructor_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Instructor Joined At"},"room_id":{"title":"Room Id","type":"string"},"session_ended_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Session Ended At"},"session_started_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Session Started At"},"student_joined_at":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Student Joined At"}},"required":["room_id"],"title":"VideoSessionStatusResponse","type":"object"},"WebhookAckResponse":{"additionalProperties":false,"description":"Standard acknowledgement payload returned by webhook endpoints.","properties":{"ok":{"default":true,"title":"Ok","type":"boolean"}},"title":"WebhookAckResponse","type":"object"},"WebhookEventBrief":{"additionalProperties":false,"properties":{"event_id":{"title":"Event Id","type":"string"},"status":{"title":"Status","type":"string"},"ts":{"format":"date-time","title":"Ts","type":"string"},"type":{"title":"Type","type":"string"}},"required":["event_id","type","status","ts"],"title":"WebhookEventBrief","type":"object"},"WebhookResponse":{"additionalProperties":false,"properties":{"event_type":{"description":"Stripe event type","title":"Event Type","type":"string"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Additional information","title":"Message"},"status":{"description":"Processing status (success, ignored, error)","title":"Status","type":"string"}},"required":["status","event_type"],"title":"WebhookResponse","type":"object"},"WebhooksSummary":{"additionalProperties":false,"properties":{"events":{"items":{"$ref":"#/components/schemas/WebhookEventBrief"},"title":"Events","type":"array"},"included":{"title":"Included","type":"boolean"}},"required":["included"],"title":"WebhooksSummary","type":"object"},"WeekAvailabilityResponse":{"additionalProperties":{"items":{"$ref":"#/components/schemas/TimeRange"},"type":"array"},"description":"Week availability mapping keyed by ISO date string.","title":"WeekAvailabilityResponse","type":"object"},"WeekAvailabilityUpdateResponse":{"additionalProperties":false,"properties":{"days_written":{"default":0,"title":"Days Written","type":"integer"},"edited_dates":{"items":{"type":"string"},"title":"Edited Dates","type":"array"},"message":{"title":"Message","type":"string"},"skipped_dates":{"items":{"type":"string"},"title":"Skipped Dates","type":"array"},"skipped_past_window":{"default":0,"title":"Skipped Past Window","type":"integer"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version"},"week_end":{"format":"date","title":"Week End","type":"string"},"week_start":{"format":"date","title":"Week Start","type":"string"},"week_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Week Version"},"weeks_affected":{"default":0,"title":"Weeks Affected","type":"integer"},"windows_created":{"title":"Windows Created","type":"integer"},"windows_deleted":{"title":"Windows Deleted","type":"integer"},"windows_updated":{"title":"Windows Updated","type":"integer"}},"required":["message","week_start","week_end","windows_created","windows_updated","windows_deleted"],"title":"WeekAvailabilityUpdateResponse","type":"object"},"WeekSpecificScheduleCreate":{"additionalProperties":false,"description":"Schema for creating schedule for specific dates.","properties":{"base_version":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Client's baseline week version when saving (If-Match fallback)","title":"Base Version"},"clear_existing":{"default":true,"description":"Whether to clear existing entries for the week before saving","title":"Clear Existing","type":"boolean"},"override":{"default":false,"description":"If true, bypass server-side version checks when saving","title":"Override","type":"boolean"},"schedule":{"description":"List of schedule items with date, start_time, and end_time","items":{"$ref":"#/components/schemas/ScheduleItem"},"title":"Schedule","type":"array"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Deprecated alias for base_version (optimistic concurrency token)","title":"Version"},"week_start":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Optional Monday date. If not provided, inferred from schedule dates","title":"Week Start"}},"required":["schedule"],"title":"WeekSpecificScheduleCreate","type":"object"},"WeekValidationResponse":{"additionalProperties":false,"description":"Response for week schedule validation","properties":{"details":{"items":{"$ref":"#/components/schemas/ValidationSlotDetail"},"title":"Details","type":"array"},"summary":{"$ref":"#/components/schemas/ValidationSummary"},"valid":{"title":"Valid","type":"boolean"},"warnings":{"default":[],"items":{"type":"string"},"title":"Warnings","type":"array"}},"required":["valid","summary","details"],"title":"WeekValidationResponse","type":"object"},"ZeroResultQueriesResponse":{"additionalProperties":false,"description":"List of zero-result queries.","properties":{"queries":{"description":"Zero-result queries","items":{"$ref":"#/components/schemas/ZeroResultQueryItem"},"title":"Queries","type":"array"}},"required":["queries"],"title":"ZeroResultQueriesResponse","type":"object"},"ZeroResultQueryItem":{"additionalProperties":false,"description":"A search query that returned zero results.","properties":{"count":{"description":"Number of times searched","minimum":1.0,"title":"Count","type":"integer"},"last_searched":{"description":"Last search timestamp","title":"Last Searched","type":"string"},"query":{"description":"Search query text","title":"Query","type":"string"}},"required":["query","count","last_searched"],"title":"ZeroResultQueryItem","type":"object"}},"securitySchemes":{"OAuth2PasswordBearer":{"flows":{"password":{"scopes":{},"tokenUrl":"auth/login"}},"type":"oauth2"}}},"info":{"description":"iNSTAiNSTRU - NYC's Premier Instructor Marketplace","title":"iNSTAiNSTRU API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/api/v1/2fa/disable":{"post":{"operationId":"disable_api_v1_2fa_disable_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFADisableRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFADisableResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Disable","tags":["2fa"]}},"/api/v1/2fa/regenerate-backup-codes":{"post":{"operationId":"regenerate_backup_codes_api_v1_2fa_regenerate_backup_codes_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackupCodesResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Regenerate Backup Codes","tags":["2fa"]}},"/api/v1/2fa/setup/initiate":{"post":{"operationId":"setup_initiate_api_v1_2fa_setup_initiate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupInitiateResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Setup Initiate","tags":["2fa"]}},"/api/v1/2fa/setup/verify":{"post":{"operationId":"setup_verify_api_v1_2fa_setup_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupVerifyRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFASetupVerifyResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Setup Verify","tags":["2fa"]}},"/api/v1/2fa/status":{"get":{"operationId":"status_endpoint_api_v1_2fa_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Status Endpoint","tags":["2fa"]}},"/api/v1/2fa/verify-login":{"post":{"operationId":"verify_login_api_v1_2fa_verify_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAVerifyLoginRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TFAVerifyLoginResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Verify Login","tags":["2fa"]}},"/api/v1/account/deactivate":{"post":{"description":"Permanently deactivate the current user's instructor account.\n\nRequirements:\n- User must be an instructor\n- Cannot have any future bookings\n- Deactivated instructors cannot login or be reactivated through the API","operationId":"deactivate_account_api_v1_account_deactivate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Deactivate Account","tags":["account-v1"]}},"/api/v1/account/logout-all-devices":{"post":{"description":"Invalidate all active sessions for the current user.","operationId":"logout_all_devices_api_v1_account_logout_all_devices_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionInvalidationResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Logout All Devices","tags":["account-v1"]}},"/api/v1/account/phone":{"get":{"description":"Get the current user's phone number and verification status.","operationId":"get_phone_number_api_v1_account_phone_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneUpdateResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Phone Number","tags":["account-v1"]},"put":{"description":"Update the current user's phone number and reset verification.","operationId":"update_phone_number_api_v1_account_phone_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneUpdateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Phone Number","tags":["account-v1"]}},"/api/v1/account/phone/verify":{"post":{"description":"Send a verification code to the user's phone number.","operationId":"send_phone_verification_api_v1_account_phone_verify_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneVerifyResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Phone Verification","tags":["account-v1"]}},"/api/v1/account/phone/verify/confirm":{"post":{"description":"Confirm phone verification with a code.","operationId":"confirm_phone_verification_api_v1_account_phone_verify_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneVerifyConfirmRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneVerifyResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Confirm Phone Verification","tags":["account-v1"]}},"/api/v1/account/reactivate":{"post":{"description":"Reactivate a suspended instructor account.\n\nRequirements:\n- User must be an instructor\n- Account must be suspended (not deactivated)\n- Once reactivated, instructor can receive bookings again","operationId":"reactivate_account_api_v1_account_reactivate_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reactivate Account","tags":["account-v1"]}},"/api/v1/account/status":{"get":{"description":"Check the current account status and available status change options.\n\nReturns:\n- Current account status\n- Whether the instructor can login\n- Whether the instructor can receive bookings\n- Available status change options based on current state and future bookings","operationId":"check_account_status_api_v1_account_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Account Status","tags":["account-v1"]}},"/api/v1/account/suspend":{"post":{"description":"Suspend the current user's instructor account.\n\nRequirements:\n- User must be an instructor\n- Cannot have any future bookings\n- Suspended instructors can still login but cannot receive new bookings","operationId":"suspend_account_api_v1_account_suspend_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountStatusChangeResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Suspend Account","tags":["account-v1"]}},"/api/v1/addresses/coverage/bulk":{"get":{"description":"Return GeoJSON FeatureCollection of neighborhoods served by the given instructors.\n\n'ids' is a comma-separated list of instructor user IDs.","operationId":"get_bulk_coverage_geojson_api_v1_addresses_coverage_bulk_get","parameters":[{"in":"query","name":"ids","required":true,"schema":{"title":"Ids","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoverageFeatureCollectionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Bulk Coverage Geojson","tags":["addresses-v1"]}},"/api/v1/addresses/me":{"get":{"description":"List all addresses for the current user.","operationId":"list_my_addresses_api_v1_addresses_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressListResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List My Addresses","tags":["addresses-v1"]},"post":{"description":"Create a new address for the current user.","operationId":"create_my_address_api_v1_addresses_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create My Address","tags":["addresses-v1"]}},"/api/v1/addresses/me/{address_id}":{"delete":{"description":"Delete an address for the current user.","operationId":"delete_my_address_api_v1_addresses_me__address_id__delete","parameters":[{"in":"path","name":"address_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Address Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressDeleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete My Address","tags":["addresses-v1"]},"patch":{"description":"Update an existing address for the current user.","operationId":"update_my_address_api_v1_addresses_me__address_id__patch","parameters":[{"in":"path","name":"address_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Address Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update My Address","tags":["addresses-v1"]}},"/api/v1/addresses/places/autocomplete":{"get":{"description":"Provider-agnostic autocomplete passthrough.\n\nUses the configured provider to retrieve suggestions.","operationId":"places_autocomplete_api_v1_addresses_places_autocomplete_get","parameters":[{"in":"query","name":"q","required":true,"schema":{"title":"Q","type":"string"}},{"in":"query","name":"provider","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider"}},{"in":"query","name":"scope","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scope"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutocompleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Places Autocomplete","tags":["addresses-v1"]}},"/api/v1/addresses/places/details":{"get":{"description":"Return normalized place details for a selected suggestion.\n\nFrontend uses this to auto-fill form fields without exposing provider payloads.","operationId":"place_details_api_v1_addresses_places_details_get","parameters":[{"in":"query","name":"place_id","required":true,"schema":{"title":"Place Id","type":"string"}},{"in":"query","name":"provider","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceDetails"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Place Details","tags":["addresses-v1"]}},"/api/v1/addresses/regions/neighborhoods":{"get":{"description":"List neighborhoods for a region type.","operationId":"list_neighborhoods_api_v1_addresses_regions_neighborhoods_get","parameters":[{"in":"query","name":"region_type","required":false,"schema":{"default":"nyc","title":"Region Type","type":"string"}},{"in":"query","name":"borough","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Borough"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":100,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NeighborhoodsListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Neighborhoods","tags":["addresses-v1"]}},"/api/v1/addresses/service-areas/me":{"get":{"description":"List service areas for the current instructor.","operationId":"list_my_service_areas_api_v1_addresses_service_areas_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List My Service Areas","tags":["addresses-v1"]},"put":{"description":"Replace all service areas for the current instructor.","operationId":"replace_my_service_areas_api_v1_addresses_service_areas_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceAreasResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Replace My Service Areas","tags":["addresses-v1"]}},"/api/v1/addresses/zip/is-nyc":{"get":{"description":"Lightweight NYC ZIP check.\n\nArgs:\n    zip: Five-digit ZIP code.\n\nReturns:\n    { \"is_nyc\": bool, \"borough\": Optional[str] }\n\nNotes:\n    - This endpoint is deterministic and does not require geocoding APIs.\n    - It is sufficient for onboarding gating; deeper enrichment occurs when\n      we create an address with lat/lng.","operationId":"is_nyc_zip_api_v1_addresses_zip_is_nyc_get","parameters":[{"in":"query","name":"zip","required":true,"schema":{"title":"Zip","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NYCZipCheckResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Is Nyc Zip","tags":["addresses-v1"]}},"/api/v1/admin/audit":{"get":{"description":"List audit log entries with filtering and pagination.","operationId":"list_audit_logs_api_v1_admin_audit_get","parameters":[{"in":"query","name":"entity_type","required":false,"schema":{"anyOf":[{"maxLength":50,"type":"string"},{"type":"null"}],"title":"Entity Type"}},{"in":"query","name":"entity_id","required":false,"schema":{"anyOf":[{"maxLength":64,"type":"string"},{"type":"null"}],"title":"Entity Id"}},{"in":"query","name":"action","required":false,"schema":{"anyOf":[{"maxLength":30,"type":"string"},{"type":"null"}],"title":"Action"}},{"in":"query","name":"actor_id","required":false,"schema":{"anyOf":[{"maxLength":26,"type":"string"},{"type":"null"}],"title":"Actor Id"}},{"in":"query","name":"actor_role","required":false,"schema":{"anyOf":[{"maxLength":30,"type":"string"},{"type":"null"}],"title":"Actor Role"}},{"in":"query","name":"start","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start"}},{"in":"query","name":"end","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"minimum":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLogListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Audit Logs","tags":["admin-audit"]}},"/api/v1/admin/audit-log":{"get":{"operationId":"list_admin_audit_log_api_v1_admin_audit_log_get","parameters":[{"in":"query","name":"action","required":false,"schema":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Action"}},{"in":"query","name":"admin_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Id"}},{"in":"query","name":"date_from","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date From"}},{"in":"query","name":"date_to","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date To"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":20,"maximum":200,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminAuditLogResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Admin Audit Log","tags":["admin-bookings"]}},"/api/v1/admin/auth-blocks":{"get":{"description":"List accounts with auth issues (blocked or approaching lockout).\n\nRequires ACCESS_MONITORING permission.\n\nReturns accounts that are:\n- Locked out (after 5+ failed attempts)\n- Rate limited (minute or hour)\n- Require CAPTCHA (after 3+ failures)\n- Approaching lockout (3+ failures)","operationId":"list_auth_issues_api_v1_admin_auth_blocks_get","parameters":[{"description":"Filter by block type: lockout, rate_limit, captcha","in":"query","name":"type","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by block type: lockout, rate_limit, captcha","title":"Type"}},{"description":"Search by email (partial match)","in":"query","name":"email","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by email (partial match)","title":"Email"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListAuthIssuesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Auth Issues","tags":["admin-auth"]}},"/api/v1/admin/auth-blocks/summary":{"get":{"description":"Get summary statistics for auth blocks.\n\nRequires ACCESS_MONITORING permission.","operationId":"get_summary_stats_api_v1_admin_auth_blocks_summary_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SummaryStats"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Summary Stats","tags":["admin-auth"]}},"/api/v1/admin/auth-blocks/{email}":{"delete":{"description":"Clear auth blocks for an account.\n\nRequires MANAGE_USERS permission.\n\nIf no types specified, clears ALL blocks for the account.","operationId":"clear_account_blocks_api_v1_admin_auth_blocks__email__delete","parameters":[{"in":"path","name":"email","required":true,"schema":{"title":"Email","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ClearBlocksRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClearBlocksResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Clear Account Blocks","tags":["admin-auth"]},"get":{"description":"Get detailed auth state for a specific account.\n\nRequires ACCESS_MONITORING permission.","operationId":"get_account_state_api_v1_admin_auth_blocks__email__get","parameters":[{"in":"path","name":"email","required":true,"schema":{"title":"Email","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockedAccount"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Account State","tags":["admin-auth"]}},"/api/v1/admin/background-checks/cases":{"get":{"description":"Unified listing endpoint for background check cases.","operationId":"bgc_cases_api_v1_admin_background_checks_cases_get","parameters":[{"description":"review, pending, or all","in":"query","name":"status","required":false,"schema":{"default":"review","description":"review, pending, or all","title":"Status","type":"string"}},{"description":"Search by instructor id, name, or email","in":"query","name":"q","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by instructor id, name, or email","title":"Q"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"page_size","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Page Size","type":"integer"}},{"description":"Deprecated; use page_size instead.","in":"query","name":"limit","required":false,"schema":{"anyOf":[{"maximum":200,"minimum":1,"type":"integer"},{"type":"null"}],"description":"Deprecated; use page_size instead.","title":"Limit"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCCaseListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Cases","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/consent/{instructor_id}/latest":{"get":{"description":"Return the most recent consent record for an instructor.","operationId":"admin_latest_consent_api_v1_admin_background_checks_consent__instructor_id__latest_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCLatestConsentResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Admin Latest Consent","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/counts":{"get":{"description":"Return total counts for review and pending background check queues.","operationId":"bgc_counts_api_v1_admin_background_checks_counts_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCCaseCountsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Counts","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/expiring":{"get":{"description":"Return instructors whose background checks are expiring soon.","operationId":"bgc_expiring_api_v1_admin_background_checks_expiring_get","parameters":[{"description":"Lookahead window in days","in":"query","name":"days","required":false,"schema":{"default":30,"description":"Lookahead window in days","maximum":180,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":100,"maximum":1000,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BGCExpiringItem"},"title":"Response Bgc Expiring Api V1 Admin Background Checks Expiring Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Expiring","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/history/{instructor_id}":{"get":{"description":"Return append-only history of background check completions.","operationId":"bgc_history_api_v1_admin_background_checks_history__instructor_id__get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Opaque history ULID cursor","in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Opaque history ULID cursor","title":"Cursor"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc History","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/review":{"get":{"description":"List instructors whose background checks require admin review.","operationId":"bgc_review_list_api_v1_admin_background_checks_review_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Opaque ULID cursor for pagination","in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Opaque ULID cursor for pagination","title":"Cursor"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCReviewListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Review List","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/review/count":{"get":{"description":"Return total instructors currently in review state.","operationId":"bgc_review_count_api_v1_admin_background_checks_review_count_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCReviewCountResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Review Count","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/webhooks":{"get":{"description":"Return recent Checkr webhook deliveries for troubleshooting.","operationId":"bgc_webhook_logs_api_v1_admin_background_checks_webhooks_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Opaque cursor for pagination","in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Opaque cursor for pagination","title":"Cursor"}},{"in":"query","name":"event","required":false,"schema":{"items":{"type":"string"},"title":"Event","type":"array"}},{"in":"query","name":"status","required":false,"schema":{"items":{"type":"string"},"title":"Status","type":"array"}},{"description":"Search delivery id or signature","in":"query","name":"q","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search delivery id or signature","title":"Q"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCWebhookLogListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Webhook Logs","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/webhooks/stats":{"get":{"description":"Return summary stats for Checkr webhooks.","operationId":"bgc_webhook_stats_api_v1_admin_background_checks_webhooks_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCWebhookStatsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Webhook Stats","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/{instructor_id}/dispute/open":{"post":{"operationId":"open_bgc_dispute_api_v1_admin_background_checks__instructor_id__dispute_open_post","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Payload","type":"object"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCDisputeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Open Bgc Dispute","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/{instructor_id}/dispute/resolve":{"post":{"operationId":"resolve_bgc_dispute_api_v1_admin_background_checks__instructor_id__dispute_resolve_post","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Payload","type":"object"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCDisputeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Resolve Bgc Dispute","tags":["admin-bgc"]}},"/api/v1/admin/background-checks/{instructor_id}/override":{"post":{"description":"Approve or reject a background check under admin review.","operationId":"bgc_review_override_api_v1_admin_background_checks__instructor_id__override_post","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverridePayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BGCOverrideResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bgc Review Override","tags":["admin-bgc"]}},"/api/v1/admin/badges/pending":{"get":{"operationId":"list_pending_awards_api_v1_admin_badges_pending_get","parameters":[{"in":"query","name":"before","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Before"}},{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"minimum":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminAwardListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Pending Awards","tags":["admin-badges"]}},"/api/v1/admin/badges/{award_id}/confirm":{"post":{"operationId":"confirm_award_api_v1_admin_badges__award_id__confirm_post","parameters":[{"in":"path","name":"award_id","required":true,"schema":{"title":"Award Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminAwardSchema"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Confirm Award","tags":["admin-badges"]}},"/api/v1/admin/badges/{award_id}/revoke":{"post":{"operationId":"revoke_award_api_v1_admin_badges__award_id__revoke_post","parameters":[{"in":"path","name":"award_id","required":true,"schema":{"title":"Award Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminAwardSchema"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Revoke Award","tags":["admin-badges"]}},"/api/v1/admin/bookings":{"get":{"operationId":"list_admin_bookings_api_v1_admin_bookings_get","parameters":[{"in":"query","name":"search","required":false,"schema":{"anyOf":[{"maxLength":100,"type":"string"},{"type":"null"}],"title":"Search"}},{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"payment_status","required":false,"schema":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Payment Status"}},{"in":"query","name":"date_from","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date From"}},{"in":"query","name":"date_to","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Date To"}},{"in":"query","name":"needs_action","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Needs Action"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":20,"maximum":200,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminBookingListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Admin Bookings","tags":["admin-bookings"]}},"/api/v1/admin/bookings/stats":{"get":{"operationId":"get_admin_booking_stats_api_v1_admin_bookings_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminBookingStatsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Admin Booking Stats","tags":["admin-bookings"]}},"/api/v1/admin/bookings/{booking_id}":{"get":{"operationId":"get_admin_booking_detail_api_v1_admin_bookings__booking_id__get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminBookingDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Admin Booking Detail","tags":["admin-bookings"]}},"/api/v1/admin/bookings/{booking_id}/cancel":{"post":{"operationId":"admin_cancel_booking_api_v1_admin_bookings__booking_id__cancel_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCancelBookingRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCancelBookingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Admin Cancel Booking","tags":["admin-bookings"]}},"/api/v1/admin/bookings/{booking_id}/complete":{"post":{"operationId":"admin_update_booking_status_api_v1_admin_bookings__booking_id__complete_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminBookingStatusUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminBookingStatusUpdateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Admin Update Booking Status","tags":["admin-bookings"]}},"/api/v1/admin/bookings/{booking_id}/no-show/resolve":{"post":{"description":"Resolve a disputed no-show report.","operationId":"resolve_no_show_api_v1_admin_bookings__booking_id__no_show_resolve_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminNoShowResolutionRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminNoShowResolutionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Resolve No Show","tags":["admin-bookings"]}},"/api/v1/admin/bookings/{booking_id}/refund":{"post":{"description":"Issue a refund for a booking (admin only).","operationId":"admin_refund_booking_api_v1_admin_bookings__booking_id__refund_post","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRefundRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRefundResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Admin Refund Booking","tags":["admin-refunds"]}},"/api/v1/admin/config/pricing":{"get":{"operationId":"get_pricing_config_api_v1_admin_config_pricing_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingConfigResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Pricing Config","tags":["admin-config"]},"patch":{"operationId":"update_pricing_config_api_v1_admin_config_pricing_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingConfigPayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingConfigResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Pricing Config","tags":["admin-config"]}},"/api/v1/admin/instructors/founding/count":{"get":{"description":"Return founding instructor count and remaining capacity.","operationId":"founding_instructor_count_api_v1_admin_instructors_founding_count_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoundingCountResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Founding Instructor Count","tags":["admin-instructors"]}},"/api/v1/admin/instructors/{instructor_id}":{"get":{"description":"Return administrative instructor detail including consent recency.","operationId":"admin_instructor_detail_api_v1_admin_instructors__instructor_id__get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminInstructorDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Admin Instructor Detail","tags":["admin-instructors"]}},"/api/v1/admin/location-learning/aliases":{"post":{"operationId":"create_manual_alias_api_v1_admin_location_learning_aliases_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningCreateAliasRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningCreateAliasResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Manual Alias","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/aliases/{alias_id}/approve":{"post":{"operationId":"approve_learned_alias_api_v1_admin_location_learning_aliases__alias_id__approve_post","parameters":[{"in":"path","name":"alias_id","required":true,"schema":{"title":"Alias Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningAliasActionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Approve Learned Alias","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/aliases/{alias_id}/reject":{"post":{"operationId":"reject_learned_alias_api_v1_admin_location_learning_aliases__alias_id__reject_post","parameters":[{"in":"path","name":"alias_id","required":true,"schema":{"title":"Alias Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningAliasActionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reject Learned Alias","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/pending-aliases":{"get":{"operationId":"list_pending_learned_aliases_api_v1_admin_location_learning_pending_aliases_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningPendingAliasesResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Pending Learned Aliases","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/process":{"post":{"operationId":"process_location_learning_api_v1_admin_location_learning_process_post","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":250,"maximum":2000,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningProcessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Process Location Learning","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/regions":{"get":{"operationId":"list_regions_api_v1_admin_location_learning_regions_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":2000,"maximum":5000,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningRegionsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Regions","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/unresolved":{"get":{"operationId":"list_unresolved_location_queries_api_v1_admin_location_learning_unresolved_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningUnresolvedQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Unresolved Location Queries","tags":["admin-location-learning"]}},"/api/v1/admin/location-learning/unresolved/{query_normalized}/dismiss":{"post":{"operationId":"dismiss_unresolved_query_api_v1_admin_location_learning_unresolved__query_normalized__dismiss_post","parameters":[{"in":"path","name":"query_normalized","required":true,"schema":{"title":"Query Normalized","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLocationLearningDismissQueryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Dismiss Unresolved Query","tags":["admin-location-learning"]}},"/api/v1/admin/mcp/analytics/alerts":{"get":{"operationId":"platform_alerts_api_v1_admin_mcp_analytics_alerts_get","parameters":[{"in":"query","name":"severity","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AlertSeverity"},{"type":"null"}],"title":"Severity"}},{"in":"query","name":"category","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AlertCategory"},{"type":"null"}],"title":"Category"}},{"in":"query","name":"acknowledged","required":false,"schema":{"default":false,"title":"Acknowledged","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlatformAlerts"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Platform Alerts","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/analytics/categories":{"get":{"operationId":"category_performance_api_v1_admin_mcp_analytics_categories_get","parameters":[{"in":"query","name":"period","required":false,"schema":{"$ref":"#/components/schemas/CategoryPerformancePeriod","default":"last_7_days"}},{"in":"query","name":"sort_by","required":false,"schema":{"$ref":"#/components/schemas/CategorySortBy","default":"revenue"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryPerformance"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Category Performance","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/analytics/cohorts":{"get":{"operationId":"cohort_retention_api_v1_admin_mcp_analytics_cohorts_get","parameters":[{"in":"query","name":"user_type","required":false,"schema":{"$ref":"#/components/schemas/CohortUserType","default":"student"}},{"in":"query","name":"cohort_period","required":false,"schema":{"$ref":"#/components/schemas/CohortPeriod","default":"month"}},{"in":"query","name":"periods_back","required":false,"schema":{"default":6,"maximum":24,"minimum":1,"title":"Periods Back","type":"integer"}},{"in":"query","name":"metric","required":false,"schema":{"$ref":"#/components/schemas/CohortMetric","default":"active"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CohortRetention"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Cohort Retention","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/analytics/funnel":{"get":{"operationId":"booking_funnel_api_v1_admin_mcp_analytics_funnel_get","parameters":[{"in":"query","name":"period","required":false,"schema":{"$ref":"#/components/schemas/BookingFunnelPeriod","default":"last_7_days"}},{"in":"query","name":"segment_by","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/FunnelSegmentBy"},{"type":"null"}],"title":"Segment By"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingFunnel"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Booking Funnel","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/analytics/revenue":{"get":{"operationId":"revenue_dashboard_api_v1_admin_mcp_analytics_revenue_get","parameters":[{"in":"query","name":"period","required":false,"schema":{"$ref":"#/components/schemas/RevenuePeriod","default":"last_7_days"}},{"in":"query","name":"compare_to","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RevenueComparisonMode"},{"type":"null"}],"default":"previous_period","title":"Compare To"}},{"in":"query","name":"breakdown_by","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RevenueBreakdownBy"},{"type":"null"}],"title":"Breakdown By"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueDashboard"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Revenue Dashboard","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/analytics/supply-demand":{"get":{"operationId":"supply_demand_api_v1_admin_mcp_analytics_supply_demand_get","parameters":[{"in":"query","name":"period","required":false,"schema":{"$ref":"#/components/schemas/SupplyDemandPeriod","default":"last_7_days"}},{"in":"query","name":"location","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"}},{"in":"query","name":"category","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplyDemand"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Supply Demand","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/audit/admin-actions/recent":{"get":{"operationId":"audit_recent_admin_actions_api_v1_admin_mcp_audit_admin_actions_recent_get","parameters":[{"in":"query","name":"since_hours","required":false,"schema":{"default":24,"maximum":720,"minimum":1,"title":"Since Hours","type":"integer"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":100,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Audit Recent Admin Actions","tags":["MCP Admin - Audit"]}},"/api/v1/admin/mcp/audit/resources/{resource_type}/{resource_id}/history":{"get":{"operationId":"audit_resource_history_api_v1_admin_mcp_audit_resources__resource_type___resource_id__history_get","parameters":[{"in":"path","name":"resource_type","required":true,"schema":{"title":"Resource Type","type":"string"}},{"in":"path","name":"resource_id","required":true,"schema":{"title":"Resource Id","type":"string"}},{"in":"query","name":"since_hours","required":false,"schema":{"anyOf":[{"maximum":720,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Since Hours"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Audit Resource History","tags":["MCP Admin - Audit"]}},"/api/v1/admin/mcp/audit/search":{"get":{"operationId":"audit_search_api_v1_admin_mcp_audit_search_get","parameters":[{"in":"query","name":"actor_email","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Email"}},{"in":"query","name":"actor_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Id"}},{"in":"query","name":"action","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"}},{"in":"query","name":"resource_type","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Type"}},{"in":"query","name":"resource_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Id"}},{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"since_hours","required":false,"schema":{"default":24,"maximum":720,"minimum":1,"title":"Since Hours","type":"integer"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":100,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Audit Search","tags":["MCP Admin - Audit"]}},"/api/v1/admin/mcp/audit/users/{user_email}/activity":{"get":{"operationId":"audit_user_activity_api_v1_admin_mcp_audit_users__user_email__activity_get","parameters":[{"in":"path","name":"user_email","required":true,"schema":{"title":"User Email","type":"string"}},{"in":"query","name":"since_days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Since Days","type":"integer"}},{"in":"query","name":"since_hours","required":false,"schema":{"anyOf":[{"maximum":720,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Since Hours"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":100,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Audit User Activity","tags":["MCP Admin - Audit"]}},"/api/v1/admin/mcp/bookings/{booking_id}/detail":{"get":{"operationId":"get_booking_detail_api_v1_admin_mcp_bookings__booking_id__detail_get","parameters":[{"in":"path","name":"booking_id","required":true,"schema":{"title":"Booking Id","type":"string"}},{"in":"query","name":"include_messages_summary","required":false,"schema":{"default":false,"title":"Include Messages Summary","type":"boolean"}},{"in":"query","name":"include_webhooks","required":false,"schema":{"default":true,"title":"Include Webhooks","type":"boolean"}},{"in":"query","name":"include_trace_links","required":false,"schema":{"default":false,"title":"Include Trace Links","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Booking Detail","tags":["MCP Admin - Booking Detail"]}},"/api/v1/admin/mcp/celery/failed":{"get":{"description":"Get failed Celery tasks from Flower.\n\nReturns a list of failed tasks with exception and traceback info.\nTraceback is truncated to 1000 characters, args/kwargs to 200 characters.","operationId":"get_failed_tasks_api_v1_admin_mcp_celery_failed_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryFailedTasksResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Failed Tasks","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/payment-health":{"get":{"description":"Get payment pipeline health status.\n\nCombines Celery task status from Flower with database queries\nfor booking payment status to provide a health overview.\n\nChecks:\n- Pending authorizations (scheduled but not yet processed)\n- Overdue authorizations (within 24h of booking but not authorized)\n- Pending captures (authorized but not yet captured after completion)\n- Failed payments in last 24 hours","operationId":"get_payment_health_api_v1_admin_mcp_celery_payment_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryPaymentHealthResponse"}}},"description":"Successful Response"}},"summary":"Get Payment Health","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/queues":{"get":{"description":"Get Celery queue depths from Flower.\n\nReturns a list of queues with their current depth.","operationId":"get_queues_api_v1_admin_mcp_celery_queues_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryQueuesResponse"}}},"description":"Successful Response"}},"summary":"Get Queues","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/schedule":{"get":{"description":"Get Celery Beat schedule.\n\nReturns all configured periodic tasks with human-readable schedule descriptions.\nThis reads from the static configuration for accuracy.","operationId":"get_beat_schedule_api_v1_admin_mcp_celery_schedule_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryBeatScheduleResponse"}}},"description":"Successful Response"}},"summary":"Get Beat Schedule","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/tasks/active":{"get":{"description":"Get currently running Celery tasks.\n\nReturns a list of tasks that are currently being executed across all workers.","operationId":"get_active_tasks_api_v1_admin_mcp_celery_tasks_active_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryActiveTasksResponse"}}},"description":"Successful Response"}},"summary":"Get Active Tasks","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/tasks/history":{"get":{"description":"Get recent Celery task history.\n\nQuery recent task executions with optional filters for task name, state,\nand time window. Returns timing information and results/errors.","operationId":"get_task_history_api_v1_admin_mcp_celery_tasks_history_get","parameters":[{"description":"Filter by task name (partial match)","in":"query","name":"task_name","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by task name (partial match)","title":"Task Name"}},{"description":"Filter by state (SUCCESS, FAILURE, PENDING, STARTED, RETRY)","in":"query","name":"state","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by state (SUCCESS, FAILURE, PENDING, STARTED, RETRY)","title":"State"}},{"description":"Look back window in hours (max 24)","in":"query","name":"hours","required":false,"schema":{"default":1,"description":"Look back window in hours (max 24)","maximum":24,"minimum":1,"title":"Hours","type":"integer"}},{"description":"Max results (max 500)","in":"query","name":"limit","required":false,"schema":{"default":100,"description":"Max results (max 500)","maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryTaskHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Task History","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/celery/workers":{"get":{"description":"Get Celery worker status from Flower.\n\nReturns a list of workers with their status, active tasks,\nand processing statistics.","operationId":"get_workers_api_v1_admin_mcp_celery_workers_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPCeleryWorkersResponse"}}},"description":"Successful Response"}},"summary":"Get Workers","tags":["MCP Admin - Celery"]}},"/api/v1/admin/mcp/communications/announcement/execute":{"post":{"operationId":"announcement_execute_api_v1_admin_mcp_communications_announcement_execute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnouncementExecuteRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnouncementExecuteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Announcement Execute","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/announcement/preview":{"post":{"operationId":"announcement_preview_api_v1_admin_mcp_communications_announcement_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnouncementPreviewRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnouncementPreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Announcement Preview","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/bulk/execute":{"post":{"operationId":"bulk_execute_api_v1_admin_mcp_communications_bulk_execute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkNotificationExecuteRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkNotificationExecuteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Bulk Execute","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/bulk/preview":{"post":{"operationId":"bulk_preview_api_v1_admin_mcp_communications_bulk_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkNotificationPreviewRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkNotificationPreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Bulk Preview","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/email/preview":{"post":{"operationId":"communication_email_preview_api_v1_admin_mcp_communications_email_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailPreviewRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailPreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Communication Email Preview","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/history":{"get":{"operationId":"communication_history_api_v1_admin_mcp_communications_history_get","parameters":[{"in":"query","name":"kind","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kind"}},{"in":"query","name":"channel","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Channel"}},{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Date"}},{"in":"query","name":"creator_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Creator Id"}},{"in":"query","name":"limit","required":false,"schema":{"default":100,"maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Communication History","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/communications/templates":{"get":{"operationId":"communication_templates_api_v1_admin_mcp_communications_templates_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationTemplatesResponse"}}},"description":"Successful Response"}},"summary":"Communication Templates","tags":["MCP Admin - Communications"]}},"/api/v1/admin/mcp/founding/funnel":{"get":{"description":"Get founding instructor funnel summary.\n\nReturns stage counts, conversion rates, and founding cap status.","operationId":"get_funnel_summary_api_v1_admin_mcp_founding_funnel_get","parameters":[{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPFunnelSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Funnel Summary","tags":["MCP Admin - Founding"]}},"/api/v1/admin/mcp/founding/stuck":{"get":{"description":"Get instructors stuck in onboarding.\n\nReturns summary by stage and list of stuck instructors.","operationId":"get_stuck_instructors_api_v1_admin_mcp_founding_stuck_get","parameters":[{"in":"query","name":"stuck_days","required":false,"schema":{"default":7,"maximum":90,"minimum":1,"title":"Stuck Days","type":"integer"}},{"in":"query","name":"stage","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stage"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPStuckResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Stuck Instructors","tags":["MCP Admin - Founding"]}},"/api/v1/admin/mcp/funnel/snapshot":{"get":{"operationId":"funnel_snapshot_api_v1_admin_mcp_funnel_snapshot_get","parameters":[{"in":"query","name":"period","required":false,"schema":{"$ref":"#/components/schemas/FunnelSnapshotPeriod","default":"last_7_days"}},{"in":"query","name":"compare_to","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/FunnelSnapshotComparison"},{"type":"null"}],"title":"Compare To"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunnelSnapshotResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Funnel Snapshot","tags":["MCP Admin - Analytics"]}},"/api/v1/admin/mcp/instructors":{"get":{"operationId":"list_instructors_api_v1_admin_mcp_instructors_get","parameters":[{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"enum":["registered","onboarding","live","paused"],"type":"string"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"is_founding","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Founding"}},{"in":"query","name":"service_slug","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Slug"}},{"in":"query","name":"category_name","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Name"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cursor"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInstructorListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Instructors","tags":["MCP Admin - Instructors"]}},"/api/v1/admin/mcp/instructors/coverage":{"get":{"operationId":"get_service_coverage_api_v1_admin_mcp_instructors_coverage_get","parameters":[{"in":"query","name":"status","required":false,"schema":{"default":"live","enum":["registered","onboarding","live","paused"],"title":"Status","type":"string"}},{"in":"query","name":"group_by","required":false,"schema":{"default":"category","enum":["category","service"],"title":"Group By","type":"string"}},{"in":"query","name":"top","required":false,"schema":{"default":25,"maximum":200,"minimum":1,"title":"Top","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPServiceCoverageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Service Coverage","tags":["MCP Admin - Instructors"]}},"/api/v1/admin/mcp/instructors/{identifier}":{"get":{"operationId":"get_instructor_detail_api_v1_admin_mcp_instructors__identifier__get","parameters":[{"in":"path","name":"identifier","required":true,"schema":{"title":"Identifier","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInstructorDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Instructor Detail","tags":["MCP Admin - Instructors"]}},"/api/v1/admin/mcp/invites":{"get":{"description":"List invite history with optional filters.","operationId":"list_invites_api_v1_admin_mcp_invites_get","parameters":[{"description":"Filter by recipient email","in":"query","name":"email","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by recipient email","title":"Email"}},{"description":"Filter by status: pending, accepted, expired, revoked","in":"query","name":"status","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/InviteStatus"},{"type":"null"}],"description":"Filter by status: pending, accepted, expired, revoked","title":"Status"}},{"description":"Filter by created_at start date (YYYY-MM-DD)","in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Filter by created_at start date (YYYY-MM-DD)","title":"Start Date"}},{"description":"Filter by created_at end date (YYYY-MM-DD)","in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Filter by created_at end date (YYYY-MM-DD)","title":"End Date"}},{"description":"Max results (max 200)","in":"query","name":"limit","required":false,"schema":{"default":50,"description":"Max results (max 200)","maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Pagination cursor","in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Pagination cursor","title":"Cursor"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInviteListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Invites","tags":["MCP Admin - Invites"]}},"/api/v1/admin/mcp/invites/preview":{"post":{"operationId":"preview_invites_api_v1_admin_mcp_invites_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInvitePreviewRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInvitePreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Preview Invites","tags":["MCP Admin - Invites"]}},"/api/v1/admin/mcp/invites/send":{"post":{"operationId":"send_invites_api_v1_admin_mcp_invites_send_post","parameters":[{"in":"header","name":"Idempotency-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency-Key"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInviteSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInviteSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Send Invites","tags":["MCP Admin - Invites"]}},"/api/v1/admin/mcp/invites/{identifier}":{"get":{"description":"Get full invite details by invite ID or code.","operationId":"get_invite_detail_api_v1_admin_mcp_invites__identifier__get","parameters":[{"in":"path","name":"identifier","required":true,"schema":{"title":"Identifier","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPInviteDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Invite Detail","tags":["MCP Admin - Invites"]}},"/api/v1/admin/mcp/metrics/{metric_name}":{"get":{"operationId":"get_metric_definition_api_v1_admin_mcp_metrics__metric_name__get","parameters":[{"in":"path","name":"metric_name","required":true,"schema":{"title":"Metric Name","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPMetricResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Metric Definition","tags":["MCP Admin - Metrics"]}},"/api/v1/admin/mcp/ops/bookings/recent":{"get":{"description":"Get recent bookings with optional filters.\n\nReturns a list of bookings with privacy-safe names.","operationId":"get_recent_bookings_api_v1_admin_mcp_ops_bookings_recent_get","parameters":[{"description":"Filter by status: confirmed, completed, cancelled, pending","in":"query","name":"status","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status: confirmed, completed, cancelled, pending","title":"Status"}},{"description":"Max results (max 100)","in":"query","name":"limit","required":false,"schema":{"default":20,"description":"Max results (max 100)","maximum":100,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Look back window in hours (max 168 = 1 week)","in":"query","name":"hours","required":false,"schema":{"default":24,"description":"Look back window in hours (max 168 = 1 week)","maximum":168,"minimum":1,"title":"Hours","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecentBookingsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Recent Bookings","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/ops/bookings/summary":{"get":{"description":"Get booking summary for a time period.\n\nReturns total bookings, revenue, breakdown by status, and top categories.","operationId":"get_booking_summary_api_v1_admin_mcp_ops_bookings_summary_get","parameters":[{"description":"Time period: today, yesterday, this_week, last_7_days, this_month","in":"query","name":"period","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingPeriod"},{"type":"null"}],"description":"Time period: today, yesterday, this_week, last_7_days, this_month","title":"Period"}},{"description":"Start date (YYYY-MM-DD) for a custom range (inclusive).","in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"Start date (YYYY-MM-DD) for a custom range (inclusive).","title":"Start Date"}},{"description":"End date (YYYY-MM-DD) for a custom range (inclusive).","in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"End date (YYYY-MM-DD) for a custom range (inclusive).","title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Booking Summary","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/ops/payments/pending-payouts":{"get":{"description":"Get instructors with pending payouts.\n\nReturns instructors awaiting transfer with amount and lesson count.","operationId":"get_pending_payouts_api_v1_admin_mcp_ops_payments_pending_payouts_get","parameters":[{"description":"Max results (max 100)","in":"query","name":"limit","required":false,"schema":{"default":20,"description":"Max results (max 100)","maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingPayoutsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Pending Payouts","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/ops/payments/pipeline":{"get":{"description":"Get payment pipeline status.\n\nReturns counts of payments in each state, alerts, and revenue metrics.","operationId":"get_payment_pipeline_api_v1_admin_mcp_ops_payments_pipeline_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentPipelineResponse"}}},"description":"Successful Response"}},"summary":"Get Payment Pipeline","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/ops/users/lookup":{"get":{"description":"Look up a user by email, phone, or ID.\n\nReturns user profile and stats for support purposes.\nFull name is shown (admin access).","operationId":"lookup_user_api_v1_admin_mcp_ops_users_lookup_get","parameters":[{"description":"Email, phone number, or user ID","in":"query","name":"identifier","required":true,"schema":{"description":"Email, phone number, or user ID","title":"Identifier","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLookupResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Lookup User","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/ops/users/{user_id}/bookings":{"get":{"description":"Get a user's booking history.\n\nReturns bookings as student or instructor depending on user role.","operationId":"get_user_booking_history_api_v1_admin_mcp_ops_users__user_id__bookings_get","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}},{"description":"Max results (max 100)","in":"query","name":"limit","required":false,"schema":{"default":20,"description":"Max results (max 100)","maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserBookingHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get User Booking History","tags":["MCP Admin - Operations"]}},"/api/v1/admin/mcp/payments/timeline":{"get":{"description":"Get a redacted payment timeline for a booking or user.\n\nProvide either booking_id or user_id (student). Time filtering supports\nsince_hours or explicit start_time/end_time.","operationId":"get_payment_timeline_api_v1_admin_mcp_payments_timeline_get","parameters":[{"description":"Booking ID to inspect","in":"query","name":"booking_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Booking ID to inspect","title":"Booking Id"}},{"description":"User ID (student) to inspect","in":"query","name":"user_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID (student) to inspect","title":"User Id"}},{"in":"query","name":"since_days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Since Days","type":"integer"}},{"in":"query","name":"since_hours","required":false,"schema":{"anyOf":[{"maximum":8760,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Since Hours"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminPaymentTimelineResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Payment Timeline","tags":["MCP Admin - Payments"]}},"/api/v1/admin/mcp/refunds/execute":{"post":{"description":"Execute a previously previewed refund using confirm token.","operationId":"execute_refund_api_v1_admin_mcp_refunds_execute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundExecuteRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundExecuteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Execute Refund","tags":["MCP Admin - Refunds"]}},"/api/v1/admin/mcp/refunds/preview":{"post":{"description":"Preview a refund to see eligibility and impact before executing.","operationId":"preview_refund_api_v1_admin_mcp_refunds_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundPreviewRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundPreviewResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Preview Refund","tags":["MCP Admin - Refunds"]}},"/api/v1/admin/mcp/search/top-queries":{"get":{"operationId":"get_top_queries_api_v1_admin_mcp_search_top_queries_get","parameters":[{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"End Date"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"min_count","required":false,"schema":{"default":2,"maximum":1000,"minimum":1,"title":"Min Count","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPTopQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Top Queries","tags":["MCP Admin - Search"]}},"/api/v1/admin/mcp/search/zero-results":{"get":{"operationId":"get_zero_result_queries_api_v1_admin_mcp_search_zero_results_get","parameters":[{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"End Date"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPZeroResultsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Zero Result Queries","tags":["MCP Admin - Search"]}},"/api/v1/admin/mcp/services/catalog":{"get":{"description":"List all services with canonical slugs and category mappings.","operationId":"list_service_catalog_api_v1_admin_mcp_services_catalog_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPServiceCatalogResponse"}}},"description":"Successful Response"}},"summary":"List Service Catalog","tags":["MCP Admin - Services"]}},"/api/v1/admin/mcp/services/lookup":{"get":{"description":"Resolve a service name or slug to canonical service records.","operationId":"lookup_service_catalog_api_v1_admin_mcp_services_lookup_get","parameters":[{"description":"Service name or slug to resolve","in":"query","name":"q","required":true,"schema":{"description":"Service name or slug to resolve","minLength":2,"title":"Q","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPServiceLookupResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Lookup Service Catalog","tags":["MCP Admin - Services"]}},"/api/v1/admin/mcp/webhooks":{"get":{"operationId":"list_webhooks_api_v1_admin_mcp_webhooks_get","parameters":[{"in":"query","name":"source","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"event_type","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Type"}},{"in":"query","name":"since_hours","required":false,"schema":{"default":24,"maximum":168,"minimum":1,"title":"Since Hours","type":"integer"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPWebhookListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Webhooks","tags":["MCP Admin - Webhooks"]}},"/api/v1/admin/mcp/webhooks/failed":{"get":{"operationId":"list_failed_webhooks_api_v1_admin_mcp_webhooks_failed_get","parameters":[{"in":"query","name":"source","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},{"in":"query","name":"since_hours","required":false,"schema":{"default":24,"maximum":168,"minimum":1,"title":"Since Hours","type":"integer"}},{"in":"query","name":"start_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Start Time"}},{"in":"query","name":"end_time","required":false,"schema":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"End Time"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPWebhookFailedResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Failed Webhooks","tags":["MCP Admin - Webhooks"]}},"/api/v1/admin/mcp/webhooks/{event_id}":{"get":{"operationId":"webhook_detail_api_v1_admin_mcp_webhooks__event_id__get","parameters":[{"in":"path","name":"event_id","required":true,"schema":{"title":"Event Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPWebhookDetailResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Webhook Detail","tags":["MCP Admin - Webhooks"]}},"/api/v1/admin/mcp/webhooks/{event_id}/replay":{"post":{"operationId":"replay_webhook_api_v1_admin_mcp_webhooks__event_id__replay_post","parameters":[{"in":"path","name":"event_id","required":true,"schema":{"title":"Event Id","type":"string"}},{"in":"query","name":"dry_run","required":false,"schema":{"default":true,"title":"Dry Run","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MCPWebhookReplayResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Replay Webhook","tags":["MCP Admin - Webhooks"]}},"/api/v1/admin/referrals/config":{"get":{"description":"Get referral configuration (admin only).","operationId":"get_referral_config_api_v1_admin_referrals_config_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminReferralsConfigOut"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Referral Config","tags":["admin","referrals-v1"]}},"/api/v1/admin/referrals/health":{"get":{"description":"Get referral system health (admin only).","operationId":"get_referral_health_api_v1_admin_referrals_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminReferralsHealthOut"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Referral Health","tags":["admin","referrals-v1"]}},"/api/v1/admin/referrals/summary":{"get":{"description":"Get referral summary statistics (admin only).","operationId":"get_referral_summary_api_v1_admin_referrals_summary_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminReferralsSummaryOut"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Referral Summary","tags":["admin","referrals-v1"]}},"/api/v1/admin/search-config":{"get":{"operationId":"get_search_config_admin_api_v1_admin_search_config_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSearchConfigResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Config Admin","tags":["admin-search-config"]},"post":{"operationId":"update_search_config_admin_api_v1_admin_search_config_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSearchConfigUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSearchConfigResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Search Config Admin","tags":["admin-search-config"]}},"/api/v1/admin/search-config/reset":{"post":{"operationId":"reset_search_config_admin_api_v1_admin_search_config_reset_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSearchConfigResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Search Config Admin","tags":["admin-search-config"]}},"/api/v1/analytics/codebase/history":{"get":{"description":"Return historical metrics from metrics_history.json if present.","operationId":"get_codebase_metrics_history_api_v1_analytics_codebase_history_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodebaseHistoryResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Codebase Metrics History","tags":["analytics"]}},"/api/v1/analytics/codebase/history/append":{"post":{"description":"Append current snapshot to metrics_history.json to persist trends.","operationId":"append_codebase_metrics_history_api_v1_analytics_codebase_history_append_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppendHistoryResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Append Codebase Metrics History","tags":["analytics"]}},"/api/v1/analytics/codebase/metrics":{"get":{"description":"Return the current codebase metrics as JSON.","operationId":"get_codebase_metrics_api_v1_analytics_codebase_metrics_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodebaseMetricsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Codebase Metrics","tags":["analytics"]}},"/api/v1/analytics/export":{"post":{"description":"Export analytics data in various formats.\n\nRequires EXPORT_ANALYTICS permission.\n\nArgs:\n    format: Export format (csv, xlsx, json)\n    current_user: The authenticated user with required permissions\n\nReturns:\n    Exported data or download link","operationId":"export_analytics_api_v1_analytics_export_post","parameters":[{"in":"query","name":"format","required":false,"schema":{"default":"csv","title":"Format","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExportAnalyticsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export Analytics","tags":["analytics"]}},"/api/v1/analytics/search/candidates/category-trends":{"get":{"description":"Get candidate counts by date and category.","operationId":"candidates_category_trends_api_v1_analytics_search_candidates_category_trends_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateCategoryTrendsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Category Trends","tags":["analytics"]}},"/api/v1/analytics/search/candidates/queries":{"get":{"description":"List queries that produced candidates for a given service (recent first).","operationId":"candidate_service_queries_api_v1_analytics_search_candidates_queries_get","parameters":[{"in":"query","name":"service_catalog_id","required":true,"schema":{"title":"Service Catalog Id","type":"string"}},{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateServiceQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidate Service Queries","tags":["analytics"]}},"/api/v1/analytics/search/candidates/score-distribution":{"get":{"description":"Get candidate score distribution.","operationId":"candidates_score_distribution_api_v1_analytics_search_candidates_score_distribution_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateScoreDistributionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Score Distribution","tags":["analytics"]}},"/api/v1/analytics/search/candidates/summary":{"get":{"description":"Get summary statistics for search candidates.","operationId":"candidates_summary_api_v1_analytics_search_candidates_summary_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Summary","tags":["analytics"]}},"/api/v1/analytics/search/candidates/top-services":{"get":{"description":"Get top services by candidate count.","operationId":"candidates_top_services_api_v1_analytics_search_candidates_top_services_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateTopServicesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Candidates Top Services","tags":["analytics"]}},"/api/v1/analytics/search/conversion-metrics":{"get":{"description":"Get guest-to-user conversion metrics.\n\nReturns conversion rates and guest engagement data.","operationId":"get_conversion_metrics_api_v1_analytics_search_conversion_metrics_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionMetricsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Conversion Metrics","tags":["analytics"]}},"/api/v1/analytics/search/popular-searches":{"get":{"description":"Get most popular search queries.\n\nReturns search queries ordered by frequency with user counts and average results.","operationId":"get_popular_searches_api_v1_analytics_search_popular_searches_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PopularSearchesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Popular Searches","tags":["analytics"]}},"/api/v1/analytics/search/referrers":{"get":{"description":"Get pages that drive searches (referrers).\n\nReturns referrer pages with search counts and unique sessions.","operationId":"get_search_referrers_api_v1_analytics_search_referrers_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchReferrersResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Referrers","tags":["analytics"]}},"/api/v1/analytics/search/search-analytics-summary":{"get":{"description":"Get comprehensive search analytics summary.\n\nReturns totals, user breakdown, search types, conversions, and performance metrics.","operationId":"get_search_analytics_summary_api_v1_analytics_search_search_analytics_summary_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchAnalyticsSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Analytics Summary","tags":["analytics"]}},"/api/v1/analytics/search/search-performance":{"get":{"description":"Get search performance metrics.\n\nReturns result distribution, effectiveness metrics, and problematic queries.","operationId":"get_search_performance_api_v1_analytics_search_search_performance_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchPerformanceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Performance","tags":["analytics"]}},"/api/v1/analytics/search/search-trends":{"get":{"description":"Get search trends over time.\n\nReturns daily search counts, unique users, and unique guests.","operationId":"get_search_trends_api_v1_analytics_search_search_trends_get","parameters":[{"in":"query","name":"days","required":false,"schema":{"default":30,"maximum":365,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchTrendsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Search Trends","tags":["analytics"]}},"/api/v1/auth/change-password":{"post":{"description":"Change password for the current authenticated user.\n\nVerifies the current password, enforces minimal strength, and updates the hash.","operationId":"change_password_api_v1_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Change Password","tags":["auth-v1"]}},"/api/v1/auth/login":{"post":{"description":"Login with username (email) and password.\n\nRate limited to prevent brute force attacks.\n\nPERFORMANCE OPTIMIZATION: This endpoint releases the DB connection BEFORE\nrunning Argon2id verification (~200ms). This reduces DB connection hold time\nfrom ~200ms to ~5-20ms, allowing 10x more concurrent logins.\n\nArgs:\n    form_data: OAuth2 form with username and password\n    auth_service: Authentication service\n\nReturns:\n    LoginResponse: Login result metadata for the client\n\nRaises:\n    HTTPException: If credentials are invalid or rate limit exceeded","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_v1_auth_login_post"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Login","tags":["auth-v1"]}},"/api/v1/auth/login-with-session":{"post":{"description":"Login with email and password, optionally converting guest searches.\n\nThis endpoint supports guest session conversion.\n\nPERFORMANCE OPTIMIZATION: This endpoint releases the DB connection BEFORE\nrunning Argon2id verification (~200ms). This reduces DB connection hold time\nfrom ~200ms to ~5-20ms, allowing 10x more concurrent logins.\n\nArgs:\n    login_data: Login credentials with optional guest_session_id\n    auth_service: Authentication service\n    db: Database session (used only for guest search conversion after auth)\n\nReturns:\n    LoginResponse: Login result metadata for the client\n\nRaises:\n    HTTPException: If credentials are invalid or rate limit exceeded","operationId":"login_with_session_api_v1_auth_login_with_session_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Login With Session","tags":["auth-v1"]}},"/api/v1/auth/me":{"get":{"description":"Get current user information with roles and permissions.\n\nPERFORMANCE OPTIMIZED (v4.4): Uses cached User from auth dependency.\n- Auth cache provides user with roles, permissions, AND beta_access (0 queries if cached)\n- Previous (v4.3): 1 query for beta_access, took 1322ms under 200 concurrent users\n- Now: ZERO queries when cache is warm, typically <5ms\n\nArgs:\n    current_user: User object from auth cache (has roles, permissions, beta_access cached)\n    db: Database session (unused, kept for signature compatibility)\n\nReturns:\n    AuthUserWithPermissionsResponse: Current user data with roles and permissions","operationId":"read_users_me_api_v1_auth_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUserWithPermissionsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Read Users Me","tags":["auth-v1"]},"patch":{"description":"Update current user's profile (including timezone).\n\nArgs:\n    user_update: Fields to update\n    current_user: Current user identifier from JWT\n    auth_service: Authentication service\n    db: Database session\n\nReturns:\n    AuthUserWithPermissionsResponse: Updated user data\n\nRaises:\n    HTTPException: If user not found or update fails","operationId":"update_current_user_api_v1_auth_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUserWithPermissionsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Current User","tags":["auth-v1"]}},"/api/v1/auth/refresh":{"post":{"description":"Rotate refresh token and issue a new access token.","operationId":"refresh_session_token_api_v1_auth_refresh_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionRefreshResponse"}}},"description":"Successful Response"}},"summary":"Refresh Session Token","tags":["auth-v1"]}},"/api/v1/auth/register":{"post":{"description":"Register a new user. Always returns a generic response to prevent email enumeration.","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Register","tags":["auth-v1"]}},"/api/v1/beta/invites/consume":{"post":{"operationId":"consume_invite_api_v1_beta_invites_consume_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteConsumeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessGrantResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Consume Invite","tags":["beta"]}},"/api/v1/beta/invites/generate":{"post":{"operationId":"generate_invites_api_v1_beta_invites_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteGenerateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteGenerateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Generate Invites","tags":["beta"]}},"/api/v1/beta/invites/send":{"post":{"operationId":"send_invite_api_v1_beta_invites_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite","tags":["beta"]}},"/api/v1/beta/invites/send-batch":{"post":{"operationId":"send_invite_batch_api_v1_beta_invites_send_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite Batch","tags":["beta"]}},"/api/v1/beta/invites/send-batch-async":{"post":{"operationId":"send_invite_batch_async_api_v1_beta_invites_send_batch_async_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchAsyncStartResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Invite Batch Async","tags":["beta"]}},"/api/v1/beta/invites/send-batch-progress":{"get":{"operationId":"get_invite_batch_progress_api_v1_beta_invites_send_batch_progress_get","parameters":[{"in":"query","name":"task_id","required":true,"schema":{"title":"Task Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteBatchProgressResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Invite Batch Progress","tags":["beta"]}},"/api/v1/beta/invites/validate":{"get":{"operationId":"validate_invite_api_v1_beta_invites_validate_get","parameters":[{"in":"query","name":"code","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"}},{"in":"query","name":"invite_code","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invite Code"}},{"in":"query","name":"email","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteValidateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Validate Invite","tags":["beta"]}},"/api/v1/beta/invites/verified":{"get":{"operationId":"invite_verified_api_v1_beta_invites_verified_get","responses":{"204":{"description":"Successful Response"}},"summary":"Invite Verified","tags":["beta"]}},"/api/v1/beta/metrics/summary":{"get":{"description":"Lightweight summary derived from in-process counters.\n\nNote: Without Prometheus remote-read, we return cumulative counts observed since process start.","operationId":"get_beta_metrics_summary_api_v1_beta_metrics_summary_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaMetricsSummaryResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Beta Metrics Summary","tags":["beta"]}},"/api/v1/beta/settings":{"get":{"operationId":"get_beta_settings_api_v1_beta_settings_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Beta Settings","tags":["beta"]},"put":{"operationId":"update_beta_settings_api_v1_beta_settings_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BetaSettingsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Beta Settings","tags":["beta"]}},"/api/v1/bookings":{"get":{"description":"Get bookings for the current user with advanced filtering.\n\nParameters:\n- status: Filter by specific booking status\n- upcoming/upcoming_only: Only return future bookings (accepts both parameter names)\n- exclude_future_confirmed: Exclude future confirmed bookings (for History tab)\n- include_past_confirmed: Include past confirmed bookings (for BookAgain)\n- page/per_page: Pagination parameters\n\nReturns: Standardized PaginatedResponse with BookingResponse items","operationId":"get_bookings_api_v1_bookings_get","parameters":[{"in":"query","name":"status","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingStatus"},{"type":"null"}],"title":"Status"}},{"in":"query","name":"upcoming_only","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Upcoming Only"}},{"in":"query","name":"upcoming","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Upcoming"}},{"in":"query","name":"exclude_future_confirmed","required":false,"schema":{"default":false,"title":"Exclude Future Confirmed","type":"boolean"}},{"in":"query","name":"include_past_confirmed","required":false,"schema":{"default":false,"title":"Include Past Confirmed","type":"boolean"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"per_page","required":false,"schema":{"default":20,"maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Bookings","tags":["bookings-v1"]},"post":{"description":"Create a booking with payment setup (Phase 2.1).\n\nTwo-step flow:\n1. Creates booking with 'pending_payment' status\n2. Returns SetupIntent client_secret for card collection\n3. Frontend collects card details\n4. Call /bookings/{id}/confirm-payment to complete\n\nRate limited per user to prevent booking spam.","operationId":"create_booking_api_v1_bookings_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreateResponse"}}},"description":"Successful Response"},"404":{"description":"Instructor or service not found"},"409":{"description":"Time slot not available"},"422":{"description":"Business rule violation (e.g., invalid duration)"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Booking","tags":["bookings-v1"]}},"/api/v1/bookings/check-availability":{"post":{"description":"Check if a time range is available for booking.\n\nRate limited to prevent abuse of expensive availability checks.","operationId":"check_availability_api_v1_bookings_check_availability_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCheckRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCheckResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Availability","tags":["bookings-v1"]}},"/api/v1/bookings/send-reminders":{"post":{"description":"Send 24-hour reminder emails for tomorrow's bookings.\n\nShould be called by scheduled job/cron.\nRate limited to prevent email spam.\n\nRequires: MANAGE_ALL_BOOKINGS permission (admin only)","operationId":"send_reminder_emails_api_v1_bookings_send_reminders_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendRemindersResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Reminder Emails","tags":["bookings-v1"]}},"/api/v1/bookings/stats":{"get":{"description":"Get booking statistics (requires instructor role).","operationId":"get_booking_stats_api_v1_bookings_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingStatsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Stats","tags":["bookings-v1"]}},"/api/v1/bookings/upcoming":{"get":{"description":"Get upcoming bookings for dashboard widget.","operationId":"get_upcoming_bookings_api_v1_bookings_upcoming_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":5,"maximum":20,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_UpcomingBookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Upcoming Bookings","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}":{"get":{"description":"Get full booking details with privacy protection for students.","operationId":"get_booking_details_api_v1_bookings__booking_id__get","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Details","tags":["bookings-v1"]},"patch":{"description":"Update booking details (instructor only).","operationId":"update_booking_api_v1_bookings__booking_id__patch","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Booking","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/cancel":{"post":{"description":"Cancel a booking.","operationId":"cancel_booking_api_v1_bookings__booking_id__cancel_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCancel"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Cancel Booking","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/complete":{"post":{"description":"Mark a booking as completed.\n\nRequires: COMPLETE_BOOKINGS permission (instructor only)","operationId":"complete_booking_api_v1_bookings__booking_id__complete_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"403":{"description":"Permission denied"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Complete Booking","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/confirm-payment":{"post":{"deprecated":true,"description":"Confirm payment method for a booking (Phase 2.1).\n\nDeprecated: use /api/v1/payments/checkout instead.","operationId":"confirm_booking_payment_api_v1_bookings__booking_id__confirm_payment_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingConfirmPayment"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Confirm Booking Payment","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/no-show":{"post":{"description":"Report a no-show for a booking.\n\n- Student can report instructor no-show\n- Admin can report either type\n- Must be within reporting window","operationId":"report_no_show_api_v1_bookings__booking_id__no_show_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoShowReportRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoShowReportResponse"}}},"description":"Successful Response"},"403":{"description":"Permission denied"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Report No Show","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/no-show/dispute":{"post":{"description":"Dispute a no-show report.\n\nOnly the accused party can dispute within 24 hours of report.","operationId":"dispute_no_show_api_v1_bookings__booking_id__no_show_dispute_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoShowDisputeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoShowDisputeResponse"}}},"description":"Successful Response"},"403":{"description":"Permission denied"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Dispute No Show","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/payment-method":{"patch":{"description":"Update booking payment method and retry authorization immediately.\n\n- Verifies ownership (student)\n- Saves payment method (optional set_as_default)\n- Retries authorization off-session (immediate if <24h)","operationId":"update_booking_payment_method_api_v1_bookings__booking_id__payment_method_patch","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingPaymentMethodUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Booking Payment Method","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/preview":{"get":{"description":"Get preview information for a booking.","operationId":"get_booking_preview_api_v1_bookings__booking_id__preview_get","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingPreviewResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Preview","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/pricing":{"get":{"description":"Return a pricing preview for the requested booking.","operationId":"get_booking_pricing_api_v1_bookings__booking_id__pricing_get","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}},{"in":"query","name":"applied_credit_cents","required":false,"schema":{"default":0,"minimum":0,"title":"Applied Credit Cents","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingPreviewOut"}}},"description":"Successful Response"},"403":{"description":"Access denied"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Booking Pricing","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/reschedule":{"post":{"description":"Reschedule flow (server-orchestrated):\n- Validates access to the original booking\n- Cancels the original booking according to policy\n- Creates a new booking with the requested time\n- Returns the new booking","operationId":"reschedule_booking_api_v1_bookings__booking_id__reschedule_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRescheduleRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"409":{"description":"Time conflict"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reschedule Booking","tags":["bookings-v1"]}},"/api/v1/bookings/{booking_id}/retry-payment":{"post":{"description":"Retry payment authorization after a failed attempt.","operationId":"retry_payment_authorization_api_v1_bookings__booking_id__retry_payment_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryPaymentResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Retry Payment Authorization","tags":["bookings-v1"]}},"/api/v1/catalog/categories":{"get":{"description":"All active categories with subcategory counts. Cached 1hr.","operationId":"list_categories_api_v1_catalog_categories_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategorySummary"},"title":"Response List Categories Api V1 Catalog Categories Get","type":"array"}}},"description":"Successful Response"}},"summary":"List Categories","tags":["catalog-v1"]}},"/api/v1/catalog/categories/{category_slug}":{"get":{"description":"Category detail with subcategory listing. Cached 1hr.","operationId":"get_category_api_v1_catalog_categories__category_slug__get","parameters":[{"in":"path","name":"category_slug","required":true,"schema":{"maxLength":100,"pattern":"^[a-z0-9]+(?:-[a-z0-9]+)*$","title":"Category Slug","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryDetail"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Category","tags":["catalog-v1"]}},"/api/v1/catalog/categories/{category_slug}/{subcategory_slug}":{"get":{"description":"Subcategory detail with services and filters. Cached 30min.","operationId":"get_subcategory_api_v1_catalog_categories__category_slug___subcategory_slug__get","parameters":[{"in":"path","name":"category_slug","required":true,"schema":{"maxLength":100,"pattern":"^[a-z0-9]+(?:-[a-z0-9]+)*$","title":"Category Slug","type":"string"}},{"in":"path","name":"subcategory_slug","required":true,"schema":{"maxLength":100,"pattern":"^[a-z0-9]+(?:-[a-z0-9]+)*$","title":"Subcategory Slug","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubcategoryDetail"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Subcategory","tags":["catalog-v1"]}},"/api/v1/catalog/services/{service_id}":{"get":{"description":"Single service detail. Cached 30min.","operationId":"get_service_api_v1_catalog_services__service_id__get","parameters":[{"in":"path","name":"service_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Service Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCatalogDetail"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Service","tags":["catalog-v1"]}},"/api/v1/catalog/subcategories/{subcategory_id}/filters":{"get":{"description":"Filter definitions for a subcategory. Cached 1hr.","operationId":"get_subcategory_filters_api_v1_catalog_subcategories__subcategory_id__filters_get","parameters":[{"in":"path","name":"subcategory_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Subcategory Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SubcategoryFilterResponse"},"title":"Response Get Subcategory Filters Api V1 Catalog Subcategories  Subcategory Id  Filters Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Subcategory Filters","tags":["catalog-v1"]}},"/api/v1/catalog/subcategories/{subcategory_id}/services":{"get":{"description":"Services in a subcategory. Cached 30min.","operationId":"list_services_for_subcategory_api_v1_catalog_subcategories__subcategory_id__services_get","parameters":[{"in":"path","name":"subcategory_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Subcategory Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ServiceCatalogSummary"},"title":"Response List Services For Subcategory Api V1 Catalog Subcategories  Subcategory Id  Services Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Services For Subcategory","tags":["catalog-v1"]}},"/api/v1/config/pricing":{"get":{"description":"Return the current pricing configuration for client consumption.","operationId":"get_public_pricing_config_api_v1_config_pricing_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingConfigResponse"}}},"description":"Successful Response"}},"summary":"Get Public Pricing Config","tags":["config"]}},"/api/v1/config/public":{"get":{"description":"Return public platform configuration for frontend display.","operationId":"get_public_config_api_v1_config_public_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicConfigResponse"}}},"description":"Successful Response"}},"summary":"Get Public Config","tags":["config"]}},"/api/v1/conversations":{"get":{"description":"List all conversations for the current user.\n\nReturns one entry per conversation partner, sorted by most recent message.","operationId":"list_conversations_api_v1_conversations_get","parameters":[{"in":"query","name":"state","required":false,"schema":{"anyOf":[{"pattern":"^(active|archived|trashed)$","type":"string"},{"type":"null"}],"title":"State"}},{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":50,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Pagination cursor (ISO timestamp)","in":"query","name":"cursor","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Pagination cursor (ISO timestamp)","title":"Cursor"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Conversations","tags":["conversations-v1"]},"post":{"description":"Create a new conversation (for pre-booking messaging).\n\nIf conversation already exists, returns the existing one.\nOnly students can initiate conversations with instructors.","operationId":"create_conversation_api_v1_conversations_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConversationRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConversationResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Conversation","tags":["conversations-v1"]}},"/api/v1/conversations/{conversation_id}":{"get":{"description":"Get details for a single conversation.","operationId":"get_conversation_api_v1_conversations__conversation_id__get","parameters":[{"in":"path","name":"conversation_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Conversation Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationDetail"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Conversation","tags":["conversations-v1"]}},"/api/v1/conversations/{conversation_id}/messages":{"get":{"description":"Get messages for a conversation with pagination.\n\nMessages are returned in chronological order (oldest first).\nUse 'before' cursor to load older messages.","operationId":"get_messages_api_v1_conversations__conversation_id__messages_get","parameters":[{"in":"path","name":"conversation_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Conversation Id","type":"string"}},{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Cursor for pagination (message ID)","in":"query","name":"before","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Cursor for pagination (message ID)","title":"Before"}},{"description":"Filter by booking ID","in":"query","name":"booking_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by booking ID","title":"Booking Id"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessagesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Messages","tags":["conversations-v1"]},"post":{"description":"Send a message in a conversation.\n\nOptionally specify a booking_id for explicit context.\nIf not specified, auto-tags when exactly one upcoming booking exists.","operationId":"send_message_api_v1_conversations__conversation_id__messages_post","parameters":[{"in":"path","name":"conversation_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Conversation Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Message","tags":["conversations-v1"]}},"/api/v1/conversations/{conversation_id}/state":{"put":{"description":"Update per-user conversation state (active/archived/trashed).","operationId":"update_conversation_state_api_v1_conversations__conversation_id__state_put","parameters":[{"in":"path","name":"conversation_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Conversation Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConversationStateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConversationStateResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Conversation State","tags":["conversations-v1"]}},"/api/v1/conversations/{conversation_id}/typing":{"post":{"description":"Send typing indicator for a conversation.","operationId":"send_typing_indicator_api_v1_conversations__conversation_id__typing_post","parameters":[{"in":"path","name":"conversation_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Conversation Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TypingRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Send Typing Indicator","tags":["conversations-v1"]}},"/api/v1/database/health":{"get":{"description":"Simple database health check endpoint.\n\nNo authentication required - helps verify database connectivity.\n\nReturns:\n    Database connection status","operationId":"database_health_api_v1_database_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Database Health","tags":["monitoring"]}},"/api/v1/database/pool-status":{"get":{"description":"Get detailed database connection pool statistics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Connection pool metrics including:\n    - Active connections\n    - Available connections\n    - Pool configuration\n    - Usage percentage","operationId":"database_pool_status_api_v1_database_pool_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabasePoolStatusResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Database Pool Status","tags":["monitoring"]}},"/api/v1/database/stats":{"get":{"description":"Get comprehensive database statistics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Database metrics including pool status and performance indicators","operationId":"database_stats_api_v1_database_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseStatsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Database Stats","tags":["monitoring"]}},"/api/v1/favorites":{"get":{"description":"Get the current user's list of favorited instructors.\n\nArgs:\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoritesList with favorited instructors\n\nRaises:\n    HTTPException: If user not found","operationId":"get_favorites_api_v1_favorites_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoritesList"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Favorites","tags":["favorites-v1"]}},"/api/v1/favorites/check/{instructor_id}":{"get":{"description":"Check if the current user has favorited a specific instructor.\n\nArgs:\n    instructor_id: ID of the instructor to check\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    Dictionary with is_favorited boolean\n\nRaises:\n    HTTPException: If user not found","operationId":"check_favorite_status_api_v1_favorites_check__instructor_id__get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Check Favorite Status","tags":["favorites-v1"]}},"/api/v1/favorites/{instructor_id}":{"delete":{"description":"Remove an instructor from the current user's favorites.\n\nArgs:\n    instructor_id: ID of the instructor to unfavorite\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoriteResponse with success status\n\nRaises:\n    HTTPException: If validation fails or user not found","operationId":"remove_favorite_api_v1_favorites__instructor_id__delete","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Remove Favorite","tags":["favorites-v1"]},"post":{"description":"Add an instructor to the current user's favorites.\n\nArgs:\n    instructor_id: ID of the instructor to favorite\n    current_user: Current authenticated user email\n    db: Database session\n    favorites_service: Favorites service instance\n\nReturns:\n    FavoriteResponse with success status\n\nRaises:\n    HTTPException: If validation fails or user not found","operationId":"add_favorite_api_v1_favorites__instructor_id__post","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoriteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Favorite","tags":["favorites-v1"]}},"/api/v1/gated/ping":{"get":{"operationId":"gated_ping_api_v1_gated_ping_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GatedPingResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Gated Ping","tags":["gated"]}},"/api/v1/health":{"get":{"description":"Health check endpoint.\n\nReturns basic health status including service info and environment.\nUsed by load balancers and monitoring systems.","operationId":"health_check_api_v1_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}},"description":"Successful Response"}},"summary":"Health Check","tags":["health"]}},"/api/v1/health/lite":{"get":{"description":"Lightweight health check that doesn't hit database.\n\nUse this for high-frequency health probes.","operationId":"health_check_lite_api_v1_health_lite_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthLiteResponse"}}},"description":"Successful Response"}},"summary":"Health Check Lite","tags":["health"]}},"/api/v1/health/rate-limit-test":{"get":{"description":"Public endpoint for CI rate limit testing.\n\nHas a strict 3/minute rate limit per IP.\nUsed by env-contract CI workflow to verify rate limiting is active.","operationId":"rate_limit_test_api_v1_health_rate_limit_test_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthLiteResponse"}}},"description":"Successful Response"}},"summary":"Rate Limit Test","tags":["health"]}},"/api/v1/instructor-bookings":{"get":{"description":"List instructor bookings with filters.","operationId":"list_instructor_bookings_api_v1_instructor_bookings_get","parameters":[{"description":"Filter by booking status (COMPLETED, CONFIRMED, etc.)","in":"query","name":"status","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingStatus"},{"type":"null"}],"description":"Filter by booking status (COMPLETED, CONFIRMED, etc.)","title":"Status"}},{"description":"Only include upcoming confirmed bookings","in":"query","name":"upcoming","required":false,"schema":{"default":false,"description":"Only include upcoming confirmed bookings","title":"Upcoming","type":"boolean"}},{"description":"Exclude future confirmed bookings (for History tab)","in":"query","name":"exclude_future_confirmed","required":false,"schema":{"default":false,"description":"Exclude future confirmed bookings (for History tab)","title":"Exclude Future Confirmed","type":"boolean"}},{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}},{"description":"Include past confirmed bookings (for BookAgain)","in":"query","name":"include_past_confirmed","required":false,"schema":{"default":false,"description":"Include past confirmed bookings (for BookAgain)","title":"Include Past Confirmed","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Instructor Bookings","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-bookings/completed":{"get":{"description":"Get instructor's completed bookings.","operationId":"get_completed_bookings_api_v1_instructor_bookings_completed_get","parameters":[{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Completed Bookings","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-bookings/pending-completion":{"get":{"description":"Get all bookings that are pending completion by the instructor.\n\nReturns bookings that:\n- Are confirmed status\n- Have ended (based on date/time)\n- Haven't been marked complete yet","operationId":"get_pending_completion_bookings_api_v1_instructor_bookings_pending_completion_get","parameters":[{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Pending Completion Bookings","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-bookings/upcoming":{"get":{"description":"Return instructor's upcoming confirmed bookings.","operationId":"get_upcoming_bookings_api_v1_instructor_bookings_upcoming_get","parameters":[{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_BookingResponse_"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Upcoming Bookings","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-bookings/{booking_id}/complete":{"post":{"description":"Mark a lesson as completed by the instructor.\n\nThis triggers the 24-hour payment capture timer. The payment will be\ncaptured 24 hours after this endpoint is called, giving the student\ntime to dispute if needed.\n\nArgs:\n    booking_id: The booking to mark as complete\n    notes: Optional completion notes from instructor\n\nReturns:\n    Updated booking information\n\nRaises:\n    404: Booking not found\n    422: Booking cannot be marked complete (wrong status, not instructor's booking)","operationId":"mark_lesson_complete_api_v1_instructor_bookings__booking_id__complete_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}},{"in":"query","name":"notes","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark Lesson Complete","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-bookings/{booking_id}/dispute":{"post":{"description":"Dispute a lesson completion as an instructor.\n\nUsed when a student marks a lesson as complete but the instructor disagrees.\nThis pauses payment capture pending resolution.\n\nArgs:\n    booking_id: The booking to dispute\n    reason: Reason for disputing the completion\n\nReturns:\n    Updated booking information","operationId":"dispute_completion_api_v1_instructor_bookings__booking_id__dispute_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_dispute_completion_api_v1_instructor_bookings__booking_id__dispute_post"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}},"description":"Successful Response"},"404":{"description":"Booking not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Dispute Completion","tags":["instructor-bookings-v1"]}},"/api/v1/instructor-referrals/founding-status":{"get":{"description":"Public endpoint to check founding phase status.","operationId":"get_founding_status_api_v1_instructor_referrals_founding_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoundingStatusResponse"}}},"description":"Successful Response"}},"summary":"Get Founding Status","tags":["instructor-referrals-v1"]}},"/api/v1/instructor-referrals/popup-data":{"get":{"description":"Get data for the referral popup shown after go-live.","operationId":"get_popup_data_api_v1_instructor_referrals_popup_data_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PopupDataResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Popup Data","tags":["instructor-referrals-v1"]}},"/api/v1/instructor-referrals/referred":{"get":{"description":"Get list of instructors referred by the current user.","operationId":"get_referred_instructors_api_v1_instructor_referrals_referred_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"minimum":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferredInstructorsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Referred Instructors","tags":["instructor-referrals-v1"]}},"/api/v1/instructor-referrals/stats":{"get":{"description":"Get current instructor's referral stats.","operationId":"get_referral_stats_api_v1_instructor_referrals_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralStatsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Referral Stats","tags":["instructor-referrals-v1"]}},"/api/v1/instructors":{"get":{"description":"Get instructors offering a specific service.\n\nService-first model: service_catalog_id is required.\nAdditional filters:\n- min_price/max_price: Price range filtering for the specified service\n\nReturns a standardized paginated response with 'items' field.","operationId":"list_instructors_api_v1_instructors_get","parameters":[{"description":"Service catalog ID (required)","in":"query","name":"service_catalog_id","required":true,"schema":{"description":"Service catalog ID (required)","title":"Service Catalog Id","type":"string"}},{"description":"Minimum hourly rate","in":"query","name":"min_price","required":false,"schema":{"description":"Minimum hourly rate","maximum":1000,"minimum":0,"title":"Min Price","type":"number"}},{"description":"Maximum hourly rate","in":"query","name":"max_price","required":false,"schema":{"description":"Maximum hourly rate","maximum":1000,"minimum":0,"title":"Max Price","type":"number"}},{"description":"Filter by age group: 'kids' or 'adults'","in":"query","name":"age_group","required":false,"schema":{"description":"Filter by age group: 'kids' or 'adults'","title":"Age Group","type":"string"}},{"description":"Comma-separated skill levels (beginner,intermediate,advanced)","in":"query","name":"skill_level","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated skill levels (beginner,intermediate,advanced)","title":"Skill Level"}},{"description":"Optional subcategory ULID context","in":"query","name":"subcategory_id","required":false,"schema":{"anyOf":[{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","type":"string"},{"type":"null"}],"description":"Optional subcategory ULID context","title":"Subcategory Id"}},{"description":"Pipe-delimited taxonomy content filters in the format 'key:val1,val2|key2:val3'. Max 10 keys and 20 values per key.","in":"query","name":"content_filters","required":false,"schema":{"anyOf":[{"maxLength":2000,"type":"string"},{"type":"null"}],"description":"Pipe-delimited taxonomy content filters in the format 'key:val1,val2|key2:val3'. Max 10 keys and 20 values per key.","title":"Content Filters"}},{"description":"Page number","in":"query","name":"page","required":false,"schema":{"default":1,"description":"Page number","minimum":1,"title":"Page","type":"integer"}},{"description":"Items per page","in":"query","name":"per_page","required":false,"schema":{"default":20,"description":"Items per page","maximum":100,"minimum":1,"title":"Per Page","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_InstructorProfileResponse_"}}},"description":"Successful Response"},"400":{"description":"Invalid filter parameters (e.g., max_price < min_price)"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"List Instructors","tags":["instructors-v1"]}},"/api/v1/instructors/availability":{"get":{"description":"Get all availability windows.\n\nCLEAN ARCHITECTURE: Returns only meaningful fields.\nNo legacy patterns.","operationId":"get_all_availability_api_v1_instructors_availability_get","parameters":[{"in":"query","name":"start_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"Start Date"}},{"in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AvailabilityWindowResponse"},"title":"Response Get All Availability Api V1 Instructors Availability Get","type":"array"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get All Availability","tags":["availability"]}},"/api/v1/instructors/availability/apply-to-date-range":{"post":{"description":"Apply a week's pattern to a date range.","operationId":"apply_to_date_range_api_v1_instructors_availability_apply_to_date_range_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyToDateRangeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyToDateRangeResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Apply To Date Range","tags":["availability"]}},"/api/v1/instructors/availability/blackout-dates":{"get":{"description":"Get instructor's blackout dates.","operationId":"get_blackout_dates_api_v1_instructors_availability_blackout_dates_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BlackoutDateResponse"},"title":"Response Get Blackout Dates Api V1 Instructors Availability Blackout Dates Get","type":"array"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Blackout Dates","tags":["availability"]},"post":{"description":"Add a blackout date (vacation/unavailable).","operationId":"add_blackout_date_api_v1_instructors_availability_blackout_dates_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackoutDateCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackoutDateResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Blackout Date","tags":["availability"]}},"/api/v1/instructors/availability/blackout-dates/{blackout_id}":{"delete":{"description":"Delete a blackout date.","operationId":"delete_blackout_date_api_v1_instructors_availability_blackout_dates__blackout_id__delete","parameters":[{"in":"path","name":"blackout_id","required":true,"schema":{"title":"Blackout Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteBlackoutResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Blackout Date","tags":["availability"]}},"/api/v1/instructors/availability/bulk-update":{"patch":{"description":"Bulk update availability slots.","operationId":"bulk_update_availability_api_v1_instructors_availability_bulk_update_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowBulkUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkUpdateResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"410":{"description":"Endpoint deprecated"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Bulk Update Availability","tags":["availability"]}},"/api/v1/instructors/availability/copy-week":{"post":{"description":"Copy availability from one week to another.","operationId":"copy_week_availability_api_v1_instructors_availability_copy_week_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CopyWeekRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CopyWeekResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Copy Week Availability","tags":["availability"]}},"/api/v1/instructors/availability/specific-date":{"post":{"description":"Add availability for a specific date.\n\nReturns clean response using schema.","operationId":"add_specific_date_availability_api_v1_instructors_availability_specific_date_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpecificDateAvailabilityCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Specific Date Availability","tags":["availability"]}},"/api/v1/instructors/availability/week":{"get":{"description":"Get availability for a specific week.\n\nReturns clean data structure without legacy fields.","operationId":"get_week_availability_api_v1_instructors_availability_week_get","parameters":[{"description":"Monday of the week","in":"query","name":"start_date","required":true,"schema":{"description":"Monday of the week","format":"date","title":"Start Date","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekAvailabilityResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Week Availability","tags":["availability"]},"post":{"description":"Save availability for specific dates in a week.\n\nClean implementation with proper cache warming.","operationId":"save_week_availability_api_v1_instructors_availability_week_post","parameters":[{"description":"Set to true to bypass version conflict checks when saving availability","in":"query","name":"override","required":false,"schema":{"default":false,"description":"Set to true to bypass version conflict checks when saving availability","title":"Override","type":"boolean"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekSpecificScheduleCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekAvailabilityUpdateResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"409":{"description":"Version conflict"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Save Week Availability","tags":["availability"]}},"/api/v1/instructors/availability/week/booked-slots":{"get":{"description":"Get all booked slots for a week with preview information.","operationId":"get_week_booked_slots_api_v1_instructors_availability_week_booked_slots_get","parameters":[{"description":"Start date (Monday) of the week","in":"query","name":"start_date","required":true,"schema":{"description":"Start date (Monday) of the week","format":"date","title":"Start Date","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookedSlotsResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Week Booked Slots","tags":["availability"]}},"/api/v1/instructors/availability/week/validate-changes":{"post":{"description":"Validate planned changes to week availability.","operationId":"validate_week_changes_api_v1_instructors_availability_week_validate_changes_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateWeekRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeekValidationResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Validate Week Changes","tags":["availability"]}},"/api/v1/instructors/availability/{window_id}":{"delete":{"description":"Delete an availability window.\n\nDEPRECATED: Individual window deletion not supported in bitmap storage.\nUse POST /api/v1/instructors/availability/week to remove windows from days.","operationId":"delete_availability_window_api_v1_instructors_availability__window_id__delete","parameters":[{"in":"path","name":"window_id","required":true,"schema":{"title":"Window Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteWindowResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"},"501":{"description":"Operation not supported"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Availability Window","tags":["availability"]},"patch":{"description":"Update an availability window.\n\nDEPRECATED: Individual window updates not supported in bitmap storage.\nUse POST /api/v1/instructors/availability/week to update entire days.","operationId":"update_availability_window_api_v1_instructors_availability__window_id__patch","parameters":[{"in":"path","name":"window_id","required":true,"schema":{"title":"Window Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityWindowResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"},"501":{"description":"Operation not supported"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Availability Window","tags":["availability"]}},"/api/v1/instructors/me":{"delete":{"description":"Delete instructor profile and revert to student role.","operationId":"delete_profile_api_v1_instructors_me_delete","responses":{"204":{"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor or insufficient permissions"},"404":{"description":"Profile not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Profile","tags":["instructors-v1"]},"get":{"description":"Get current instructor's profile.","operationId":"get_my_profile_api_v1_instructors_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor"},"404":{"description":"Profile not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get My Profile","tags":["instructors-v1"]},"post":{"description":"Create a new instructor profile.","operationId":"create_profile_api_v1_instructors_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"400":{"description":"Profile already exists or validation error"},"401":{"description":"Not authenticated"},"403":{"description":"Insufficient permissions"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Profile","tags":["instructors-v1"]},"put":{"description":"Update instructor profile.","operationId":"update_profile_api_v1_instructors_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor or insufficient permissions"},"404":{"description":"Profile not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Profile","tags":["instructors-v1"]}},"/api/v1/instructors/me/go-live":{"post":{"description":"Mark instructor profile as live if all prerequisites are met.\n\nPrerequisites:\n- Stripe Connect onboarding completed\n- Identity verification completed\n- At least one service configured\n- Background check passed","operationId":"go_live_api_v1_instructors_me_go_live_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"400":{"description":"Prerequisites not met for going live"},"401":{"description":"Not authenticated"},"403":{"description":"User is not an instructor or insufficient permissions"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Go Live","tags":["instructors-v1"]}},"/api/v1/instructors/{instructor_id}":{"get":{"description":"Get a specific instructor's profile by ID with privacy protection and favorite status.","operationId":"get_instructor_api_v1_instructors__instructor_id__get","parameters":[{"description":"Instructor user ULID (or instructor profile ULID)","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor user ULID (or instructor profile ULID)","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorProfileResponse"}}},"description":"Successful Response"},"404":{"description":"Instructor profile not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Instructor","tags":["instructors-v1"]}},"/api/v1/instructors/{instructor_id}/bgc/consent":{"post":{"description":"Persist the instructor's consent acknowledgement for FCRA compliance.","operationId":"record_background_check_consent_api_v1_instructors__instructor_id__bgc_consent_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentPayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Record Background Check Consent","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/invite":{"post":{"operationId":"trigger_background_check_invite_api_v1_instructors__instructor_id__bgc_invite_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackgroundCheckInviteRequest","description":"Optional configuration for the Checkr invitation"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackgroundCheckInviteResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Trigger Background Check Invite","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/mock/pass":{"post":{"description":"Non-production helper to mark background check as passed.","operationId":"mock_background_check_pass_api_v1_instructors__instructor_id__bgc_mock_pass_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockStatusResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mock Background Check Pass","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/mock/reset":{"post":{"description":"Non-production helper to reset background check metadata.","operationId":"mock_background_check_reset_api_v1_instructors__instructor_id__bgc_mock_reset_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockStatusResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mock Background Check Reset","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/mock/review":{"post":{"description":"Non-production helper to mark background check as under review.","operationId":"mock_background_check_review_api_v1_instructors__instructor_id__bgc_mock_review_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockStatusResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mock Background Check Review","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/recheck":{"post":{"operationId":"trigger_background_check_recheck_api_v1_instructors__instructor_id__bgc_recheck_post","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackgroundCheckInviteResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Trigger Background Check Recheck","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/bgc/status":{"get":{"operationId":"get_background_check_status_api_v1_instructors__instructor_id__bgc_status_get","parameters":[{"description":"Instructor profile ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor profile ULID","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackgroundCheckStatusResponse"}}},"description":"Successful Response"},"401":{"description":"Not authenticated"},"403":{"description":"User is not authorized to access this resource"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Background Check Status","tags":["instructors","background-checks"]}},"/api/v1/instructors/{instructor_id}/check-service-area":{"get":{"description":"Check whether coordinates fall within an instructor's service area.","operationId":"check_service_area_api_v1_instructors__instructor_id__check_service_area_get","parameters":[{"description":"Instructor user ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor user ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}},{"description":"Latitude","in":"query","name":"lat","required":true,"schema":{"description":"Latitude","maximum":90,"minimum":-90,"title":"Lat","type":"number"}},{"description":"Longitude","in":"query","name":"lng","required":true,"schema":{"description":"Longitude","maximum":180,"minimum":-180,"title":"Lng","type":"number"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceAreaCheckResponse"}}},"description":"Successful Response"},"400":{"description":"Invalid instructor ID"},"404":{"description":"Instructor not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Check Service Area","tags":["instructors-v1"]}},"/api/v1/instructors/{instructor_id}/coverage":{"get":{"description":"Get instructor service area coverage as GeoJSON.","operationId":"get_coverage_api_v1_instructors__instructor_id__coverage_get","parameters":[{"description":"Instructor user ULID (or instructor profile ULID)","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor user ULID (or instructor profile ULID)","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoverageFeatureCollectionResponse"}}},"description":"Successful Response"},"400":{"description":"Invalid instructor ID"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Coverage","tags":["instructors-v1"]}},"/api/v1/lessons/{booking_id}/join":{"post":{"description":"Join a video lesson.\n\nCreates the 100ms room on-demand and returns an auth token\nfor the frontend video SDK.","operationId":"join_lesson_api_v1_lessons__booking_id__join_post","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoJoinResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Join Lesson","tags":["lessons-v1"]}},"/api/v1/lessons/{booking_id}/video-session":{"get":{"description":"Get video session status for a booking.\n\nReturns session timing data if a video session exists.","operationId":"get_video_session_api_v1_lessons__booking_id__video_session_get","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/VideoSessionStatusResponse"},{"type":"null"}],"title":"Response Get Video Session Api V1 Lessons  Booking Id  Video Session Get"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Video Session","tags":["lessons-v1"]}},"/api/v1/messages/config":{"get":{"description":"Get public configuration values for the messaging UI.\n\nReturns:\n    MessageConfigResponse with edit_window_minutes and other config values.","operationId":"get_message_config_api_v1_messages_config_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageConfigResponse"}}},"description":"Message configuration"}},"summary":"Get Message Config","tags":["messages-v1"]}},"/api/v1/messages/mark-read":{"post":{"description":"Mark messages as read.\n\nCan mark specific messages or all messages in a conversation.\nRequires VIEW_MESSAGES permission.","operationId":"mark_messages_as_read_api_v1_messages_mark_read_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarkMessagesReadRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarkMessagesReadResponse"}}},"description":"Messages marked as read"},"400":{"description":"Validation error"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied"},"422":{"description":"Either conversation_id or message_ids must be provided"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark Messages As Read","tags":["messages-v1"]}},"/api/v1/messages/stream":{"get":{"description":"SSE endpoint for real-time message streaming - per-user inbox (v4.0).\n\nEstablishes a Server-Sent Events connection for receiving\nreal-time messages across ALL user's conversations.\n\nArchitecture (v4.0 with Broadcaster):\n- Single Redis PubSub connection shared across all SSE clients per worker\n- Enables 500+ concurrent SSE users instead of ~30 with per-connection pattern\n- Proper async waiting (no busy-wait polling)\n\nFeatures:\n- Redis Pub/Sub via Broadcaster (fan-out multiplexer)\n- Last-Event-ID support for automatic catch-up on reconnect\n- new_message events include SSE id: field\n- Heartbeat every 10 seconds\n- DB session explicitly closed before streaming (prevents idle_in_transaction)\n\nSupports Last-Event-ID header - when reconnecting, the client\nautomatically sends the last received message ID, and the server\nsends any missed messages from the database.\n\nRequires VIEW_MESSAGES permission.","operationId":"stream_user_messages_api_v1_messages_stream_get","parameters":[{"in":"query","name":"sse_token","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sse Token"}}],"responses":{"200":{"content":{"application/json":{"schema":{}}},"description":"SSE stream established for user's inbox"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"},"429":{"description":"Too many connection attempts"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Stream User Messages","tags":["messages-v1"]}},"/api/v1/messages/unread-count":{"get":{"description":"Get total unread message count for current user.\n\nRequires VIEW_MESSAGES permission.","operationId":"get_unread_count_api_v1_messages_unread_count_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnreadCountResponse"}}},"description":"Unread message count"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Unread Count","tags":["messages-v1"]}},"/api/v1/messages/{message_id}":{"delete":{"description":"Soft delete a message.\n\nOnly the sender can delete their own messages.\nRequires SEND_MESSAGES permission.","operationId":"delete_message_api_v1_messages__message_id__delete","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteMessageResponse"}}},"description":"Message deleted"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied or not message owner"},"404":{"description":"Message not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Message","tags":["messages-v1"]},"patch":{"description":"Edit a message.\n\nOnly the sender can edit their own messages within the edit window.\nRequires SEND_MESSAGES permission.","operationId":"edit_message_api_v1_messages__message_id__patch","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditMessageRequest"}}},"required":true},"responses":{"204":{"description":"Message edited"},"400":{"description":"Validation error (e.g., edit window expired)"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied or not message owner"},"404":{"description":"Message not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Edit Message","tags":["messages-v1"]}},"/api/v1/messages/{message_id}/reactions":{"delete":{"description":"Remove an emoji reaction from a message.\n\nRequires SEND_MESSAGES permission.\nRate limited to 10 per minute.","operationId":"remove_reaction_api_v1_messages__message_id__reactions_delete","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReactionRequest"}}},"required":true},"responses":{"204":{"description":"Reaction removed"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Remove Reaction","tags":["messages-v1"]},"post":{"description":"Add an emoji reaction to a message.\n\nRequires SEND_MESSAGES permission.\nRate limited to 10 per minute.","operationId":"add_reaction_api_v1_messages__message_id__reactions_post","parameters":[{"in":"path","name":"message_id","required":true,"schema":{"title":"Message Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReactionRequest"}}},"required":true},"responses":{"204":{"description":"Reaction added"},"401":{"description":"Not authenticated"},"403":{"description":"Permission denied"},"404":{"description":"Message not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Reaction","tags":["messages-v1"]}},"/api/v1/monitoring/alerts/acknowledge/{alert_type}":{"post":{"description":"Acknowledge an alert to reset its cooldown.","operationId":"acknowledge_alert_api_v1_monitoring_alerts_acknowledge__alert_type__post","parameters":[{"in":"path","name":"alert_type","required":true,"schema":{"title":"Alert Type","type":"string"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertAcknowledgeResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Acknowledge Alert","tags":["Monitoring"]}},"/api/v1/monitoring/alerts/live":{"get":{"description":"Get very recent alerts (similar to live view).","operationId":"get_live_alerts_api_v1_monitoring_alerts_live_get","parameters":[{"description":"Get alerts from last N minutes","in":"query","name":"minutes","required":false,"schema":{"default":5,"description":"Get alerts from last N minutes","title":"Minutes","type":"integer"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LiveAlertsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Live Alerts","tags":["monitoring"]}},"/api/v1/monitoring/alerts/recent":{"get":{"description":"Get recent alerts from the database.","operationId":"get_recent_alerts_api_v1_monitoring_alerts_recent_get","parameters":[{"description":"Get alerts from last N hours","in":"query","name":"hours","required":false,"schema":{"default":24,"description":"Get alerts from last N hours","title":"Hours","type":"integer"}},{"description":"Maximum number of alerts to return","in":"query","name":"limit","required":false,"schema":{"default":50,"description":"Maximum number of alerts to return","title":"Limit","type":"integer"}},{"description":"Filter by severity","in":"query","name":"severity","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by severity","title":"Severity"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecentAlertsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Recent Alerts","tags":["monitoring"]}},"/api/v1/monitoring/alerts/summary":{"get":{"description":"Get alert summary statistics.","operationId":"get_alert_summary_api_v1_monitoring_alerts_summary_get","parameters":[{"description":"Number of days to summarize","in":"query","name":"days","required":false,"schema":{"default":7,"description":"Number of days to summarize","title":"Days","type":"integer"}},{"in":"header","name":"x-api-key","required":true,"schema":{"title":"X-Api-Key","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertSummaryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Alert Summary","tags":["monitoring"]}},"/api/v1/monitoring/cache/extended-stats":{"get":{"description":"Get extended cache statistics.","operationId":"get_extended_cache_stats_api_v1_monitoring_cache_extended_stats_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtendedCacheStats"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Extended Cache Stats","tags":["Monitoring"]}},"/api/v1/monitoring/dashboard":{"get":{"description":"Get comprehensive monitoring dashboard data.\n\nRequires monitoring API key in production.","operationId":"get_monitoring_dashboard_api_v1_monitoring_dashboard_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitoringDashboardResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Monitoring Dashboard","tags":["Monitoring"]}},"/api/v1/monitoring/payment-health":{"get":{"description":"Get payment system health metrics.\n\nReturns metrics about:\n- Pending authorizations\n- Failed authorizations\n- Recent processing activity\n- System alerts\n\nRequires monitoring API key in production.","operationId":"get_payment_system_health_api_v1_monitoring_payment_health_get","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Payment System Health","tags":["Monitoring"]}},"/api/v1/monitoring/slow-queries":{"get":{"description":"Get recent slow queries.","operationId":"get_slow_queries_api_v1_monitoring_slow_queries_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":10,"title":"Limit","type":"integer"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowQueriesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Slow Queries","tags":["Monitoring"]}},"/api/v1/monitoring/slow-requests":{"get":{"description":"Get recent slow requests.","operationId":"get_slow_requests_api_v1_monitoring_slow_requests_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":10,"title":"Limit","type":"integer"}},{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowRequestsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Slow Requests","tags":["Monitoring"]}},"/api/v1/monitoring/trigger-payment-health-check":{"post":{"description":"Manually trigger a payment system health check.\n\nThis will run the health check task immediately and return the results.\n\nRequires monitoring API key in production.","operationId":"trigger_payment_health_check_api_v1_monitoring_trigger_payment_health_check_post","parameters":[{"in":"header","name":"X-Monitoring-API-Key","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Monitoring-Api-Key"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentHealthCheckTriggerResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Trigger Payment Health Check","tags":["Monitoring"]}},"/api/v1/notification-preferences":{"get":{"description":"Get all notification preferences for current user, grouped by category.","operationId":"get_preferences_api_v1_notification_preferences_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreferencesByCategory"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Preferences","tags":["notification-preferences-v1"]},"put":{"description":"Update multiple notification preferences at once.","operationId":"update_preferences_bulk_api_v1_notification_preferences_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationPreferencesBulkUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PreferenceResponse"},"title":"Response Update Preferences Bulk Api V1 Notification Preferences Put","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Preferences Bulk","tags":["notification-preferences-v1"]}},"/api/v1/notification-preferences/{category}/{channel}":{"put":{"description":"Update a single notification preference.","operationId":"update_preference_api_v1_notification_preferences__category___channel__put","parameters":[{"in":"path","name":"category","required":true,"schema":{"title":"Category","type":"string"}},{"in":"path","name":"channel","required":true,"schema":{"title":"Channel","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePreferenceRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreferenceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Preference","tags":["notification-preferences-v1"]}},"/api/v1/notifications":{"delete":{"description":"Delete all notifications for the current user.","operationId":"delete_all_notifications_api_v1_notifications_delete","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete All Notifications","tags":["notifications-v1"]},"get":{"description":"List notifications for the current user.","operationId":"list_notifications_api_v1_notifications_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":20,"maximum":50,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"minimum":0,"title":"Offset","type":"integer"}},{"in":"query","name":"unread_only","required":false,"schema":{"default":false,"title":"Unread Only","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationListResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Notifications","tags":["notifications-v1"]}},"/api/v1/notifications/read-all":{"post":{"description":"Mark all notifications as read.","operationId":"mark_all_notifications_read_api_v1_notifications_read_all_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark All Notifications Read","tags":["notifications-v1"]}},"/api/v1/notifications/unread-count":{"get":{"description":"Get unread notification count for the current user.","operationId":"get_unread_count_api_v1_notifications_unread_count_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationUnreadCountResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Unread Count","tags":["notifications-v1"]}},"/api/v1/notifications/{notification_id}":{"delete":{"description":"Delete a notification.","operationId":"delete_notification_api_v1_notifications__notification_id__delete","parameters":[{"in":"path","name":"notification_id","required":true,"schema":{"title":"Notification Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Notification","tags":["notifications-v1"]}},"/api/v1/notifications/{notification_id}/read":{"post":{"description":"Mark a notification as read.","operationId":"mark_notification_read_api_v1_notifications__notification_id__read_post","parameters":[{"in":"path","name":"notification_id","required":true,"schema":{"title":"Notification Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Mark Notification Read","tags":["notifications-v1"]}},"/api/v1/ops/cache":{"get":{"description":"Get detailed cache metrics including availability-specific stats.","operationId":"get_cache_metrics_api_v1_ops_cache_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheMetricsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Cache Metrics","tags":["monitoring"]}},"/api/v1/ops/cache/availability":{"get":{"description":"Get detailed availability-specific cache metrics and top cached keys.","operationId":"get_availability_cache_metrics_api_v1_ops_cache_availability_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCacheMetricsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Availability Cache Metrics","tags":["monitoring"]}},"/api/v1/ops/cache/reset-stats":{"post":{"description":"Reset cache statistics.","operationId":"reset_cache_stats_api_v1_ops_cache_reset_stats_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Cache Stats","tags":["monitoring"]}},"/api/v1/ops/health":{"get":{"description":"Basic health check endpoint.","operationId":"health_check_api_v1_ops_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Health Check","tags":["monitoring"]}},"/api/v1/ops/performance":{"get":{"description":"Get performance metrics from all services.","operationId":"get_performance_metrics_api_v1_ops_performance_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceMetricsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Performance Metrics","tags":["monitoring"]}},"/api/v1/ops/rate-limits":{"get":{"description":"Get current rate limit statistics.\n\nShows:\n- Total rate limit keys\n- Breakdown by endpoint/type\n- Top limited clients\n\nRequires authentication.","operationId":"get_rate_limit_stats_api_v1_ops_rate_limits_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitStats"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Rate Limit Stats","tags":["monitoring"]}},"/api/v1/ops/rate-limits/reset":{"post":{"description":"Reset rate limits matching a pattern.\n\nUseful for:\n- Unblocking legitimate users\n- Testing\n- Emergency response\n\nRequires admin privileges.","operationId":"reset_rate_limits_api_v1_ops_rate_limits_reset_post","parameters":[{"description":"Pattern to match (e.g., 'email_*', 'ip_192.168.*')","in":"query","name":"pattern","required":true,"schema":{"description":"Pattern to match (e.g., 'email_*', 'ip_192.168.*')","title":"Pattern","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Rate Limits","tags":["monitoring"]}},"/api/v1/ops/rate-limits/test":{"get":{"description":"Test endpoint to verify rate limiting is working.\n\nThis endpoint has a low rate limit for testing purposes.\nTry making multiple requests to see rate limiting in action.","operationId":"test_rate_limit_api_v1_ops_rate_limits_test_get","parameters":[{"description":"Number of requests to simulate","in":"query","name":"requests","required":false,"schema":{"default":5,"description":"Number of requests to simulate","maximum":20,"minimum":1,"title":"Requests","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitTestResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Test Rate Limit","tags":["monitoring"]}},"/api/v1/ops/slow-queries":{"get":{"description":"Get recent slow queries.","operationId":"get_slow_queries_api_v1_ops_slow_queries_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowQueriesResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Slow Queries","tags":["monitoring"]}},"/api/v1/password-reset/confirm":{"post":{"description":"Confirm password reset with token and new password.\n\nRate limited to prevent token brute forcing.\n\nArgs:\n    payload: Token and new password\n    password_reset_service: Password reset service\n\nReturns:\n    PasswordResetResponse: Success message\n\nRaises:\n    HTTPException: If token is invalid, expired, already used, or rate limit exceeded","operationId":"confirm_password_reset_api_v1_password_reset_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetConfirm"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Confirm Password Reset","tags":["password-reset"]}},"/api/v1/password-reset/request":{"post":{"description":"Request a password reset email.\n\nThis endpoint always returns success to prevent email enumeration attacks.\nIf the email exists, a reset link will be sent.\n\nRate limited by both IP and email to prevent abuse.\n\nArgs:\n    payload: Email address for password reset\n    password_reset_service: Password reset service\n\nReturns:\n    PasswordResetResponse: Success message\n\nRaises:\n    HTTPException: If rate limit exceeded","operationId":"request_password_reset_api_v1_password_reset_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Request Password Reset","tags":["password-reset"]}},"/api/v1/password-reset/verify/{token}":{"get":{"description":"Verify if a reset token is valid.\n\nThis endpoint can be used by the frontend to check if a token\nis valid before showing the password reset form.\n\nRate limited to prevent token enumeration.\n\nArgs:\n    token: The reset token to verify\n    password_reset_service: Password reset service\n\nReturns:\n    dict: Validity status and user email (masked)\n\nRaises:\n    HTTPException: If rate limit exceeded","operationId":"verify_reset_token_api_v1_password_reset_verify__token__get","parameters":[{"in":"path","name":"token","required":true,"schema":{"title":"Token","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetVerifyResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Verify Reset Token","tags":["password-reset"]}},"/api/v1/payments/checkout":{"post":{"description":"Create a checkout/payment for a booking.\n\nArgs:\n    payload: Checkout details including booking and payment method\n\nReturns:\n    CheckoutResponse with payment details\n\nRaises:\n    HTTPException: If checkout creation fails","operationId":"create_checkout_api_v1_payments_checkout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Checkout","tags":["payments-v1"]}},"/api/v1/payments/connect/dashboard":{"get":{"description":"Get a link to the Stripe Express dashboard for an instructor.\n\nReturns:\n    DashboardLinkResponse with dashboard URL\n\nRaises:\n    HTTPException: If dashboard link creation fails","operationId":"get_dashboard_link_api_v1_payments_connect_dashboard_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardLinkResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Dashboard Link","tags":["payments-v1"]}},"/api/v1/payments/connect/instant-payout":{"post":{"description":"Trigger an instant payout for an instructor's connected account.\n\nUses Stripe's instant payout capability (account eligibility required). This does NOT aggregate platform funds; it\ntriggers Stripe to pay out the instructor's available balance instantly. We record a metric for adoption.","operationId":"request_instant_payout_api_v1_payments_connect_instant_payout_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstantPayoutResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Request Instant Payout","tags":["payments-v1"]}},"/api/v1/payments/connect/onboard":{"post":{"description":"Start Stripe Connect onboarding for an instructor.\n\nCreates a Stripe Express account and generates an onboarding link.\nIf the instructor already has an account, returns existing details.\n\nReturns:\n    OnboardingResponse with account ID and onboarding URL\n\nRaises:\n    HTTPException: If onboarding setup fails","operationId":"start_onboarding_api_v1_payments_connect_onboard_post","parameters":[{"in":"query","name":"return_to","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Return To"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Start Onboarding","tags":["payments-v1"]}},"/api/v1/payments/connect/payout-schedule":{"post":{"description":"Set payout schedule for the current instructor's connected account.\n\nDefault: weekly on Tuesday. Valid anchors: monday..sunday.","operationId":"set_payout_schedule_api_v1_payments_connect_payout_schedule_post","parameters":[{"in":"query","name":"interval","required":false,"schema":{"default":"weekly","title":"Interval","type":"string"}},{"in":"query","name":"weekly_anchor","required":false,"schema":{"default":"tuesday","title":"Weekly Anchor","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayoutScheduleResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Set Payout Schedule","tags":["payments-v1"]}},"/api/v1/payments/connect/status":{"get":{"description":"Get the onboarding status for an instructor's Stripe account.\n\nReturns:\n    OnboardingStatusResponse with account status details\n\nRaises:\n    HTTPException: If status check fails","operationId":"get_onboarding_status_api_v1_payments_connect_status_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingStatusResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Onboarding Status","tags":["payments-v1"]}},"/api/v1/payments/credits":{"get":{"description":"Get user's credit balance\n\nReturns available credits and expiration","operationId":"get_credit_balance_api_v1_payments_credits_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreditBalanceResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Credit Balance","tags":["payments-v1"]}},"/api/v1/payments/earnings":{"get":{"description":"Get earnings statistics for an instructor.\n\nReturns:\n    Instructor earnings data\n\nRaises:\n    HTTPException: If earnings calculation fails","operationId":"get_instructor_earnings_api_v1_payments_earnings_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EarningsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Instructor Earnings","tags":["payments-v1"]}},"/api/v1/payments/earnings/export":{"post":{"description":"Export instructor earnings history as CSV.","operationId":"export_instructor_earnings_api_v1_payments_earnings_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EarningsExportRequest"}}}},"responses":{"200":{"content":{"application/json":{"schema":{}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export Instructor Earnings","tags":["payments-v1"]}},"/api/v1/payments/identity/refresh":{"post":{"description":"Fetch latest Stripe Identity status and persist verification on success.\n\nThis avoids blocking general status calls and lets the UI trigger a one-off refresh\nright after the modal/hosted flow returns.","operationId":"refresh_identity_status_api_v1_payments_identity_refresh_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentityRefreshResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Refresh Identity Status","tags":["payments-v1"]}},"/api/v1/payments/identity/session":{"post":{"description":"Create a Stripe Identity verification session for the current user.","operationId":"create_identity_session_api_v1_payments_identity_session_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentitySessionResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Identity Session","tags":["payments-v1"]}},"/api/v1/payments/methods":{"get":{"description":"List all payment methods for a student.\n\nReturns:\n    List of PaymentMethodResponse objects\n\nRaises:\n    HTTPException: If payment method listing fails","operationId":"list_payment_methods_api_v1_payments_methods_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PaymentMethodResponse"},"title":"Response List Payment Methods Api V1 Payments Methods Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Payment Methods","tags":["payments-v1"]},"post":{"description":"Save a payment method for a student.\n\nArgs:\n    payload: Payment method details\n\nReturns:\n    PaymentMethodResponse with saved payment method details\n\nRaises:\n    HTTPException: If payment method saving fails","operationId":"save_payment_method_api_v1_payments_methods_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavePaymentMethodRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentMethodResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Save Payment Method","tags":["payments-v1"]}},"/api/v1/payments/methods/{method_id}":{"delete":{"description":"Delete a payment method for a student.\n\nArgs:\n    method_id: Payment method ID to delete\n\nReturns:\n    Success confirmation\n\nRaises:\n    HTTPException: If payment method deletion fails","operationId":"delete_payment_method_api_v1_payments_methods__method_id__delete","parameters":[{"in":"path","name":"method_id","required":true,"schema":{"title":"Method Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentDeleteResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Payment Method","tags":["payments-v1"]}},"/api/v1/payments/payouts":{"get":{"description":"Get payout history for an instructor.\n\nReturns Stripe payout events recorded for the instructor's connected account.\n\nReturns:\n    PayoutHistoryResponse with list of payouts and totals\n\nRaises:\n    HTTPException: If fetching payouts fails","operationId":"get_instructor_payouts_api_v1_payments_payouts_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":100,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayoutHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Instructor Payouts","tags":["payments-v1"]}},"/api/v1/payments/transactions":{"get":{"description":"Get user's transaction history\n\nReturns list of completed payments with booking details","operationId":"get_transaction_history_api_v1_payments_transactions_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":20,"title":"Limit","type":"integer"}},{"in":"query","name":"offset","required":false,"schema":{"default":0,"title":"Offset","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TransactionHistoryItem"},"title":"Response Get Transaction History Api V1 Payments Transactions Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Transaction History","tags":["payments-v1"]}},"/api/v1/payments/webhooks/stripe":{"post":{"description":"Handle Stripe webhook events from both platform and connected accounts.\n\nWorks with both local development (single secret) and deployed environments (multiple secrets).\nTries each configured webhook secret until one successfully verifies the signature.\n\nReturns:\n    Success confirmation (always returns 200 to prevent Stripe retries)\n\nNote:\n    This endpoint has no authentication as it uses webhook signature verification","operationId":"handle_stripe_webhook_api_v1_payments_webhooks_stripe_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}},"description":"Successful Response"}},"summary":"Handle Stripe Webhook","tags":["payments-v1"]}},"/api/v1/pricing/preview":{"post":{"description":"Return pricing preview for a booking selection without a persisted draft.","operationId":"preview_selection_pricing_api_v1_pricing_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingPreviewIn"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PricingPreviewOut"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Preview Selection Pricing","tags":["pricing"]}},"/api/v1/privacy/delete/me":{"post":{"description":"Delete user data (GDPR right to be forgotten).\n\nCan either anonymize data or completely delete the account.","operationId":"delete_my_data_api_v1_privacy_delete_me_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete My Data","tags":["privacy"]}},"/api/v1/privacy/delete/user/{user_id}":{"post":{"description":"Delete data for any user (admin only).\n\nFor handling deletion requests on behalf of users.","operationId":"delete_user_data_admin_api_v1_privacy_delete_user__user_id__post","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDataDeletionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete User Data Admin","tags":["privacy"]}},"/api/v1/privacy/export/me":{"get":{"description":"Export all data for the current user (GDPR data portability).\n\nReturns all personal data in a structured format.","operationId":"export_my_data_api_v1_privacy_export_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataExportResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export My Data","tags":["privacy"]}},"/api/v1/privacy/export/user/{user_id}":{"get":{"description":"Export data for any user (admin only).\n\nFor handling data requests on behalf of users.","operationId":"export_user_data_admin_api_v1_privacy_export_user__user_id__get","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataExportResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Export User Data Admin","tags":["privacy"]}},"/api/v1/privacy/retention/apply":{"post":{"description":"Manually trigger data retention policies (admin only).\n\nThis is usually run automatically via scheduled tasks.","operationId":"apply_retention_policies_api_v1_privacy_retention_apply_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetentionPolicyResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Apply Retention Policies","tags":["privacy"]}},"/api/v1/privacy/statistics":{"get":{"description":"Get privacy and data retention statistics (admin only).\n\nShows counts of data eligible for retention policies.","operationId":"get_privacy_statistics_api_v1_privacy_statistics_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivacyStatisticsResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Privacy Statistics","tags":["privacy"]}},"/api/v1/public/instructors/{instructor_id}/availability":{"get":{"description":"Public endpoint to view instructor's available time slots for booking. No authentication required. Response detail level depends on configuration.","operationId":"get_instructor_public_availability_api_v1_public_instructors__instructor_id__availability_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"description":"Start date for availability search","in":"query","name":"start_date","required":true,"schema":{"description":"Start date for availability search","format":"date","title":"Start Date","type":"string"}},{"description":"End date (defaults to configured days from start)","in":"query","name":"end_date","required":false,"schema":{"anyOf":[{"format":"date","type":"string"},{"type":"null"}],"description":"End date (defaults to configured days from start)","title":"End Date"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicInstructorAvailability"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get instructor availability for students","tags":["public"]}},"/api/v1/public/instructors/{instructor_id}/next-available":{"get":{"description":"Quick endpoint to find the next available booking slot","operationId":"get_next_available_slot_api_v1_public_instructors__instructor_id__next_available_get","parameters":[{"in":"path","name":"instructor_id","required":true,"schema":{"title":"Instructor Id","type":"string"}},{"description":"Required duration in minutes","in":"query","name":"duration_minutes","required":false,"schema":{"default":60,"description":"Required duration in minutes","title":"Duration Minutes","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextAvailableSlotResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get next available slot for an instructor","tags":["public"]}},"/api/v1/public/logout":{"post":{"description":"Clear known session cookies. Public to support cross-origin preview logout.\n\nThis does not revoke server sessions; it only instructs the browser to drop cookies.","operationId":"public_logout_api_v1_public_logout_post","responses":{"204":{"description":"Successful Response"}},"summary":"Public Logout","tags":["public"]}},"/api/v1/public/referrals/send":{"post":{"description":"Send referral invitation emails to one or more recipients.","operationId":"send_referral_invites_api_v1_public_referrals_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralSendRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralSendResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Send referral invites","tags":["public"]}},"/api/v1/public/session/guest":{"post":{"description":"Issue a first-party guest_id cookie used for optional auth endpoints.\n\nSets cookie attributes appropriate for cross-site subdomains in preview/prod.","operationId":"create_guest_session_api_v1_public_session_guest_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSessionResponse"}}},"description":"Successful Response"}},"summary":"Create Guest Session","tags":["public"]}},"/api/v1/push/subscribe":{"post":{"description":"Subscribe to push notifications.\n\nCalled by the frontend after the user grants notification permission\nand the browser creates a push subscription.","operationId":"subscribe_to_push_api_v1_push_subscribe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PushSubscribeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PushStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Subscribe To Push","tags":["push-v1"]}},"/api/v1/push/subscriptions":{"get":{"description":"List all push subscriptions for the current user.\n\nUsers may have multiple subscriptions (different devices/browsers).","operationId":"list_subscriptions_api_v1_push_subscriptions_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PushSubscriptionResponse"},"title":"Response List Subscriptions Api V1 Push Subscriptions Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Subscriptions","tags":["push-v1"]}},"/api/v1/push/unsubscribe":{"delete":{"description":"Unsubscribe from push notifications.\n\nCalled when user disables notifications or subscription expires.","operationId":"unsubscribe_from_push_api_v1_push_unsubscribe_delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PushUnsubscribeRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PushStatusResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Unsubscribe From Push","tags":["push-v1"]}},"/api/v1/push/vapid-public-key":{"get":{"description":"Get the VAPID public key for push subscription.\n\nThis endpoint is public - the key is needed by the browser\nto subscribe to push notifications.","operationId":"get_vapid_public_key_api_v1_push_vapid_public_key_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VapidPublicKeyResponse"}}},"description":"VAPID public key for push notifications"},"503":{"description":"Push notifications not configured"}},"summary":"Get Vapid Public Key","tags":["push-v1"]}},"/api/v1/r/{slug}":{"get":{"description":"Resolve referral slug and redirect to landing page.","operationId":"resolve_referral_slug_api_v1_r__slug__get","parameters":[{"in":"path","name":"slug","required":true,"schema":{"title":"Slug","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralResolveResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Resolve Referral Slug","tags":["referrals-v1"]}},"/api/v1/ready":{"get":{"operationId":"ready_probe_api_v1_ready_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadyProbeResponse"}}},"description":"Successful Response"}},"summary":"Ready Probe","tags":["internal"]}},"/api/v1/redis/celery-queues":{"get":{"description":"Get Celery queue status and pending tasks.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Queue lengths and task counts","operationId":"celery_queue_status_api_v1_redis_celery_queues_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisCeleryQueuesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Celery Queue Status","tags":["monitoring"]}},"/api/v1/redis/connection-audit":{"get":{"description":"Audit all Redis connections across the system.\n\nChecks which Redis instance each service is using and identifies\nany remaining Upstash connections.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Summary of Redis connections across all services","operationId":"redis_connection_audit_api_v1_redis_connection_audit_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisConnectionAuditResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Redis Connection Audit","tags":["monitoring"]}},"/api/v1/redis/flush-queues":{"delete":{"description":"Flush all Celery queues (DANGER: removes all pending tasks).\n\nRequires ACCESS_MONITORING permission.\nUse with caution - this will delete all pending tasks!\n\nReturns:\n    Number of tasks removed from each queue","operationId":"flush_celery_queues_api_v1_redis_flush_queues_delete","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisFlushQueuesResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Flush Celery Queues","tags":["monitoring"]}},"/api/v1/redis/health":{"get":{"description":"Check Redis connection health.\n\nReturns:\n    Basic health status","operationId":"redis_health_api_v1_redis_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisHealthResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Redis Health","tags":["monitoring"]}},"/api/v1/redis/stats":{"get":{"description":"Get detailed Redis statistics and metrics.\n\nRequires ACCESS_MONITORING permission.\n\nReturns:\n    Comprehensive Redis metrics including:\n    - Memory usage\n    - Connection stats\n    - Operation counts\n    - Celery queue lengths","operationId":"redis_stats_api_v1_redis_stats_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisStatsResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Redis Stats","tags":["monitoring"]}},"/api/v1/redis/test":{"get":{"description":"Simple Redis connection test endpoint.\n\nNo authentication required - helps verify Redis migration is working.\n\nReturns:\n    Connection status and basic info","operationId":"redis_test_api_v1_redis_test_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedisTestResponse"}}},"description":"Successful Response"},"404":{"description":"Not found"}},"summary":"Redis Test","tags":["monitoring"]}},"/api/v1/referrals/checkout/apply-referral":{"post":{"description":"Apply referral credit to a checkout order.","operationId":"apply_referral_credit_api_v1_referrals_checkout_apply_referral_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutApplyRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CheckoutApplyResponse"},{"$ref":"#/components/schemas/ReferralErrorResponse"}],"title":"Response Apply Referral Credit Api V1 Referrals Checkout Apply Referral Post"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Apply Referral Credit","tags":["referrals-v1"]}},"/api/v1/referrals/claim":{"post":{"description":"Claim a referral code.","operationId":"claim_referral_code_api_v1_referrals_claim_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralClaimRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ReferralClaimResponse"},{"$ref":"#/components/schemas/ReferralErrorResponse"}],"title":"Response Claim Referral Code Api V1 Referrals Claim Post"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Claim Referral Code","tags":["referrals-v1"]}},"/api/v1/referrals/me":{"get":{"description":"Get current user's referral ledger with code, rewards, and share URL.","operationId":"get_my_referral_ledger_api_v1_referrals_me_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferralLedgerResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get My Referral Ledger","tags":["referrals-v1"]}},"/api/v1/reviews":{"post":{"description":"Submit a review for a completed booking.\n\nStudents can submit one review per booking.\nOptionally include a tip amount for the instructor.","operationId":"submit_review_api_v1_reviews_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewSubmitRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewSubmitResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Submit Review","tags":["reviews-v1"]}},"/api/v1/reviews/booking/existing":{"post":{"description":"Check which bookings already have reviews.\n\nReturns list of booking IDs that have existing reviews.\nOnly returns reviews for bookings owned by the current student.","operationId":"get_existing_reviews_for_bookings_api_v1_reviews_booking_existing_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"title":"Booking Ids","type":"array"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExistingReviewIdsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Existing Reviews For Bookings","tags":["reviews-v1"]}},"/api/v1/reviews/booking/{booking_id}":{"get":{"description":"Get the review for a specific booking.\n\nStudents can only view reviews they submitted.\nReturns None if no review exists for the booking.","operationId":"get_review_for_booking_api_v1_reviews_booking__booking_id__get","parameters":[{"description":"Booking ULID","in":"path","name":"booking_id","required":true,"schema":{"description":"Booking ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Booking Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ReviewItem"},{"type":"null"}],"title":"Response Get Review For Booking Api V1 Reviews Booking  Booking Id  Get"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Review For Booking","tags":["reviews-v1"]}},"/api/v1/reviews/instructor/{instructor_id}/ratings":{"get":{"description":"Get rating statistics for an instructor.\n\nPublic endpoint - no authentication required.\nReturns overall rating, per-service ratings, and rating distribution.","operationId":"get_instructor_ratings_api_v1_reviews_instructor__instructor_id__ratings_get","parameters":[{"description":"Instructor ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorRatingsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Instructor Ratings","tags":["reviews-v1"]}},"/api/v1/reviews/instructor/{instructor_id}/recent":{"get":{"description":"Get paginated list of recent reviews for an instructor.\n\nPublic endpoint - no authentication required.\nSupports filtering by rating, service, and text presence.","operationId":"get_recent_reviews_api_v1_reviews_instructor__instructor_id__recent_get","parameters":[{"description":"Instructor ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}},{"in":"query","name":"instructor_service_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Service Id"}},{"in":"query","name":"limit","required":false,"schema":{"default":10,"maximum":50,"minimum":1,"title":"Limit","type":"integer"}},{"in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"title":"Page","type":"integer"}},{"in":"query","name":"min_rating","required":false,"schema":{"anyOf":[{"maximum":5,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Min Rating"}},{"in":"query","name":"rating","required":false,"schema":{"anyOf":[{"maximum":5,"minimum":1,"type":"integer"},{"type":"null"}],"title":"Rating"}},{"in":"query","name":"with_text","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"With Text"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewListPageResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Recent Reviews","tags":["reviews-v1"]}},"/api/v1/reviews/instructor/{instructor_id}/search-rating":{"get":{"description":"Get compact rating info for search results context.\n\nPublic endpoint - no authentication required.\nReturns rating and review count optimized for search result display.","operationId":"get_search_rating_api_v1_reviews_instructor__instructor_id__search_rating_get","parameters":[{"description":"Instructor ULID","in":"path","name":"instructor_id","required":true,"schema":{"description":"Instructor ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Instructor Id","type":"string"}},{"in":"query","name":"instructor_service_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instructor Service Id"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRatingResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Search Rating","tags":["reviews-v1"]}},"/api/v1/reviews/ratings/batch":{"post":{"description":"Get ratings for multiple instructors in a single request.\n\nPublic endpoint - no authentication required.","operationId":"get_ratings_batch_api_v1_reviews_ratings_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingsBatchRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingsBatchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Ratings Batch","tags":["reviews-v1"]}},"/api/v1/reviews/{review_id}/respond":{"post":{"description":"Add an instructor response to a review.\n\nOnly the instructor who received the review can respond.","operationId":"respond_to_review_api_v1_reviews__review_id__respond_post","parameters":[{"description":"Review ULID","in":"path","name":"review_id","required":true,"schema":{"description":"Review ULID","pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Review Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_respond_to_review_api_v1_reviews__review_id__respond_post"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponseModel"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Respond To Review","tags":["reviews-v1"]}},"/api/v1/search":{"get":{"description":"Natural language search for instructors and services.\n\nFull pipeline search that combines:\n- Query parsing (regex + LLM)\n- Semantic embedding\n- Hybrid vector + text retrieval\n- Constraint filtering (price, location, availability)\n- Multi-signal ranking\n\nSupports queries like:\n- \"piano lessons in brooklyn\"\n- \"cheap guitar lessons tomorrow\"\n- \"math tutoring for kids after 5pm\"\n\nArgs:\n    q: Natural language search query\n    lat: User latitude (optional, must provide with lng)\n    lng: User longitude (optional, must provide with lat)\n    region: Region code for location and price threshold lookups (default: nyc)\n    limit: Maximum results to return (1-50, default 20)\n    response: FastAPI response object for headers\n    db: Database session\n    cache_service: Cache service for result caching\n\nReturns:\n    Search results with ranked instructors and full metadata","operationId":"nl_search_api_v1_search_get","parameters":[{"description":"Natural language search query","in":"query","name":"q","required":true,"schema":{"description":"Natural language search query","maxLength":500,"minLength":1,"title":"Q","type":"string"}},{"description":"User latitude","in":"query","name":"lat","required":false,"schema":{"anyOf":[{"maximum":90,"minimum":-90,"type":"number"},{"type":"null"}],"description":"User latitude","title":"Lat"}},{"description":"User longitude","in":"query","name":"lng","required":false,"schema":{"anyOf":[{"maximum":180,"minimum":-180,"type":"number"},{"type":"null"}],"description":"User longitude","title":"Lng"}},{"description":"Region code for location/price lookups","in":"query","name":"region","required":false,"schema":{"default":"nyc","description":"Region code for location/price lookups","title":"Region","type":"string"}},{"description":"Maximum results to return","in":"query","name":"limit","required":false,"schema":{"default":20,"description":"Maximum results to return","maximum":50,"minimum":1,"title":"Limit","type":"integer"}},{"description":"Comma-separated skill levels (beginner,intermediate,advanced)","in":"query","name":"skill_level","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated skill levels (beginner,intermediate,advanced)","title":"Skill Level"}},{"description":"Optional subcategory ULID context","in":"query","name":"subcategory_id","required":false,"schema":{"anyOf":[{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","type":"string"},{"type":"null"}],"description":"Optional subcategory ULID context","title":"Subcategory Id"}},{"description":"Pipe-delimited taxonomy content filters in the format 'key:val1,val2|key2:val3'. Max 10 keys and 20 values per key.","in":"query","name":"content_filters","required":false,"schema":{"anyOf":[{"maxLength":2000,"type":"string"},{"type":"null"}],"description":"Pipe-delimited taxonomy content filters in the format 'key:val1,val2|key2:val3'. Max 10 keys and 20 values per key.","title":"Content Filters"}},{"description":"Include detailed diagnostics (admin only)","in":"query","name":"diagnostics","required":false,"schema":{"default":false,"description":"Include detailed diagnostics (admin only)","title":"Diagnostics","type":"boolean"}},{"description":"Force skip Tier 5 LLM (admin only)","in":"query","name":"force_skip_tier5","required":false,"schema":{"default":false,"description":"Force skip Tier 5 LLM (admin only)","title":"Force Skip Tier5","type":"boolean"}},{"description":"Force skip Tier 4 embedding (admin only)","in":"query","name":"force_skip_tier4","required":false,"schema":{"default":false,"description":"Force skip Tier 4 embedding (admin only)","title":"Force Skip Tier4","type":"boolean"}},{"description":"Force skip vector search (admin only)","in":"query","name":"force_skip_vector","required":false,"schema":{"default":false,"description":"Force skip vector search (admin only)","title":"Force Skip Vector","type":"boolean"}},{"description":"Force skip embeddings (admin only)","in":"query","name":"force_skip_embedding","required":false,"schema":{"default":false,"description":"Force skip embeddings (admin only)","title":"Force Skip Embedding","type":"boolean"}},{"description":"Force high-load budget (admin only)","in":"query","name":"force_high_load","required":false,"schema":{"default":false,"description":"Force high-load budget (admin only)","title":"Force High Load","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NLSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Nl Search","tags":["search-v1"]}},"/api/v1/search-history":{"get":{"description":"Get recent searches for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\n\nArgs:\n    limit: Maximum number of searches to return (default 3)\n    context: Search context with user/guest identity\n    db: Database session\n\nReturns:\n    List of recent search history entries","operationId":"get_recent_searches_api_v1_search_history_get","parameters":[{"in":"query","name":"limit","required":false,"schema":{"default":3,"title":"Limit","type":"integer"}},{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SearchHistoryResponse"},"title":"Response Get Recent Searches Api V1 Search History Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Recent Searches","tags":["search-history-v1"]},"post":{"description":"Record a search for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\nOptional headers:\n- X-Session-ID: Browser session ID for analytics\n- X-Search-Origin: Page where search originated\n\nArgs:\n    search_data: The search details to record\n    context: Search context with user/guest identity and tracking info\n    db: Database session\n\nReturns:\n    The created or updated search history entry","operationId":"record_search_api_v1_search_history_post","parameters":[{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Record Search","tags":["search-history-v1"]}},"/api/v1/search-history/guest":{"post":{"description":"Record a guest search with strict validation.","operationId":"record_guest_search_api_v1_search_history_guest_post","parameters":[{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSearchHistoryCreate"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Record Guest Search","tags":["search-history-v1"]}},"/api/v1/search-history/interaction":{"post":{"description":"Track user interaction with search results.\n\nRecords clicks, hovers, bookmarks, and other interactions with search results\nto measure search effectiveness and result relevance.\n\nArgs:\n    interaction_data: Interaction details including:\n        - search_event_id: ID of the search event\n        - interaction_type: Type of interaction (click, hover, bookmark)\n        - instructor_id: ID of the instructor interacted with\n        - result_position: Position in search results\n        - time_to_interaction: Time from search to interaction (seconds)\n    request: HTTP request for headers\n    context: Search user context\n    db: Database session\n\nReturns:\n    Interaction tracking confirmation","operationId":"track_interaction_api_v1_search_history_interaction_post","parameters":[{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}},{"in":"header","name":"x-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Session-Id"}},{"in":"header","name":"x-search-origin","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Search-Origin"}}],"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"title":"Interaction Data","type":"object"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchInteractionResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Track Interaction","tags":["search-history-v1"]}},"/api/v1/search-history/{search_id}":{"delete":{"description":"Delete a search for the current user (authenticated or guest).\n\nFor authenticated users: Pass authorization token\nFor guests: Pass X-Guest-Session-ID header\n\nArgs:\n    search_id: ID of the search to delete\n    current_user: The authenticated user (if applicable)\n    x_guest_session_id: Guest session ID header (if applicable)\n    db: Database session\n\nReturns:\n    204 No Content on success\n\nRaises:\n    404 if search not found or doesn't belong to the user/guest","operationId":"delete_search_api_v1_search_history__search_id__delete","parameters":[{"in":"path","name":"search_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Search Id","type":"string"}},{"in":"header","name":"x-guest-session-id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Guest-Session-Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Search","tags":["search-history-v1"]}},"/api/v1/search/analytics/metrics":{"get":{"description":"Get aggregate search metrics for the last N days. Requires admin access.\n\nReturns metrics including:\n- Total searches\n- Average latency (p50, p95)\n- Average results per search\n- Zero result rate\n- Cache hit rate\n- Degradation rate","operationId":"search_metrics_api_v1_search_analytics_metrics_get","parameters":[{"description":"Number of days to analyze","in":"query","name":"days","required":false,"schema":{"default":1,"description":"Number of days to analyze","maximum":30,"minimum":1,"title":"Days","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchMetricsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Search Metrics","tags":["search-v1"]}},"/api/v1/search/analytics/popular":{"get":{"description":"Get most popular search queries. Requires admin access.","operationId":"popular_queries_api_v1_search_analytics_popular_get","parameters":[{"description":"Number of days to analyze","in":"query","name":"days","required":false,"schema":{"default":7,"description":"Number of days to analyze","maximum":30,"minimum":1,"title":"Days","type":"integer"}},{"description":"Maximum queries to return","in":"query","name":"limit","required":false,"schema":{"default":50,"description":"Maximum queries to return","maximum":200,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PopularQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Popular Queries","tags":["search-v1"]}},"/api/v1/search/analytics/zero-results":{"get":{"description":"Get queries that returned zero results. Requires admin access.","operationId":"zero_result_queries_api_v1_search_analytics_zero_results_get","parameters":[{"description":"Number of days to analyze","in":"query","name":"days","required":false,"schema":{"default":7,"description":"Number of days to analyze","maximum":30,"minimum":1,"title":"Days","type":"integer"}},{"description":"Maximum queries to return","in":"query","name":"limit","required":false,"schema":{"default":100,"description":"Maximum queries to return","maximum":500,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ZeroResultQueriesResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Zero Result Queries","tags":["search-v1"]}},"/api/v1/search/click":{"post":{"description":"Log a click on a search result for conversion tracking.\n\nCall this endpoint when a user interacts with a search result.\nAuthentication is optional (best-effort).","operationId":"log_search_click_api_v1_search_click_post","parameters":[{"description":"Search query ID from NL search","in":"query","name":"search_query_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search query ID from NL search","title":"Search Query Id"}},{"description":"Service ID that was clicked (instructor_service_id)","in":"query","name":"service_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Service ID that was clicked (instructor_service_id)","title":"Service Id"}},{"description":"Instructor user ID that was clicked","in":"query","name":"instructor_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Instructor user ID that was clicked","title":"Instructor Id"}},{"description":"Position in search results (1-indexed)","in":"query","name":"position","required":false,"schema":{"anyOf":[{"minimum":1,"type":"integer"},{"type":"null"}],"description":"Position in search results (1-indexed)","title":"Position"}},{"description":"Action type: view, book, message, favorite","in":"query","name":"action","required":false,"schema":{"default":"view","description":"Action type: view, book, message, favorite","title":"Action","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SearchClickRequest"},{"type":"null"}],"description":"JSON body payload for click tracking. If omitted, query parameters are accepted for backward compatibility.","title":"Request"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchClickResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Log Search Click","tags":["search-v1"]}},"/api/v1/search/config":{"get":{"description":"Get current NL search configuration. Requires admin access.\n\nReturns the currently active models and timeouts along with\navailable options for the admin UI.","operationId":"get_config_api_v1_search_config_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchConfigResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Config","tags":["search-v1"]},"put":{"description":"Update NL search configuration at runtime. Requires admin access.\n\nChanges are temporary (not persisted to environment).\nUseful for testing different models without redeployment.\nServer restart will revert to environment defaults.\n\nNote: Embedding model cannot be changed at runtime as it requires\nre-generating all embeddings in the database.","operationId":"update_config_api_v1_search_config_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchConfigUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchConfigResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Config","tags":["search-v1"]}},"/api/v1/search/config/reset":{"post":{"description":"Reset NL search configuration to environment defaults. Requires admin access.\n\nUse this to revert any runtime changes made via PUT /config.","operationId":"reset_config_api_v1_search_config_reset_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchConfigResetResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Reset Config","tags":["search-v1"]}},"/api/v1/search/health":{"get":{"description":"Health check for search service components.\n\nReturns status of:\n- Cache service availability\n- Parsing circuit breaker state\n- Embedding circuit breaker state\n\nReturns:\n    Health status with component details","operationId":"search_health_api_v1_search_health_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHealthResponse"}}},"description":"Successful Response"}},"summary":"Search Health","tags":["search-v1"]}},"/api/v1/services/catalog":{"get":{"description":"Get available services from the catalog.\n\nOptionally filter by category ID.","operationId":"get_catalog_services_api_v1_services_catalog_get","parameters":[{"description":"Filter by category ID","in":"query","name":"category_id","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category ID","title":"Category Id"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CatalogServiceResponse"},"title":"Response Get Catalog Services Api V1 Services Catalog Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Catalog Services","tags":["services-v1"]}},"/api/v1/services/catalog/all-with-instructors":{"get":{"description":"Get all catalog services organized by category with active instructor counts.\n\nThis endpoint is optimized for the All Services page, providing all services\nwith instructor availability information in a single request. Results are\ncached for 5 minutes to balance performance with data freshness.\n\nReturns:\n    Dictionary with categories and their services, including active instructor counts","operationId":"get_all_services_with_instructors_api_v1_services_catalog_all_with_instructors_get","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllServicesWithInstructorsResponse"}}},"description":"Successful Response"}},"summary":"Get All Services With Instructors","tags":["services-v1"]}},"/api/v1/services/catalog/by-age-group/{age_group}":{"get":{"description":"Get catalog services eligible for an age group.","operationId":"get_services_by_age_group_api_v1_services_catalog_by_age_group__age_group__get","parameters":[{"in":"path","name":"age_group","required":true,"schema":{"title":"Age Group","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CatalogServiceResponse"},"title":"Response Get Services By Age Group Api V1 Services Catalog By Age Group  Age Group  Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Services By Age Group","tags":["services-v1"]}},"/api/v1/services/catalog/kids-available":{"get":{"description":"Return catalog services that have at least one active instructor who teaches kids.\n\nMinimal payload: id, name, slug. Cached for 5 minutes.","operationId":"get_kids_available_services_api_v1_services_catalog_kids_available_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CatalogServiceMinimalResponse"},"title":"Response Get Kids Available Services Api V1 Services Catalog Kids Available Get","type":"array"}}},"description":"Successful Response"}},"summary":"Get Kids Available Services","tags":["services-v1"]}},"/api/v1/services/catalog/top-per-category":{"get":{"description":"Get top N services per category for homepage capsules.\n\nOptimized endpoint that returns only the most popular services per category,\nperfect for homepage display. Cached for 1 hour since popularity changes daily\nbut we want fast response times.\n\nArgs:\n    limit: Number of top services per category (default: 7)\n\nReturns:\n    Dictionary with categories and their top services","operationId":"get_top_services_per_category_api_v1_services_catalog_top_per_category_get","parameters":[{"description":"Number of top services per category","in":"query","name":"limit","required":false,"schema":{"default":7,"description":"Number of top services per category","maximum":20,"minimum":1,"title":"Limit","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopServicesPerCategoryResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Top Services Per Category","tags":["services-v1"]}},"/api/v1/services/catalog/{service_id}/filter-context":{"get":{"description":"Get filter context for instructor onboarding (available filters + eligible age groups).","operationId":"get_service_filter_context_api_v1_services_catalog__service_id__filter_context_get","parameters":[{"in":"path","name":"service_id","required":true,"schema":{"title":"Service Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorFilterContext"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Service Filter Context","tags":["services-v1"]}},"/api/v1/services/categories":{"get":{"description":"Get all service categories (cached for 1 hour).","operationId":"get_service_categories_api_v1_services_categories_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategoryResponse"},"title":"Response Get Service Categories Api V1 Services Categories Get","type":"array"}}},"description":"Successful Response"}},"summary":"Get Service Categories","tags":["services-v1"]}},"/api/v1/services/categories/browse":{"get":{"description":"Get all categories with subcategory briefs (for browse page). Cached 1hr.","operationId":"get_categories_with_subcategories_api_v1_services_categories_browse_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategoryWithSubcategories"},"title":"Response Get Categories With Subcategories Api V1 Services Categories Browse Get","type":"array"}}},"description":"Successful Response"}},"summary":"Get Categories With Subcategories","tags":["services-v1"]}},"/api/v1/services/categories/{category_id}/subcategories":{"get":{"description":"Get subcategories for a category (brief list).","operationId":"get_subcategories_for_category_api_v1_services_categories__category_id__subcategories_get","parameters":[{"in":"path","name":"category_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Category Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SubcategoryBrief"},"title":"Response Get Subcategories For Category Api V1 Services Categories  Category Id  Subcategories Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Subcategories For Category","tags":["services-v1"]}},"/api/v1/services/categories/{category_id}/tree":{"get":{"description":"Get full 3-level tree for a category. Cached 1hr.","operationId":"get_category_tree_api_v1_services_categories__category_id__tree_get","parameters":[{"in":"path","name":"category_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Category Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryTreeResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Category Tree","tags":["services-v1"]}},"/api/v1/services/instructor/add":{"post":{"description":"Add a service from the catalog to instructor's profile.\n\nRequires INSTRUCTOR role.","operationId":"add_service_to_profile_api_v1_services_instructor_add_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceCreate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Add Service To Profile","tags":["services-v1"]}},"/api/v1/services/instructor/services/validate-filters":{"post":{"description":"Validate filter selections without saving. Requires INSTRUCTOR role.","operationId":"validate_filter_selections_api_v1_services_instructor_services_validate_filters_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateFiltersRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilterValidationResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Validate Filter Selections","tags":["services-v1"]}},"/api/v1/services/instructor/services/{instructor_service_id}/filters":{"put":{"description":"Update filter selections on an instructor service. Requires INSTRUCTOR role.","operationId":"update_filter_selections_api_v1_services_instructor_services__instructor_service_id__filters_put","parameters":[{"in":"path","name":"instructor_service_id","required":true,"schema":{"title":"Instructor Service Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateFilterSelectionsRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Filter Selections","tags":["services-v1"]}},"/api/v1/services/search":{"get":{"description":"Search for instructors by service.\n\nThis is an alias for the instructor search endpoint that focuses on service matching.\nSearches across service names, categories, and search terms.","operationId":"search_services_api_v1_services_search_get","parameters":[{"description":"Search query","in":"query","name":"q","required":true,"schema":{"description":"Search query","minLength":2,"title":"Q","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceSearchResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Search Services","tags":["services-v1"]}},"/api/v1/services/subcategories/{subcategory_id}":{"get":{"description":"Get a subcategory with its services.","operationId":"get_subcategory_with_services_api_v1_services_subcategories__subcategory_id__get","parameters":[{"in":"path","name":"subcategory_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Subcategory Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubcategoryWithServices"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Subcategory With Services","tags":["services-v1"]}},"/api/v1/services/subcategories/{subcategory_id}/filters":{"get":{"description":"Get filter definitions for a subcategory.","operationId":"get_subcategory_filters_api_v1_services_subcategories__subcategory_id__filters_get","parameters":[{"in":"path","name":"subcategory_id","required":true,"schema":{"pattern":"^[0-9A-HJKMNP-TV-Z]{26}$","title":"Subcategory Id","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SubcategoryFilterResponse"},"title":"Response Get Subcategory Filters Api V1 Services Subcategories  Subcategory Id  Filters Get","type":"array"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Subcategory Filters","tags":["services-v1"]}},"/api/v1/services/{service_id}/capabilities":{"patch":{"description":"Update location capabilities for an instructor service.","operationId":"update_service_capabilities_api_v1_services__service_id__capabilities_patch","parameters":[{"in":"path","name":"service_id","required":true,"schema":{"title":"Service Id","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceCapabilitiesUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructorServiceResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Update Service Capabilities","tags":["services-v1"]}},"/api/v1/sse/token":{"post":{"description":"Exchange a long-lived session for a short-lived SSE token.","operationId":"get_sse_token_api_v1_sse_token_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SseTokenResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Get Sse Token","tags":["sse-v1"]}},"/api/v1/students/badges":{"get":{"operationId":"list_student_badges_api_v1_students_badges_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/StudentBadgeView"},"title":"Response List Student Badges Api V1 Students Badges Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Student Badges","tags":["student-badges"]}},"/api/v1/students/badges/earned":{"get":{"operationId":"list_earned_student_badges_api_v1_students_badges_earned_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/StudentBadgeView"},"title":"Response List Earned Student Badges Api V1 Students Badges Earned Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List Earned Student Badges","tags":["student-badges"]}},"/api/v1/students/badges/progress":{"get":{"operationId":"list_in_progress_student_badges_api_v1_students_badges_progress_get","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/StudentBadgeView"},"title":"Response List In Progress Student Badges Api V1 Students Badges Progress Get","type":"array"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"List In Progress Student Badges","tags":["student-badges"]}},"/api/v1/uploads/r2/finalize/profile-picture":{"post":{"description":"Finalize a previously uploaded profile picture: validate, process, version, store.","operationId":"finalize_profile_picture_api_v1_uploads_r2_finalize_profile_picture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalizeProfilePictureRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Finalize Profile Picture","tags":["uploads"]}},"/api/v1/uploads/r2/proxy":{"post":{"description":"Upload the file server-side for local development to avoid browser CORS issues.","operationId":"proxy_upload_to_r2_api_v1_uploads_r2_proxy_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_proxy_upload_to_r2_api_v1_uploads_r2_proxy_post"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProxyUploadResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Proxy Upload To R2","tags":["uploads"]}},"/api/v1/uploads/r2/signed-url":{"post":{"description":"Create a short-lived signed PUT URL for uploading files to R2.\n\nWe implement SigV4 signing locally to avoid requiring boto3.","operationId":"create_signed_upload_api_v1_uploads_r2_signed_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSignedUploadRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedUploadResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Create Signed Upload","tags":["uploads"]}},"/api/v1/users/me/profile-picture":{"delete":{"operationId":"delete_profile_picture_api_v1_users_me_profile_picture_delete","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseDeleteResponse"}}},"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Delete Profile Picture","tags":["users","assets"]},"post":{"operationId":"upload_finalize_profile_picture_api_v1_users_me_profile_picture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalizeProfilePicturePayload"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"security":[{"OAuth2PasswordBearer":[]}],"summary":"Upload Finalize Profile Picture","tags":["users","assets"]}},"/api/v1/users/profile-picture-urls":{"get":{"description":"Batch avatar URL lookup.\n\nAccepts up to 50 user IDs via comma-separated `ids` query param or repeated keys.","operationId":"get_profile_picture_urls_batch_api_v1_users_profile_picture_urls_get","parameters":[{"description":"Comma-separated list of user IDs (ids=1,2,3) or repeated ids parameters.","in":"query","name":"ids","required":false,"schema":{"default":[],"description":"Comma-separated list of user IDs (ids=1,2,3) or repeated ids parameters.","items":{"type":"string"},"title":"Ids","type":"array"}},{"in":"query","name":"variant","required":false,"schema":{"anyOf":[{"enum":["original","display","thumb"],"type":"string"},{"type":"null"}],"default":"display","title":"Variant"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfilePictureUrlsResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Profile Picture Urls Batch","tags":["users","assets"]}},"/api/v1/users/{user_id}/profile-picture-url":{"get":{"operationId":"get_profile_picture_url_api_v1_users__user_id__profile_picture_url_get","parameters":[{"in":"path","name":"user_id","required":true,"schema":{"title":"User Id","type":"string"}},{"in":"query","name":"variant","required":false,"schema":{"anyOf":[{"enum":["original","display","thumb"],"type":"string"},{"type":"null"}],"default":"display","title":"Variant"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}},"description":"Successful Response"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}},"description":"Validation Error"}},"summary":"Get Profile Picture Url","tags":["users","assets"]}},"/api/v1/webhooks/checkr":{"post":{"description":"Process Checkr webhook events for background check reports.","operationId":"handle_checkr_webhook_api_v1_webhooks_checkr_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookAckResponse"}}},"description":"Successful Response"}},"summary":"Handle Checkr Webhook","tags":["webhooks"]}},"/api/v1/webhooks/hundredms":{"post":{"description":"Process 100ms webhook events for video session tracking.","operationId":"handle_hundredms_webhook_api_v1_webhooks_hundredms_post","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookAckResponse"}}},"description":"Successful Response"}},"summary":"Handle Hundredms Webhook","tags":["webhooks"]}}}}