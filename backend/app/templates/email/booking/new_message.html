<!-- backend/app/templates/email/booking/new_message.html -->
{% extends "email/base.html" %}

{% block title %}New Message from {{ sender_name }}{% endblock %}
{% block preheader %}You have a new message from {{ sender_name }}.{% endblock %}
{% block header %}
<div style="background: #F9F5FF; padding: 22px 30px 18px; text-align: center; border-radius: 12px 12px 0 0;">
  <h1 style="color: #7E22CE; margin: 0; font-size: 32px; font-weight: 700; letter-spacing: -0.5px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">{{ brand_name }}</h1>
</div>
{% endblock %}

{% block content %}
<h2 style="color: #1F2937; margin-bottom: 20px;">New Message from {{ sender_name }}</h2>

<p style="color: #4B5563; font-size: 16px;">Hi {{ recipient_name }},</p>

<p style="color: #4B5563;">You have a new message from your {{ sender_role }} regarding your upcoming lesson.</p>

<div style="background-color: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 1px solid #E5E7EB;">
    <h3 style="color: #1F2937; margin-top: 0; margin-bottom: 15px;">Lesson Details</h3>

    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 8px 0; color: #6B7280;">Service:</td>
            <td style="padding: 8px 0; color: #1F2937; font-weight: 600;">{{ service_name }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; color: #6B7280;">Date:</td>
            <td style="padding: 8px 0; color: #1F2937; font-weight: 600;">{{ booking_date }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; color: #6B7280;">Time:</td>
            <td style="padding: 8px 0; color: #1F2937; font-weight: 600;">{{ booking_time }}</td>
        </tr>
    </table>
</div>

<div style="background-color: #F3F4F6; padding: 20px; border-radius: 8px; margin: 25px 0;">
    <h4 style="color: #1F2937; margin-top: 0; margin-bottom: 10px;">Message:</h4>
    <p style="color: #374151; line-height: 1.6; margin: 0;">{{ message_preview }}</p>
</div>

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ base_url }}/student/lessons?tab=upcoming"
       style="background:#7E22CE; color: white; padding: 14px 32px; text-decoration: none; border-radius: 24px; display: inline-block; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(126, 34, 206, 0.25); transition: all 0.3s ease;">
        View Full Message & Reply
    </a>
</div>

<p style="color: #6B7280; font-size: 14px; margin-top: 30px;">
    <strong>Note:</strong> Please log in to your account to view the full conversation and send replies.
</p>
{% endblock %}

{% block footer_content %}
<p style="margin: 0;">
    This message was sent from the iNSTAiNSTRU chat system.<br>
    To manage your notification preferences, visit your account settings.
</p>
{% endblock %}
