apiVersion: 1

policies:
  - orgId: 1
    receiver: slack-contact-point
    group_by: ['grafana_folder', 'alertname']
    group_wait: 30s
    group_interval: 5m
    repeat_interval: 4h
    routes:
      # Critical alerts go to PagerDuty and Slack
      - receiver: pagerduty-contact-point
        matchers:
          - severity = critical
        continue: true

      - receiver: slack-contact-point
        matchers:
          - severity = critical
        group_wait: 10s
        repeat_interval: 1h

      # Warning alerts only go to Slack
      - receiver: slack-contact-point
        matchers:
          - severity = warning
        group_wait: 1m
        repeat_interval: 4h

      # Infrastructure alerts go to dedicated channel
      - receiver: email-contact-point
        matchers:
          - team = infrastructure
        group_wait: 2m
        repeat_interval: 6h
